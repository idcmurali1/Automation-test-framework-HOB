functions:

  - name: sc.functions.verifyNotificationsPage
    flow:
      - executeFunction:
          name: sc.functions.navigation.validateTabLoad
          params:
            - name: tab
              string: ${tab}
      - verifyIdentifier:
          present:
            - identifier: sc.mappings.notifications.notificationsList
      # Removing below code as filter option is now removed completely from App FE.
      #       - identifier: sc.mappings.notifications.filter

      # - if:
      #     condition: ${APP_PLATFORM} == 'android'
      #     then:
      #       - verifyIdentifier:
      #           contentDescription:
      #             - identifier: sc.mappings.notifications.filterCount
      #               equals: 1
      #     else:
      #       - verifyIdentifier:
      #           value:
      #             - identifier: sc.mappings.notifications.filterCount
      #               equals: 1
      # - click:
      #     identifier: sc.mappings.notifications.filter
      # - sleep:
      #     duration: 3000
      # - storeIn:
      #     key: sortBy
      #     value: Recent
      # - verifyIdentifier:
      #     present:
      #       - identifier: sc.mappings.notifications.filters.title
      #       - identifier: sc.mappings.notifications.filters.sortBySection

      # - if:
      #     condition: ${APP_PLATFORM} == 'android'
      #     then:
      #       - verifyIdentifier:
      #           checked:
      #             - identifier: sc.mappings.notifications.selectedSortByOption
      #               value: true
      #     else:
      #       - verifyIdentifier:
      #           value:
      #             - identifier: sc.mappings.notifications.selectedSortByOption
      #               equals: 1

  - name: sc.mappings.notifications.filterSeclection
    flow:
      - verifyIdentifier:
          present:
            - identifier: sc.mappings.notifications.notificationsList
      - click:
          identifier: sc.mappings.notifications.filter
      - sleep:
          duration: 3000
      - click:
          identifier: sc.mappings.notifications.sortBy
      - click:
          identifier: sc.mappings.notifications.filters.viewResults
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: sc.mappings.notifications.notificationsList

  - name: sc.mappings.notifications.validateSettingsDisplay
    flow:
      - executeNode:
          file: sellerCenter/e2e-tests/helpers/generateR2Array.js
          args:
            - value: ${settingsTitleList}
          getResponse:
            storeIn: settingsTitleList
      - loop:
          each: ${settingsTitleList}
          storeElement: settingsTitle
          flow:
            - verifyIdentifier:
                present:
                  - identifier: sc.mappings.accounts.notifications.settings.title
      - executeNode:
          file: sellerCenter/e2e-tests/helpers/generateR2Array.js
          args:
            - value: ${settingsOptionsList}
          getResponse:
            storeIn: settingsOptionsList
      - loop:
          each: ${settingsOptionsList}
          storeElement: settingsOptions
          flow:
            - verifyIdentifier:
                present:
                  - identifier: sc.mappings.accounts.notifications.settings.options.title

  - name: sc.mappings.notifications.changeNotificationsSettings
    flow:
      - verifyIdentifier:
          present:
            - identifier: sc.mappings.accounts.notifications.settingsPage.title
            - identifier: sc.mappings.accounts.notifications.settings.options.title
      - click:
          identifier: sc.mappings.accounts.notifications.settings.options.link
      - verifyIdentifier:
          present:
            - identifier: sc.mappings.accounts.notifications.settings.bottompage.title
            - identifier: sc.mappings.accounts.notifications.settings.bottomPage.pushNotifications.title
      - if:
          condition: ${togglePushSwitch}
          then:
            - click:
                identifier: sc.mappings.accounts.notifications.settings.bottomPage.pushNotifications.switch
            - sleep:
                duration: 3000
            - click:
                identifier: sc.mappings.accounts.notifications.settings.bottomPage.pushNotifications.switch
            - sleep:
                duration: 3000
      - if:
          condition: ${toggleInAppSwitch}
          then:
            - click:
                identifier: sc.mappings.accounts.notifications.settings.bottomPage.inAppNotifications.switch
            - sleep:
                duration: 3000
            - click:
                identifier: sc.mappings.accounts.notifications.settings.bottomPage.inAppNotifications.switch
            - sleep:
                duration: 3000
      - if:
          condition: ${changeFrequency}
          then:
            - getString:
                identifier: sc.mappings.accounts.notifications.settings.bottomPage.pushNotifications.switch
                attribute: value
                storeIn: switchOn
            - if:
                condition: ${switchOn} == 0
                then:
                  - click:
                      identifier: sc.mappings.accounts.notifications.settings.bottomPage.pushNotifications.switch
                  - sleep:
                      duration: 3000
            - click:
                identifier: sc.mappings.accounts.notifications.settings.bottomPage.pushNotifications.frequency
            - sleep:
                duration: 3000
      - click:
          identifier: sc.mappings.accounts.notifications.settings.bottomPage.notificationsSettings.saveButton
      - sleep:
          duration: 10000
      - if:
          identifier:
            present:
              - identifier: sc.mappings.accounts.notifications.settings.bottompage.errormessage
          then:
            - failTest:
                message: "ENV_FAILURE - ${APP_PLATFORM} - Unable to save notification setting changes"
      - verifyIdentifier:
          timeout: 25000
          notPresent:
            - identifier: sc.mappings.accounts.notifications.settings.bottompage.title
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: sc.mappings.accounts.notifications.settingsPage.title
      