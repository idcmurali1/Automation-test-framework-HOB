general:
  tags: p1-sc-prod-e2e, sc-prod-feature-build

scenarios:
  - name: Before
    before: true
    endTestOnFailure: true
    flow:

  - name: Main
    flow:
      - log: Start Main

      # Login
      - executeFunction:
          name: sc.functions.accounts.login
          params:
            - name: email
              string: sc.partner2.email
            - name: password
              string: sc.partner2.password

      - if:
          condition: ${APP_PLATFORM} != 'ios'
          then:
            - executeFunction:
                name: sc.functions.navigation.toTab
                params:
                  - name: tab
                    string: Catalog

            - executeFunction:
                name: sc.functions.items.quickFilterItems
                params:
                  - name: quickFilter
                    string: Error

            - executeFunction:
                name: sc.functions.items.verifyQuickFilters
                params:
                  - name: quickFilter
                    string: Error
                  - name: validateItem
                    string: true

      - if:
          condition: ${APP_PLATFORM} != 'ios'
          then:
            - executeFunction:
                name: sc.functions.items.quickFilterItems
                params:
                  - name: quickFilter
                    string: Published
          else:
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: sellercenter://seller/items?quickfilter=published&pmin=16&pmax=16.5

      - executeFunction:
          name: sc.functions.items.verifyQuickFilters
          params:
            - name: quickFilter
              string: Published
            - name: validateItem
              string: true

      - executeFunction:
          name: sc.functions.items.selectFirstItem

      - executeFunction:
          name: sc.functions.items.itemDetails.fetchItemData

      - executeFunction:
          name: sc.functions.navigation.navigateBackToListPage

      - executeFunction:
          name: sc.functions.global.search
          params:
            - name: searchValue
              string: ${itemSKU}
            - name: searchType
              string: SKU

      - executeFunction:
          name: sc.functions.items.selectFirstItem
          params:
            - name: validateData
              string: true
            - name: itemSKU
              string: ${itemSKU}

      - executeFunction:
          name: sc.functions.items.verifyItem
          params:
            - name: validateData
              string: true
            - name: itemSKU
              string: ${itemSKU}
            - name: itemId
              string: ${itemId}

      - executeFunction:
          name: sc.functions.navigation.navigateBackToListPage

      - executeFunction:
          name: sc.functions.global.search
          params:
            - name: searchValue
              string: ${itemId}
            - name: searchType
              string: Item ID

      - executeFunction:
          name: sc.functions.items.selectFirstItem
          params:
            - name: validateData
              string: true
            - name: itemSKU
              string: ${itemSKU}

      - executeFunction:
          name: sc.functions.items.verifyItem
          params:
            - name: validateData
              string: true
            - name: itemSKU
              string: ${itemSKU}
            - name: itemId
              string: ${itemId}

      - storeIn:
          key: testStatus
          value: passed