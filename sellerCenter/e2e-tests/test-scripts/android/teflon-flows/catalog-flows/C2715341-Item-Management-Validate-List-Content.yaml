general:
  platform: android
  tags: sc-e2e, sc-staging-feature-build, C2715341

scenarios:
  - name: Before
    before: true
    endTestOnFailure: true
    flow:
        - storeIn:
            key: identifierTextAttribute
            value: text

  - name: Main
    flow:
      - log: Start Main

      # Login
      - executeFunction:
          name: sc.functions.accounts.login
          params:
            - name: email
              string: sc.partner1.email
            - name: password
              string: sc.partner1.password

      # navigation to catalog view from the home menu
      - executeFunction:
          name: sc.functions.navigation.toTab
          params:
            - name: tab
              string: sc.tab.catalog.name

      # validate the catalog list page opens and validate the page contents
      - executeFunction:
          name: sc.functions.catalog.validateItemListPageDisplays
          params:
            - name: tabName
              string: Catalog

      # switch between different facets and validate the card list in each tab
      - loop:
          each: "[\"Unpublished\", \"Draft\", \"Error\", \"Published\", \"Processing\"]"
          storeIndex: i
          storeElement: x
          flow:
            - executeFunction:
                name: sc.functions.catalog.validateFacetViewContent
                params:
                  - name: facetName
                    string: $x

      # select the first item from the list
      - executeFunction:
          name: sc.functions.catalog.saveItemDetailsAndSelect

      # Validating all the content present in the item details page
      - executeFunction:
          name: sc.functions.catalog.item.validateItemDetails

      - storeIn:
          key: testStatus
          value: passed
