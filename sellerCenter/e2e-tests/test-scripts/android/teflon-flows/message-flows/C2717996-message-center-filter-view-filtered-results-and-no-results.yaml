general:
  platform: android
  tags: C2717996, sc-e2e

scenarios:
  - name: Before
    before: true
    endTestOnFailure: true
    flow:

  - name: Main
    flow:
      - log: Start Main

# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

      # Login
      - executeFunction:
          name: sc.functions.accounts.login
          params:
            - name: email
              string: sc.partner2.email
            - name: password
              string: sc.partner2.password
      
      # From the Home screen, verify that the user can View and then select the inbox from the footer bar tab.
      - if:
          condition: ${APP_PLATFORM} == 'android'
          then:
            - executeFunction:
                name: sc.functions.navigation.toTab
                params:
                  - name: tab
                    string: Inbox
      - if:
          condition: ${APP_PLATFORM} == 'ios'
          then: 
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                      - name: deepLinkUrl
                        string: sellercenter://seller/inbox

      # Tap the Sort filter icon and verify that the Filter screen displays
      - executeFunction:
          name: sc.functions.inbox.verifySortAndFilter

      # Tap Select each filter one at a time
      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageStatus
              string: Unread   
    
      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageStatus
              string: Read   

      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageStatus
              string: Failed   

      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageType
              string: Response needed        

      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageType
              string: Customer Care
      
      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageType
              string: Spam 
            
      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageType
              string: Flagged      

      # Tap Select combinations of filters from the Status column and one from the Type column
      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageStatus
              string: Unread
            - name: messageType
              string: Response needed  
      
      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageStatus
              string: Read
            - name: messageType
              string: Customer Care  
      
      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageStatus
              string: Failed
            - name: messageType
              string: Spam 
     
      - executeFunction:
          name: sc.functions.inbox.filterSelection
          params:
            - name: messageStatus
              string: Failed
            - name: messageType
              string: Flagged          


      - storeIn:
          key: testStatus
          value: passed
  
  - name: After
    after: true
    flow:
      - executeFunction:
          name: sc.functions.utils.afterSteps
