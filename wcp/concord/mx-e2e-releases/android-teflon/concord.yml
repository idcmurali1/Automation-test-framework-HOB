configuration:
  runtime: "concord-v2"
  processTimeout: "PT4H"
  dependencies:
    - "mvn://com.walmartlabs.concord.plugins:looper-task:latest"
  arguments:
    username: svcstoreautomation
    baseUrl: "https://looperpro-cigateway.prod.walmart.com"
    apiToken: ${crypto.decryptString("regE58qiG31mEsnVLoWuah+OYdcvRhBuNetev8/yoKaVBzD3tG+QmvWNjZRFVu1J")}
    sauceApp: "storage:filename=us-development-latest.apk"
    postToSplunk: "false"
    appBuildBranch: development-latest
  meta:
    testTags: ""
    appBuildBranch: ""
    dependencyProfile: ""

flows:
  runTests:
    - task: looper
      in:
        username: ${username}
        baseUrl: ${baseUrl}
        apiToken: ${apiToken}
        jobName: glass-automation/wcp/looperpro/mx-e2e-release/android-teflon
        call: ${looperFlow}
        suspend: true
        sync: true
        parameters:
          TEST_TAGS: ${testTags}
          SAUCE_APP: ${sauceApp}
          DEPENDENCY_PROFILE: ${dependencyProfile}
          POST_TO_SPLUNK: ${postToSplunk}
          APP_BUILD_BRANCH: ${appBuildBranch}
          MAPPING_LABELS: ${mappingLabels} 

triggers:

  - manual:
      name: "Release - MX-Teflon-Release"
      entryPoint: runTests
      arguments:
        looperFlow: Run_Build_Teflon
        testTags: p1-mx-ea-teflon
        dependencyProfile: looper-mx-teflon
        mappingLabels: mx_ea_android_teflon
        sauceApp: "storage:filename=mx-release-latest.apk"


  - cron:
      spec: "20 14 * * *"
      timezone: "America/Los_Angeles"
      entryPoint: runTests
      arguments:
        looperFlow: Run_Build_Teflon
        testTags: p1-mx-ea-teflon
        dependencyProfile: looper-mx-teflon
        mappingLabels: mx_ea_android_teflon
        sauceApp: "storage:filename=mx-release-latest.apk"

  - manual:
      name: "Release - MX-Teflon-Release-Testrail"
      entryPoint: runTests
      arguments:
        looperFlow: Run_Build_Teflon_TestRail
        testTags: p1-mx-ea-teflon
        dependencyProfile: looper-mx-teflon
        mappingLabels: mx_ea_android_teflon
        sauceApp: "storage:filename=mx-release-latest.apk"

  - cron:
      spec: "20 12 * * *"
      timezone: "America/Los_Angeles"
      entryPoint: runTests
      arguments:
        looperFlow: Run_Build_Teflon_TestRail
        testTags: p1-mx-ea-teflon
        dependencyProfile: looper-mx-teflon
        mappingLabels: mx_ea_android_teflon
        sauceApp: "storage:filename=mx-release-latest.apk"

  - manual:
      name: "Release - MX-Bodega-Android-Teflon-Release"
      entryPoint: runTests
      arguments:
        looperFlow: Run_Build_Teflon_mx
        testTags: p1-bodega-ea-teflon
        dependencyProfile: looper-mx-bodega-teflon
        mappingLabels: bo_ea_android_teflon
        sauceApp: "storage:filename=mx-bodega-release-latest.apk"

  - cron:
      spec: "30 14 * * *"
      timezone: "America/Los_Angeles"
      entryPoint: runTests
      arguments:
        looperFlow: Run_Build_Teflon_mx
        testTags: p1-bodega-ea-teflon
        dependencyProfile: looper-mx-bodega-teflon
        mappingLabels: bo_ea_android_teflon
        sauceApp: "storage:filename=mx-bodega-release-latest.apk"

  
  - manual:
      name: "Release - MX-Bodega-Android-Teflon-Testrail"
      entryPoint: runTests
      arguments:
        looperFlow: Run_Build_Teflon_TestRail
        testTags: p1-bodega-ea-teflon
        dependencyProfile: looper-mx-bodega-teflon
        mappingLabels: bo_ea_android_teflon
        sauceApp: "storage:filename=mx-bodega-release-latest.apk"

  - cron:
      spec: "30 14 * * *"
      timezone: "America/Los_Angeles"
      entryPoint: runTests
      arguments:
        looperFlow: RRun_Build_Teflon_TestRail
        testTags: p1-bodega-ea-teflon
        dependencyProfile: looper-mx-bodega-teflon
        mappingLabels: bo_ea_android_teflon
        sauceApp: "storage:filename=mx-bodega-release-latest.apk"
  