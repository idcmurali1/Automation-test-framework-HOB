functions:

   #--------------------------------------------------------------------------------------------------------------------
   # Description:  This flow change the environment on debug panel
   # No params
  - name: functions.debugPanel.changeEnvToTelfon
    platform: android
    flow:
        - if:
            condition: ${merge-hallways}
            then:
              - sleep:
                  duration: 5000
              - openLink: walmartmx://debugPanel
              - sleep:
                  duration: 20000
              - executeFunction:
                  name: functions.homePage.orderDiscountUpdatesAlert.tapLaterBtn
              - executeFunction:
                  name: functions.homePage.personalizedShoppingExperiencePopup.dismissIfDisplayed
              - executeFunction:
                  name: functions.debugPanel.selectEnvProfile
              - executeFunction:
                  name: functions.debugPanel.envProfilePage.selectEnvProfile
              - executeFunction:
                  name: functions.debugPanel.selectTeflon
              - sleep:
                  duration: 5000
            else:
              - sleep:
                  duration: 10000
              - startActivity:
                  packageName: ${appPackage}
                  activityName: com.walmart.glass.integration.splash.SplashActivity
              - sleep:
                  duration: 10000
              - executeAppiumScript:
                  method: "mobile: deepLink"
                  params:
                  - key: url
                    value: ${debugPanel}
                  - key: package
                    value: ${appPackage}
              - sleep:
                  duration: 5000
              - executeFunction:
                  name: functions.homePage.orderDiscountUpdatesAlert.tapLaterBtn
              - executeFunction:
                  name: functions.homePage.personalizedShoppingExperiencePopup.dismissIfDisplayed
              - executeFunction:
                  name: functions.debugPanel.selectEnvProfile
              - executeFunction:
                  name: functions.debugPanel.envProfilePage.selectEnvProfile
              - executeFunction:
                  name: functions.debugPanel.selectTeflon
              # - executeFunction:
            #      name: functions.utils.terminateApp
              - executeFunction:
                  name: functions.utils.restartAndroidBuild
              - executeFunction:
                  name: functions.onboarding.shoppingExperience.tapShoppingOption
                  params:
                    - name: ShoppingExperience
                      string: ${ShoppingExperience}


 #--------------------------------------------------------------------------------------------------------------------
   # Description:  This flow change the expo to WCP on debug panel
   # No params
  - name: functions.debugPanel.enableProdWCPExpoVariation
    platform: android
    flow:
        - executeFunction:
            name: functions.utils.terminateApp
        - sleep:
            duration: 1000
        - openLink: debugPannel.deepLink
        - sleep:
            duration: 2000
        - executeFunction:
            name: functions.debugPanel.selectExpoPreview
        - executeFunction:  
            name: functions.debugPanel.expoPreviewPage.addExperiment
        - executeFunction:
            name: functions.debugPanel.addExpoPreview
    
  #--------------------------------------------------------------------------------------------------------------------
  # Description:  This flow set an expo variation in debug panel
  # Param: ${expoVariant}
  # Param: ${debugPanel}
  - name: functions.debugPanel.setExpoVariation
    platform: android
    flow:
        - log: Expo Variant to set $expoVariant
        - openLink: ${debugPanel}
        - sleep:
            duration: 20000
        - executeFunction:
            name: functions.homePage.orderDiscountUpdatesAlert.tapLaterBtn
        - executeFunction:
            name: functions.homePage.personalizedShoppingExperiencePopup.dismissIfDisplayed
        - click:
            identifier: debugPanel.expoPreview
        - click:
            identifier: debugPanel.expoPreviewPage.addExperiment
        - enterText:
            identifier: debugPanel.expoPreviewPage.addVariation
            string: ${expoVariant}
        - click:
            identifier: debugPanel.expoPreviewPage.saveExpoBtn
        - log:
            message: "End function: functions.debugPanel.setExpoVariation"
            color: BLUE
        