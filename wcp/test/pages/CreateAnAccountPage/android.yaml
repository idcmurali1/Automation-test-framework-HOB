functions:

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This method checks if create account page is displayed.
  # No Params
  - name: functions.createAnAccountPage.assertPageDisplayed
    platform: android
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: createAnAccountPage.walmartLogo
              - identifier: createAnAccountPage.title
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
      - if:
          condition: ${returnedIsDisplayed}
          then:
            - log:
                message: "End function: createAnAccountPage.assertPageDisplayed (Displayed)"
                color: BLUE
          else: 
            - log:
                message: "End function: createAnAccountPage.assertPageDisplayed (Not displayed)"
                color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function enters user first name in the text field.
  # Param:       ${UserFirstName}  [Mandatory] User First Name
  - name: functions.createAnAccountPage.enterUserFirstName
    platform: android
    flow:
      - enterText:
          identifier: createAnAccountPage.firstNameField
          string: ${UserFirstName}
      - executeFunction:
          name: functions.utils.hideKeyboard
      - log: 
          message: "End functions: createAnAccountPage.enterUserFirstName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function enters user last name in the text field.
  # Param:       ${UserLastName}  [Mandatory] User Last Name
  - name: functions.createAnAccountPage.enterUserLastName
    platform: android
    flow:
      - enterText:
          identifier: createAnAccountPage.lastNameField
          string: ${UserLastName}
      - executeFunction:
          name: functions.utils.hideKeyboard
          
      - log: 
          message: "End functions: createAnAccountPage.enterUserLastName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function enters user mother's last name in the text field.
  # Param:       ${UserMotherLastName}  [Mandatory] User Mother Last Name
  - name: functions.createAnAccountPage.enterMotherLastName
    platform: android
    flow:
      - enterText:
          identifier: createAnAccountPage.motherLastNameField
          string: ${UserMotherLastName}
      - executeFunction:
          name: functions.utils.hideKeyboard
      - log: 
          message: "End functions: createAnAccountPage.enterMotherLastName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function enters user phone number in the text field.
  # Param:       ${UserPhoneNumber}  [Mandatory] User Phone Number
  - name: functions.createAnAccountPage.enterUserPhoneNumber
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: createAnAccountPage.phoneNumberField
          then: 
            - scroll:
                direction: up
                untilIdentifier: createAnAccountPage.phoneNumberField
                scrollLimit: 5
      - enterText:
          identifier: createAnAccountPage.phoneNumberField
          string: ${UserPhoneNumber}
      - executeFunction:
          name: functions.utils.hideKeyboard
      - log: 
          message: "End functions: createAnAccountPage.enterUserPhoneNumber"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function selects the Phone Number's Country Code.
  # Param:       ${countryCode}  [Mandatory]  Desired Country Code. Options: [ MX | US ]
  # Returns:     ${returnedPhoneNumberPrefix}
  - name: functions.createAnAccountPage.selectPhoneNumberCountryCode.ifDisplayed
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: createAnAccountPage.phoneNumber.countryCodeDropdown
            timeout: 2000
          then:
            - click:
                identifier: createAnAccountPage.phoneNumber.countryCodeDropdown
            - sleep:
                duration: 2000
            - if:
                condition: ${countryCode} == null
                then:
                  - storeIn:
                      key: countryCode
                      value: US
            - if:
                condition: ${countryCode} != 'US' && ${countryCode} != 'MX' && ${countryCode} != 'CA' && ${countryCode} != 'MX-Bodega'
                then:
                  - failTest:
                      message: Selected Country Code '${countryCode}' is not valid.
            - if:
                condition: ${countryCode} == 'US'
                then:
                  - click:
                      identifier: createAnAccountPage.phoneNumber.countryCodeOption.US
                  - storeIn:
                      key: returnedPhoneNumberPrefix
                      value: 1
            - if:
                condition: ${countryCode} == 'MX' || ${countryCode} == 'MX-Bodega'
                then:
                  - click:
                      identifier: createAnAccountPage.phoneNumber.countryCodeOption.MX
                  - storeIn:
                      key: returnedPhoneNumberPrefix
                      value: 52
            - if:
                condition: ${countryCode} == 'CA'
                then:
                  - click:
                      identifier: createAnAccountPage.phoneNumber.countryCodeOption.CA
                  - storeIn:
                      key: returnedPhoneNumberPrefix
                      value: 1
            - if:
                condition: ${countryCode} == 'CO'
                then:
                  - click:
                      identifier: createAnAccountPage.phoneNumber.countryCodeOption.CO
                  - storeIn:
                      key: returnedPhoneNumberPrefix
                      value: 57    
            - if:
                condition: ${countryCode} == 'CL'
                then:
                  - click:
                      identifier: createAnAccountPage.phoneNumber.countryCodeOption.CL
                  - storeIn:
                      key: returnedPhoneNumberPrefix
                      value: 56 
      - if:
          identifier:
            present:
              - identifier: createAnAccountPage.phoneNumber.countryCodeSelector.confirmationBtn
          then:
            - click:
                identifier: createAnAccountPage.phoneNumber.countryCodeSelector.confirmationBtn
                                     
      - log: 
          message: "End function: functions.createAnAccountPage.selectPhoneNumberCountryCode"
          color: BLUE
