functions:

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This method checks if onboarding process is active
  # No Params
  - name: functions.onboarding.isOnboardingDisplayed
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: onboarding.welcomeToWalmartPg.welcomeAnimation
              - identifier: onboarding.mainScreenText
            timeout: 10000
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: onboarding.isOnboardingDisplayed (Displayed)"
                color: BLUE
          else: 
            - log:
                message: "End function: onboarding.isOnboardingDisplayed (Not displayed)"
                color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Tap on continue button
  # No Params
  - name: functions.onboarding.tapContinueBtn
    flow:
      - if:
          identifier:
            present:
              - identifier: onboarding.continueButton
          then:
            - click: 
                identifier: onboarding.continueButton
      - log:
          message: "End function: onboarding.tapContinueBtn"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method check if the notification page is displayed.
  # No Params
  - name: functions.onboarding.isNotificationDisplayed
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: onboarding.getNotification.title
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: onboarding.isNotificationDisplayed (Displayed)"
                color: BLUE
          else: 
            - log:
                message: "End function: onboarding.isNotificationDisplayed (Not displayed)"
                color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # Description: Allow notification from the pop up
  # No Params
  - name: functions.onboarding.allowNotification
    flow:
      - click:
          identifier: onboarding.getNotification.allowBtn
      - click:
          identifier: onboarding.getNotification.allowPopUp
          wait: 10000
      - log:
          message: "End function: onboarding.allowNotification"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Allow notification from the pop up
  # No Params
  - name: functions.onboarding.dismissNotification
    flow:
      - click:
          identifier: onboarding.getNotification.maybeLaterBtn
          wait: 10000
      - log:
          message: "End function: onboarding.allowNotification"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function tap enter postal code link in share location page
  # No Params
  - name: functions.onboarding.shareLocation.tapEnterPostalCodeLink
    flow:
      - click:
          identifier: onboarding.shareLocation.enterPostalCodeLink
      - log: 
          message: "End function: onboarding.shareLocation.tapEnterPostalCodeLink"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function tap on use current location button
  # No Params
  - name: functions.onboarding.sharePostalCode.tapUseCurrentLocation
    flow:
      - click:
          identifier: onboarding.sharePostalCode.useCurrentLocationLink
      - log:
          message: "End functions: onboarding.sharePostalCode.tapUseCurrentLocation"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Allowing to share device precise location
  # No Params
  - name: functions.onboarding.shareLocation.sharePreciseLocation
    flow:
      - verifyIdentifier:
          present:
            - identifier: onboarding.locationScreenText
      - click:
          identifier: onboarding.sharePreciseLocation
      - click:
          identifier: onboarding.shareLocation.allowPreciseLcoation
      - log: 
          message: "End functiosn: onboarding.allowSharePreciseLocation"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters postal code to the postal code field.
  # Param:       ${PostalCode}  [Mandatory] Postal code to onboard the app.
  - name: functions.onboarding.enterPostalCode
    flow:
      - enterText:
          identifier: onboarding.sharePostalCode.enterZip$PostalCodeText
          string: ${PostalCode}
      - log: 
          message: "End functions: onboarding.enterPostalCode"
          color: BLUE
        
  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function tap on search button
  # No Params
  - name: functions.onboarding.sharePostalCode.tapSearchButton
    flow:
      - click:
          identifier: onboarding.sharePostalCode.searchButton
      - if:
          condition: ${platform} == 'Android' && ${market} == 'CA'     
          then:
            - sleep: 
                duration: 20000
      - log: 
          message: "End functions: onboarding.sharePostalCode.tapSearchButton"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function taps on the Walmart Banner to be opened.
  # Params  ${ShoppingExperience}  [Mandatory]  Banner to be opened.
  #         Options:
  #                To select OD (1st banner): [ Walmart Express | Tu Bodega | OD ]
  #                To select EA (2nd banner): [ Exclusivos online | Bodega Extendida | EA ]
  - name: functions.onboarding.shoppingExperience.tapShoppingOption
    flow:
      - if:
          condition: "(${market} == 'MX' || ${market} == 'MX-Bodega') && '${merge-hallways}' != 'true'"
          then:
            - verifyIdentifier:
                timeout: 40000
                present:
                  - identifier: onboarding.shoppingExperience.title
            - if:
                condition: ${ShoppingExperience} == 'OD'
                then:
                  - click:
                      identifier: onboarding.shoppingExperience.grocery
                else:
                  - if:
                      condition: ${ShoppingExperience} == 'EA'
                      then:
                        - click:
                            identifier: onboarding.shoppingExperience.exclusive
                      else:
                        - failTest:
                            message: "Invalid ShoppingExperience provided: '${ShoppingExperience}'"
      - log: 
          message: "End functions: functions.onboarding.shoppingExperience.tapShoppingOption"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function taps on shop button in home page
  # No params
  - name: functions.onboarding.getNotification.tapMaybeLater
    flow:
      - click:
          identifier: onboarding.getNotification.maybeLaterBtn
      - log:
          message: "End functions: homePage.getNotification.tapMaybeLater"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function collapses the GIC if expanded
  # No params required
  - name: functions.homePage.collapseGicIfExpanded
    flow:
      - if:
          identifier:
            present:
              - identifier: homePage.gic.pickUpOption
          then:
            - click:
                identifier: homePage.gic.closebButton
          else:
            - log:
                message: "Since the GIC is not expanded, nothing is done, continuing with the flow"
                color: GREEN_BOLD
      - log:
          message: "End Function: functions.homePage.collapseGicIfExpanded"
          color: GREEN_BOLD

   #--------------------------------------------------------------------------------------------------------------------

  # Description: This method checks if walmart grocery option is displayed
  # No Params
  - name: functions.onboarding.groceryOption
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: onboarding.walmartExpress.Banner
            timeout: 1000
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: onboarding.isOnboardingDisplayed (Displayed)"
                color: BLUE
          else: 
            - log:
                message: "End function: onboarding.isOnboardingDisplayed (Not displayed)"
                color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function tap on back button
  # No Params
  - name: functions.onboarding.tapOnBackButton
    flow:
      - click:
          identifier: onboarding.walmartPageBackButton
      - log: 
          message: "End functions: onboarding.tapOnBackButton"
          color: BLUE
  #--------------------------------------------------------------------------------------------------------------------