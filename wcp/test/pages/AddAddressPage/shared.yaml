functions:

#----------------------------------------------------------------------------------------------------

# Description: This function will validate if the Add address is page opened
  # No Param
  - name: functions.addAddressPage.isPageDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: addAddressPage.addDeliveryAddressLink
              - identifier: addAddressPage.saveButton
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: functions.addAddressPage.isPageDisplayed (Displayed)"
                color: BLUE
          else:
            - storeIn:
                key: returnedIsDisplayed
                value: false
            - log:
                message: "End function: functions.addAddressPage.isPageDisplayed (Not Displayed)"
                color: BLUE        

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters first name to the first name field.
  # Param:  ${firstName}  [Mandatory]  First Name to enter 
  - name: functions.addAddressPage.enterFirstName
    flow:
      - enterText:
          identifier: addAddressPage.firstName
          string: ${firstName}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.keyboard.tapNextBtn
      - log:
          message: "End functions: addAddressPage.enterFirstName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters last name to the last name field.
  # Param:  ${lastName}  [Mandatory]  Last Name to enter
  - name: functions.addAddressPage.enterLastName
    flow:
      - enterText:
          identifier: addAddressPage.lastName
          string: ${lastName}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.keyboard.tapNextBtn
      - log:
          message: "End functions: addAddressPage.enterLastName"
          color: BLUE          

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters last name to the apartment name field.
  # param: ${apartmentName}    [Mandatory]  Last Name to enter
  - name: functions.addAddressPage.apartmentName
    flow:
      - enterText:
          identifier: addAddressPage.apartmentName
          string: ${apartmentName}
      - log:
          message: "End functions: addAddressPage.apartmentName"
          color: BLUE          

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function enters exterior number.
  # Param:  ${exteriorNumber}  [Mandatory]  Exterior Number to enter
  - name: functions.addAddressPage.enterExteriorNumber
    flow:
      - enterText:
          identifier: addAddressPage.exteriorNumber
          string: ${exteriorNumber}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.keyboard.tapNextBtn        
      - log:
          message: "End functions: addAddressPage.enterExteriorNumber"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function enters interior number.
  # Param:  ${interiorNumber}  [Mandatory]  Interior Number to enter
  - name: functions.addAddressPage.enterInteriorNumber
    flow:
      - enterText:
          identifier: addAddressPage.interiorNumber
          string: ${interiorNumber}
          clearField: true
          clickFirst: true
      - executeFunction:
          name:  functions.utils.keyboard.tapNextBtn
      - log:
          message: "End functions: addAddressPage.enterInteriorNumber"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function enters street address to the street address field.
  # Param:  ${streetAddress}  [Mandatory]  Street address to enter
  - name: functions.addAddressPage.enterStreetAddress
    flow:
      # Accept location permission pop up if displayed
      - if:
          identifier:
            present:
              - identifier: addAddressPage.allowLocationPermission
            timeout: 3000
          then:
            - click:
                identifier: addAddressPage.allowLocationPermission
      - click:
          identifier: addAddressPage.streetAddress
      - enterText:
          identifier: addAddressPage.streetAddress
          string: ${streetAddress}
          clearField: true
          clickFirst: true
      - if:
          condition: ${market} == 'CA'
          then:
            - click:
                identifier: addAddressPage.firstSuggestedAddress
            - executeFunction:
                name: functions.utils.hideKeyboard
          else:
            - executeFunction:
                name: functions.utils.keyboard.tapNextBtn   
      - log:
          message: "End functions: functions.addAddressPage.enterStreetAddress"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters city name to the city name field.
  # param: ${cityName}    [Mandatory]  City Name to enter
  - name: functions.addAddressPage.selectCityName
    flow:
      - enterText:
          identifier: addAddressPage.cityName
          string: ${cityName}
      - goBack: true           
      - log:
          message: "End functions: addAddressPage.selectCityName"
          color: BLUE  

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters state name to the state name field.
  # param: ${stateName}    [Mandatory]  State Name to enter
  - name: functions.addAddressPage.selectStateName
    flow:
      - enterText:
          identifier: addAddressPage.stateName
          string: ${state}
      - goBack: true           
      - log:
          message: "End functions: addAddressPage.selectStateName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters municipality name to the municipality name field.
  # param: ${municipalityName}    [Mandatory]  State Name to enter
  - name: functions.addAddressPage.selectMunicipalityName
    flow:
      - enterText:
          identifier: addAddressPage.municipalityName
          string: ${municipalityName}
      - goBack: true           
      - log:
          message: "End functions: addAddressPage.selectMunicipalityName"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters zip code to the zip code field.
  # Param:  ${zipCode}  [Mandatory]  Zip code to enter 
  - name: functions.addAddressPage.enterZipCode
    flow:
      - click:
          identifier: addAddressPage.zipCodeField
      # Accept location permission pop up if displayed
      - if:
          identifier:
            present:
              - identifier: addAddressPage.allowLocationPermission
            timeout: 3000
          then:
            - click:
                identifier: addAddressPage.allowLocationPermission           
      - enterText:
          identifier: addAddressPage.zipCodeField
          string: ${zipCode}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.keyboard.tapNextBtn
      - log:
          message: "End functions: addAddressPage.enterZipCode"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters Crossing Streets info in the corresponding field.
  # Param:  ${crossingStreets}  [Mandatory]  Crossing Streets info to enter 
  - name: functions.addAddressPage.enterCrossingStreets
    flow:
      - scroll:
          direction: down
          untilIdentifier: addAddressPage.crossingStreetsField
          position: center
      - enterText:
          identifier: addAddressPage.crossingStreetsField
          string: ${crossingStreets}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.keyboard.tapNextBtn
      - log:
          message: "End function: functions.addAddressPage.enterCrossingStreets"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters References info in the corresponding field.
  # Param:  ${references}  [Mandatory]  References info to enter 
  - name: functions.addAddressPage.enterReferences
    flow:    
      - scroll:
          direction: down
          untilIdentifier: addAddressPage.referencesField
          position: center
          timeout: 10000
      - enterText:
          identifier: addAddressPage.referencesField
          string: ${references}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.keyboard.tapNextBtn
      - log:
          message: "End function: functions.addAddressPage.enterReferences"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters phone number to the phone number field.
  # Param:  ${phoneNumber}  [Mandatory]  Phone number to enter 
  - name: functions.addAddressPage.enterPhoneNumber
    flow:
      - scroll:
          direction: down
          untilIdentifier: addAddressPage.phoneNumber
          position: center
          timeout: 10000
      - enterText:
          identifier: addAddressPage.phoneNumber
          string: ${phoneNumber}
          clearField: true
          clickFirst: true
      - if:
          condition: ${platform} == 'Android'
          then:
            - executeFunction:
                name: functions.utils.keyboard.tapNextBtn
          else:
            - executeFunction:
                name: functions.utils.hideKeyboard
      - log:
          message: "End functions: addAddressPage.enterPhoneNumber"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------

  # Description:  This function taps on save button.
  # No Param
  - name: functions.addAddressPage.tapSaveButton
    flow:
      - click:
          identifier: addAddressPage.saveButton
      - log:
          message: "End function: addAddressPage.tapSaveButton"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------

# Description: This function will validate if the map vew is present after saving the address for location confirmation
  # No Param
  - name: functions.addAddressPage.mapViewForAddressConfirmation.isPageDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: addAddressPage.geoPointView.mapView
              - identifier: addAddressPage.geoPointView.exactLocationOnMap
            timeout: 15000
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: addAddressPage.mapViewForAddressConfirmation.isPageDisplayed (Displayed)"
                color: BLUE
          else:
            - storeIn:
                key: returnedIsDisplayed
                value: false
            - log:
                message: "End function: addAddressPage.mapViewForAddressConfirmation.isPageDisplayed (Not displayed)"
                color: BLUE   

  # ----------------------------------------------------------------------------------------------------------------

  # Description: This function tap on confirm button and confirm Location
  # No Param
  - name: functions.addAddressPage.mapViewForAddressConfirmation.confirmLocation
    flow:
      - click:
          identifier: addAddressPage.geoPointView.confirmLocation
      - log:
          message: "End function: addAddressPage.mapViewForAddressConfirmation.confirmLocation"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------
        
  # Description: This function handle select address Popup
  # No Param
  - name: functions.addAddressBottomSheet.selectFirstAddressRadio
    flow:
      - if: 
          identifier:
            present:
              - identifier: selectAddressPage.firstAddressRadio
          then:
            - click:
                identifier: selectAddressPage.firstAddressRadio
      - log: 
          message: "End function: addAddressBottomSheet.selectFirstAddressRadio"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------
        
  # Description: This function tap on continue button
  # No Param
  - name: functions.addAddressBottomSheet.tapOnContinueButton
    flow:
      - if: 
          identifier:
            present:
              - identifier: selectAddressPage.continuebutton
          then:
            - click:
                identifier: selectAddressPage.continuebutton
      - log: 
          message: "End function: addAddressBottomSheet.tapOnContinueButton"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------
        
  # Description: This function tap on edit link
  # No Param
  - name: functions.addAddressBottomSheet.tapOnEditLink
    flow:
      - click:
          identifier: selectAddressPage.editLink
      - log: 
          message: "End function: addAddressBottomSheet.tapOnEditLink"
          color: BLUE

  #----------------------------------------------------------------------------------------------------

   # Description: This function will click on the 'Add Address' form on the Account page
   # No Param
  - name: functions.account.addAddressPage.tapAddAddressBtn
    flow:
      - click:
          identifier: addAddressPage.addAddressBtn
      - log:
          message: "End function: functions.account.addAddressPage.tapAddAddressBtn"
          color: BLUE         
  
  # ----------------------------------------------------------------------------------------------------------------
        
  # Description: This function scroll down to colonia
  # No Param
  - name: functions.addAddressPage.scrollDownToColonia
    flow:
      - scroll:
          direction: down
          position: center
          untilIdentifier: addAddressPage.coloniaDropdown
      - log: 
          message: "End function: addAddressPage.scrollDownToColonia"
          color: BLUE

    # ----------------------------------------------------------------------------------------------------------------
        
  # Description: This function scroll down to save button
  # No Param
  - name: functions.addAddressPage.scrollDownToSaveButton
    flow:
      - scroll:
          direction: down
          untilIdentifier: AddressEditView.saveButton
      - log: 
          message: "End function: addAddressPage.scrollDownToSaveButton"
          color: BLUE

#----------------------------------------------------------------------------------------------------

# Description: This function will click on Add Address Title
  # No Param
  - name: functions.addAddressPage.tapAddAddressBtn
    flow:
      - click:
          identifier: addAddressPage.addDeliveryAddressLink
      - log:
          message: "End function: functions.addAddressPage.tapAddAddressBtn"
          color: BLUE        

#----------------------------------------------------------------------------------------------------

  # Description: This function tap on confirm button and confirm Location
  # No Param
  - name: functions.addAddressPage.mapViewForAddressConfirmation.tapReturnToFormOption
    flow:
      - click:
          identifier: addAddressPage.geoPointView.returnToFormBtn
      - log:
          message: "End function: addAddressPage.mapViewForAddressConfirmation.tapReturnToFormOption"
          color: BLUE

#----------------------------------------------------------------------------------------------------
  # Description: This function scrolls to top if first name is not displayed in address bottom sheet
  # No Param
  - name: functions.addAddressPage.scrollUpToDeliveryAddressFirstName
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: addAddressPage.firstName
            timeout: 5000
          then: 
            - scroll:
                direction: up
                scrollLimit: 1
                untilIdentifier: addAddressPage.firstName
                wait: 1000
            - log:
                message: "Scrolled up to First Name"
                color: CYAN
      - log:
          message: "End function: aaddAddressPage.scrollUpToDeliveryAddressFirstName"
          color: BLUE
# ----------------------------------------------------------------------------------------------------------------