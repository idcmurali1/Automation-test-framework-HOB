functions:

  #--------------------------------------------------------------------------------------------------------------------
  # DESCRIPTION: This function returns whether the Add to Cart button is displayed or not.
  # NO PARAMS
  # RETURNS:  ${addToCarButtonDisplayed}
  - name: functions.productDetailsPage.isAddToCartButtonDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: productDetailsPage.addToCartButton
            timeout: 5000
          then:
            - log:
                message: Add to Cart button is displayed.
                color: GREEN
            - storeIn:
                key: addToCarButtonDisplayed
                value: true
          else:
            - log:
                message: Add to Cart button is not displayed.
                color: GREEN
            - storeIn:
                key: addToCarButtonDisplayed
                value: false
      - log:
          message: "End Function: functions.productDetailsPage.isAddToCartButtonDisplayed"
          color: BLUE

#-------------------------------------------------------------------------------------------------------------------

  # Description: This function taps on add to cart button
  # Params:
  #     ${quantity}       [Optional]    Enter item quantity
  #     ${maxQuantity}    [Optional]    Boolean value if true, item quantity will be updated to the max qty.
  - name: functions.productDetailsPage.tapAddToCart
    flow:
      - click:
          identifier: productDetailsPage.addToCartButton  
      - if: 
          condition: ${quantity} > 1
          then:
            - loop:
                begin: 1
                end: ${quantity}
                mode: increment
                flow:
                  - sleep:
                      duration: 3000
                  - click:
                      identifier: productDetailsPage.incrementButton
      - if:
          condition: ${market} == 'US' 
          then:
            - executeFunction:
                name: functions.productDetailsPage.closeAddOnServicesPopUpIfDisplayed
            - executeFunction:
                name: functions.productDetailsPage.closePAC
      - if: 
          condition: ${maxQuantity}
          then:
            - executeFunction:
                name: functions.productDetailsPage.addMaxQuantityItemToCart
      - log:
          message: "End functions: productDetailsPage.tapAddToCart"
          color: BLUE

  #-------------------------------------------------------------------------------------------------------------------

  # Description: This function close pac page
  - name: functions.productDetailsPage.closePAC
    flow:
      - if:
          identifier:
            present:
              - identifier: productDetailsPage.PACTitle
          then:
            - click:
                identifier: productDetailsPage.PACCloseBtn
      - log:
          message: "End functions: functions.productDetailsPage.closePAC"
          color: BLUE

  #-----------------------------------------------------------------------------------------------------------------

  # Description: This function taps on close button
  # No params
  - name: functions.productDetailsPage.tapClose
    flow:
      - executeFunction:
          name: functions.global.closeUpdateItemQuantitySelectorIfDisplayed
      - if:
          condition: ${market} != 'US' 
          then:
           - if:
               identifier:
                  present:
                    - identifier: productDetailsPage.closeButton
               then:
                 - click:
                      identifier: productDetailsPage.closeButton
      - log:
          message: "End functions: productDetailsPage.tapClose"
          color: BLUE

  #-----------------------------------------------------------------------------------------------------------------

  # Description: This function validate item details
  # No params
  - name: functions.productDetailsPage.validateItemDetails
    flow:
      - sleep:  
              duration: 10000
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.productName
            - identifier: productDetailsPage.productImage
            # - identifier: productDetailsPage.productRating #CEPG-220399: WCP| EA| Item page content is different in Android and iOS
            - identifier: productDetailsPage.addToCartButton 
      - log:
          message: "End functions:productDetailsPage.validateItemDetails"
          color: BLUE

  
#--------------------------------------------------------------------------------------------------------------------
  # Description: This function taps on the multiseller page
  # No params
  - name: functions.productDetailsPage.tapCompareallSellers
    flow:
      - try:
          flow:
            - scroll:
                direction: down
                untilIdentifier: productDetailsPage.compareallSellersBtn
                scrollLimit: 4
                wait: 5000
            - sleep:  
                duration: 3000  
            - click:
                identifier: productDetailsPage.compareallSellersBtn
          catch:
            flow:
              - scroll:
                  direction: up
                  untilIdentifier: productDetailsPage.compareallSellersBtn
                  scrollLimit: 2
              - click:
                  identifier: productDetailsPage.compareallSellersBtn      
              - log:
                  message: "End functions: productDetailsPage.tapCompareallSellers"
                  color: BLUE

      
#--------------------------------------------------------------------------------------------------------------------
  # Description: This function validates the multiseller page title on the PDP
  # No params
  - name: functions.productDetailsPage.validateMultiSellerPagetitle
    flow:
      - if:
          condition: ${market} != 'US' 
          then:
            - verifyIdentifier:
                present:
                    - identifier: productDetailsPage.mutisellerpagetitle
      - log:
          message: "End functions: productDetailsPage.validateMultiSellerPagetitle"
          color: BLUE  

#--------------------------------------------------------------------------------------------------------------------
  # Description: This function taps on the Add to Cart button on the multiseller page
  # No params
  - name: functions.productDetailsPage.tapAddToCartMultiSellers
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: productDetailsPage.addToCartButtonmultiseller
          then:
            - scroll:
                direction: down
                untilIdentifier: productDetailsPage.addToCartButtonmultiseller
                scrollLimit: 1
      - sleep:
          duration: 3000    
      - click:
          identifier: productDetailsPage.addToCartButtonmultiseller
      - log:
          message: "End functions: productDetailsPage.tapAddToCartMultiSellers"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # DESCRIPTION: This function returns whether the Buy Now button is displayed or not.
  # NO PARAMS
  # RETURNS:  ${buyNowButtonDisplayed}
  - name: functions.productDetailsPage.isBuyNowButtonDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: productDetailsPage.buyNowBtn
            timeout: 5000
          then:
            - log:
                message: Buy Now button is displayed.
                color: GREEN
            - storeIn:
                key: buyNowButtonDisplayed
                value: true
          else:
            - log:
                message: Buy Now button is not displayed.
                color: GREEN
            - storeIn:
                key: buyNowButtonDisplayed
                value: false
      - log:
          message: "End Function: functions.productDetailsPage.isBuyNowButtonDisplayed"
          color: BLUE
 #--------------------------------------------------------------------------------------------------------------------
  # DESCRIPTION: This function returns whether the Buy Now button is displayed or not.
  # NO PARAMS
  
  - name: functions.productDetailsPage.validateBuyNowButtonnotDisplayed
    flow:
      - verifyIdentifier:
          notPresent:
            - identifier: productDetailsPage.buyNowBtn
            
      - log:
          message: "End Function: functions.productDetailsPage.isBuyNowButtonDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function clicks on buy now option
  # No params
  - name: functions.productDetailsPage.tapBuyNowOption
    flow:
      - click:
          identifier: productDetailsPage.buyNowBtn
      - if: 
          condition: ${environment} == 'Teflon'
          then:
            - loop:
                begin: 0
                end: 3 
                mode: increment
                flow:
                  - if: 
                      identifier:
                        present:
                          - identifier: productDetailsPage.buyNowBtnErrorMessage
                      then:
                        - click:
                            identifier: global.acceptBtn
                        - click:
                            identifier: productDetailsPage.buyNowBtn
                      else: 
                        - break: true      
      - log:
          message: "End functions: productDetailsPage.tapBuyNowOption"
          color: BLUE 

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function clicks on decrement button
  # No params
  - name: functions.productDetailsPage.decreaseItemQuantity
    flow:
      - sleep:
          duration: 5000
      - click:
          identifier: cartPage.itemCountDecrementButton
      - log:
          message: "End functions: productDetailsPage.decreaseItemQuantity"
          color: BLUE 

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function clicks on increase button
  # No params
  - name: functions.productDetailsPage.increaseItemQuantity
    flow:
      - sleep:
          duration: 5000
      - click:
          identifier: cartPage.itemCountIncrementButton
      - log:
          message: "End functions: productDetailsPage.increaseItemQuantity"
          color: BLUE 

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This method check if the Reduced prices/strikethrough price is shown
  # No param 
  - name: functions.productDetailsPage.validateReducedPrice 
    flow:
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.strikethroughPrice

      - log: 
          message: "End function: productDetailsPage.validateReducedPrice"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This method check for the rating and review.
  # No param 
  - name:  functions.productDetailsPage.validateRatingAndReview
    flow:
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.productRating #CEPG-220399: WCP| EA| Item page content is different in Android and iOS
      - log:
          message: "End functions:productDetailsPage.validateRatingAndReview"
          color: BLUE
  #--------------------------------------------------------------------------------------------------------------------
  # Description: Validate tag in product details page.
  # No param 
  - name: functions.productDetailsPage.validateMCIlabel
    flow:
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.MCIlabel
      - log:
          message: "End functions: productDetailsPage.validateMCIlabel"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: Click on share link button
  # No param 
  - name: functions.productDetailsPage.tapShareItemBtn
    flow:
      - click:
          identifier: productDetailspage.shareItemBtn
      - log:
          message: "End functions: productDetailsPage.tapShareItemBt"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: Click on share link button
  # No param 
  - name: functions.productDetailsPage.shareItemsPopUp.tapCloseBtn
    flow:
      - click:
          identifier: productDetailsPage.shareItemPopUp.closeBtn
      - log:
          message: "End functions: productDetailsPage.sharePop.closeBtn"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: Validates if share options are displayed 
  # No param 
  - name: functions.productDetailsPage.assertShareOptionsPopupIsDisplayed
    flow:
      - verifyIdentifier:
          present:
            - identifier: productDetailspage.shareItemPopup
      - log:
          message: "End functions: productDetailsPage.assertShareOptionsPopupIsDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: Scroll down to Seller information 
  # No param 
  - name: functions.productDetailsPage.scrollDownToSellerInformation
    flow:
      - if:
          identifier:
            present:
              - identifier: productDetailspage.sellerInformation
            timeout: 5000
          then:
            - log: 
                message: "Seller information is present in the Item details page"
          else:
            - scroll:
                direction: down
                untilIdentifier: productDetailspage.sellerInformation
      - verifyIdentifier:
          present:
            - identifier:  productDetailspage.sellerInformation
      - log:
          message: "End functions: productDetailsPage.scrollDownToSellerInformation"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: Retrieve Seller information
  # Returns:     ${returnedSellerInformation}  The seller information displayed.
  - name: functions.productDetailsPage.getSellerInformation
    flow:
      - executeFunction:
          name: functions.productDetailsPage.scrollDownToSellerInformation
      - getString:
          identifier: productDetailspage.sellerInformation
          storeIn: returnedSellerInformation
      - log:
          message: "Seller information: ${returnedSellerInformation}"
          color: GREEN
      - log:
          message: "End functions: productDetailsPage.getSellerInformation"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Navigate to bank promotion bottom sheet
  - name: functions.productDetailsPage.navigateToBankPromationBottomSheet
    flow:
      - if:
          identifier:
            present:
              - identifier: productDetailsPage.financialBankPromotion
          then:
              - click:
                  identifier: productDetailsPage.financialBankPromotionNavigation   
      - log:
          message: "End functions: productDetailsPage.navigateToBankPromationBottomSheet"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate alchohol tag in product details page.
  - name: functions.productDetailsPage.validate.alcoholBadge
    flow:
      - verifyIdentifier:
            present:
              - identifier: productDetailsPage.alcohol.badgeLabel
      - log:
          message: "End functions: productDetailsPage.validateBadge"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate preorder cta in product details page
  # No params
  - name: functions.productDetailsPage.validatePreOrderCta
    flow:
      - verifyIdentifier:
            present:
              - identifier: productDetailsPage.preOrderCta
      - log:
          message: "End functions: productDetailsPage.validatePreOrderCta"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate preorder cta in product details page
  # No params
  - name: functions.productDetailsPage.learnMore.klarnaFinancing
    flow:
      - if: 
          identifier:
            notPresent:
              - identifier: productDetailsPage.financingOptions.klarnaTnc
          then:
            - scroll:
                direction: down
                untilIdentifier: productDetailsPage.financingOptions.klarnaTnc
                position: center
                scrollLimit: 5
                timeout: 10000
      - verifyIdentifier:
          present:
            # - identifier: productDetailsPage.financingOptions.financingKlarnaImage    Commented due to taking a lot of time to load locator
            - identifier: productDetailsPage.financingOptions.klarnaPay
            - identifier: productDetailsPage.financingOptions.klarnaLearnHow
            - identifier: productDetailsPage.financingOptions.klarnaTnc
            - identifier: productDetailsPage.financingOptions.financingKlarnaBody
      - log:
          message: "End functions: productDetailsPage.learnMore.klarnaFinancing"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate preorder cta in product details page
  # No params
  - name: functions.productDetailsPage.learnMore.tapCompareFinancingOptions
    flow:
      - click:
          identifier: productDetailsPage.financingOptions.financingCompareButton
      - sleep:
          duration: 10000     
      - log:
          message: "End functions: productDetailsPage.learnMore.klarnaFinancing"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate preorder cta in product details page
  # No params
  - name: functions.productDetailsPage.validateCompareFinancingOptionsPopUp
    flow:
      - sleep:
          duration: 20000
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.financingOptions.financingCompareOptionText
            - identifier: productDetailsPage.financingOptions.salesPlanImage
            - identifier: productDetailsPage.financingOptions.klarnaPlanImage
            - identifier: productDetailsPage.financingOptions.monthlyInstallments
            - identifier: productDetailsPage.financingOptions.payBiweekly
            - identifier: productDetailsPage.financingOptions.ApplyNow
      - sleep:
          duration: 10000      
      - log:
          message: "End functions: productDetailsPage.compareFinancingOptions"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate preorder cta in product details page
  # No params
  - name: functions.productDetailsPage.validateFinacingDetailsOnHeader
    flow:
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.productTitle.financingInfo
      - log:
          message: "End functions: productDetailsPage.validateFinacingDetailsOnHeader"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate klarna financing info in product page.
  # No params
  - name: functions.productDetailsPage.validateKlarnaDetailsOnHeader
    flow:
      - sleep:
          duration: 10000
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.productTitle.klarnaInfo
            - identifier: productDetailsPage.productTitle.klarnaIcon
            - identifier: productDetailsPage.productTitle.klarnaTermsLink
          notPresent:
            - identifier: productDetailsPage.productTitle.salesFinancingInfo
      - log:
          message: "End functions: productDetailsPage.validateKlarnaDetailsOnHeader"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate sales financing info in product page.
  # No params
  - name: functions.productDetailsPage.validateSalesFinancingDetailsOnHeader
    flow:
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.productTitle.salesFinancingInfo
            - identifier: productDetailsPage.productTitle.salesFinancingIcon
            - identifier: productDetailsPage.productTitle.salesFinancingLink
          notPresent:
            - identifier: productDetailsPage.productTitle.klarnaInfo
      - log:
          message: "End functions: productDetailsPage.validateSalesFinancingDetailsOnHeader"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Validate sales financing info in product page.
  # No params
  - name: functions.productDetailsPage.validateNoFinancingDetailsDisplayed
    flow:
      - verifyIdentifier:
          notPresent:
            - identifier: productDetailsPage.productTitle.klarnaInfo
            - identifier: productDetailsPage.productTitle.salesFinancingInfo
      - log:
          message: "End functions: productDetailsPage.validateNoFinancingDetailsDisplayed"
          color: BLUE
  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function taps on learn more link in PDP header
  # No params
  - name: functions.productDetailsPage.tapLearnMoreLinkFinancing
    flow:
      - sleep:
          duration: 15000 
      - click:
          identifier: productPage.learnMoreLinkFinancing
      - log:
          message: "End functions: productDetailsPage.tapLearnMoreLinkFinancing"
          color: BLUE

#-------------------------------------------------------------------------------------------------------------------
# Description: Validating learn more details for sales financing in product page.
  # No params
  - name: functions.productDetailsPage.learnMore.salesFinancing
    flow:
      - sleep:
          duration: 25000
      - if:
          identifier:
            notPresent:
              - identifier: productDetailsPage.financingOptions.salesHeader
          then:
            - scroll:
                direction: down
                untilIdentifier: productDetailsPage.financingOptions.salesHeader
                position: center
      - if:
          identifier:
            notPresent:
              - identifier: productDetailsPage.financingOptions.salesHeader
          then:
            - scroll:
                direction: up
                untilIdentifier: productDetailsPage.financingOptions.salesHeader
                position: center
                          
                 
      - verifyIdentifier:
          present:
            # - identifier: productDetailsPage.financingOptions.salesImage    Commented due to taking a lot of time to load locator
            - identifier: productDetailsPage.financingOptions.salesHeader
            - identifier: productDetailsPage.financingOptions.earnRewardsText
            - identifier: productDetailsPage.financingOptions.finnancingTncLink
            - identifier: productDetailsPage.financingOptions.ApplyNow
           
      - log:
          message: "End functions: productDetailsPage.learnMore.salesFinancing"
          color: BLUE
#-------------------------------------------------------------------------------------------------------------------
  # Description: This function validates Free Pickup Fulfillment
  # No params
  - name: functions.productDetailsPage.validateFreePickupFulfillmentIsDisplayed
    flow:
      - verifyIdentifier:
            present:
              - identifier: productDetailsPage.freePickupFulfillment
      - log:
          message: "End functions: productDetailsPage.validateFreePickupFulfillmentIsDisplayed"
          color: BLUE

#-------------------------------------------------------------------------------------------------------------------

  # Description: This function validates Pickup Fulfillment
  # No params
  - name: functions.productDetailsPage.validateRegularPickupFulfillmentIsDisplayed
    flow:
      - verifyIdentifier:
            present:
              - identifier: productDetailsPage.regularPickupFulfillment
      - log:
          message: "End functions: productDetailsPage.validateRegularPickupFulfillmentIsDisplayed"
          color: BLUE

#-------------------------------------------------------------------------------------------------------------------

  # Description: This functions validates Delivery for a price Fulfillment
  # No params
  - name: functions.productDetailsPage.validatedeliveryForAPriceIsDisplayed
    flow:
      - verifyIdentifier:
            present:
              - identifier: productDetailsPage.deliveryForAPriceFulfillment
      - log:
          message: "End functions: productDetailsPage.validatedeliveryForAPriceIsDisplayed"
          color: BLUE

#-------------------------------------------------------------------------------------------------------------------

  # Description: This functions validates Free delivery Fulfillment
  # No params
  - name: functions.productDetailsPage.validateFreeDeliveryFulfillmentIsDisplayed
    flow:
      - verifyIdentifier:
            present:
              - identifier: productDetailsPage.freeDeliveryFulfillment
      - log:
          message: "End functions: productDetailsPage.validateFreeDeliveryFulfillmentIsDisplayed"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------

  # Description: This function validates the manufacturer coupon has been applied
  # No Param
  - name: functions.productDetailsPage.validateManufacturerCouponIsApplied
    flow:
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.manufacturerCouponApplied
      - log:
          message: "End function: productDetailsPage.validateManufacturerCouponIsApplied"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------

  # Description: This functions validates View all button is displayed in PDP
  # No Param
  - name: functions.productDetailsPage.validateViewAllBtnIsDisplayed
    flow:
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.viewAllBtn
      - log:
          message: "End function: productDetailsPage.validateViewAllBtnIsDisplayed"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------  
 # Description: This functions validates Not Returnable Text is displayed in PDP
 # No Param
  - name: functions.productDetailsPage.scrollDownToNotReturnableText
    flow:
      - try:
          flow:
            - scroll:
                direction: down
                position: center
                untilIdentifier: productDetailsPage.NotReturnableText
                scrollLimit: 2
            - sleep:
                duration: 3000
            - verifyIdentifier:
                present:
                  - identifier: productDetailsPage.NotReturnableText
          catch:
            flow:
              - scroll:
                  direction: up
                  position: center
                  untilIdentifier: productDetailsPage.NotReturnableText
                  scrollLimit: 2
              - verifyIdentifier:
                  present:
                    - identifier: productDetailsPage.DeliveredDigitallyText
      - log:
          message: "End Functions: productDetailsPage.scrollDownToNotReturnableText"
          color: BLUE               
#--------------------------------------------------------------------------------------------------------------------  
 # Description: This functions validates Deliverd digitally text in PDP
 # No Param
  - name: functions.productDetailsPage.validateDeliveredDigitallyTextIsDisplayed
    flow:
      - sleep:
          duration: 3000       
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.DeliveredDigitallyText    
      - log:
          message: "End Functions: functions.productDetailsPage.validateDeliveredDigitallyTextIsDisplayed"
          color: BLUE      
#--------------------------------------------------------------------------------------------------------------------
  #--------------------------------------------------------------------------------------------------------------------
  # Description: Retrieve variant information
  # Returns:     ${returnedProductVariant}  The variant information displayed.
  - name: functions.productDetailsPage.getProductVariant
    flow:
      - getString:
          identifier: productDetailspage.productVariant
          storeIn: returnedProductVariant
      - log:
          message: "Variant information: ${returnedProductVariant}"
          color: GREEN
      - log:
          message: "End functions: productDetailsPage.getProductVariant"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # Description: This function clicks on favourite icon from PDP
  # No Param

  - name: functions.productDetailsPage.tapAddToFavorites
    flow:
      - click:
          identifier: productDetailsPage.tapAddToListsIcon
      - log:
          message: "End function: productDetailsPage.tapAddToFavorites"
          color: BLUE
  # ----------------------------------------------------------------------------------------------------------------
  # Description: This function unhearts items from pdp
  - name: functions.productDetailsPage.removeFromLists
    flow:
      - click:
          identifier: productDetailsPage.tapRemoveBtn    # iOS mappings need to be updated
      - log:
          message: "End functions: productDetailsPage.removeFromLists"
          color: BLUE   

  # ----------------------------------------------------------------------------------------------------------------
  # Description: This function scrolls down to the Manufcaturer Coupon checkbox
  # No params 
  - name: functions.productDetailsPage.scrollDownToManufacturerCouponSection
    flow:
      - try:
          flow:
            - scroll:
                direction: down
                untilIdentifier: productDetailsPage.manufacturerCouponBox
            - verifyIdentifier:
                present:
                  - identifier: productDetailsPage.manufacturerCouponBox
          catch:
            flow:
              - scroll:
                  direction: up
                  untilIdentifier: productDetailsPage.manufacturerCouponBox
              - verifyIdentifier:
                  present:
                    - identifier: productDetailsPage.manufacturerCouponBox

  # ----------------------------------------------------------------------------------------------------------------
  # Description: Function to validate freight item fee in PDP
  # No params 
  - name: functions.productDetailsPage.validateFreightFeeIsDisplayed
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: productDetailsPage.freightFee
          then:
            - scroll:
                direction: down
                untilIdentifier: productDetailsPage.freightFee
                position: center
                scrollLimit: 1
      - verifyIdentifier:
          present:
            - identifier: productDetailsPage.freightFee
      - log:
          message: "End functions: functions.productDetailsPage.validateFreightFeeIsDisplayed"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------
  # Description: This function selects a different option in multivariant items
  # No params
  - name: functions.productDetailsPage.changeMultiVariantOption
    flow:
      - sleep:
          duration: 5000
      - click:
          identifier: productDetailsPage.firstVariant.secondOption
          wait: 5000
      - click:
          identifier: productDetailsPage.secondVariant.secondOption
          wait: 5000
      - log:
          message: "End functions: functions.productDetailsPage.changeMultiVariantOption"
          color: BLUE

  # ----------------------------------------------------------------------------------------------------------------
  # Description: This function closes add on services Pop up like "Walmart Protection plan By All State" popup
  # No params
  - name: functions.productDetailsPage.closeAddOnServicesPopUpIfDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: productDetailsPage.addOnServicesPopup
          then:
            - click:
                identifier: global.closeBtn
      - log:
          message: "End functions: functions.productDetailsPage.closeAddOnServicesPopUpIfDisplayed"
          color: BLUE
