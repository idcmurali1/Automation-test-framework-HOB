functions:

#--------------------------------------------------------------------------------------------------------------------

  # Description: Asserts whether the displayed User Name is correct.
  # Params:      ${userName}  [Mandatory]  Expected User Name to be displayed.
  # Works for:   [ MX [âœ“]   MX-Bodega [needs_testing]   US [__] ]
  - name: functions.accountPage.assertDisplayedUserName
    platform: ios
    flow:
      - log:
          message: "Expected User Name: '${userName}'"
          color: CYAN
      - if:
          identifier:
            present:
              - identifier: accountPage.headerName
          then:
            - getString:
                identifier: accountPage.headerName
                storeIn: displayedUserName
            - log:
                message: "Displayed User Name (full): '${displayedUserName}'"
                color: CYAN
            - verifyIdentifier:
                label:
                  - identifier: accountPage.headerName
                    contains: 'Hola, ${userName}'
          else:
            - failTest:
                message: Header Name element not found. Assertion cannot be performed
      - log:
          message: "End function: functions.accountPage.assertDisplayedUserName"
          color: BLUE


  - name: functions.accountPage.PostLogInhandlePopUpandAlerts
    platform: ios
    flow:
      - executeFunction:
          name: functions.utils.handleICloudAlert
      - if:
          condition: ${environment} == 'Production'
          then:
            - executeFunction:
                name: functions.accountPage.closePhoneNumberPopUp  
      - sleep:
          duration: 3000    
      - executeFunction:
          name: functions.icashMobile.handlePhoneNumberPopUp
      # - executeFunction:
      #     name: functions.accountPage.acceptMergeCartAlertIfDisplayed      
      # - executeFunction:
      #     name: functions.utils.handleKeyChainAlert
      - log:
          message: "End function: accountPage.PostLogInhandlePopUpandAlerts"
          color: BLUE      