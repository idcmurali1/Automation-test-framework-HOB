general:
  testCaseId: TC-001
  tags: flow-001v, wcp-poc-pickup, wcp-poc

scenarios:
  - name: Before
    before: true
    endTestOnFailure: true
    flow:
      - executeFunction:
          name: functions.utils.setMarketInfor

# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

  - name: Main
    flow:
      - log: Start Main
      - getTimestamp:
          asDate: true
          storeIn: timestamp
  
      - executeFunction:
          name: functions.onboardingToHomePage.usingPostalCode
          params:
            - name: PostalCode
              string: data.onboarding.userPostalCode
            - name: ShoppingExperience
              string: data.onboarding.walmartExpress

      - executeFunction:
          name: functions.global.tapAccountBtn
      
      - executeFunction:
          name: functions.accountPage.tapSignInBtn
      
      - executeFunction:
          name: functions.loginPage.userAuthentication
          params:
            - name: userEmail
              string: data.userEmail
            - name: userPassword
              string: data.userPassword
      
      - executeFunction:
          name: functions.global.tapShopBtn
        
      - executeFunction:
          name: functions.utils.clearCart

      - executeFunction:
          name: functions.searchPage.addToCartUsingItemArray
          params:
            - name: productArray
              string: data.searchPage.groceryItemArray

      - executeFunction:
          name: functions.global.tapCartIcon
  
      - executeFunction:
          name: functions.cartPage.tapReserveATimeBtn

      - executeFunction:
          name: functions.reserveATime.bookSlot
          params:
            - name: slotType
              string: data.reserveATime.deliveryFromStore
      
      - executeFunction:
          name: functions.cartPage.tapContinueToCheckoutBtn