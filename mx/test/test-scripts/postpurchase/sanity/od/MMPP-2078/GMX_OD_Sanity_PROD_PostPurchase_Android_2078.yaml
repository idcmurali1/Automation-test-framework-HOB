#======================================================================================================================
#    AUTHOR: Isis Tolentino (vn53dge)
#   CREATED: Jul/3/2024
#  REVISION: ---
#
#  Copyright Â© 2024 Walmart. All rights reserved.
#======================================================================================================================

general:
  tags: qaa-dev-phase-od-production-android-2078

scenarios:
#######################################################################################################################
#
#  CONFLUENCE TRACKING DASHBOARD:
#    https://confluence.walmart.com/display/MXGECMEX/GlassMX+-+OD+-+Sanity+-+Production+-+Android
#
#  JIRA AUTOMATION TC:
#    https://jira.walmart.com/browse/MMPP-2300
#
#  JIRA MANUAL TC:
#    https://jira.walmart.com/browse/MMPP-2078
#
#######################################################################################################################

  
  # BEFORE SCENARIO ###################################################################################################
  - name: Before
    before: true
    flow:
      - log: "BEFORE SCENARIO START: Initial Config..."
      
      - executeFunction:
          name: mx.squad-reporting.setTestCaseName
          params:
            - name: testCaseName
              string: GMX_OD_Sanity_PROD_PostPurchase_Android_2078

      - storeIn:
          key: MMPP_2078_SUCCESSFUL_EXECUTION
          value: false
      - log: "BEFORE SCENARIO END"

  # MAIN SCENARIO #####################################################################################################
  - name: Main
    platform: android
    flow:
      - log: "TEST START: GMX_OD_Sanity_PROD_PostPurchase_Android_2078"

      # STEP 1: Navigate through Onboarding and select OD Banner ------------------------------------------------------
      - log:
         message: "STEPS 1: Navigate through Onboarding and select OD Banner."
         color: YELLOW

      - executeFunction:
          name: mx.flows.global.onboarding.navigateToHomeAsGuestUser
          params:
            - name: zipCode
              string: mx.data.qaa.sanity.od.postpurchase-2078.zipCode
            - name: banner
              string: "OD"

      # STEP 2-3: Login from Profile ----------------------------------------------------------------------------------
      - log:
         message: "STEP 2-3: Login from Profile."
         color: YELLOW

      - executeFunction:
          name: mx.flows.od.login.navigateToAccountAndLogin
          params:
            - name: userEmail
              string: mx.data.qaa.sanity.od.postpurchase-2078.userEmail
            - name: userPassword
              string: mx.data.qaa.sanity.od.postpurchase-2078.userPassword
            - name: userName
              string: mx.data.qaa.sanity.od.postpurchase-2078.userFirstName

      # STEP 4: Select Pedidos option. --------------------------------------------------------------------------------
      - log:
         message: "STEP 4: Select Pedidos option."
         color: YELLOW

      - executeFunction:
          name: mx.functions.account.openOrdersHistory

      # STEP 5: Validate order history list. --------------------------------------------------------------------------
      - log:
         message: "STEP 5: Validate order history list."
         color: YELLOW
      
      - executeFunction:
          name: mx.functions.orders-history.assertPageDisplayed
      - executeFunction:
          name: mx.functions.orders-history.assertOrdersHistoryListDisplayed


      # STEP 6-7: Select "Ver detalles" button from any order and validate Order Details. ----------------------------------------------------------
      - log:
         message: "STEP 6-7: Select Ver detalles button from any order and validate Order Details."
         color: YELLOW
      
      - executeFunction:
          name: mx.functions.orders-history.tapOrderDetailsByPosition
          params:
            - name: position
              string: '1'
      - executeFunction:
          name: mx.functions.order-details.assertOrderDetailsDisplayed

      # End main ------------------------------------------------------------------------------------------------------
      - storeIn:
          key: MMPP_2078_SUCCESSFUL_EXECUTION
          value: true

      - log: "TEST END: GMX_OD_Sanity_PROD_PostPurchase_Android_2078"