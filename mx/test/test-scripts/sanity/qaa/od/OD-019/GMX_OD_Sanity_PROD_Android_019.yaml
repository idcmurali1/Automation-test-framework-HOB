#======================================================================================================================
#    AUTHOR: Octavio Cabrales Zárate (vn53g23), Rodrigo Pacheco C. (vn53p0i)
#   CREATED: Jun/09/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

general:
  tags: qaa-od-sanity-production-android-019, qaa-od-sanity-production-android
  testCaseId: MXMOB-1354

scenarios:
#######################################################################################################################
#
#  CONFLUENCE TRACKING DASHBOARD:
#    https://confluence.walmart.com/display/MXGECMEX/MXMOB-QAA%3A+Tracking%3A+Test+Suite%3A+GlassMX+-+OD+-+Sanity+-+Production+-+Android
#
#  JIRA AUTOMATION TC:
#    https://jira.walmart.com/browse/MXMOB-1354
#
#  JIRA MANUAL TC:
#    https://jira.walmart.com/browse/MXMOB-1953
#
#######################################################################################################################
#
#   - Flags used:
#
#       ${ORDER_DETAILS_AND_HISTORY_DELIVERY_SLOT_ASSERTION_WORKAROUND}  -  Values: [true | false]
#           Turns on/off the execution of the workaround to perform (or not) the delivery slot assertions on 
#           order-details and orders-history pages due to an error that displays a different time slot from the selected 
#           during the booking phase.
#
#       ${IOS_LOGIN_AS_REGISTERED_USER_WORKAROUND}  -  Values: [true | false]
#           Turns on/off the execution of the workaround to log in after finishing the onboarding steps due to iOS not
#           having the login button inside the onboarding aside from Android. Turn on to log in in Account page after
#           the onboarding steps, turn off to log in inside the onboarding as usual.
#
#       ${ASSERT_DELIVERY_SLOT_IN_CART}  -  Values: [true | false]
#           If set to 'true', the flow will perform assertion for the Delivery Slot in Cart page.
#           If set to 'false' or not set at all, it will perform the Delivery Slot assertion as expected.
#  
#       ${ASSERT_DELIVERY_SLOT_IN_REVIEW_ORDER}  -  Values: [true | false]
#           If set to 'true', the flow will perform assertion for the Delivery Slot in Review Order page.
#           If set to 'false' or not set at all, it will perform the Delivery Slot assertion as expected.
#  
#       ${ASSERT_DELIVERY_SLOT_IN_ORDER_CONFIRMATION}  -  Values: [true | false]
#           If set to 'true', the flow will perform assertion for the Delivery Slot in Order Confirmation page.
#           If set to 'false' or not set at all, it will perform the Delivery Slot assertion as expected.
#  
#       ${ASSERT_DELIVERY_SLOT_IN_ORDERS_HISTORY}  -  Values: [true | false]
#           If set to 'true', the flow will perform assertion for the Delivery Slot in Orders History page.
#           If set to 'false' or not set at all, it will perform the Delivery Slot assertion as expected.
#  
#       ${ASSERT_DELIVERY_SLOT_IN_ORDER_DETAILS}  -  Values: [true | false]
#           If set to 'true', the flow will perform assertion for the Delivery Slot in Order Details page.
#           If set to 'false' or not set at all, it will perform the Delivery Slot assertion as expected.
#
#======================================================================================================================

  - name: Main
    flow:
      - log: "TEST START: ${__SQUAD_REPORTING_TEST_CASE_NAME}"
      
      ## STEP 1: LAUNCH AND GO THROUGH ONBOARDING SCREEN - PRE-HOME SHOULD BE SHOWN.
      ## STEP 2: SELECT OD BANNER - HOME SCREEN IS DISPLAYED.
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEPS 1-2: LAUNCH AND COMPLETE ONBOARDING AS GUEST - SELECT OD BANNER.'
            - name: squadNames
              string: CORE | QAA
      
      - executeFunction:
          name: mx.flows.global.onboarding.navigateToHomeAsGuestUser
          params:
            - name: zipCode
              string: mx.data.qaa.sanity.od-019.zipCode
            - name: banner
              string: 'OD'

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 3: GO TO PROFILE SCREEN - LOGIN AND VALIDATE USER LOGGED.
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 3: GO TO PROFILE SCREEN AND LOGIN.'
            - name: squadNames
              string: CUSTOMER | QAA

      - executeFunction:
          name: mx.flows.od.login.navigateToAccountAndLogin
          params:
            - name: userEmail
              string: mx.data.qaa.sanity.od-019.userEmail
            - name: userPassword
              string: mx.data.qaa.sanity.od-019.userPassword
            - name: userName
              string: mx.data.qaa.sanity.od-019.userName

  # Changing store.....................................................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'Step 3 (A): Changing store (if necessary)...'
            - name: squadNames
              string: PRE-PURCHASE | QAA
      - executeFunction:
          name: mx.functions.home.scrollUpToLocationBanner
      - if:
          identifier:
            present:
              - identifier: mx.mappings.delivery-method-selector.expandLocationBanner
          then:
            - click:
                identifier: mx.mappings.delivery-method-selector.expandLocationBanner
            - click:
                identifier: mx.mappings.delivery-method-selector.pickupButton
            - if:
                identifier:
                  present:
                    - identifier: mx.mappings.delivery-method-selector.selectedStore # <--Selected Store--${selectedStore}--Set in 'Before' Scenario
                then:
                  - click:
                      identifier: mx.mappings.delivery-method-selector.collapseLocationBanner
                  - log: "Desired Store already selected, execution will continue..."
                else:
                  - log: "Desired Store not selected, changing store..."
                  - click:
                      identifier: mx.mappings.delivery-method-selector.pickupStoreSelectorButton
                  - executeFunction:
                      name: mx.functions.store-selector-popup.assertPageDisplayed
                  - executeFunction:
                      name: mx.flows.od.store-selector-popup.quickChangeStoreFromPopup
                      params:
                        - name: zipCode
                          string: mx.data.qaa.sanity.od-019.zipCode
                        - name: storeName
                          string: mx.data.qaa.sanity.od-019.storeName
                  - sleep:
                      duration: 3000
                  - click:
                      identifier: mx.mappings.delivery-method-selector.collapseLocationBanner
          else:
            - if:
                identifier:
                  present:
                    - identifier: mx.mappings.home.selectedStoreButton # <--Selected Store--${selectedStore}--Set in 'Before' Scenario.
                then:
                  - log: "Desired Store already selected, execution will continue..."
                else:
                  - log: "Desired Store not selected, changing store..."
                  - executeFunction:
                      name: mx.functions.home.tapStoreSelector
                  - executeFunction:
                      name: mx.functions.store-selector-popup.assertPageDisplayed
                  - executeFunction:
                      name: mx.flows.od.store-selector-popup.quickChangeStoreFromPopup
                      params:
                        - name: zipCode
                          string: mx.data.qaa.sanity.od-019.zipCode
                        - name: storeName
                          string: mx.data.qaa.sanity.od-019.storeName
    
  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 4: SEARCH PRODUCTS - SLP SHOULD SHOW.
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 4: SEARCH PRODUCTS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.flows.od.search.performSuccessfulSearch
          params:
            - name: searchTerm
              string: mx.data.qaa.sanity.od-019.searchTerm1

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 5: ADD PRODUCT TO NEW LIST (LIST 1) FROM SLP - PRODUCT SHOULD BE ADDED TO LIST
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 5: ADD PRODUCT TO NEW LIST (LIST 1) FROM SLP.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.slp.getProductNameWithoutSpecialBadges #--RETURNS--${returnedProductNameWithoutSpecialBadges}-->
          params:
            - name: previousList
              string: 'null'
      - storeIn:
          key: qaa_od019_product_1_name
          value: ${returnedProductNameWithoutSpecialBadges}
          # [VARIABLE] Product Name 1 saved in ${qaa_od019_product_1_name}
      - executeFunction:
          name: mx.functions.slp.openProductDetailsByName
          params:
            - name: productName
              string: ${qaa_od019_product_1_name}
      - executeFunction:
          name: mx.functions.pdp.assertPageDisplayed
      - executeFunction:
          name: mx.functions.pdp.assertCorrectProductDisplayed
          params:
            - name: expectedProductName
              string: ${qaa_od019_product_1_name}
      - executeFunction:
          name: mx.functions.pdp.tapAddToList
      - executeFunction:
          name: mx.functions.add-to-list-popup.assertPageDisplayed
      - executeFunction:
          name: mx.flows.od.list.createCustomList
          params:
            - name: newListName
              string: mx.data.qaa.sanity.od-019.listName1
      - storeIn:
          key: OD_019_IS_LISTS_PAGE_EMPTY
          value: false
      - executeFunction:
          name: mx.functions.pdp.tapClose

  #--------------------------------------------------------------------------------------------------------------------

    ## STEP 6: GO TO MY ITEMS - MY ITEMS PAGE IS DISPLAYED ALONG WITH REORDER AND LISTS SECTIONS
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 6: GO TO MY ITEMS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.bottom-menu.tapProductsAndLists
      - executeFunction:
          name: mx.functions.products-and-lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 7: GO TO LISTS - PREVIOUSLY CREATED LIST IS DISPLAYED (LIST 1)
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 7: GO TO LISTS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.products-and-lists.tapLists
      - executeFunction:
          name: mx.functions.lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.lists.assertListDisplayed
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName1

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 8: OPEN LIST - PRODUCT PREVIOUSLY ADDED TO LIST 1 IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 8: OPEN LIST (1).'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.lists.openList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName1
      - executeFunction:
          name: mx.functions.list.assertCorrectListOpened
          params:
            - name: expectedListName
              string: mx.data.qaa.sanity.od-019.listName1
      - executeFunction:
          name: mx.functions.list.assertProductListed
          params:
            - name: productName
              string: ${qaa_od019_product_1_name}
      - executeFunction:
          name: mx.functions.list.tapBack

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 9: OPEN DEPARTMENT/SUBDEPARTMENT - PLP IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 9: OPEN DEPARTMENT/SUBDEPARTMENT.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      # Running the function twice in order to close the previous search and show the department selection screen...
      - executeFunction:
          name: mx.functions.bottom-menu.tapDepartments
      - executeFunction:
          name: mx.functions.bottom-menu.tapDepartments
      - executeFunction:
          name: mx.flows.od.taxonomy.openDepartment
          params:
            - name: L1
              string: mx.data.qaa.sanity.od-019.departmentL1
            - name: L2
              string: mx.data.qaa.sanity.od-019.departmentL2
            - name: L3
              string: mx.data.qaa.sanity.od-019.departmentL3

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 10: ADD PRODUCT TO NEW LIST (LIST 2) FROM PLP - PRODUCT SHOULD BE ADDED TO LIST
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 10: ADD PRODUCT TO NEW LIST (LIST 2) FROM PLP.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.department-l3.getProductNameWithoutSpecialBadges #--RETURNS--${returnedProductNameWithoutSpecialBadges}-->
          params:
            - name: previousList
              string: 'null'
      - storeIn:
          key: qaa_od019_product_2_name
          value: ${returnedProductNameWithoutSpecialBadges}
          # [VARIABLE] Product Name 2 saved in ${qaa_od019_product_2_name}
      - executeFunction:
          name: mx.functions.slp.openProductDetailsByName
          params:
            - name: productName
              string: ${qaa_od019_product_2_name}
      - executeFunction:
          name: mx.functions.pdp.assertPageDisplayed
      - executeFunction:
          name: mx.functions.pdp.assertCorrectProductDisplayed
          params:
            - name: expectedProductName
              string: ${qaa_od019_product_2_name}
      - executeFunction:
          name: mx.functions.pdp.tapAddToList
      - executeFunction:
          name: mx.functions.add-to-list-popup.assertPageDisplayed
      - executeFunction:
          name: mx.flows.od.list.createCustomList
          params:
            - name: newListName
              string: mx.data.qaa.sanity.od-019.listName2
      - executeFunction:
          name: mx.functions.pdp.tapClose

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 11: GO TO MY ITEMS AND SELECT LISTS - PREVIOUSLY CREATED LIST IS DISPLAYED (LIST 2)
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 11: GO TO MY ITEMS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.bottom-menu.tapProductsAndLists
      - executeFunction:
          name: mx.functions.products-and-lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed
      - executeFunction:
          name: mx.functions.products-and-lists.tapLists
      - executeFunction:
          name: mx.functions.lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.lists.assertListDisplayed
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName2

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 12: OPEN LIST - PRODUCT PREVIOUSLY ADDED TO LIST 2 IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 12: OPEN LIST (2).'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.lists.openList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName2
      - executeFunction:
          name: mx.functions.list.assertCorrectListOpened
          params:
            - name: expectedListName
              string: mx.data.qaa.sanity.od-019.listName2
      - executeFunction:
          name: mx.functions.list.assertProductListed
          params:
            - name: productName
              string: ${qaa_od019_product_2_name}

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 13: SEARCH PRODUCTS - SLP SCREEN IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 13: SEARCH PRODUCTS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.list.tapBack
      - executeFunction:
          name: mx.flows.od.search.performSuccessfulSearch
          params:
            - name: searchTerm
              string: mx.data.qaa.sanity.od-019.searchTerm2

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 14: OPEN PDP - PDP SCREEN IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 14: OPEN PDP.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.slp.getProductNameWithoutSpecialBadges #--RETURNS--${returnedProductNameWithoutSpecialBadges}-->
          params:
            - name: previousList
              string: 'null'
      - storeIn:
          key: qaa_od019_product_3_name
          value: ${returnedProductNameWithoutSpecialBadges}
          # [VARIABLE] Product Name 3 saved in ${qaa_od019_product_3_name}
      - executeFunction:
          name: mx.functions.slp.openProductDetailsByName
          params:
            - name: productName
              string: ${qaa_od019_product_3_name}
      - executeFunction:
          name: mx.functions.pdp.assertPageDisplayed
      - executeFunction:
          name: mx.functions.pdp.assertCorrectProductDisplayed
          params:
            - name: expectedProductName
              string: ${qaa_od019_product_3_name}

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 15: ADD PRODUCT TO NEW LIST (LIST 3) FROM SLP - PRODUCT SHOULD BE ADDED TO LIST
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 15: ADD PRODUCT TO NEW LIST (LIST 3) FROM SLP.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.pdp.tapAddToList
      - executeFunction:
          name: mx.functions.add-to-list-popup.assertPageDisplayed
      - executeFunction:
          name: mx.flows.od.list.createCustomList
          params:
            - name: newListName
              string: mx.data.qaa.sanity.od-019.listName3
      - executeFunction:
          name: mx.functions.pdp.tapClose

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 16: GO TO MY ITEMS AND SELECT LISTS - PREVIOUSLY CREATED LIST IS DISPLAYED (LIST 3)
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 16: GO TO MY ITEMS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.bottom-menu.tapProductsAndLists
      - executeFunction:
          name: mx.functions.products-and-lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed
      - executeFunction:
          name: mx.functions.products-and-lists.tapLists
      - executeFunction:
          name: mx.functions.lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.lists.assertListDisplayed
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName3

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 17: OPEN LIST - PRODUCT PREVIOUSLY ADDED TO LIST 3 IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 17: OPEN LIST (3).'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.lists.openList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName3
      - executeFunction:
          name: mx.functions.list.assertCorrectListOpened
          params:
            - name: expectedListName
              string: mx.data.qaa.sanity.od-019.listName3
      - executeFunction:
          name: mx.functions.list.assertProductListed
          params:
            - name: productName
              string: ${qaa_od019_product_3_name}
      - executeFunction:
          name: mx.functions.list.tapBack

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 18: OPEN LIST 1 AND REMOVE ALL PRODUCTS - PRODUCT IS REMOVED SUCCESSFULLY
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 18: OPEN LIST 1 AND REMOVE ALL PRODUCTS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA
      
      - executeFunction:
         name: mx.functions.lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.lists.openList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName1
      - executeFunction:
          name: mx.functions.list.assertCorrectListOpened
          params:
            - name: expectedListName
              string: mx.data.qaa.sanity.od-019.listName1
      - executeFunction:
          name: mx.flows.od.list.deleteProductFromList
          params:
            - name: productName
              string: ${qaa_od019_product_1_name}

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 19: CLOSE/REOPEN LIST 1 - PREVIOUSLY DELETED PRODUCT IS NOT DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 19: CLOSE/REOPEN LIST 1.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.list.tapBack
      - executeFunction:
         name: mx.functions.lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.lists.openList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName1
      - executeFunction:
          name: mx.functions.list.assertCorrectListOpened
          params:
            - name: expectedListName
              string: mx.data.qaa.sanity.od-019.listName1
      - executeFunction:
          name: mx.functions.list.assertListIsEmpty

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 20: DELETE LIST 1 - LIST 1 IS DELETED SUCCESSFULLY
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 20: DELETE LIST 1.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.flows.od.list.deleteCustomList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName1

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 21: CLOSE/REOPEN MY ITEMS - LIST 1 REMAINS DELETED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 21: CLOSE/REOPEN MY ITEMS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.bottom-menu.tapHome
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed
      - executeFunction:
          name: mx.functions.home.assertPageDisplayed
      - executeFunction:
          name: mx.functions.bottom-menu.tapProductsAndLists
      - executeFunction:
          name: mx.functions.products-and-lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed
      - executeFunction:
          name: mx.functions.products-and-lists.tapLists
      - executeFunction:
          name: mx.functions.lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.lists.assertListNotDisplayed
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName1
      - sleep:
          duration: 3000

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 22: OPEN LIST 2 - LIST 2 IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 22: OPEN LIST 2.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.lists.openList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName2
      - executeFunction:
          name: mx.functions.list.assertCorrectListOpened
          params:
            - name: expectedListName
              string: mx.data.qaa.sanity.od-019.listName2

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 23: DELETE LIST 2 - LIST 2 IS DELETED SUCCESSFULLY
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 23: DELETE LIST 2.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.flows.od.list.deleteCustomList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName2

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 24: CLOSE/REOPEN MY ITEMS - LIST 2 REMAINS DELETED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 24: CLOSE/REOPEN MY ITEMS.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.bottom-menu.tapHome
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed
      - executeFunction:
          name: mx.functions.home.assertPageDisplayed
      - executeFunction:
          name: mx.functions.bottom-menu.tapProductsAndLists
      - executeFunction:
          name: mx.functions.products-and-lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed
      - executeFunction:
          name: mx.functions.products-and-lists.tapLists
      - executeFunction:
          name: mx.functions.lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.lists.assertListNotDisplayed
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName2
      - sleep:
          duration: 3000

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 25: OPEN LIST 3 - LIST 3 IS DISPLAYED ALONG WITH THE ADDED PRODUCT
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 25: OPEN LIST 3.'
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.lists.openList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName3
      - executeFunction:
          name: mx.functions.list.assertCorrectListOpened
          params:
            - name: expectedListName
              string: mx.data.qaa.sanity.od-019.listName3
      - executeFunction:
          name: mx.functions.list.assertProductListed
          params:
            - name: productName
              string: ${qaa_od019_product_3_name}

  #--------------------------------------------------------------------------------------------------------------------
    
      ## STEP 26: ADD PRODUCT TO CART - PRODUCT IS ADDED TO CART
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 26: ADD PRODUCT TO CART.'
            - name: squadNames
              string: PRE-PURCHASE | QAA
              
      - executeFunction:
          name: mx.functions.list.addProductToCart
          params:
            - name: productName
              string: ${qaa_od019_product_3_name}
      - storeIn:
          key: OD_019_IS_CART_EMPTY
          value: false
      - executeFunction:
          name: mx.functions.list.assertProductAddedToCart
      - executeFunction:
          name: mx.functions.list.getProductPrice
      - executeFunction:
          name: mx.functions.list.getProductQuantityAsPieces

      - storeIn:
          key: qaa_od019_product_3_price
          value: ${returnedProductPrice}
          # [VARIABLE] Price of product 3 saved in ${qaa_od019_product_3_price}
      - storeIn:
          key: qaa_od019_product_3_added_quantity
          value: ${returnedProductQuantityAsPieces}
          # [VARIABLE] Added quantity of product 3 saved in ${qaa_od019_product_3_added_quantity}
      - storeIn:
          key: qaa_od019_product_3_subtotal
          value: ${qaa_od019_product_3_price}
          # [VARIABLE] Subtotal price of product 3 saved in ${qaa_od019_product_3_subtotal}
      - storeIn:
          key: qaa_od019_total_products_count
          value: ${qaa_od019_product_3_added_quantity}
          # [VARIABLE] Total products count saved in ${qaa_od019_total_products_count}
      - storeIn:
          key: qaa_od019_custom_list_estimated_total
          value: ${qaa_od019_product_3_price}
          # [VARIABLE] Estimated Total from Favorites list saved in ${qaa_od019_custom_list_estimated_total}

      - executeFunction:
          name: mx.functions.top-menu.assertCartQuantity
          params:
            - name: expectedQuantity
              string: ${qaa_od019_total_products_count}
      - executeFunction:
          name: mx.functions.list.assertEstimatedTotal
          params:
            - name: expectedEstimatedTotal
              string: ${qaa_od019_custom_list_estimated_total}

  #--------------------------------------------------------------------------------------------------------------------
      
      ## STEP 27: GO TO CART - PRODUCT FROM LIST 3 IS ADDED AND CART VALIDATIONS.
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 27: GO TO CART.'
            - name: squadNames
              string: PURCHASE | QAA

      - executeFunction:
          name: mx.functions.top-menu.tapCartIcon
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed
      - executeFunction:
          name: mx.functions.cart.assertPageDisplayed
      - executeFunction:
          name: mx.functions.cart.assertProductsCountInSubtotalLabel
          params:
            - name: expectedProductsCount
              string: ${qaa_od019_total_products_count}
      
  # Product 3 assertions...............................................................................................
      - log: "Product 3 assertions..."
      - executeFunction:
          name: mx.flows.od.cart.quickPerformProductAssertions #--[RETURNS]--${returnedProductType}-->
          params:
            - name: productName
              string: ${qaa_od019_product_3_name}
            - name: productType
              string: 'null'
            - name: expectedQuantity
              string: ${qaa_od019_product_3_added_quantity}
            - name: expectedWeightQuantity
              string: 'null'
            - name: expectedUnitPrice
              string: ${qaa_od019_product_3_price}
            - name: expectedSubtotal
              string: ${qaa_od019_product_3_subtotal}
      - storeIn:
          key: qaa_od019_product_3_type
          value: ${returnedProductType}
          # [VARIABLE] Type of product 3 saved in ${qaa_od019_product_3_type}

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 28: CLICK ON RESERVE A SLOT - BOOK SLOT PAGE IS DISPLAYED
      ## STEP 29: SELECT HOME DELIVERY AND A TIME SLOT - FINAL CART VALIDATIONS
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEPS 28-29: RESERVE A SLOT (HOME DELIVERY)'
            - name: squadNames
              string: PURCHASE | QAA

      - executeFunction:
          name: mx.flows.od.cart.reserveSlot
          params:
            - name: deliveryMethod
              string: mx.data.qaa.sanity.od-019.deliveryMethod
            - name: addressName
              string: mx.data.qaa.sanity.od-019.userAddressName
            - name: deliveryPlaceAction
              string: 'Change'
            - name: slotDate
              string: 'dayAfterTomorrow'
            - name: slotTime
              string: 'lastAvailable'
      
  # Retrieving Home Delivery Address data for future validations.......................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'Step 28-29 (A): Retrieving Home Delivery Address data for future validations...'
            - name: squadNames
              string: PURCHASE | QAA
      - storeIn:
          key: qaa_od019_selected_user_address_street_name
          value: ${returnedStreetName}
          # [VARIABLE] Street name from selected address saved in ${qaa_od019_selected_user_address_street_name}
      - storeIn:
          key: qaa_od019_selected_user_address_exterior_number
          value: ${returnedExteriorNumber}
          # [VARIABLE] Exterior Number from selected address saved in ${qaa_od019_selected_user_address_exterior_number}
      - storeIn:
          key: qaa_od019_selected_user_address_city
          value: ${returnedCity}
          # [VARIABLE] City from selected address saved in ${qaa_od019_selected_user_address_city}
      - storeIn:
          key: qaa_od019_selected_user_address_state
          value: ${returnedState}
          # [VARIABLE] State from selected address saved in ${qaa_od019_selected_user_address_state}
      - storeIn:
          key: qaa_od019_selected_user_address_zip_code
          value: ${returnedZipCode}
          # [VARIABLE] Zip Code from selected address saved in ${qaa_od019_selected_user_address_zip_code}
      
  # Retrieving values for totals Assertions............................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'Step 28-29 (B): Retrieving values for totals Assertions...'
            - name: squadNames
              string: PURCHASE | QAA
      - storeIn:
          key: qaa_od019_delivery_fee
          value: mx.data.qaa.sanity.od-019.deliveryFee # <-- Business rule
          # [VARIABLE] Delivery fee saved in ${qaa_od019_delivery_fee}
      - storeIn:
          key: qaa_od019_cart_subtotal
          value: ${qaa_od019_product_3_price}
          # [VARIABLE] Cart subtotal saved in ${qaa_od019_cart_subtotal}
      
  # Validating totals and continuing to Review-Order...................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'Step 28-29 (C): Validating totals and continuing to Review-Order...'
            - name: squadNames
              string: PURCHASE | QAA
      - executeFunction:
          name: mx.flows.od.cart.assertTotals # --RETURNS--${returnedEstimatedTotal}-->
          params:
            - name: expectedDeliveryFee
              string: ${qaa_od019_delivery_fee}
            - name: expectedSubtotal
              string: ${qaa_od019_cart_subtotal}
      - executeFunction:
          name: mx.functions.cart.tapContinue
      - executeFunction:
          name: mx.functions.missing-something.continueWithoutSelectionIfPageDisplayed
      - executeFunction:
          name: mx.functions.review-order.assertPageDisplayed

    #------------------------------------------------------------------------------------------------------------------
    
      ## STEP 30: OPEN REVIEW ORDER PAGE - REVIEW ORDER ASSERTIONS.
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 30: OPEN REVIEW ORDER PAGE.'
            - name: squadNames
              string: PURCHASE | QAA

    # Running Delivery Information Assertions..........................................................................
      - log: "Running Delivery Information Assertions..."
      - executeFunction:
          name: mx.flows.od.review-order.assertDeliveryInformation
          params:
            - name: deliveryMethod
              string: mx.data.qaa.sanity.od-019.deliveryMethod
            - name: expectedDaySlot
              string: ${returnedSelectedDaySlot}
            - name: expectedTimeSlot
              string: ${returnedSelectedTimeSlot}
            - name: expectedStoreOrHomeName
              string: mx.data.qaa.sanity.od-019.userAddressName
            - name: expectedStoreOrHomeAddress
              string: 'null'
            - name: expectedUserStreet
              string: ${qaa_od019_selected_user_address_street_name}
            - name: expectedUserExteriorNumber
              string: ${qaa_od019_selected_user_address_exterior_number}
            - name: expectedUserCity
              string: ${qaa_od019_selected_user_address_city}
            - name: expectedUserState
              string: ${qaa_od019_selected_user_address_state}
            - name: expectedUserZipCode
              string: ${qaa_od019_selected_user_address_zip_code}
      - executeFunction:
          name: mx.flows.od.review-order.enterTestOrderDisclaimer
  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 31: SELECT PAY AT DELIVERY - PAY AT DELIVERY METHOD IS SELECTED AND PAYMENT METHOD ASSERTIONS
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 31: SELECT PAY AT DELIVERY.'
            - name: squadNames
              string: PURCHASE | QAA
      
  # Verifying Pay at Delivery is selected..............................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'Step 31 (A): Verifying Pay at Delivery is selected...'
            - name: squadNames
              string: PURCHASE | QAA
      - executeFunction:
          name: mx.functions.review-order.scrollDownToSection
          params:
            - name: sectionName
              string: "Pago"
      - executeFunction:
          name: mx.flows.od.review-order.selectPayAtDeliveryMethodIfNotSelected
          params:
            - name: payAtDeliveryOption
              string: mx.data.qaa.sanity.od-019.payAtDeliveryFormat
            
  # Entering phone number if needed....................................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'Step 31 (B): Entering phone number if needed...'
            - name: squadNames
              string: PURCHASE | QAA
      - executeFunction:
          name: mx.functions.review-order.scrollDownToSection
          params:
            - name: sectionName
              string: "Número telefónico"
      - executeFunction:
          name: mx.flows.od.review-order.enterCellphoneNumber
          params:
            - name: userPhoneNumber
              string: mx.data.qaa.sanity.od-019.userPhoneNumber

  # Validating Totals information......................................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'Step 31 (C): Validating Totals information...'
            - name: squadNames
              string: PURCHASE | QAA
      - executeFunction:
          name: mx.functions.review-order.scrollDownToSection
          params:
            - name: sectionName
              string: Total
      - executeFunction:
          name: mx.flows.od.review-order.assertTotalsInformation #--RETURNS--${returnedEstimatedTotal}-->
          params:
            - name: expectedSubtotalProductsCount
              string: ${qaa_od019_total_products_count}
            - name: expectedSubtotal
              string: ${qaa_od019_cart_subtotal}
            - name: assertDeliveryFee
              string: 'true'
            - name: expectedDeliveryFee
              string: ${qaa_od019_delivery_fee}
      - storeIn:
          key: qaa_od019_final_total
          value: ${returnedEstimatedTotal}
          # [VARIABLE] Final Total saved in ${qaa_od019_final_total}

  #--------------------------------------------------------------------------------------------------------------------

    ## STEP 32: PLACE ORDER - ORDER CONFIRMATION ASSERTIONS
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: 'STEP 32: PLACE ORDER.'
            - name: squadNames
              string: PURCHASE | QAA

      - executeFunction:
          name: mx.functions.review-order.tapPlaceOrder
      - storeIn:
          key: qaa_od019_ordered_date
          value: ${returnedOrderedDate}
          # [VARIABLE] Ordered Date saved in ${qaa_od019_ordered_date}
      - sleep:
          duration: 10000
      - storeIn:
          key: OD_019_IS_CART_EMPTY
          value: true

  # Order Confirmation assertions......................................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "Step 32 (A): Order Confirmation assertions..."
            - name: squadNames
              string: PURCHASE | QAA
      - executeFunction:
          name: mx.flows.od.order-confirmation.assertConfirmation
          params:
            - name: expectedTotal
              string: ${qaa_od019_final_total}
            - name: expectedDaySlot
              string: ${returnedSelectedDaySlot}
            - name: expectedTimeSlot
              string: ${returnedSelectedTimeSlot}
            - name: expectedProductsCount
              string: ${qaa_od019_total_products_count}
            - name: expectedDeliveryMethod
              string: mx.data.qaa.sanity.od-019.deliveryMethod
            - name: expectedHomeAddressName
              string: mx.data.qaa.sanity.od-019.userAddressName
            - name: expectedUserStreet
              string: ${qaa_od019_selected_user_address_street_name}
            - name: expectedUserExteriorNumber
              string: ${qaa_od019_selected_user_address_exterior_number}
            - name: expectedUserCity
              string: ${qaa_od019_selected_user_address_city}
            - name: expectedUserState
              string: ${qaa_od019_selected_user_address_state}
            - name: expectedUserZipCode
              string: ${qaa_od019_selected_user_address_zip_code}
      
  # Retrieving Order Number............................................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "Step 32 (B): Retrieving Order Number..."
            - name: squadNames
              string: PURCHASE | QAA
      - executeFunction:
          name: mx.functions.order-confirmation.getOrderNumber
      - storeIn:
          key: qaa_od019_order_number
          value: ${returnedOrderNumber}
          # [VARIABLE] Order number saved in ${qaa_od019_order_number}"

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 33: HIT 'DESCUBRIR MAS PRODUCTOS' BUTTON - HOME PAGE IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "STEP 33: HIT 'DESCUBRIR MAS PRODUCTOS' BUTTON."
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.order-confirmation.tapFindMoreProducts
      - executeFunction:
          name: mx.functions.bottom-menu.tapHome
      - executeFunction:
          name: mx.functions.home.assertPageDisplayed
          
  #--------------------------------------------------------------------------------------------------------------------
    
      ## STEP 34: GO TO PROFILE AND SELECT 'PEDIDOS' - ORDERS HISTORY IS DISPLAYED AND ORDERS ARE DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "STEP 34: GO TO PROFILE AND SELECT 'PEDIDOS'."
            - name: squadNames
              string: CUSTOMER | QAA

      - executeFunction:
          name: mx.functions.bottom-menu.tapAccount
      - executeFunction:
          name: mx.functions.account.assertPageDisplayed

  # Performing Orders History assertions...............................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "Step 34 (A): Performing Orders History assertions..."
            - name: squadNames
              string: POST-PURCHASE | QAA
      - executeFunction:
          name: mx.functions.account.openOrdersHistory
      - executeFunction:
          name: mx.flows.od.orders-history.assertOrder
          params:
            - name: orderNumber
              string: ${qaa_od019_order_number}
            - name: expectedDeliveryMethod
              string: mx.data.qaa.sanity.od-019.deliveryMethod
            - name: expectedTotal
              string: ${qaa_od019_final_total}
            - name: expectedBanner
              string: mx.data.qaa.sanity.od-019.storeBanner
            - name: expectedDaySlot
              string: ${returnedSelectedDaySlot}
            - name: expectedTimeSlot
              string: ${returnedSelectedTimeSlot}
            - name: expectedOrderStatus
              string: mx.data.qaa.sanity.od-019.expectedOrderStatus
            - name: expectedProductsCount
              string: ${qaa_od019_total_products_count}

    #------------------------------------------------------------------------------------------------------------------

      ## STEP 35: SELECT THE NEWEST PLACED ORDER - ORDER ID IS DISPLAYED AND ORDER-CONFIRMATION ASSERTIONS
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "STEP 35: SELECT THE NEWEST PLACED ORDER."
            - name: squadNames
              string: POST-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.orders-history.openOrder
          params:
            - name: orderNumber
              string: ${qaa_od019_order_number}
      - sleep:
          duration: 5000

  # Performing Order Details assertions................................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "Step 35 (A): Performing Order Details assertions..."
            - name: squadNames
              string: POST-PURCHASE | QAA
      - executeFunction:
          name: mx.flows.od.order-details.assertDetailsWithoutAddressAndTotalsInformation
          params:
            - name: orderNumber
              string: ${qaa_od019_order_number}
            - name: expectedOrderedDate
              string: ${qaa_od019_ordered_date}
            - name: expectedDeliveryMethod
              string: mx.data.qaa.sanity.od-019.deliveryMethod
            - name: expectedOrderStatus
              string: mx.data.qaa.sanity.od-019.expectedOrderStatus
            - name: expectedBanner
              string: mx.data.qaa.sanity.od-019.storeBanner
            - name: expectedDaySlot
              string: ${returnedSelectedDaySlot}
            - name: expectedTimeSlot
              string: ${returnedSelectedTimeSlot}
            - name: expectedProductsCount
              string: ${qaa_od019_total_products_count}

  # Performing Order Details - Home Delivery assertions................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "Step 35 (B): Performing Order Details - Home Delivery assertions..."
            - name: squadNames
              string: POST-PURCHASE | QAA
      - executeFunction:
          name: mx.functions.order-details.assertHomeDeliveryAddressName
          params:
            - name: expectedHomeAddressName
              string: mx.data.qaa.sanity.od-019.userAddressName
      - executeFunction:
          name: mx.functions.order-details.assertHomeDeliveryAddressByIndividualValues
          params:
            - name: streetName
              string: ${qaa_od019_selected_user_address_street_name}
            - name: exteriorNumber
              string: ${qaa_od019_selected_user_address_exterior_number}
            - name: city
              string: ${qaa_od019_selected_user_address_city}
            - name: state
              string: ${qaa_od019_selected_user_address_state}
            - name: zipCode
              string: ${qaa_od019_selected_user_address_zip_code}

  # Performing assertions for Product 1................................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "Step 35 (C): Performing assertions for Product 1..."
            - name: squadNames
              string: POST-PURCHASE | QAA
      - executeFunction:
          name: mx.functions.order-details.expandProductsDetailsIfNotExpanded
      - executeFunction:
          name: mx.flows.od.order-details.assertProductDetails
          params:
            - name: productName
              string: ${qaa_od019_product_3_name}
            - name: expectedPrice
              string: ${qaa_od019_product_3_price}
            - name: expectedSubtotal
              string: ${qaa_od019_product_3_subtotal}
            - name: productType
              string: ${qaa_od019_product_3_type}
            - name: expectedOrderedQuantityAsPieces
              string: ${qaa_od019_product_3_added_quantity}
            - name: expectedOrderedQuantityAsWeight
              string: ""

  # Performing Totals assertions.......................................................................................
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "Step 35 (D): Performing Totals Assertions..."
            - name: squadNames
              string: POST-PURCHASE | QAA
      - executeFunction:
          name: mx.functions.order-details.scrollToBottom
      - executeFunction:
          name: mx.flows.od.order-details.assertTotals
          params:
            - name: expectedPaymentMethod
              string: mx.data.qaa.sanity.od-019.paymentMethod
            - name: expectedDeliveryFee
              string: ${qaa_od019_delivery_fee}
            - name: expectedSubtotal
              string: ${qaa_od019_cart_subtotal}

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 36: GO TO MY ITEMS - MY ITEMS PAGE IS DISPLAYED
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "STEP 36: GO TO MY ITEMS."
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.order-details.tapBack
      - executeFunction:
          name: mx.functions.orders-history.tapBack
      - executeFunction:
          name: mx.functions.bottom-menu.tapProductsAndLists
      - executeFunction:
          name: mx.functions.products-and-lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.utils.closeBlackPopupIfDisplayed

  #--------------------------------------------------------------------------------------------------------------------

      ## STEP 37: SELECT LISTS AND DELETE LIST 3 - LIST 3 IS DELETED SUCCESSFULLY
      - executeFunction:
          name: mx.squad-reporting.setTestCaseStep
          params:
            - name: step
              string: "STEP 37: SELECT LISTS AND DELETE LIST 3."
            - name: squadNames
              string: PRE-PURCHASE | QAA

      - executeFunction:
          name: mx.functions.products-and-lists.tapLists
      - executeFunction:
         name: mx.functions.lists.assertPageDisplayed
      - executeFunction:
          name: mx.functions.lists.openList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName3
      - executeFunction:
          name: mx.functions.list.assertCorrectListOpened
          params:
            - name: expectedListName
              string: mx.data.qaa.sanity.od-019.listName3
      - executeFunction:
          name: mx.flows.od.list.deleteCustomList
          params:
            - name: listName
              string: mx.data.qaa.sanity.od-019.listName3
      - storeIn:
          key: OD_019_IS_LISTS_PAGE_EMPTY
          value: true

       #----------------------------------------------------------------------------------------------------------------

      - storeIn:
          key: OD_019_SUCCESSFUL_EXECUTION
          value: true

      - log: "TEST END: ${__SQUAD_REPORTING_TEST_CASE_NAME}"

      #####################################################################################################################

  - name: Before
    before: true
    flow:
      - log: "BEFORE SCENARIO START: Initial Config..."

      - executeFunction:
          name: mx.squad-reporting.setTestCaseName
          params:
            - name: testCaseName
              string: GMX_OD_Sanity_PROD_Android_019

      - log:
          message: "WORKAROUND: RELAUNCHING APP TO FIX ISSUE REGARDING INTERNAL APP FLAGS"
          color: YELLOW
      - executeFunction:
          name: mx.functions.utils.relaunchApp
      - storeIn:
          key: selectedStore
          value: mx.data.qaa.sanity.od-019.storeName
      - storeIn:
          key: storeName
          value: mx.data.qaa.sanity.od-019.storeName
      - storeIn:
          key: OD_019_IS_CART_EMPTY
          value: true
      - storeIn:
          key: OD_019_SUCCESSFUL_EXECUTION
          value: false
      - log: "BEFORE SCENARIO END"

  #####################################################################################################################

  - name: After
    after: true
    flow:
      - log: "AFTER SCENARIO START: Test Data Reset..."

      - executeFunction:
          name: mx.squad-reporting.logTestCaseFailure
          params:
            - name: testCaseExecutionStatus
              string: ${OD_019_SUCCESSFUL_EXECUTION}

      - if:
          condition: ${OD_019_SUCCESSFUL_EXECUTION} != true
          then:
            - log:
                message: "Main Failed: Resetting data for the next execution if necessary..."
                color: CYAN
            - executeFunction:
                name: mx.flows.od.after-scenario-exclusive.emptyCartAndDeleteCustomLists
                params:
                  - name: userEmail
                    string: mx.data.qaa.sanity.od-019.userEmail
                  - name: userPassword
                    string: mx.data.qaa.sanity.od-019.userPassword
                  - name: isCartEmpty
                    string: ${OD_019_IS_CART_EMPTY}
                  - name: isListPageEmpty
                    string: ${OD_019_IS_LISTS_PAGE_EMPTY}
            - failTest:
                message: "Main Scenario Failed: the After Scenario will propagate the failure to ensure SauceLabs run shows correct execution status."
          else:
            - log:
                message: "Main Scenario ended Successfully, no need to reset data."
                color: CYAN
      - log: "AFTER SCENARIO END"
