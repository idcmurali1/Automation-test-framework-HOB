#======================================================================================================================
#    AUTHOR: Rodrigo Pacheco C. (vn53p0i)
#   CREATED: Feb/16/2024
#  REVISION: ---
#
#  Copyright Â© 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.department-l3.assertPageDisplayed
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.ea.department-l3.resultsText
          then:
            - executeFunction:
                name: mx.functions.utils.scrollToTop
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.department-l3.resultsText
              - identifier: mx.mappings.ea.department-l3.resultsSection
              - identifier: mx.mappings.ea.department-l3.backButton
          then:
            - log:
                message: "Assertion Succeeded: Department L3 is displayed."
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: Department L3 is not displayed."
      - log:
          message: "End function: department-l3.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function opens the first PDP available, it works better if this function runs right after
  #                 opening department-l3. It ignores if product has any type of promotion or not. It also retrieves the
  #                 name of the selected product.
  # RETURNS: ${returnedProductName}
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.department-l3.openFirstAvailablePDP
    platform: ios
    flow:
      - getString:
          identifier: mx.mappings.ea.department-l3.firstAvailableProductName
          storeIn: productName
      - click:
          identifier: mx.mappings.ea.department-l3.productImageByName # <--VAR--${productName}
      - storeIn:
          key: returnedProductName
          value: ${productName}
      - log:
          message: "Returned Product Name: '${returnedProductName}'"
          color: GREEN_BOLD
      - log:
          message: "End function: department-l3.openFirstAvailablePDP"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.department-l3.tapSortAndFilterButton
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.ea.department-l3.sortAndFilterButton
      - log:
          message: "End function: department-l3.tapSortAndFilterButton"
          color: BLUE
