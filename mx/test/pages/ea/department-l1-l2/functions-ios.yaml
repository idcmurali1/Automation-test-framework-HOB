#======================================================================================================================
#    AUTHOR: Rodrigo Pacheco C. (vn53p0i)
#   CREATED: Feb/16/2024
#  REVISION: ---
#
#  Copyright Â© 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # DESCRIPTION: This method asserts that a Sub-Department Screen is displayed
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.department-l1-l2.assertPageDisplayed
    platform: ios
    flow:
      - sleep:
          duration: 8000
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.department-l1-l2.topContainersView
              - identifier: mx.mappings.ea.department-l1-l2.backButton
          then:
            - log:
                message: "Assertion Succeeded: Sub-Department screen is displayed"
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: Sub-Department screen is not displayed"
      - log:
          message: "End function: ea.department-l1-l2.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This function clicks on back button.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.department-l1-l2.openFirstAvailableCategory
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.ea.department-l1-l2.genericCategoryButton
          then:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.ea.department-l1-l2.genericCategoryButton
                wait: 1000
                scrollLimit: 10
                position: center
      - getString:
          identifier: mx.mappings.ea.department-l1-l2.genericCategoryButton
          attribute: label
          storeIn: categoryName
      - log:
          message: "First available category button found: '${categoryName}'"
          color: GREEN_BOLD
      - click:
          identifier: mx.mappings.ea.department-l1-l2.categoryButtonByName #<--VAR--${categoryName}--
      - log:
          message: "End function: ea.department-l1-l2.openFirstAvailableCategory"
          color: BLUE
