#======================================================================================================================
#  AUTHOR: Osmar Juárez (vn56dce)
#  CREATED: Oct/30/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # DESCRIPTION: Function to assert that invoice form page is displayed
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.assertPageDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.add-invoice-form.addInvoiceInfoTitle
            - identifier: mx.mappings.ea.add-invoice-form.closeButton
            - identifier: mx.mappings.ea.add-invoice-form.requiredFieldLabel
            - identifier: mx.mappings.ea.add-invoice-form.taxDataLabel
      - log:
          message: "Assertion Succeeded: Invoice Form Displayed Correctly"
          color: CYAN
      - log:
          message: "End function: ea.add-invoice-form.assertPageDisplayed"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This select/clicks Moral Person radio button.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.tapMoralPerson
    platform: android
    flow:
      - click: 
          identifier: mx.mappings.ea.add-invoice-form.moralPersonRadioButton
      - log:
          message: "End function: ea.add-invoice-form.tapMoralPerson"
          color: BLUE  

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enters tax company's name.
  # PARAM: ${taxCompanyName} [Mandatory] Company's name.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterTaxCompanyName
    platform: android
    flow:
      - log:
          message: "Tax Company's name: '${taxCompanyName}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.taxCompanyNameField
          string: ${taxCompanyName}
          clickFirst: false
      - log:
          message: "End function: ea.add-invoice-form.enterTaxCompanyName"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enters tax payer id
  # PARAM: ${taxPayerId} [Mandatory] Alfanumeric Tax Payer Id (RFC).
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterTaxPayerId
    platform: android
    flow:
      - log:
          message: "Tax Payer's id: '${taxPayerId}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.taxPayerIdField
          string: ${taxPayerId}
          clickFirst: false
      - log:
          message: "End function: ea.add-invoice-form.enterTaxPayerId"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enter tax regime in the spinner's field
  # PARAM: ${taxRegime} [Mandatory] tax regime's name.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterTaxRegime
    platform: android
    flow:
      - log:
          message: "Tax Regime's name: '${taxRegime}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.taxRegimeSpinnerFiled
          string: ${taxRegime}
          clickFirst: true
      - executeFunction: 
          name: mx.functions.utils.clickByCoordinatesRelativeToElement
          params:
            - name: relativeElement
              string: mx.mappings.ea.add-invoice-form.taxRegimeSpinnerFiled
            - name: modifyValueX
              string: '+100'
            - name: modifyValueY
              string: '+250'
      - log:
          message: "End function: ea.add-invoice-form.enterTaxRegime"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enters the CFDI's type in the spinner's field 
  # PARAM: ${cfdiType} [Mandatory] CFDI's type for invoice
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterCfdiType
    platform: android
    flow:
      - log:
          message: "CFDI Type's name: '${cfdiType}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.cfdiSpinnerFiled
          string: ${cfdiType}
          clickFirst: true
      - executeFunction: 
          name: mx.functions.utils.clickByCoordinatesRelativeToElement
          params:
            - name: relativeElement
              string: mx.mappings.ea.add-invoice-form.cfdiSpinnerFiled
            - name: modifyValueX
              string: '+100'
            - name: modifyValueY
              string: '+250'
      - log:
          message: "End function: ea.add-invoice-form.enterCfdiType"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enters email in text field.
  # PARAM: ${invoiceEmail} [Mandatory] email linked to the invoice info 
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterEmail
    platform: android
    flow:
      - log:
          message: "Invoice Email: '${invoiceEmail}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.emailField
          string: ${invoiceEmail}
          clickFirst: false
      - log:
          message: "End function: ea.add-invoice-form.enterEmail"
          color: BLUE  

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enters zip code in element.
  # PARAM: ${invoiceZipCode} [Mandatory] numeric zip code
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterZipCode
    platform: android
    flow:
      - log:
          message: "Invoice Zip Code: '${invoiceZipCode}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.zipCodeField
          string: ${invoiceZipCode}
          clickFirst: false
      - log:
          message: "End function: ea.add-invoice-form.enterZipCode"
          color: BLUE  

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enters street address's name.
  # PARAM: ${invoiceStreetName} [Mandatory] Street's name 
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterStreetName
    platform: android
    flow:
      - log:
          message: "Invoice Address Street's name: '${invoiceStreetName}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.streetAddressField
          string: ${invoiceStreetName}
          clickFirst: false
      - log:
          message: "End function: ea.add-invoice-form.enterStreetName"
          color: BLUE  

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enters outdoor number's address
  # PARAM: ${invoiceOutdoorNumber} [Mandatory] Outdoor number's address 
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterOutdoorNumberAddress
    platform: android
    flow:
      - log:
          message: "Invoice Address outdoor number: '${invoiceOutdoorNumber}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.outdoorNumberField
          string: ${invoiceOutdoorNumber}
          clickFirst: false
      - log:
          message: "End function: ea.add-invoice-form.enterOutdoorNumberAddress"
          color: BLUE  

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enter neighborhood's name in the spinner's field
  # PARAM: ${invoiceNeighborhood} [Mandatory] neighborhood's name.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterNeighborhoodName
    platform: android
    flow:
      - log:
          message: "Invoice Address Neighborhood's name: '${invoiceNeighborhood}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.neighborhoodSpinnerFiled
          string: ${invoiceNeighborhood}
          clickFirst: true
      - executeFunction: 
          name: mx.functions.utils.clickByCoordinatesRelativeToElement
          params:
            - name: relativeElement
              string: mx.mappings.ea.add-invoice-form.neighborhoodSpinnerFiled
            - name: modifyValueX
              string: '+100'
            - name: modifyValueY
              string: '+250'
      - log:
          message: "End function: ea.add-invoice-form.enterNeighborhoodName"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enter contry's code for phone number in the spinner's field
  # PARAM: ${invoiceCountryCodePhoneNumber} [Mandatory] contry's code.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterCountryCodePhoneNumber
    platform: android
    flow:
      - log:
          message: "Country Code Phone Number: '${invoiceCountryCodePhoneNumber}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.countryCodeSpinnerFiled
          string: ${invoiceCountryCodePhoneNumber}
          clickFirst: false
      - log:
          message: "End function: ea.add-invoice-form.enterContryCodePhoneNumber"
          color: BLUE
# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method enters phone number 
  # PARAM: ${invoicePhoneNumber} [Mandatory] phone number
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.enterPhoneNumber
    platform: android
    flow:
      - log:
          message: "Invoice Phone number: '${invoicePhoneNumber}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-invoice-form.phoneNumberField
          string: ${invoicePhoneNumber}
          clickFirst: false
      - log:
          message: "End function: ea.add-invoice-form.enterPhoneNumber"
          color: BLUE  

# -------------------------------------------------------------------------------------------------------------------
 
  # DESCRIPTION:  This method clicks on the Main Invoice Profile Check box
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.tapMainInvoiceProfileCheckBox
    platform: android
    flow: 
      - click: 
          identifier: mx.mappings.ea.add-invoice-form.mainInvoiceProfileCheckBox
      - log:
          message: "End function: ea.add-invoice-form.tapMainInvoiceProfileCheckBox"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method asserts the state of a check or unchecked (true or false) of the 'Main Invoice Profile' checkbox
  # PARAM: ${isChecked} [Mandatory] state flag set to 'true' or 'false'.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.assertStateMainInvoiceProfileCheckbox
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.add-invoice-form.mainInvoiceProfileCheckBoxIsChecked # <--PARAM--${isChecked}
      - log:
          message: "Assertion Succeeded: Main Invoice Profile Checkbox's state verified correctly"
          color: CYAN
      - log:
          message: "End function: ea.add-invoice-form.assertStateMainInvoiceProfileCheckbox"
          color: BLUE
      
# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method clicks on the Save button to confirm and save a new Invoice information
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.tapSave
    platform: android
    flow: 
      - click: 
          identifier: mx.mappings.ea.add-invoice-form.saveButton
      - log:
          message: "End function: ea.add-invoice-form.tapSave"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method asserts 3 fields auto filled after a zip code is entered in the form
  # PARAM: ${invoiceMunicipality} [Mandatory] municipality's name
  # PARAM: ${invoiceCity} [Mandatory] city's name
  # PARAM: ${invoiceState} [Mandatory] state's name
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.assertAutoFilledFieldsAddress
    platform: android
    flow:
      - log:
          message: "Expected Municipality: '${invoiceMunicipality}'"
          color: CYAN
      - log:
          message: "Expected City: '${invoiceCity}'"
          color: CYAN
      - log:
          message: "Expected State: '${invoiceState}'"
          color: CYAN
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.add-invoice-form.municipalityField # <--PARAM--${invoiceMunicipality}
            - identifier: mx.mappings.ea.add-invoice-form.cityField         # <--PARAM--${invoiceCity}
            - identifier: mx.mappings.ea.add-invoice-form.stateField        # <--PARAM--${invoiceState}
      - log:
          message: "Assertion Succeeded: Auto filled fields municipality, city and state validated correctly"
          color: CYAN
      - log:
          message: "End function: ea.add-invoice-form.assertAutoFilledFieldsAddress"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This method asserts no error messages are displayed in the form
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-invoice-form.assertNoErrorMessageDipslayed
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.login.create-account.textInputError
          then:
            - failTest:
                message: "Failed: One or more fields are not filled correctly"
          else:
            - log:
                message: "Assertion Succeeded: No error message was found present after saving invoice form"
                color: CYAN
            - log:
                message: "End function: ea.add-invoice-form.assertNoErrorMessageDipslayed"
                color: BLUE
      