#======================================================================================================================
#    AUTHOR: Rodrigo Pacheco C. (vn53p0i)
#   CREATED: Oct/16/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # NOTE: Use only for the first time after onboarding.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.home.assertPageLoaded
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.home.walmartLogo
              - identifier: mx.mappings.ea.home.pageContainer
              - identifier: mx.mappings.ea.home.anyInitialElement # Used this general mapping to avoid scrolling and improve function performance.
          then:
            - log:
                message: "Assertion succeeded: Home Page Loaded Correctly."
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: Page did not load."
      - log:
          message: "End function: home.assertPageLoaded"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.home.assertPageDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.home.walmartLogo
            - identifier: mx.mappings.ea.home.pageContainer
      - log:
          message: "Assertion succeeded: Home Page is Displayed."
          color: GREEN_BOLD
      - log:
          message: "End function: home.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.home.scrollToTop
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.ea.bottom-menu.tapHome
      - sleep:
          duration: 3000
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.ea.home.promotionsCarouselContainer
          then:
            - scroll:
                direction: up
                scrollLimit: 10
                wait: 1000
                untilIdentifier: mx.mappings.ea.home.promotionsCarouselContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.home.promotionsCarouselContainer
      - log:
          message: "End function: home.scrollUpToTop"
          color: BLUE
