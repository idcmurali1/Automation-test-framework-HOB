#======================================================================================================================
#    AUTHOR: Rodrigo Pacheco C. (vn53p0i)
#   CREATED: Feb/16/2024
#  REVISION: ---
#
#  Copyright Â© 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # DESCRIPTION: This method asserts that Department Screen is displayed
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.departments.assertPageDisplayed
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.departments.pageTitle
              - identifier: mx.mappings.ea.departments.departmentCategoryView
          then:
            - log:
                message: "Assertion Succeeded: Department screen is displayed"
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: Department screen is not displayed."
      - log:
          message: "End function: ea.departments.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------            

  # DESCRIPTION:  This function selects a department by name.
  # PARAM:        ${departmentName}   [Mandatory]   Name of the department to select.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.departments.selectDepartmentByName
    platform: ios
    flow:
      - log:
          message: "Selecting Department: '${departmentName}'"
          color: CYAN
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
          then:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
                wait: 1000
                position: center
                scrollLimit: 5
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
      - click:
          identifier: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
      - log:
          message: "Department: '${departmentName}' is selected."
          color: GREEN_BOLD
      - log:
          message: "End function: ea.departments.selectDepartmentByName"
          color: BLUE
