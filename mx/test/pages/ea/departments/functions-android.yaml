#======================================================================================================================
#  AUTHOR: Osmar Juárez (vn56dce)
#  CREATED: Nov/01/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # DESCRIPTION: This method asserts that Department Screen is displayed
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.departments.assertPageDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.departments.pageTitle
            - identifier: mx.mappings.ea.departments.departmentsRecyclerView
            - identifier: mx.mappings.ea.departments.departmentCategoryView
      - log:
          message: "Assertion Succeeded: Department screen is displayed"
          color: CYAN
      - log:
          message: "End function: ea.departments.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------            

  # DESCRIPTION: This function selects a department by position.
  # PARAM: ${departmentIndex} [Mandatory]  Position of the department starting from 1
  # AUTHOR: Osmar Juárez (vn56dce)
  # EDITOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.departments.selectDepartmentByIndex
    platform: android
    flow:
      - log:
          message: "Selecting the department on position: '${departmentIndex}'"
          color: CYAN
      - click:
          identifier: mx.mappings.ea.departments.departmentByIndex # <--PARAM--${departmentIndex}
      - log:
          message: "Department on position: ${departmentIndex} is selected!"
          color: GREEN_BOLD
      - log:
          message: "End function: ea.departments.selectDepartmentByIndex"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------            

  # DESCRIPTION:  This function selects a department by name.
  # PARAM:        ${departmentName}   [Mandatory]   Name of the department to select.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.departments.selectDepartmentByName
    platform: android
    flow:
      - log:
          message: "Selecting Department: '${departmentName}'"
          color: CYAN
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
          then:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
                wait: 1000
                position: center
                scrollLimit: 5
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
          else:
            - executeFunction:
                name: mx.functions.utils.positionElementAtTheTop
                params:
                  - name: elementToPositionUp
                    string: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
      - click:
          identifier: mx.mappings.ea.departments.departmentByName # <--PARAM--${departmentName}
      - log:
          message: "Department: '${departmentName}' is selected."
          color: GREEN_BOLD
      - log:
          message: "End function: ea.departments.selectDepartmentByName"
          color: BLUE
