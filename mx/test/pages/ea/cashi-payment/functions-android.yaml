#======================================================================================================================
#  AUTHOR: Osmar Juárez (vn56dce)
#  CREATED: Jan/31/2024
#  REVISION: ---
#
#  Copyright © 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:
# R2CODEIN CFG functionNamePrefix mx.functions.ea.cashi-payment

  # DESCRIPTION: Assert function to validate page is succesfully displayed with expected title name for page 'Pagar con Cashi'
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.cashi-payment.assertPageDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.cashi-payment.cashiIcon
            - identifier: mx.mappings.ea.cashi-payment.openCashiAppCardView
            - identifier: mx.mappings.ea.cashi-payment.payWithPhoneNumberCardView
            - identifier: mx.mappings.ea.cashi-payment.cancelCashiPayment
          timeout: 40000
      - verifyIdentifier:
          text:
            - identifier: mx.mappings.ea.cashi-payment.pageTitle
              equals: 'Pagar con Cashi'
          timeout: 5000
      - log:
          message: "Assertion Succeeded: Page is Displayed correctly."
          color: GREEN_BOLD
      - log:
          message: "End function: ea.cashi-payment.assertPageDisplayed"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------
  
  # AUTHOR: Osmar Juárez (vn56dce)
  # EDITOR: -----
  - name: mx.functions.ea.cashi-payment.tapCancelCashiPayment
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.cashi-payment.cancelCashiPayment
          wait: 1500
      - log:
          message: 'End function: ea.cashi-payment.tapCancelCashiPayment'
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  
  # DESCRIPTION: Assertion function to validate popup displayed when cancel cashi payment is selected
  # AUTHOR: Osmar Juárez (vn56dce)
  # EDITOR: -----
  - name: mx.functions.ea.cashi-payment.cancel-popup.assertPageIsDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.cashi-payment.cancel-popup.titleText
            - identifier: mx.mappings.ea.cashi-payment.cancel-popup.subtitleText
            - identifier: mx.mappings.ea.cashi-payment.cancel-popup.negativeCancelButton
            - identifier: mx.mappings.ea.cashi-payment.cancel-popup.positiveCancelButton
          timeout: 15000
      - log:
          message: "Assertion Succeeded: Popup is Displayed correctly."
          color: GREEN_BOLD
      - log:
          message: 'End function: ea.cashi-payment.cancel-popup.assertPageIsDisplayed'
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  
  # AUTHOR: Osmar Juárez (vn56dce)
  # EDITOR: -----
  - name: mx.functions.ea.cashi-payment.cancel-popup.tapCancelButton
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.cashi-payment.cancel-popup.positiveCancelButton
          wait: 1500
      - log:
          message: 'End function: mx.functions.ea.cashi-payment.cancel-popup.tapCancelButton'
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------
  # AUTHOR: Francisco Ramirez (vn53vq4)
  - name: mx.functions.ea.cashi-payment.tapBack
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.cashi-payment.backButton
          wait: 1500
      - log:
          message: 'End function: ea.cashi-payment.tapBack'
          color: BLUE
 
  #--------------------------------------------------------------------------------------------------------------------
  # AUTHOR: Francisco Ramirez (vn53vq4)
  - name: mx.functions.ea.cashi-payment.selectPayWithPhoneNumber
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.cashi-payment.payWithPhoneNumberRadioButton
          wait: 1500
      - log:
          message: 'End function: ea.cashi-payment.selectPayWithPhoneNumber'
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # PARAM:  ${userPhoneNumber} [Mandatory] User phone number
  # AUTHOR: Francisco Ramirez (vn53vq4)
  - name: mx.functions.ea.cashi-payment.enterPhoneNumber
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.ea.cashi-payment.phoneNumberField
          string: "${userPhoneNumber}"
          clearField: true
          pressEnter: true
      - log:
          message: 'End function: ea.cashi-payment.enterPhoneNumber'
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------
  # AUTHOR: Francisco Ramirez (vn53vq4)
  - name: mx.functions.ea.cashi-payment.tapAddPhoneNumber
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.cashi-payment.addPhoneNumberButton
      - log:
          message: 'End function: ea.cashi-payment.tapAddPhoneNumber'
          color: BLUE