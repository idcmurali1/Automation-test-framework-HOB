#======================================================================================================================
#  AUTHOR: Osmar Juárez (vn56dce)
#  CREATED: Jan/10/2024
#  REVISION: ---
#
#  Copyright © 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.assertPageDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.add-and-edit-card-form.nameOnCardField
      - log:
          message: "End function: add-and-edit-card-form.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAMS:  ${cardHolderFirstName} [Mandatory] Card User's First Name to Enter.
  #          ${cardHolderLastName}  [Mandatory] Card User's Last Name to Enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  # EDITED: Jorge Carrillo (vn575hp)
  - name: mx.functions.ea.add-and-edit-card-form.enterCardName
    platform: android
    flow:
      - log:
          message: "User name: '${cardHolderFirstName} ${cardHolderLastName}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.firstNameField
          string: ${cardHolderFirstName}
          clickFirst: true
          clearField: true
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.lastNameField
          string: ${cardHolderLastName}
          clickFirst: true
          clearField: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterCardName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardNumber} [Mandatory] Card Number to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterCardNumber
    platform: android
    flow:
      - log:
          message: "Card Number: '${cardNumber}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.cardNumberField
          string: ${cardNumber}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterCardNumber"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardExpirationDate} [Mandatory] Card Expiration Date to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterExpirationDate
    platform: android
    flow:
      - log:
          message: "Card Expiration Date: '${cardExpirationDate}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.expirationDateField
          string: ${cardExpirationDate}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterExpirationDate"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardCVV} [Mandatory] Card CVVs to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterCVV
    platform: android
    flow:
      - log:
          message: "Card CVV: '${cardCVV}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.cvvField
          string: ${cardCVV}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterCVV"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardCountry} [Mandatory] Country to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterCountry
    platform: android
    flow:
      - log:
          message: "Card Country: ${cardCountry}"
          color: CYAN
      - click:
          identifier: mx.mappings.ea.add-and-edit-card-form.countryField
      - if:
          identifier:
              present:
              - identifier: mx.mappings.ea.add-and-edit-card-form.countryListOption
          then:
              - click:
                  identifier: mx.mappings.ea.add-and-edit-card-form.countryListOption
      - log:
          message: "End function: add-and-edit-card-form.enterCountry"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardStreet} [Mandatory] Card street to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterStreet
    platform: android
    flow:
      - log:
          message: "Card street: '${cardStreet}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.streetNameField
          string: ${cardStreet}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterStreet"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardExteriorNumber} [Mandatory] Exterior Number to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterExteriorNumber
    platform: android
    flow:
      - log:
          message: "Card Exterior Number: '${cardExteriorNumber}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.exteriorNumberField
          string: ${cardExteriorNumber}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterExteriorNumber"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardZipCode} [Mandatory] Zip Code to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterZipCode
    platform: android
    flow:
      - log:
          message: "Card ZipCode: '${cardZipCode}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.ziCodeField
          string: ${cardZipCode}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterZipCode"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardNeighborhood} [Mandatory] Neighborhood to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterNeighborhood
    platform: android
    flow:
      - log:
          message: "Card Neighborhood: '${cardNeighborhood}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.neighborhoodField
          string: ${cardNeighborhood}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.clickByCoordinatesRelativeToElement
          params:
            - name: relativeElement
              string: mx.mappings.ea.add-and-edit-card-form.neighborhoodField
            - name: modifyValueX
              string: '+100'
            - name: modifyValueY
              string: '+250'    
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterNeighborhood"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardState} [Mandatory] State to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterState
    platform: android
    flow:
      - log:
          message: "Card State: '${cardState}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.stateField
          string: ${cardState}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterState"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardCity} [Mandatory] Neighborhood to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterCity
    platform: android
    flow:
      - log:
          message: "Card City: '${cardCity}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.cityField
          string: ${cardCity}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterCity"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${cardMunicipality} [Mandatory] Neighborhood to enter.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.enterMunicipality
    platform: android
    flow:
      - log:
          message: "Card Municipality: '${cardMunicipality}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.add-and-edit-card-form.municipalityField
          string: ${cardMunicipality}
          clickFirst: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: add-and-edit-card-form.enterMunicipality"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.add-and-edit-card-form.tapSave
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.add-and-edit-card-form.saveButton
      - log:
          message: "End function: add-and-edit-card-form.tapSave"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-and-edit-card-form.tapCheckboxCardAddressSameAsDelivery
    platform: android
    flow:
      - click:
         identifier: mx.mappings.ea.add-and-edit-card-form.sameAsDeliveryAddressCheckbox
      - log:
          message: "End function: add-and-edit-card-form.tapCheckboxCardAddressSameAsDelivery"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: Function to verify the slected and displayed address for the card to add 
  # PARAM: ${expectedCardAddress}  [Mandatory] Full string of the address to assert.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-and-edit-card-form.assertSelectedAddressForCard
    platform: android
    flow:
      - log: 
         message: "Expected displayed address: ${expectedCardAddress}"
         color: CYAN
      - verifyIdentifier:
         present:
             - identifier: mx.mappings.ea.add-and-edit-card-form.cardAddressSameAsDeliveryLabel #--${expectedCardAddress}--
      - log: 
         message: "Assert Succeeded: Displayed address for card is correct"
         color: CYAN
      - log:
          message: "End function: add-and-edit-card-form.assertSelectedAddressForCard"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: Function to verify the address displayed in radio button option for a card in edition view
  # PARAM: ${expectedCardAddress}  [Mandatory] Full string of the address to assert.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.add-and-edit-card-form.assertRadioButtonSelectedAddress
    platform: android
    flow:
      - log: 
         message: "Expected displayed address: ${expectedCardAddress}"
         color: CYAN
      - verifyIdentifier:
         checked:
           - identifier: mx.mappings.ea.add-and-edit-card-form.radioButtonCardAddress #--${expectedCardAddress}--
             value: true
      - log: 
         message: "Assert Succeeded: Displayed address in radio button selected is correct"
         color: CYAN
      - log:
          message: "End function: add-and-edit-card-form.assertRadioButtonSelectedAddress"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.add-and-edit-card-form.tapDeleteButton
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.add-and-edit-card-form.deleteButton
      - log:
          message: "End function: add-and-edit-card-form.tapDeleteButton"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.add-and-edit-card-form.delete-card-popup.assertPopupDisplayed
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.add-and-edit-card-form.delete-card-popup.popupTitle
              - identifier: mx.mappings.ea.add-and-edit-card-form.delete-card-popup.confirmationMessage
              - identifier: mx.mappings.ea.add-and-edit-card-form.delete-card-popup.confirmButton
          then:
            - log:
                message: "Assertion Succeeded: Delete Card popup Displayed."
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: Delete Card popup did not Display."
      - log:
          message: "End function: add-and-edit-card-form.delete-card-popup.assertPopupDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.add-and-edit-card-form.delete-card-popup.tapConfirm
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.add-and-edit-card-form.delete-card-popup.confirmButton
      - log:
          message: "End function: add-and-edit-card-form.delete-card-popup.tapConfirm"
          color: BLUE
