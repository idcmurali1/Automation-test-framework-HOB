#======================================================================================================================
#  AUTHOR: Rodrigo Pacheco C. (vn53p0i)
#  CREATED: Oct/18/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.ea.top-menu.tapSearchField
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.top-menu.searchField
      - log:
          message: "End function: top-menu.tapSearchField"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function enters text in the search field.
  # PARAM:        ${searchTerm}  [Mandatory]  Partial product name to find.
  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.ea.top-menu.enterSearchTerm
    platform: android
    flow:
      - log:
          message: "Search Term: ${searchTerm}"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.top-menu.searchField
          string: ${searchTerm}
      - log:
          message: "End function: top-menu.enterSearchTerm"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  Performs the editor action "Search" and simulates the pressing of the search button.
  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.ea.top-menu.tapSearchInKeyboard
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.utils.performActionSearch
      - log:
          message: "End function: top-menu.tapSearchInKeyboard"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  Asserts the Cart Button Quantity Counter Badge equals the given expected quantity.
  # PARAM:        ${expectedQuantity} [Mandatory] Expected quantity of the Quantity Counter Badge.
  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.ea.top-menu.assertCartQuantity
    platform: android
    flow:
      - log:
          message: "Expected Quantity: '${expectedQuantity}'"
          color: CYAN
      - if:
          identifier:
            text:
              - identifier: mx.mappings.ea.top-menu.cartBadgeCounter
                equals: ${expectedQuantity}
          then:
            - log:
                message: "Success: Correct Cart icon quantity."
                color: CYAN
          else:
            - failTest:
                message: "Expected quantity: '${expectedQuantity}', did not match displayed quantity."
      - log:
          message: "End function: top-menu.assertCartQuantity"
          color: BLUE

  # -------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.ea.top-menu.tapCartIcon
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.top-menu.cartIcon
      - log:
          message: "End function: top-menu.tapCartIcon"
          color: BLUE
