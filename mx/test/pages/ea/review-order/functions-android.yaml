#======================================================================================================================
#  AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
#  CREATED: Oct/25/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertPageDisplayed
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.ea.review-order.deliveryHeaderContainer
          then:
            - scroll:
                direction: up
                scrollLimit: 2
                wait: 1000
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.review-order.pageTitle
            - identifier: mx.mappings.ea.review-order.deliveryDetailsSection
            - identifier: mx.mappings.ea.review-order.placeOrderButton
          timeout: 30000
      - log:
          message: "Assertion Succeeded: Page is Displayed."
          color: GREEN_BOLD
      - log:
          message: "End function: review-order.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method asserts the selected delivery method, either home delivery or pickup. Other values given
  #                 will fail the test.
  # PARAM         ${expectedDeliveryMethod} [Mandatory] Delivery method to assert. Options: [ 'HomeDelivery' | 'PickupDelivery' ].
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertDeliveryMethod
    platform: android
    flow:
      - if:
          condition: ${expectedDeliveryMethod} != 'HomeDelivery' && ${expectedDeliveryMethod} != 'PickupDelivery'
          then:
            - failTest:
                message: "Invalid Delivery Method Option provided: '${expectedDeliveryMethod}'"
      - log:
          message: "Assert For: '${expectedDeliveryMethod}'"
          color: CYAN

      # Home Delivery Assertion...
      - if:
          condition: ${expectedDeliveryMethod} == 'HomeDelivery'
          then:
            - if:
                identifier:
                  present:
                    - identifier: mx.mappings.ea.review-order.homeDeliveryIsSelected
                then:
                  - log:
                      message: "Assertion Succeeded: Home Delivery Method is Selected."
                      color: CYAN
                else:
                  - failTest:
                      message: "Failed: Home Delivery Method is not Selected."

      # Pickup Delivery Assertion...
      - if:
          condition: ${expectedDeliveryMethod} == 'PickupDelivery'
          then:
            - if:
                identifier:
                  present:
                    - identifier: mx.mappings.ea.review-order.pickupDeliveryIsSelected
                then:
                  - log:
                      message: "Assertion Succeeded: Pickup Delivery Method is Selected."
                      color: CYAN
                else:
                  - failTest:
                      message: "Failed: Pickup Delivery Method is not Selected."
      - log:
          message: "End function review-order.assertDeliveryMethod"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method asserts the selected delivery date collected from the one displayed in Cart.
  # NOTE:         This function is ONLY for orders without multiple delivery sections.
  # PARAM         ${expectedDeliveryDate} [Mandatory] Delivery date to assert (the one from Cart page).
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertSingleDeliveryDate
    platform: android
    flow:
      - log:
          message: "Expected Delivery Date: '${expectedDeliveryDate}'"
          color: CYAN

      # Getting and parsing the displayed Delivery Date...
      - getString:
          identifier: mx.mappings.ea.review-order.deliveryDate
          storeIn: displayedDeliveryDate
      - executeNode:
          file: mx/test/helpers/utils/getDeliveryDateEA.js
          args:
            - value: ${displayedDeliveryDate}
          getResponse:
            storeIn: displayedDeliveryDate
      - log:
          message: "Displayed Delivery Date: '${displayedDeliveryDate}'"
          color: CYAN

      # Comparing Expected vs Displayed...
      - if:
          condition: ${expectedDeliveryDate} == ${displayedDeliveryDate}
          then:
            - log:
                message: "Assertion Succeeded: Correct Delivery Date."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Incorrect Delivery Date."
      - log:
          message: "End function review-order.assertSingleDeliveryDate"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.tapBack
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.review-order.backButton
      - log:
          message: "End function review-order.tapBack"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method asserts the Home Delivery Address NAME and not the actual address.
  # PARAM         ${expectedHomeAddressName} [Mandatory] Address Name to validate.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertHomeAddressName
    platform: android
    flow:
      - log:
          message: "Expected Home Address Name: '${expectedHomeAddressName}'"
          color: CYAN
      - if:
          identifier:
            text:
              - identifier: mx.mappings.ea.review-order.homeAddressName
                equals: ${expectedHomeAddressName}
          then:
            - log:
                message: "Assertion Succeeded: Correct Home Address Name."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Incorrect Home Address Name."
      - log:
          message: "End function review-order.assertHomeAddressName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method verifies the selected user address inside the Delivery Details section by full string.
  # NOTE:         Home Delivery must be selected in order to perform assertion correctly.
  # PARAMS:       ${addressFullString}  [Mandatory]  Full string containing the address to be validated.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertHomeAddressByFullString
    platform: android
    flow:
      - log:
          message: "Expected Address Full String: '${addressFullString}'"
          color: CYAN

      # Retrieving displayed Address...
      - getString:
          identifier: mx.mappings.ea.review-order.storeOrHomeAddress
          storeIn: displayedAddress
      - log:
          message: "Displayed Address: '${displayedAddress}'"
          color: CYAN

      # Assertion by Full String...
      - if:
          identifier:
            text:
              - identifier: mx.mappings.ea.review-order.storeOrHomeAddress
                contains: ${addressFullString}
          then:
            - log:
                message: "Assertion Succeeded: Home Address by Full String is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Home Address by Full String is not correct."
      - log:
          message: "End function: review-order.assertHomeAddressByFullString"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method verifies the selected user address inside the Delivery Details section by its individual values.
  # NOTE:         Home Delivery must be selected in order to perform assertion correctly.
  # PARAMS:
  #               ${streetName}       [Mandatory]   Name of the street to be validated.
  #               ${exteriorNumber}   [Mandatory]   Exterior number to be validated.
  #               ${city}             [Mandatory]   City to be validated.
  #               ${state}            [Mandatory]   State to be validated.
  #               ${zipCode}          [Mandatory]   ZIP Code to be validated.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertHomeAddressByIndividualValues
    platform: android
    flow:
      # Using '\e[36m' to print in CYAN and '\e[0m' to reset color, to simplify logs.
      - log: "\e[36mExpected StreetName: '${streetName}'\e[0m"
      - log: "\e[36mExpected ExteriorNumber: '${exteriorNumber}'\e[0m"
      - log: "\e[36mExpected City: '${city}'\e[0m"
      - log: "\e[36mExpected State: '${state}'\e[0m"
      - log: "\e[36mExpected ZipCode: '${zipCode}'\e[0m"

      # Retrieving displayed Address...
      - getString:
          identifier: mx.mappings.ea.review-order.storeOrHomeAddress
          storeIn: displayedAddress
      - log:
          message: "Displayed Address: '${displayedAddress}'"
          color: CYAN

      # Assertion by Individual Values...
      - executeNode:
          file: mx/test/helpers/utils/stringContainsAll.js
          args:
            - value: ${displayedAddress}
            - value: ${streetName}, ${exteriorNumber}, ${city}, ${state}, ${zipCode}
          getResponse:
            storeIn: isAddressCorrect
      - if:
          condition: ${isAddressCorrect} == true
          then:
            - log:
                message: "Home Address by individual values is correct."
                color: CYAN
          else:
            - failTest:
                message: "Expected Home address not contained in: '${displayedAddress}'"
      - log:
          message: "End function: review-order.assertHomeAddressByIndividualValues"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method verifies the selected store address inside the Delivery Details section by full string.
  # NOTE:         Pickup Delivery must be selected in order to perform assertion correctly.
  # PARAMS:       ${addressFullString}  [Mandatory]  Full string containing the address to be validated.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertStoreAddressByFullString
    platform: android
    flow:
      - log:
          message: "Expected Address Full String: '${addressFullString}'"
          color: CYAN

      # Retrieving displayed Address...
      - getString:
          identifier: mx.mappings.ea.review-order.storeOrHomeAddress
          storeIn: displayedAddress
      - log:
          message: "Displayed Address: '${displayedAddress}'"
          color: CYAN

      # Assertion by Full String...
      - if:
          identifier:
            text:
              - identifier: mx.mappings.ea.review-order.storeOrHomeAddress
                contains: ${addressFullString}
          then:
            - log:
                message: "Assertion Succeeded: Store Address by Full String is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Store Address by Full String is not correct."
      - log:
          message: "End function: review-order.assertStoreAddressByFullString"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method verifies the selected Pickup Person inside the Delivery Details section by full name.
  # NOTE:         Pickup Delivery must be selected in order to perform assertion correctly.
  # NOTE:         If the full name is not provided, function fails.
  # PARAMS:       ${pickupPersonName}  [Mandatory]  Pickup Person's full name.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertPickupPerson
    platform: android
    flow:
      - log:
          message: "Expected Pickup Person Name: '${pickupPersonName}'"
          color: CYAN
      - if:
          identifier:
            text:
              - identifier: mx.mappings.ea.review-order.selectedPickupPerson
                equals: ${pickupPersonName}
          then:
            - log:
                message: "Assertion Succeeded: Selected Pickup Person is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Selected Pickup Person is not correct."
      - log:
          message: "End function: review-order.assertPickupPerson"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.tapEditPickupPersonButton
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.review-order.editPickupPersonButton
      - log:
          message: "End function: review-order.tapEditPickupPersonButton"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.edit-pickup-person-popup.assertPopupDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.title
            - identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.closeButton
            - identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.formContainer
      - log:
          message: "End function: review-order.edit-pickup-person-popup.assertPopupDisplayed"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function validate the values of the fields already filled up in Pickup Person Form oppened in edition view
  # PARAMS:       ${pickupPersonFirstName} [Mandatory] User's first name to validate.
  #               ${pickupPersonLastName}  [Mandatory] User's last name to validate.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.review-order.edit-pickup-person-popup.assertPickupPersonFullName
    platform: android
    flow:
      - log:
          message: "Expected Pickup Person First Name: '${pickupPersonFirstName}'"
          color: CYAN
      - verifyIdentifier:
         text:
           - identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.firstNameField
             equals: ${pickupPersonFirstName}
         timeout: 10000
      - log:
          message: "Expected Pickup Person Last Name: '${pickupPersonLastName}'"
          color: CYAN
      - verifyIdentifier:
         text:
           - identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.lastNameField
             equals: ${pickupPersonLastName}
      - log:
          message: "End function: ea.review-order.edit-pickup-person-popup.assertPickupPersonFullName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${pickupPersonFirstName} [Mandatory] User's first name to enter.
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.edit-pickup-person-popup.enterFirstName
    platform: android
    flow:
      - log:
          message: "Pickup Person first name: '${pickupPersonFirstName}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.firstNameField
          string: ${pickupPersonFirstName}
          clickFirst: true
      - log:
          message: "End function: review-order.edit-pickup-person-popup.enterFirstName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${pickupPersonLastName} [Mandatory] User's first name to enter.
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.edit-pickup-person-popup.enterLastName
    platform: android
    flow:
      - log:
          message: "Pickup Person last name: '${pickupPersonLastName}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.lastNameField
          string: ${pickupPersonLastName}
          clickFirst: true
      - log:
          message: "End function: review-order.edit-pickup-person-popup.enterLastName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${pickupPersonNumber} [Mandatory] User's first name to enter.
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.edit-pickup-person-popup.enterPhoneNumber
    platform: android
    flow:
      - log:
          message: "Pickup Person phone number: '${pickupPersonNumber}'"
          color: CYAN
      - enterText:
          identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.phoneNumberField
          string: ${pickupPersonNumber}
          clickFirst: true
      - log:
          message: "End function: review-order.edit-pickup-person-popup.enterPhoneNumber"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.edit-pickup-person-popup.tapSaveButton
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.review-order.edit-pickup-person-popup.saveButton
      - log:
          message: "End function: review-order.edit-pickup-person-popup.tapSaveButton"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: Function to enter and fill up the form with the Pickup person Information
  # PARAMS:
  #   ${pickupPersonFirstName}  [Mandatory]   Expected Pickup Person's First Name.
  #
  #   ${pickupPersonLastName}   [Mandatory]   Expected Pickup Person's Last Name.
  #
  #   ${pickupPersonNumber}     [Mandatory]    Pickup Person's Phone Number.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.review-order.edit-pickup-person-popup.enterPickupPersonInformation
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.ea.review-order.edit-pickup-person-popup.enterFirstName
          params:
            - name: pickupPersonFirstName
              string: ${pickupPersonFirstName}
      - executeFunction:
          name: mx.functions.ea.review-order.edit-pickup-person-popup.enterLastName
          params:
            - name: pickupPersonLastName
              string: ${pickupPersonLastName}
      - executeFunction:
          name: mx.functions.ea.review-order.edit-pickup-person-popup.enterPhoneNumber
          params:
            - name: pickupPersonNumber
              string: ${pickupPersonNumber}
      - log:
          message: "End flow: ea.review-order.edit-pickup-person-popup.enterPickupPersonInformation"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function asserts the total products count in the delivery details section (at the very top of the page).
  # PARAMS:       ${expectedProductsCount}  [Mandatory]  Expected products count.
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.assertProductsCountInDeliveryDetailsSection
    platform: android
    flow:
      - log:
          message: "Expected Product Count: '${expectedProductsCount}'"
          color: CYAN

      # Retrieving and parsing the displayed quantity...
      - getString:
          identifier: mx.mappings.ea.review-order.productsCountInDeliveryDetailsSection
          storeIn: displayedQuantity
      - executeNode:
          file: mx/test/helpers/utils/sanitizeQuantity.js
          args:
            - value: ${displayedQuantity}
          getResponse:
            storeIn: displayedQuantity
      - log:
          message: "Displayed Products Count: '${displayedQuantity}'"
          color: CYAN

      # Comparing the expected vs the displayed...
      - if:
          condition: ${expectedProductsCount} == ${displayedQuantity}
          then:
            - log:
                message: "Assertion Succeeded: Products Count is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Products Count is not correct."
      - log:
          message: "End function: review-order.assertProductsCountInDeliveryDetailsSection"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.openProductsDetailsPopup
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.review-order.openProductDetailsPopupButton
      - log:
          message: "End function: review-order.openProductsDetailsPopup"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.products-details-popup.assertPopupDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.review-order.products-details-popup.title
            - identifier: mx.mappings.ea.review-order.products-details-popup.closeButton
            - identifier: mx.mappings.ea.review-order.products-details-popup.container
      - log:
          message: "End function: review-order.products-details-popup.assertPopupDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAMS: ${expectedProductsCount}  [Mandatory]   Expected products count.
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.products-details-popup.assertProductsCount
    platform: android
    flow:
      - log:
          message: "Expected Products Count: '${expectedProductsCount}'"
          color: CYAN

      # Retrieving and parsing the displayed quantity...
      - getString:
          identifier: mx.mappings.ea.review-order.products-details-popup.productsCount
          storeIn: displayedQuantity
      - executeNode:
          file: mx/test/helpers/utils/sanitizeQuantity.js
          args:
            - value: ${displayedQuantity}
          getResponse:
            storeIn: displayedQuantity
      - log:
          message: "Displayed Products Count: '${displayedQuantity}'"
          color: CYAN

      # Comparing the expected vs the displayed...
      - if:
          condition: ${expectedProductsCount} == ${displayedQuantity}
          then:
            - log:
                message: "Assertion Succeeded: Products Count is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Products Count is not correct."
      - log:
          message: "End function: review-order.products-details-popup.assertProductsCount"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAMS: ${productName}  [Mandatory]   Expected product name to be listed.
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.products-details-popup.assertProductListed
    platform: android
    flow:
      - log:
          message: "Expected Product Name: '${productName}'"
          color: CYAN
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.review-order.products-details-popup.productByName # <--PARAM--${productName}
          then:
            - log:
                message: "Assertion Succeeded: Product is listed."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Product is not listed."
      - log:
          message: "End function: review-order.products-details-popup.assertProductListed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.products-details-popup.tapClose
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.review-order.products-details-popup.closeButton
      - log:
          message: "End function: review-order.products-details-popup.tapClose"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method scrolls down to the specified Section on param. These options are not used by text.
  # NOTE:         The values specified in the 'wait' attributes of the scrolls must not be changed.
  # NOTE:         The Delivery Section is not included because it's the section at the top, thus it cannot be scrolled down into.
  # Param         ${sectionOption}  [Mandatory]  Name of section to scroll into (NOT the displayed on page).
  #               Options: [ 'Payment' | 'Invoice' | 'PhoneNumber' | 'Totals' ].
  - name: mx.functions.ea.review-order.scrollDownToSection
    platform: android
    flow:
      - log:
          message: "Option to scroll into: '${sectionOption}'"
          color: CYAN
      - if:
          condition: ${sectionOption} != 'Payment' && ${sectionOption} != 'Invoice' && ${sectionOption} != 'PhoneNumber' && ${sectionOption} != 'Totals'
          then:
            - failTest:
                message: "Invalid Section Option provided: '${sectionOption}'"

      # This scroll is needed for better performance...
      - scroll:
          direction: up
          scrollLimit: 2
          wait: 2000

      # Performing scroll for Payment section...
      - if:
          condition: ${sectionOption} == 'Payment'
          then:
            - if:
                identifier:
                  notPresent:
                    - identifier: mx.mappings.ea.review-order.paymentSectionContainer
                then:
                  - scroll:
                      direction: down
                      scrollLimit: 12
                      wait: 2000
                      position: center
                      untilIdentifier: mx.mappings.ea.review-order.paymentSectionContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.review-order.paymentSectionContainer

      # Performing scroll for Invoice section...
      - if:
          condition: ${sectionOption} == 'Invoice'
          then:
            - if:
                identifier:
                  notPresent:
                    - identifier: mx.mappings.ea.review-order.invoiceSectionContainer
                then:
                  - scroll:
                      direction: down
                      scrollLimit: 12
                      wait: 2000
                      position: center
                      untilIdentifier: mx.mappings.ea.review-order.invoiceSectionContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.review-order.invoiceSectionContainer

      # Performing scroll for Phone Number section...
      - if:
          condition: ${sectionOption} == 'PhoneNumber'
          then:
            - if:
                identifier:
                  notPresent:
                    - identifier: mx.mappings.ea.review-order.phoneNumberSectionContainer
                then:
                  - scroll:
                      direction: down
                      scrollLimit: 12
                      wait: 2000
                      position: center
                      untilIdentifier: mx.mappings.ea.review-order.phoneNumberSectionContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.review-order.phoneNumberSectionContainer

      # Performing scroll for Totals section...
      - if:
          condition: ${sectionOption} == 'Totals'
          then:
            - if:
                identifier:
                  notPresent:
                    - identifier: mx.mappings.ea.review-order.totalsSectionContainer
                then:
                  - scroll:
                      direction: down
                      scrollLimit: 12
                      wait: 2000
                      position: center
                      untilIdentifier: mx.mappings.ea.review-order.totalsSectionContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.review-order.totalsSectionContainer
      - log:
          message: "End function: review-order.scrollDownToSection"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method scrolls up to the specified Section on param. These options are not used by text.
  # NOTE:         The values specified in the 'wait' attributes of the scrolls must not be changed.
  # NOTE:         The Totals Section is not included because it's the section at the bottom, thus it cannot be scrolled up into.
  # Param         ${sectionOption}  [Mandatory]  Name of section to scroll into (NOT the displayed on page).
  #               Options: [ 'Delivery' | 'Payment' | 'Invoice' | 'PhoneNumber' ].
  - name: mx.functions.ea.review-order.scrollUpToSection
    platform: android
    flow:
      - log:
          message: "Option to scroll into: '${sectionOption}'"
          color: CYAN
      - if:
          condition: ${sectionOption} != 'Payment' && ${sectionOption} != 'Invoice' && ${sectionOption} != 'PhoneNumber' && ${sectionOption} != 'Delivery'
          then:
            - failTest:
                message: "Invalid Section Option provided: '${sectionOption}'"

      # This scroll is needed for better performance...
      - scroll:
          direction: down
          scrollLimit: 2
          wait: 2000

      # Performing scroll for Payment section...
      - if:
          condition: ${sectionOption} == 'Payment'
          then:
            - if:
                identifier:
                  notPresent:
                    - identifier: mx.mappings.ea.review-order.paymentSectionContainer
                then:
                  - scroll:
                      direction: up
                      scrollLimit: 12
                      wait: 2000
                      position: center
                      untilIdentifier: mx.mappings.ea.review-order.paymentSectionContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.review-order.paymentSectionContainer

      # Performing scroll for Invoice section...
      - if:
          condition: ${sectionOption} == 'Invoice'
          then:
            - if:
                identifier:
                  notPresent:
                    - identifier: mx.mappings.ea.review-order.invoiceSectionContainer
                then:
                  - scroll:
                      direction: up
                      scrollLimit: 12
                      wait: 2000
                      position: center
                      untilIdentifier: mx.mappings.ea.review-order.invoiceSectionContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.review-order.invoiceSectionContainer

      # Performing scroll for Phone Number section...
      - if:
          condition: ${sectionOption} == 'PhoneNumber'
          then:
            - if:
                identifier:
                  notPresent:
                    - identifier: mx.mappings.ea.review-order.phoneNumberSectionContainer
                then:
                  - scroll:
                      direction: up
                      scrollLimit: 12
                      wait: 2000
                      position: center
                      untilIdentifier: mx.mappings.ea.review-order.phoneNumberSectionContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.review-order.phoneNumberSectionContainer

      # Performing scroll for Totals section...
      - if:
          condition: ${sectionOption} == 'Delivery'
          then:
            - if:
                identifier:
                  notPresent:
                    - identifier: mx.mappings.ea.review-order.deliverySectionContainer
                then:
                  - scroll:
                      direction: up
                      scrollLimit: 12
                      wait: 2000
                      position: center
                      untilIdentifier: mx.mappings.ea.review-order.deliverySectionContainer
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.ea.review-order.deliverySectionContainer
      - log:
          message: "End function: review-order.scrollUpToSection"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  # EDITOR: Francisco Ramirez (vn53vq4)
  - name: mx.functions.ea.review-order.tapAddOrChangePaymentMethodButton
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.review-order.addOrChangePaymentMethodButton
      - log:
          message: "End function: review-order.tapAddOrChangePaymentMethodButton"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.review-order.tapChangePaymentMethodButton
    platform: android
    flow:
      - click:
          identifier: mx.mappings.ea.review-order.changePaymentMethodButton
      - log:
          message: "End function: review-order.tapChangePaymentMethodButton"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertInStorePaymentMethodIsSelected
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.review-order.inStorePaymentMethodIsSelected
          then:
            - log:
                message: "Assertion Succeeded: In-Store Payment Method is Selected."
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: In-Store Payment Method is not displayed or was not Selected properly."
      - log:
          message: "End function: review-order.assertInStorePaymentMethodIsSelected"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.review-order.assertCashiPaymentMethodIsSelected
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.review-order.cashiPaymentMethodIcon
              - identifier: mx.mappings.ea.review-order.cashiDescriptionTextView
            timeout: 15000
          then:
            - log:
                message: "Assertion Succeeded: Cashi Payment Method is Selected."
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: Cashi Payment Method is not displayed or was not Selected properly."
      - log:
          message: "End function: ea.review-order.assertCashiPaymentMethodIsSelected"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertCardPaymentMethodIsSelected
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.review-order.cardPaymentMethodIsSelected
          then:
            - log:
                message: "Assertion Succeeded: A Card has been selected as Payment Method."
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: A Card has not been selected as Payment Method, it dit not display or was not Selected properly."
      - log:
          message: "End function: review-order.assertCardPaymentMethodIsSelected"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # RETURNS:  ${returnedDeliveryDate} This is the displayed delivery date located at the top. Beware, this date changes.
  #                                     after selecting the payment method.
  # NOTE:     This function is ONLY for orders without multiple delivery sections.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.getSingleDeliveryDate
    platform: android
    flow:
      - getString:
          identifier: mx.mappings.ea.review-order.deliveryDate
          storeIn: returnedDeliveryDate
      - executeNode:
           file: mx/test/helpers/utils/getDeliveryDateEA.js
           args:
             - value: ${returnedDeliveryDate}
           getResponse:
               storeIn: returnedDeliveryDate
      - log:
          message: "Returned Delivery Date: '${returnedDeliveryDate}'"
          color: CYAN
      - log:
          message: "End function: review-order.getSingleDeliveryDate"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${userPhoneNumber} [Mandatory] User's phone number to input.
  # EDITOR: Rodrigo PC - vn53p0i
  - name: mx.functions.ea.review-order.enterCellphoneNumber
    platform: android
    flow:
    - log:
        message: "Phone number: '${userPhoneNumber}'"
        color: CYAN
    - enterText:
        identifier: mx.mappings.ea.review-order.phoneNumberInputField
        string: ${userPhoneNumber}
        clickFirst: true
        clearField: true
    - executeFunction:
        name: mx.functions.utils.performActionDone
    - executeFunction:
        name: mx.functions.utils.performActionNext
    - log:
        message: "End function: review-order.enterCellphoneNumber"
        color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This function gets the displayed delivery fee
  # RETURN: ${returnedDeliveryFee}  Delivery fee value displayed in label.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.getDisplayedDeliveryFee
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.review-order.deliveryFeeNotChargedLabel
          then:
            - log:
                message: "Delivery Fee is not being charged for this purchase, returning '0.00'..."
                color: GREEN_BOLD
            - storeIn:
                key: returnedDeliveryFee
                value: 0.00
          else:
            - getString:
                identifier: mx.mappings.ea.review-order.deliveryFeeValue
                storeIn: returnedDeliveryFee
            - executeNode:
                file: mx/test/helpers/utils/cleanPriceString.js
                args:
                  - value: ${returnedDeliveryFee}
                getResponse:
                    storeIn: returnedDeliveryFee
      - log:
          message: "Delivery Fee got: '${returnedDeliveryFee}'"
          color: GREEN_BOLD
      - log:
          message: "End function: review-order.getDisplayedDeliveryFee"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${expectedDeliveryFee}  [Mandatory]   Delivery fee to assert, must be a cleaned numeric value.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertDeliveryFee
    platform: android
    flow:
      - log:
          message: "Expected delivery fee: '${expectedDeliveryFee}'"
          color: CYAN
      - getString:
          identifier: mx.mappings.ea.review-order.deliveryFeeValue
          storeIn: displayedDeliveryFee
      - executeNode:
           file: mx/test/helpers/utils/cleanPriceString.js
           args:
             - value: ${displayedDeliveryFee}
           getResponse:
               storeIn: displayedDeliveryFee
      - log:
          message: "Displayed Delivery Fee: '${displayedDeliveryFee}'"
          color: CYAN
      - if:
          condition: ${displayedDeliveryFee} == ${expectedDeliveryFee}
          then:
            - log:
                message: "Assertion Succeeded: Delivery Fee is correct."
                color: CYAN
          else:
            - failTest:
                message: "Delivery Fee is not present or not correct, displayed value: '${displayedDeliveryFee}'"
      - log:
          message: "End function: review-order.assertDeliveryFee"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${expectedDeliveryFee}  [Mandatory]   Delivery fee to assert, must be a cleaned numeric value.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertDeliveryFeeNotCharged
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.ea.review-order.deliveryFeeNotChargedLabel
          then:
            - log:
                message: "Assertion Succeeded: Delivery Fee is not charged."
                color: CYAN
          else:
            - failTest:
                message: "Failed: Delivery Fee is being charged or label is not visible/displayed."
      - log:
          message: "End function: review-order.assertDeliveryFeeNotCharged"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:  ${expectedSubtotal}   [Mandatory]   Expected subtotal to assert.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertSubtotal
    platform: android
    flow:
      - log:
          message: "Expected Subtotal: '${expectedSubtotal}'"
          color: CYAN

      # Get displayed Subtotal.
      - getString:
          identifier: mx.mappings.ea.review-order.subtotalValue
          attribute: text
          storeIn: displayedSubtotal

      # Clean the subtotal obtained and log it...
      - executeNode:
           file: mx/test/helpers/utils/cleanPriceString.js
           args:
             - value: ${displayedSubtotal}
           getResponse:
               storeIn: displayedSubtotal
      - log:
          message: "Displayed Subtotal: '${displayedSubtotal}'"
          color: CYAN

      # Assert displayed vs expected...
      - if:
          condition: ${displayedSubtotal} == ${expectedSubtotal}
          then:
            - log:
                message: "Successful Assertion: Subtotal is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed Assertion: Subtotal is incorrect."
      - log:
          message: "End function: review-order.assertSubtotal"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function asserts the correct original subtotal BEFORE discounts. This element appears if there's
  #                 at least one product with discount in the cart.
  # PARAM:        ${expectedOriginalSubtotal}   [Mandatory]   Expected original subtotal to assert.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertSubtotalBeforeDiscounts
    platform: android
    flow:
      - log:
          message: "Expected Subtotal before discounts: '${expectedOriginalSubtotal}'"
          color: CYAN

      # Get displayed Subtotal before discounts.
      - getString:
          identifier: mx.mappings.ea.review-order.subtotalValueBeforeDiscount
          attribute: text
          storeIn: displayedOriginalSubtotal

      # Clean the subtotal obtained and log it...
      - executeNode:
           file: mx/test/helpers/utils/cleanPriceString.js
           args:
             - value: ${displayedOriginalSubtotal}
           getResponse:
               storeIn: displayedOriginalSubtotal
      - log:
          message: "Displayed Subtotal before discounts: '${displayedOriginalSubtotal}'"
          color: CYAN

      # Assert displayed vs expected...
      - if:
          condition: ${displayedOriginalSubtotal} == ${expectedOriginalSubtotal}
          then:
            - log:
                message: "Successful Assertion: Subtotal is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed Assertion: Subtotal is incorrect."
      - log:
          message: "End function: review-order.assertSubtotalBeforeDiscounts"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function asserts the correct original subtotal AFTER discounts. This element appears if there's
  #                 at least one product with discount in the cart.
  # PARAM:        ${expectedSubtotalAfterDiscount}   [Mandatory]   Expected subtotal after discount to assert.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertSubtotalAfterDiscounts
    platform: android
    flow:
      - log:
          message: "Expected Subtotal after discounts: '${expectedSubtotalAfterDiscount}'"
          color: CYAN

      # Get displayed Subtotal after discounts.
      - getString:
          identifier: mx.mappings.ea.review-order.subtotalValueAfterDiscount
          attribute: text
          storeIn: displayedSubtotalAfterDiscount

      # Clean the subtotal obtained and log it...
      - executeNode:
           file: mx/test/helpers/utils/cleanPriceString.js
           args:
             - value: ${displayedSubtotalAfterDiscount}
           getResponse:
               storeIn: displayedSubtotalAfterDiscount
      - log:
          message: "Displayed Subtotal after discounts: '${displayedSubtotalAfterDiscount}'"
          color: GREEN_BOLD

      # Assert displayed vs expected...
      - if:
          condition: ${displayedSubtotalAfterDiscount} == ${expectedSubtotalAfterDiscount}
          then:
            - log:
                message: "Successful Assertion: Subtotal after discount is correct."
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed Assertion: Subtotal after discount is incorrect."
      - log:
          message: "End function: review-order.assertSubtotalAfterDiscounts"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function asserts savings amount for purchasing discounted products (green label next to 'Ahorras').
  #                 Only when there's at least one product with discount in the cart.
  # PARAM:        ${expectedSavingsAmount}   [Mandatory]   Expected Savings amount to be displayed.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertSavingsAmount
    platform: android
    flow:
      - log:
          message: "Expected Savings Amount: '${expectedSavingsAmount}'"
          color: CYAN

      # Get displayed Savings Amount before discounts.
      - getString:
          identifier: mx.mappings.ea.review-order.savingsAmountValue
          attribute: text
          storeIn: displayedSavingsAmount

      # Clean the Savings Amount obtained and log it...
      - executeNode:
           file: mx/test/helpers/utils/cleanPriceString.js
           args:
             - value: ${displayedSavingsAmount}
           getResponse:
               storeIn: displayedSavingsAmount
      - log:
          message: "Displayed Savings Amount: '${displayedSavingsAmount}'"
          color: CYAN

      # Assert displayed vs expected...
      - if:
          condition: ${displayedSavingsAmount} == ${expectedSavingsAmount}
          then:
            - log:
                message: "Successful Assertion: Savings Amount is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed Assertion: Savings Amount is incorrect."
      - log:
          message: "End function: review-order.assertSavingsAmount"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  Asserts whether the displayed estimated total in the Details section is equal to the given estimated total.
  # PARAM:        ${expectedEstimatedTotal}  [Mandatory]  Estimated total to assert against.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertEstimatedTotalFromDetailsSection
    platform: android
    flow:
      - log:
          message: "Expected Estimated Total: '${expectedEstimatedTotal}'"
          color: CYAN
      - getString:
          identifier: mx.mappings.ea.review-order.estimatedTotalInDetailsSection
          attribute: text
          storeIn: displayedEstimatedTotal
      - executeNode:
           file: mx/test/helpers/utils/cleanPriceString.js
           args:
             - value: ${displayedEstimatedTotal}
           getResponse:
               storeIn: displayedEstimatedTotal
      - log:
          message: "Displayed Estimated Total: '${displayedEstimatedTotal}'"
          color: CYAN
      - if:
          condition: ${displayedEstimatedTotal} == ${expectedEstimatedTotal}
          then:
            - log:
                message: "Successful Assertion: Estimated Total from details section is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed Assertion: Estimated Total from details section is incorrect."
      - log:
          message: "End function: review-order.assertEstimatedTotalFromDetailsSection"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  Asserts whether the displayed estimated total inside the Continue button section isß equal to the given estimated total.
  # PARAM:        ${expectedEstimatedTotal}  [Mandatory]  Estimated total to assert against.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.assertEstimatedTotalFromButton
    platform: android
    flow:
      - log:
          message: "Expected Estimated Total: '${expectedEstimatedTotal}'"
          color: CYAN
      - getString:
          identifier: mx.mappings.ea.review-order.estimatedTotalInsideButtonSection
          attribute: text
          storeIn: displayedEstimatedTotal
      - executeNode:
           file: mx/test/helpers/utils/cleanPriceString.js
           args:
             - value: ${displayedEstimatedTotal}
           getResponse:
               storeIn: displayedEstimatedTotal
      - log:
          message: "Displayed Estimated Total: '${displayedEstimatedTotal}'"
          color: CYAN
      - if:
          condition: ${displayedEstimatedTotal} == ${expectedEstimatedTotal}
          then:
            - log:
                message: "Successful Assertion: Estimated Total from button section is correct."
                color: CYAN
          else:
            - failTest:
                message: "Failed Assertion: Estimated Total from button section is incorrect."
      - log:
          message: "End function: review-order.assertEstimatedTotalFromButton"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function asserts the products count next to the subtotal label below the products section in cart.
  # PARAMS:       ${expectedProductsCount}  [Mandatory]  Product Count expected to be displayed.
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.functions.ea.review-order.assertProductsCountInSubtotalLabel
    platform: android
    flow:
      - log:
          message: "Expected Product Count: '${expectedProductsCount}'"
          color: CYAN
      - getString:
          identifier: mx.mappings.ea.review-order.productsCountInSubtotalLabel
          attribute: text
          storeIn: displayedProductsCount
      - log:
          message: "Displayed Product Count: '${displayedProductsCount}'"
          color: GREEN_BOLD
      - verifyIdentifier:
          text:
            - identifier: mx.mappings.ea.review-order.productsCountInSubtotalLabel
              contains: "(${expectedProductsCount} artículo"
      - log:
          message: "Assertion Succeeded: Products Count is correct"
          color: GREEN_BOLD
      - log:
          message: "End function: review-order.assertProductsCountInSubtotalLabel"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # RETURNS:
  #   ${returnedOrderedDate}  The ordered date of the order if needed in a future assertion.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.ea.review-order.tapPlaceOrder
    platform: android
    flow:
    - click:
        identifier: mx.mappings.ea.review-order.placeOrderButton
    - executeNode:
        file: mx/test/helpers/utils/getTodaysDateAsStringForAssertion.js
        getResponse:
          storeIn: returnedOrderedDate
    - log:
        message: "Ordered Date '${returnedOrderedDate}' saved in 'returnedOrderedDate'."
        color: GREEN_BOLD
    - log:
        message: "End function: review-order.tapPlaceOrder"
        color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: Click on checkbox 'I want invoice' in billing section 
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.review-order.tapWantInvoiceCheckbox
    platform: android
    flow:
    - click:
        identifier: mx.mappings.ea.review-order.invoiceCheckbox
    - log:
        message: "End function: ea.review-order.tapWantInvoiceCheckbox"
        color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: Assert checked property for 'I want invoice' checkbox.
  # PARAM: ${expectedCheckState} [Mandatory]   Boolean [true | false] for the expected state  of the property 'checked'. i.e.: 
  #                                             -if @checked property is 'true' assert that checkbox is selected/checked
  #                                             -if @checked property is 'false' assert that checkbox is no selected/unchecked 
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.review-order.assertWantInvoiceCheckboxState
    platform: android
    flow:
      - log:
          message: "Expected value for property 'checked': '${expectedCheckState}'"
          color: CYAN
      - verifyIdentifier:
          checked:
            - identifier: mx.mappings.ea.review-order.invoiceCheckbox 
              value: ${expectedCheckState}
      - log:
          message: "Assertion Succeeded: invoice checkbox property 'checked' is '${expectedCheckState}']"
          color: CYAN
      - log:
          message: "End function ea.review-order.assertWantInvoiceCheckboxState"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.review-order.tapEditAddress
    platform: android
    flow:
    - click:
        identifier: mx.mappings.ea.review-order.editAddressButton
    - log:
        message: "End function: ea.review-order.tapEditAddress"
        color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.ea.review-order.almost-done-popup.exitPayment
    platform: android
    flow:
    - click:
        identifier: mx.mappings.ea.review-order.almost-done-popup.exitPaymentButton
    - log:
        message: "End function: ea.review-order.almost-done-popup.exitPayment"
        color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Francisco Ramirez (vn53vq4)
  - name: mx.functions.ea.review-order.assertRestrictionMessage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.review-order.restrictionMessage
      - log:
          message: "Assertion Succeeded: Restriction Message is displayed"
          color: CYAN
      - log:
          message: "End function ea.review-order.assertRestrictionMessage"
          color: BLUE