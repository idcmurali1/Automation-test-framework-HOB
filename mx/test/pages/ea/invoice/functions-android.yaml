#======================================================================================================================
#  AUTHOR: Osmar Juárez (vn56dce)
#  CREATED: Oct/27/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # DESCRIPTION:  This method asserts if Invoice page is present.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.invoice.assertPageDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.invoice.headerTitleTextLabel
            - identifier: mx.mappings.ea.invoice.addBillingLabel
      - log:
          message: "Assertion Succeeded: Invoice Screen Is Displayed"
          color: CYAN
      - log:
          message: "End function: account.assertPageDisplayed"
          color: BLUE

# ------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method clicks on the Add button to add a new Invoice information
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.invoice.tapAddInvoiceInfo
    platform: android
    flow: 
      - click: 
          identifier: mx.mappings.ea.invoice.addInvoiceInfoButton
      - log:
          message: "End function: ea.invoice.tapAddInvoiceInfo"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method clicks on the Back button to exit from the invoice
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.invoice.tapBackButton
    platform: android
    flow: 
      - click: 
          identifier: mx.mappings.ea.invoice.backButton
      - log:
          message: "End function: ea.invoice.tapBackButton"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method aserts a message displayed if a new invoice info is added succesfully
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.invoice.assertSuccessMessageNewInvoiceAdded
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.invoice.invoiceAddedSuccesfullyText
          timeout: 150000
      - log:
          message: "Assertion Succeeded: New Invoice Success Message Displayed"
          color: CYAN
      - log:
          message: "End function: ea.invoice.assertSuccessMessageNewInvoiceAdded"
          color: BLUE
  
# -------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This method aserts the info of an invoice displayed correctly.
  # PARAM: ${invoiceType}    [Mandatory] type could be organization or individual
  # PARAM: ${invoiceName}    [Mandatory] invoice name could be a Company's name or a Person's name 
  # PARAM: ${taxPayerId}     [Mandatory] tax payer id (RFC)
  # PARAM: ${cfdiId}         [Mandatory] invoice cfdi ID depends on regime could be like G01, G02, etc.
  # PARAM: ${invoiceAddress} [Mandatory] addreess for the invoice info
  # PARAM: ${email}          [Mandatory] email for to the invoice info
  # PARAM: ${isMainProfile}  [Mandatory] boolean flag to validate main profile label
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.ea.invoice.assertInvoiceProfileDisplayed
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.ea.invoice.invoiceTypeLabel       # <--PARAM--${invoiceType}
            - identifier: mx.mappings.ea.invoice.nameLabel              # <--PARAM--${invoiceName}
            - identifier: mx.mappings.ea.invoice.taxPayerIdLabel        # <--PARAM--${taxPayerId}
            - identifier: mx.mappings.ea.invoice.cfdiLabel              # <--PARAM--${cfdiId}
            - identifier: mx.mappings.ea.invoice.addressLabel           # <--PARAM--${invoiceAddress}
            - identifier: mx.mappings.ea.invoice.emailLabel             # <--PARAM--${email}
            - identifier: mx.mappings.ea.invoice.editButton             # <--PARAM--${taxPayerId}
            - identifier: mx.mappings.ea.invoice.removeButton           # <--PARAM--${taxPayerId}
          timeout: 150000

      - if:
          condition: ${isMainProfile} == true
          then:
             - verifyIdentifier:
                  present:
                    - identifier: mx.mappings.ea.invoice.preferredAddressLabel
                    
      - log:
          message: "Assertion Succeeded: Invoice Information Displayed Correctly"
          color: CYAN
      - log:
          message: "End function: ea.invoice.assertInvoiceDisplayed"
          color: BLUE
