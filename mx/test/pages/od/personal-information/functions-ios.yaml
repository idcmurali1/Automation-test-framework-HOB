#======================================================================================================================
#  AUTHOR: Isis Rojas Tolentino (vn53dge)
#  CREATED: Mar/13/2023
#  REVISION: ---
#
#  Copyright Â© 2022 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # Description: This function taps on done button
  - name: mx.functions.personal-information.tapDone
    platform: ios
    flow: 
      - log:
          message: "Tapping on Done button..."
          color: CYAN
      - click:
          identifier: mx.mappings.personal-information.doneButton
      - log:
          message: Done button tapped!
          color: CYAN
          
  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function edit's user fields
  # Param ${userFirstName} [Mandatory] User's first name
  # Param ${userLastName} [Mandatory] User's last name
  - name: mx.functions.personal-information.editUser
    platform: ios
    flow: 
        - log:
            message: "Tapping on edit user... "
            color: CYAN
        - click:
            identifier: mx.mappings.personal-information.editNameButton
        - log:
            message: Entering First and last name...
        - enterText:
            identifier: mx.mappings.personal-information.editFirstNameField
            clearField: true
            string: ${userFirstName}
        - enterText:
            identifier: mx.mappings.personal-information.editLastNameField
            clearField: true
            string: "${userLastName}" 
        - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
        - click:
            identifier: mx.mappings.personal-information.saveButton
        - log:
            message: User first and last name updated successfully!
            color: CYAN

  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function add user's phone number
  # Param ${codeNumberOption} [Mandatory] Number code (Lada)
  # Param ${userPhoneNumber} [Mandatory] User phone number
  - name: mx.functions.personal-information.addPhoneNumber
    platform: ios
    flow: 
        - log:
           message: "Adding user phone number... "
           color: CYAN
        - click:
           identifier: mx.mappings.personal-information.addPhoneNumberButton
        - click:
            identifier: mx.mappings.personal-information.codeNumberField
        - click:
            identifier: mx.mappings.personal-information.codeNumberOption
        - enterText:
            identifier: mx.mappings.personal-information.phoneNumberField
            clearField: true
            string: ${userPhoneNumber}
        - click:
            identifier: mx.mappings.personal-information.saveButton
        - log:    
           message: Add phone number added successfully!
           color: CYAN

  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function edits the user phone number
  # Param ${codeNumberOption} [Mandatory] Number code (Lada)
  # Param ${userPhoneNumber} [Mandatory] User phone number
  - name: mx.functions.personal-information.editPhoneNumber
    platform: ios
    flow: 
        - log:
           message: "Editing user's phone number... "
           color: CYAN
        - click:
           identifier: mx.mappings.personal-information.editPhoneNumberButton
        - click:
            identifier: mx.mappings.personal-information.codeNumberField
        - click:
            identifier: mx.mappings.personal-information.codeNumberOption
        - enterText:
            identifier: mx.mappings.personal-information.phoneNumberField
            clearField: true
            string: ${userPhoneNumber}
        - click:
            identifier: mx.mappings.personal-information.saveButton
        - log:    
            message: Add phone number added successfully!
            color: CYAN
        - log:
            message: User phone number updated!
            color: CYAN

  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function changes the current user password
  # Param ${currentPassword} [Mandatory] Current password
  # Param ${newPassword} [Mandatory] New Password
  - name: mx.functions.personal-information.changePassword
    platform: ios
    flow: 
      - log:
          message: Changing password... 
          color: CYAN
      - click:
          identifier: mx.mappings.personal-information.editPasswordButton
      - enterText:
          identifier: mx.mappings.personal-information.currentPasswordField
          clearField: true
          string: ${currentPassword}
      - enterText:
          identifier: mx.mappings.personal-information.newPasswordField
          clearField: true
          string: ${newPassword}
      - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
      - click:
            identifier: mx.mappings.personal-information.saveButton
      - log:
          message: Password updated successfully!
          color: CYAN
  
  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function selects the user gender
  # Param ${userGender} [Mandatory] User gender
  - name: mx.functions.personal-information.addGender
    platform: ios
    flow: 
      - log:
          message: Selecting user gender...
          color: CYAN
      - click:
          identifier: mx.mappings.personal-information.addGenderButton
      - click:
          identifier: mx.mappings.personal-information.genderField
      - click:
          identifier: mx.mappings.personal-information.genderOption
      - click:
            identifier: mx.mappings.personal-information.saveButton
      - log:
          message: User gender added successfully!
          color: CYAN
  
  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function edits the gender
  # Param ${userGender} [Mandatory] User birthday year
  - name: mx.functions.personal-information.editGender
    platform: ios
    flow: 
      - log:
          message: Editing user gender...
          color: CYAN
      - click:
          identifier: mx.mappings.personal-information.editGenderButton
      - click:
          identifier: mx.mappings.personal-information.genderField
      - click:
          identifier: mx.mappings.personal-information.genderOption
      - click:
            identifier: mx.mappings.personal-information.saveButton
      - log:
          message: User gender edited successfully!
          color: CYAN

  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function adds user birthday
  # Param ${userBirthdayMonth} [Mandatory] User birthday month
  # Param ${userBirthdayYear} [Mandatory] User birthday year
  # Param ${userCurrentAge} [Mandatory] User current age
  # Param ${userBirthDay} [Mandatory] User birth day (I.e. June, March, June... First Capital Letter)
  - name: mx.functions.personal-information.addBirthday
    platform: ios
    flow: 
        - log:
            message: Adding user birthday...
            color: CYAN
        - click:
            identifier: mx.mappings.personal-information.addBirthdayButton
        - click:
            identifier: mx.mappings.personal-information.birthdayDateField
        - click:
            identifier: mx.mappings.personal-information.yearSelector
        - log:
            message: Selecting user month of birth...
            color: CYAN
        - loop:
            begin: 0
            end: 12
            mode: increment
            flow:
                - if:
                    identifier:
                        present:
                        - identifier: mx.mappings.personal-information.userBirthdayMonthOption
                    then:
                        - log:
                            message:  "User birth month: ${userBirthdayMonth}, has been selected."
                            color: CYAN
                        - break: true
                    else:
                        - log: 
                            message: "User birth month not selected, verifying previous year..."
                            color: CYAN
                        - click:
                            identifier: mx.mappings.personal-information.monthContainer
                            coordinates: 25%,40%
        - log:
            message: Selecting user year of birth...
            color: CYAN
        - loop:
            begin: 0
            end: ${userCurrentAge}
            mode: increment
            flow:
                - if:
                    identifier:
                        present:
                        - identifier: mx.mappings.personal-information.userBirthdayYearOption
                    then:
                        - log:
                            message: "User birth year: ${userBirthdayYear}, has been selected."
                            color: CYAN
                        - break: true
                    else:
                        - log: 
                            message: "User birth year not selected, verifying previous year..."
                            color: CYAN
                        - click:
                            identifier: mx.mappings.personal-information.yearContainer
                            coordinates: 75%,40%
        - click:
            identifier:  mx.mappings.personal-information.hideDateSelector
        - log:
            message: "Selecting user birth day: ${userBirthDay}"
            color: CYAN
        - click:
            identifier: mx.mappings.personal-information.birthDaySelection
        - click:
            identifier: mx.mappings.personal-information.doneButton
        - click:
            identifier: mx.mappings.personal-information.saveButton
        - log:
            message: User date birth added successfully!

  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function edits user birthday
  # Param ${userBirthdayMonth} [Mandatory] User birthday month
  # Param ${userBirthdayYear} [Mandatory] User birthday year
  # Param ${userCurrentAge} [Mandatory] User current age
  # Param ${userBirthDay} [Mandatory] User birth day
  - name: mx.functions.personal-information.editBirthday
    platform: ios
    flow: 
        - log:
            message: Editing user birthday...
            color: CYAN
        - click:
            identifier: mx.mappings.personal-information.editBirthdayButton
        - click:
            identifier: mx.mappings.personal-information.editBirthdayField 
        - click:
            identifier: mx.mappings.personal-information.yearSelector
        - log:
            message: Selecting user month of birth...
            color: CYAN
        - loop:
            begin: 0
            end: 12
            mode: increment
            flow:
                - if:
                    identifier:
                        present:
                        - identifier: mx.mappings.personal-information.userBirthdayMonthOption
                    then:
                        - log:
                            message:  "User birth month: ${userBirthdayMonth}, has been selected."
                            color: CYAN
                        - break: true
                    else:
                        - log: 
                            message: "User birth month not selected, verifying previous year..."
                            color: CYAN
                        - click:
                            identifier: mx.mappings.personal-information.monthContainer
                            coordinates: 25%,40%
        - log:
            message: Selecting user year of birth...
            color: CYAN
        - loop:
            begin: 0
            end: ${userCurrentAge}
            mode: increment
            flow:
                - if:
                    identifier:
                        present:
                        - identifier: mx.mappings.personal-information.userBirthdayYearOption
                    then:
                        - log:
                            message: "User birth year: ${userBirthdayYear}, has been selected."
                            color: CYAN
                        - break: true
                    else:
                        - log: 
                            message: "User birth year not selected, verifying previous year..."
                            color: CYAN
                        - click:
                            identifier: mx.mappings.personal-information.yearContainer
                            coordinates: 75%,40%
        - click:
            identifier:  mx.mappings.personal-information.hideDateSelector
        - log:
            message: "Selecting user birth day: ${userBirthDay}"
            color: CYAN
        - click:
            identifier: mx.mappings.personal-information.birthDaySelection
        - click:
            identifier: mx.mappings.personal-information.doneButton
        - click:
            identifier: mx.mappings.personal-information.saveButton
        - log:
            message: User date birth added successfully!