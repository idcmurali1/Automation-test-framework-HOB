#======================================================================================================================
#  AUTHOR: Olga D. Gonzalez (vn55r4a)
#  CREATED: Dec/26/2024
#  REVISION: ---
#
#  Copyright © 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:

#--------------------------------------------------------------------------------------------------------------------
# PARAMS:  ${crossingStreets}  [Mandatory]  References info to enter
# AUTHOR: Olga D. González (vn55r4a)  
  - name: mx.functions.add-and-edit-address-form.enterCrossingStreets
    platform: android
    flow:    
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.add-and-edit-address-form.crossingStreetsField 
          position: center
      - enterText:
          identifier: mx.mappings.add-and-edit-address-form.crossingStreetsField
          string: ${crossingStreets}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.hideKeyboard
      - log:
          message: "End function: functions.add-and-edit-address-form.enterCrossingStreets"
          color: BLUE
#--------------------------------------------------------------------------------------------------------------------
# PARAMS:  ${references}  [Mandatory]  References info to enter 
# AUTHOR: Olga D. González (vn55r4a)
  - name: mx.functions.add-and-edit-address-form.enterReferences
    platform: android
    flow:    
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.add-and-edit-address-form.referencesField
          position: center
      - enterText:
          identifier: mx.mappings.add-and-edit-address-form.referencesField
          string: ${references}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.hideKeyboard
      - log:
          message: "End function: functions.add-and-edit-address-form.enterReferences"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  # AUTHOR: Francisco Ramirez (vn53vq4)
  # Description: This function enters street address
  # Param:  ${streetAddress}  [Mandatory]  Street address to enter 
  - name: mx.functions.add-and-edit-address-form.enterStreetAddress
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.add-and-edit-address-form.streetAddress
          string: ${streetAddress}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.hideKeyboard
      - log:
          message: "End functions: add-and-edit-address-form.enterStreetAddress"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------
  # PARAMS:  ${phoneNumber}  [Mandatory]  Phone number to enter 
  # AUTHOR: Olga D. González (vn55r4a)
  - name: mx.functions.add-and-edit-address-form.enterPhoneNumber
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.add-and-edit-address-form.phoneNumber
          position: center
      - enterText:
          identifier: mx.mappings.add-and-edit-address-form.phoneNumber
          string: ${phoneNumber}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.hideKeyboard
      - log:
          message: "End functions: add-and-edit-address-form.enterPhoneNumber"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------
# AUTHOR: Olga D. Gonzalez (vn55r4a)
  - name: functions.add-and-edit-address-form.setDeliveryAddressAsFavoriteDeliveryAddress
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.add-and-edit-address-form.preferredCheck
          position: center
      - sleep:
         duration: 3000
      - try:
          flow:
            - getString:
                identifier: mx.mappings.add-and-edit-address-form.preferredCheck
                attribute: checked
                storeIn: FavoriteAddressCheckbox
          catch:
            flow:
              - storeIn:
                  key: FavoriteAddressCheckbox
                  value: 0
      - if:
          condition: ${FavoriteAddressCheckbox} == 1
          then:
            - log:
                message: Billing Address already set as Favorite Delivery Address.
                color: GREEN
          else:
            - scroll:
               direction: down
               untilIdentifier: mx.mappings.add-and-edit-address-form.preferredCheck
               position: center
            - log:
               message: "Billing Address has been set as Favorite Delivery Address ..."
               color: CYAN
            - click:
               identifier: mx.mappings.add-and-edit-address-form.preferredCheck
      - log:
          message: "End function: add-and-edit-address-form.setDeliveryAddressAsFavoriteDeliveryAddress"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------
# PARAMS:  ${streetAddress}  [Mandatory]  Street address to enter
# AUTHOR: Olga D. González (vn55r4a)
  - name: mx.functions.add-and-edit-address-form.enterStreetDeliveryAddress
    platform: android
    flow:
      # Accept location permission pop up if displayed
      - if:
          identifier:
            present:
              - identifier: addAddressPage.allowLocationPermission
            timeout: 3000
          then:
            - click:
                identifier: addAddressPage.allowLocationPermission
            - click:
                identifier: addAddressPage.streetAddress
      - enterText:
          identifier: addAddressPage.streetAddress
          string: ${streetAddress}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.hideKeyboard 
      - log:
          message: "End functions: add-and-edit-address-form.enterStreetDeliveryAddress"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------
# AUTHOR: Olga D. González (vn55r4a)
  - name: mx.functions.add-and-edit-address-form.scrollUpToExteriorNumber
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: addAddressPage.exteriorNumber
          then: 
            - scroll:
                direction: up
                scrollLimit: 1
                untilIdentifier: addAddressPage.exteriorNumber
                wait: 1000
            - log:
                message: "Scrolled up to exterior number."
                color: CYAN
          else:
            - log:
                message: "Element exterior number is already shown"
                color: CYAN
      - log:
          message: "End function: add-and-edit-address-form.scrollUpToExteriorNumber"
          color: BLUE        
#--------------------------------------------------------------------------------------------------------------------
# PARAMS:  ${coloniaName}  [Mandatory]  Colonia Name to enter 
# AUTHOR: Olga D. González (vn55r4a)
  - name: mx.functions.add-and-edit-address-form.enterColoniaName
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.add-and-edit-address-form.coloniaName
          string: ${coloniaName}
          clearField: true
          clickFirst: true
      - executeFunction:
          name: functions.utils.hideKeyboard
      - log:
          message: "End functions: add-and-edit-address-form.enterColoniaName"
          color: BLUE