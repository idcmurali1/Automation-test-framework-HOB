#======================================================================================================================
#  AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
#  CREATED: Abr/12/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:
  
  - name: mx.functions.paypal-login.assertPageDisplayed
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.paypal-login.pageTitle
            - identifier: mx.mappings.paypal-login.backButton
            - identifier: mx.mappings.paypal-login.closeButton
            - identifier: mx.mappings.paypal-login.emailField
      - log:
          message: "End function: paypal-login.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters the user's PayPal email.
  # Param   ${userPaypalEmail}  [Mandatory]  Expected PayPal account email.
  - name: mx.functions.paypal-login.enterEmail
    flow:
      - log:
          message: "Paypal email: ${userPaypalEmail}"
          color: CYAN
      - enterText:
          identifier: mx.mappings.paypal-login.emailField
          string: ${userPaypalEmail}
          clickFirst: true
          clearField: true
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: paypal-login.enterEmail"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters the user's PayPal password.
  # Param   ${userPaypalPassword}  [Mandatory]  Expected PayPal account password.
  - name: mx.functions.paypal-login.enterPassword
    flow:
      - log:
          message: "Paypal password: ${userPaypalPassword}"
          color: CYAN
      - enterText:
          identifier: mx.mappings.paypal-login.passwordField
          string: ${userPaypalPassword}
          clickFirst: true
      - if:
          condition: ${APP_PLATFORM} == 'android'
          then:
            # Using 'goBack' function to hide the keyboard because the 'done' action on this particular field, starts the login process.
            - goBack: true
          else:
            - executeFunction:
                name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: paypal-login.enterPassword"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.paypal-login.tapNext
    flow:
      - click:
          identifier: mx.mappings.paypal-login.nextButton
      - log:
          message: "End function: paypal-login.tapNext"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.paypal-login.tapLogin
    flow:
      - click:
          identifier: mx.mappings.paypal-login.loginButton
      - log:
          message: "End function: paypal-login.tapLogin"
          color: BLUE
