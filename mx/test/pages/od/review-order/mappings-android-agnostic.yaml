#======================================================================================================================
#  AUTHOR: Francisco Javier Ramírez Hernández (vn53vq4)
#  CREATED: Feb/09/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================


android:

  - name: mx.mappings.review-order.addDeliveryInstructions
    identifier: com.walmart.mg.debug:id/checkout_delivery_instructions_edit_button
  
  - name: mx.mappings.review-order.payment-section.editPaymentMethod
    identifier: //android.widget.Button[contains(@resource-id, "add_payment")] | //android.widget.Button[contains(@resource-id, "change_payments_button")]
  
  - name: mx.mappings.review-order.payment-section.paymentLabel
    identifier: com.walmart.mg.debug:id/wallet_header
 
  - name: mx.mappings.review-order.deliveryInstructionsMessage
    identifier: com.walmart.mg.debug:id/checkout_delivery_instructions_text

  - name: mx.mappings.review-order.discountText
    identifier: //android.widget.TextView[contains(@resource-id, "checkout_price_savings_value") and @text="${expectedDiscount}"]

  - name: mx.mappings.review-order.substitutesDisclaimer
    identifier: //*[@resource-id= "com.walmart.mg.debug:id/disclaimer"]

  - name: mx.mappings.review-order.editSusbstitutesButton
    identifier: //android.widget.Button[contains(@resource-id, "order_items_details")]

  - name: mx.mappings.review-order.payment-section.editOrAddPaymentMethod
    identifier: //android.widget.Button[contains(@resource-id,"change_payments_button")] | //android.widget.Button[contains(@resource-id, "add_payment")]

  - name: mx.mappings.review-order.cardSummary
    identifier: //android.widget.LinearLayout[contains(@resource-id, "card_summaries")]//android.widget.TextView[contains(@resource-id, "label")]

  - name: mx.mappings.review-order.pageTitle # Page title may say 'Revisar pedido' or 'Pago'
    identifier: //android.view.ViewGroup//android.widget.TextView[@text="Revisar pedido" or @text="Pago"]

  - name: mx.mappings.review-order.deliveryHeaderContainer
    identifier: com.walmart.mg.debug:id/checkout_delivery_header

  - name: mx.mappings.review-order.deliveryDetailsSection
    identifier: //android.view.ViewGroup[contains(@resource-id,"checkout_delivery_body")]

  - name: mx.mappings.review-order.instructionsSection
    identifier: //android.widget.TextView[contains(@resource-id,"checkout_delivery_instructions_label")]

  - name: mx.mappings.review-order.substitutesSection
    identifier: //android.view.ViewGroup[contains(@resource-id,"actionable_area")]

  - name: mx.mappings.review-order.placeOrderButton
    identifier: //android.widget.Button[contains(@resource-id,"button_place_order")]

  - name: mx.mappings.review-order.selectedDeliveryMethod
    identifier: //android.widget.TextView[contains(@resource-id,"delivery_section_new_title")] | //android.widget.TextView[contains(@resource-id,"fulfillment_new_method")]
  
  - name: mx.mappings.review-order.deliverySlot
    identifier: //android.widget.TextView[contains(@resource-id,"delivery_pickup_date")]
  
  - name: mx.mappings.review-order.addressName
    identifier: //android.widget.TextView[contains(@resource-id,"delivery_store_description")]
  
  - name: mx.mappings.review-order.deliveryAddress
    identifier: //android.widget.TextView[contains(@resource-id,"delivery_address") or contains(@resource-id,"fulfillment_address")]
  
  - name: mx.mappings.review-order.requestIssuesPopupContainer
    identifier: //android.widget.FrameLayout[contains(@resource-id,"action_bar_root")]
  
  - name: mx.mappings.review-order.requestIssuesPopupOkButton
    identifier: //android.widget.FrameLayout[contains(@resource-id,"action_bar_root")]//android.widget.Button[contains(@resource-id,"button1")]
  
  - name: mx.mappings.review-order.todayDeliverySlotIsSelected
    identifier: //android.widget.TextView[contains(@resource-id,"delivery_pickup_date") and contains(@text,"Hoy")]

  - name: mx.mappings.review-order.deliveryAddressForAssertion
    identifier: //android.widget.TextView[contains(@resource-id,"delivery_address") and contains(@text,"${userDeliveryAddress}")]
  
  - name: mx.mappings.review-order.walletHeader
    identifier: //androidx.cardview.widget.CardView/android.view.ViewGroup/android.widget.TextView[contains(@resource-id,"wallet_header")]

  - name: mx.mappings.review-order.payment-section.cvvInputField
    identifier: //android.widget.EditText[@content-desc="CVV"]

  - name: mx.mappings.review-order.msiPromotionBannerDisplayed
    identifier: //android.widget.ImageView[@content-desc="Icono"] | //android.widget.ImageView[@content-desc="Expandir"]

  - name: mx.mappings.review-order.expandCollapseMSIPromotionsButton
    identifier: //android.widget.ImageView[contains(@resource-id,"indicator_icon")]
  
  - name: mx.mappings.review-order.msiPromotionOption
    identifier: //android.widget.RadioButton[@checkable="true" and contains(@text,"${msiPromotionOption}")]
  
  - name: mx.mappings.review-order.msiPromotionApplied
    identifier: //android.widget.TextView[contains(@text,"${msiPromotionOption}")]

  - name: mx.mappings.review-order.backButton
    identifier: //android.widget.ImageButton[contains(@content-desc,"hacia arriba")]

  - name: mx.mappings.review-order.almost-done-popup.exitPaymentButton
    identifier: //android.widget.Button[contains(@resource-id,"unsaved_changes_confirm")]
  
  - name: mx.mappings.review-order.estimatedTotalPrice
    identifier: //android.widget.TextView[contains(@resource-id,"detail_line_one")]
  
  - name: mx.mappings.review-order.deliveryFeeValue
    identifier: //android.widget.TextView[contains(@resource-id,"checkout_pos_fee_value")]
  
  - name: mx.mappings.review-order.estimatedTotalPriceFromBottomLabel
    identifier: //android.widget.TextView[contains(@resource-id,"checkout_total_value")]
  
  - name: mx.mappings.review-order.estimatedTotalPriceFromPlaceOrderButton
    identifier: //android.widget.Button[contains(@resource-id,"button_place_order") and contains(@text,"$${estimatedTotalFromButton}")]

  - name: mx.mappings.review-order.estimatedTotalPriceFromPlaceOrderButtonValue
    identifier: //android.widget.Button[contains(@resource-id,"button_place_order")]
    
  - name: mx.mappings.review-order.sectionContainerByName
    identifier: //android.widget.TextView[(contains(@resource-id,"delivery_section_new_title") and @text="${sectionName}") or (contains(@resource-id,"wallet_header") and @text="${sectionName}") or (contains(@resource-id,"module_title") and @text="${sectionName}")]/ancestor::androidx.cardview.widget.CardView | //android.widget.TextView[(contains(@resource-id,"title") and contains(@text,"${sectionName}")) or (contains(@resource-id,"checkout_total_title") and contains(@text,"${sectionName}"))] | //android.widget.TextView[contains(@resource-id,"promo_applied_text") and contains(@text,"${expectedPromoCode}")] | //android.widget.TextView[contains(@text, "${sectionName}")]
  
  - name: mx.mappings.review-order.subtotalTitle
    identifier: //android.widget.TextView[contains(@resource-id,"checkout_subtotal_title")]
  
  - name: mx.mappings.review-order.productsCountInSubtotalTitleForAssertion
    identifier: //android.widget.TextView[contains(@resource-id,"checkout_subtotal_title") and contains(@text,"Subtotal (${expectedProductsCount} artículo")]
  
  - name: mx.mappings.review-order.phoneNumberErrorMessage
    identifier: //android.widget.TextView[contains(@resource-id,"textinput_error") and contains(@text,"El teléfono debe ser de 10 dígitos")]
  
  - name: mx.mappings.review-order.phoneNumberInputField
    identifier: //*[contains(@resource-id,"mobile_contact_phone_number_field")]//following-sibling::android.widget.EditText

  - name: mx.mappings.review-order.updatesByPhoneCheckbox
    identifier: ${appPackage}:id/mobile_contact_order_status_checkbox
 
  - name: mx.mappings.review-order.displayedPhoneNumber
    identifier: //*[contains(@resource-id,"mobile_contact_phone_number_field")]//following-sibling::android.widget.EditText[@text="${expectedPhoneNumber}"]
 
  - name: mx.mappings.review-order.promotionalCodeField
    identifier: //android.widget.EditText[contains(@resource-id,"field_promo")]/android.widget.FrameLayout/android.widget.EditText
 
  - name: mx.mappings.review-order.appliedPromotionalCode
    identifier: //android.widget.TextView[contains(@resource-id,"promo_applied_text") and contains(@text,"${expectedPromoCode}")]

  - name: mx.mappings.review-order.expandCollapsePromoCodeSectionButton
    identifier: //android.widget.ImageView[@content-desc="Expandir" and contains(@resource-id,"indicator_icon")]

  - name: mx.mappings.review-order.applyPromotionalCodeButton
    identifier: //android.widget.Button[contains(@resource-id,"promo_apply_button")]

  - name: mx.mappings.review-order.expandedPromotionalCodeSection
    identifier: //living.design.widget.Button[contains(@resource-id,"collapse_expand_header") and contains(@content-desc,"Expandido")]

  - name: mx.mappings.review-order.contractedPromotionalCodeSection
    identifier: //android.widget.Button[contains(@resource-id,"collapse_expand_header") and contains(@content-desc,"Oculto")]

  - name: mx.mappings.review-order.deleteAppliedPromotionalCodeButton
    identifier: //android.widget.Button[contains(@resource-id,"promo_remove_button") and contains(@text,"Eliminar")]

  - name: mx.mappings.review-order.promoDiscountValue
    identifier: //android.widget.TextView[@resource-id="com.walmart.mg.debug:id/checkout_pos_discount_value"]
  
  - name: mx.mappings.review-order.payment-section.blueMessage
    identifier: //android.view.ViewGroup[contains(@resource-id,"use_benefits")]
  
  - name: mx.mappings.review-order.payment-section.selectedPaymentMethod
    identifier: //android.widget.TextView[contains(@resource-id,"label")]
  
  - name: mx.mappings.review-order.payment-section.payAtDeliveryMethodIsSelected
    identifier: //android.widget.LinearLayout[contains(@content-desc, "Pago contra entrega")]

  - name: mx.mappings.review-order.payment-section.payAtDeliveryCashOptionLabel
    identifier: //following-sibling::android.widget.TextView[contains(@resource-id, "detail_line_two") and (contains(@text, "Pago en efectivo") or contains(@text, "efectivo") or contains(@text, "vales de despensa"))]

  - name: mx.mappings.review-order.payment-section.payAtDeliveryCardOptionLabel
    identifier: //android.widget.TextView[contains(@resource-id,"label") and @text="Contra entrega"]/following-sibling::android.widget.TextView[contains(@resource-id,"detail_line_two") and (contains(@text,"Tarjeta de crédito/débito/vale electrónico") or contains(@text,"arjeta de crédito"))]
  
  - name: mx.mappings.review-order.payment-section.payWithCardMethodIsSelected
    identifier: //android.widget.TextView[contains(@resource-id,"label") and contains(@text,"Con terminación en")]

  - name: mx.mappings.review-order.payment-section.payWithCardLast4DigitsIsSelected
    identifier: //android.widget.TextView[contains(@resource-id,"label") and contains(@text,"${last4Digits}")]
  
  - name: mx.mappings.review-order.payment-section.paypalMethodIsSelected
    identifier: //android.widget.TextView[contains(@resource-id,"label") and contains(@text,".com")]
  
  - name: mx.mappings.review-order.payment-section.selectedPaypalAccountByEmail
    identifier: //android.widget.TextView[contains(@resource-id,"label") and @text="${expectedUserPaypalEmail}"]
  
  - name: mx.mappings.review-order.payment-section.totalValueForAssertion
    identifier: //android.widget.TextView[(contains(@resource-id,"checkout_total_value")) and contains(@text,"$${expectedTotal}")]
  
  - name: mx.mappings.review-order.payment-section.paypalIcon
    identifier: //android.widget.ImageView[contains(@resource-id,"icon") and contains(@content-desc,"PayPal")]
 
  - name: mx.mappings.review-order.payment-section.addPaymentMethodButton
    identifier: //android.widget.Button[contains(@text,"Agregar método de pago")] | //android.widget.Button[contains(@resource-id,"add_payment")]

  - name: mx.mappings.review-order.discountIndicator # On Android this element is always visible.
    identifier: //android.widget.TextView[contains(@text, "Ahorros")]/following-sibling::android.widget.TextView[contains(@resource-id, "checkout_price_savings_value") and not(contains(@text,"$0.00"))]

  - name: mx.mappings.review-order.discountValue # On Android this element is always visible.
    identifier: //android.widget.TextView[contains(@text, "Ahorros")]/following-sibling::android.widget.TextView[contains(@resource-id, "checkout_price_savings_value")]

  - name: mx.mappings.review-order.subtotalValueBeforeDiscount # Only visible when discounts are present.
    identifier: //android.widget.TextView[@resource-id="checkout_subtotal_value"]

  - name: mx.mappings.review-order.subtotalValueAfterDiscount # This mapping only works when discounts are present.
    identifier: //*[contains(@resource-id, "checkout_price_savings_container") and(.//*[contains(@resource-id, "checkout_price_savings_value") and not(contains(@text, "$0.00"))])]/following-sibling::*[contains(@resource-id, "checkout_subtotal_value_strategy")]

  - name: mx.mappings.review-order.subtotalValueNoDiscount # This mapping only works when discounts are NOT present.
    identifier: //*[contains(@resource-id, "checkout_price_savings_container") and(.//*[contains(@resource-id, "checkout_price_savings_value") and(contains(@text, "$0.00"))])]/following-sibling::*[contains(@resource-id, "checkout_subtotal_value_strategy")]

  - name: mx.mappings.review-order.subtotalValue # If discounts: Points to the subtotal value BEFORE discount.
    identifier: //*[contains(@resource-id, "checkout_price_savings_container") and(.//*[contains(@resource-id, "checkout_price_savings_value") and(contains(@text, "$0.00"))])]/following-sibling::*[contains(@resource-id, "checkout_subtotal_value_strategy")] | //android.widget.TextView[contains(@resource-id, "checkout_subtotal_value")]
  
  - name: mx.mappings.review-order.restrictionMessage
    identifier: //android.widget.TextView[@content-desc="Restricción de entrega"]

  - name: mx.mappings.review-order.reviewFieldsErrorMessage
    identifier: //*[contains(@resource-id, "checkout_pending_error_message")]

  - name: mx.mappings.review-order.invalidCouponErrorMessage
    identifier: //*[contains(@resource-id, "textinput_error") and contains(@text, "Este cupón no es válido.")]

  # Product details -----------------------
  - name: mx.mappings.review-order.viewButton
    identifier: ${appPackage}:id/order_items_details

  - name: mx.mappings.review-order.productByName
    identifier: //*[contains(@resource-id, "checkout_item_description") and contains(@text, "${productName}")]

  - name: mx.mappings.review-order.productPriceByName
    identifier: //*[contains(@resource-id, "checkout_item_description") and contains(@text, "${productName}")]/preceding-sibling::*[contains(@resource-id, "checkout_item_total_price")]

  - name: mx.mappings.review-order.productQuantityByName
    identifier: //*[contains(@resource-id, "checkout_item_description") and contains(@text, "${productName}")]/ancestor::android.view.ViewGroup//*[contains(@resource-id, "checkout_item_qty") and contains(@text, "Pza(s) ${expectedProductQuantity}")]

  - name: mx.mappings.review-order.products-details-popup.doneButton
    identifier: ${appPackage}:id/details_button_done

  - name: mx.mappings.review-order.storeOrHomeAddress # If home delivery is selected this will be the home address, else this will be the store address.
    identifier: //*[@resource-id= "com.walmart.mg.debug:id/payment_methods_add_delivery_address"]