#======================================================================================================================
#  AUTHOR: Francisco Javier Ramírez Hernández (vn53vq4)
#  CREATED: Feb/22/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

ios:

  - name: mx.mappings.review-order.addDeliveryInstructions
    identifier: //XCUIElementTypeButton[@name="DeliveryInstructionsView.changeButton"]

  - name: mx.mappings.review-order.deliveryInstructionsMessage
    identifier: DeliveryInstructionsView.instructionsLabel

  - name: mx.mappings.review-order.payment-section.payAtDeliveryCashOptionLabel
    identifier: //XCUIElementTypeStaticText[@name="CardSummaryView.titleLabel" and contains(@label,"fectivo")]

  - name: mx.mappings.review-order.payment-section.payAtDeliveryCardOptionLabel
    identifier: //XCUIElementTypeStaticText[@name="CardSummaryView.titleLabel" and contains(@label,"arjeta")]
  
  - name: mx.mappings.review-order.substitutesDisclaimer
    identifier: //XCUIElementTypeStaticText[@name="FulfillmentProductGroupView.bodyLabel"]

  - name: mx.mappings.review-order.pageTitle # Page title may say 'Revisar pedido' or 'Pago'
    identifier: //XCUIElementTypeStaticText[contains(@name,"Revisar pedido") or contains(@name,"Pago")]
 
  - name: mx.mappings.review-order.deliveryHeaderContainer
    identifier: //XCUIElementTypeOther[@name="FulfillmentTitleView.titleContainerView"]
 
  - name: mx.mappings.review-order.selectedDeliveryMethod
    identifier: //XCUIElementTypeOther[@name="FulfillmentTitleView.titleContainerView"]//XCUIElementTypeStaticText[@name="FulfillmentTitleView.titlePrefixLabel"]
 
  - name: mx.mappings.review-order.instructionsSection
    identifier: //XCUIElementTypeOther[@name="DeliveryInstructionsView.topStackView"] | //XCUIElementTypeOther[@name="PickupViewController.instructionsView"]
 
  - name: mx.mappings.review-order.deliveryAddress
    identifier: //XCUIElementTypeStaticText[@name="FulfillmentSummaryView.addressLabel"]
 
  - name: mx.mappings.review-order.addressName
    identifier: //XCUIElementTypeStaticText[@name="FulfillmentSummaryView.nameLabel"]
 
  - name: mx.mappings.review-order.deliveryDetailsSection
    identifier: //XCUIElementTypeOther[@name="DeliveryViewController.fulfillmentSummaryView"] | //XCUIElementTypeOther[@name="PickupViewController.fulfillmentView"]
 
  - name: mx.mappings.review-order.sectionContainerByName
    identifier: //XCUIElementTypeOther[(@name="GlassCard.stackView") and .//XCUIElementTypeStaticText[contains(@value,'${sectionName}')]] | //XCUIElementTypeStaticText[contains(@value,'${sectionName}') and not(./parent::XCUIElementTypeOther[@name="GlassCard.stackView"])] | //XCUIElementTypeOther[@name="PromoViewController.containerStackView"]//XCUIElementTypeStaticText[@name="PromoViewController.promoLabel" and contains(@label,"${expectedPromoCode} aplicado")]
 
  - name: mx.mappings.review-order.msiPromotionBannerDisplayed
    identifier: //XCUIElementTypeOther[@name="GlassBadge.backgroundView"]
 
  - name: mx.mappings.review-order.expandCollapseMSIPromotionsButton
    identifier: //XCUIElementTypeImage[@name="InstallmentsView.chevronView"]
 
  - name: mx.mappings.review-order.msiPromotionOption
    identifier: //XCUIElementTypeStaticText[contains(@name,"${msiPromotionOption}")]
 
  - name: mx.mappings.review-order.msiPromotionApplied
    identifier: //XCUIElementTypeStaticText[contains(@value,"${msiPromotionOption}")]
 
  - name: mx.mappings.review-order.estimatedTotalPrice
    identifier: //XCUIElementTypeOther[@name="CardSummaryView.detailStackView"]/XCUIElementTypeStaticText
 
  - name: mx.mappings.review-order.estimatedTotalPriceFromBottomLabel 
    identifier: //XCUIElementTypeOther[@name="POSViewController.stackView"]/XCUIElementTypeOther[contains(@name,"POSLineItemView.Totalestimado")]//XCUIElementTypeStaticText[contains(@name,"POSLineItemView.rightLabel") and contains(@label,"$${estimatedTotalFromBottom}")]

  - name: mx.mappings.review-order.estimatedTotalPriceFromBottomLabelValue
    identifier: //*[contains(@name,"POSLineItemView.Totalestimado")]//XCUIElementTypeStaticText[@name="POSLineItemView.rightLabel"]

  - name: mx.mappings.review-order.estimatedTotalPriceFromPlaceOrderButton
    identifier: //XCUIElementTypeButton[@name="PlaceOrderView.placeOrderButton" and contains(@label,"${estimatedTotalFromButton}")]

  - name: mx.mappings.review-order.estimatedTotalPriceFromPlaceOrderButtonValue
    identifier: //*[@name="PlaceOrderView.placeOrderButton"]//XCUIElementTypeStaticText

  - name: mx.mappings.review-order.placeOrderButton
    identifier: //XCUIElementTypeButton[@name="PlaceOrderView.placeOrderButton"]

  - name: mx.mappings.review-order.backButton 
    identifier: //XCUIElementTypeButton[@name="ReviewOrderViewController_back_button"]
 
  - name: mx.mappings.review-order.almost-done-popup.exitPaymentButton
    identifier: //XCUIElementTypeButton[@name="ConfirmationViewController.confirmButton" and @label="Salir de proceso de pago"]

  - name: mx.mappings.review-order.deliverySlot
    identifier: //XCUIElementTypeStaticText[@name="FulfillmentSummaryView.detailLabel"]

  - name: mx.mappings.review-order.editSusbstitutesButton
    identifier: //XCUIElementTypeButton[@name="FulfillmentProductGroupView.detailButton"]
 
  - name: mx.mappings.review-order.subtotalTitle
    identifier:  //*[contains(@name,"POSLineItemView.Subtotal")]//*[contains(@value,"Subtotal")]
 
  - name: mx.mappings.review-order.productsCountInSubtotalTitleForAssertion
    identifier: //*[contains(@label,"Subtotal (${expectedProductsCount} artículo")] | //*[contains(@label,"Subtotal (${expectedProductsCount} artículos")]
  
  - name: mx.mappings.review-order.cardSummary
    identifier: //XCUIElementTypeStaticText[@name="CardSummaryView.titleLabel"]

  - name: mx.mappings.review-order.phoneNumberInputField
    identifier: //XCUIElementTypeTextField[@name="TextFieldStackView.textField"]

  - name: mx.mappings.review-order.updatesByPhoneCheckbox
    identifier: MobileContactViewController.optInCheckbox

  - name: mx.mappings.review-order.displayedPhoneNumber
    identifier: //XCUIElementTypeTextField[@name="TextFieldStackView.textField" and @value="${expectedPhoneNumber}"]

  - name: mx.mappings.review-order.rightPOSLineItem
    identifier: //XCUIElementTypeStaticText[@name="POSLineItemView.leftLabel" and contains(@label, "${posLineItem}")]/following-sibling::XCUIElementTypeStaticText[@name="POSLineItemView.rightLabel"]

  - name: mx.mappings.review-order.deliveryFeeValue
    identifier: //*[contains(@name, "POSLineItemView.Costodeenvío")]//XCUIElementTypeStaticText[@name="POSLineItemView.rightLabel" and not(@value="Sin costo")]

  - name: mx.mappings.review-order.promoDiscountValue
    identifier: //*[contains(@name, "POSLineItemView.Descuentos")]//XCUIElementTypeStaticText[@name="POSLineItemView.rightLabel"]
 
  - name: mx.mappings.review-order.phoneNumberErrorMessage
    identifier: //*[contains(@name, "HelperTextView.helperTextLabel") and contains(@value, "teléfono debe ser")]

  - name: mx.mappings.review-order.promotionalCodeField
    identifier: //XCUIElementTypeOther[@name="PromoViewController.codeTextfield"]//XCUIElementTypeTextField

  - name: mx.mappings.review-order.appliedPromotionalCode
    identifier: //XCUIElementTypeOther[@name="PromoViewController.containerStackView"]//XCUIElementTypeStaticText[@name="PromoViewController.promoLabel" and contains(@label,"${expectedPromoCode} aplicado")]

  - name: mx.mappings.review-order.expandCollapsePromoCodeSectionButton
    identifier: //XCUIElementTypeImage[@name="PromoViewController.chevronView"]

  - name: mx.mappings.review-order.applyPromotionalCodeButton
    identifier: //XCUIElementTypeStaticText[@name="Aplicar"] | //XCUIElementTypeButton[@name="PromoViewController.codeButton"]
  
  - name: mx.mappings.review-order.expandedPromotionalCodeSection
    identifier: //XCUIElementTypeStaticText[@name="PromoViewController.titleLabel" and contains(@label,"expanded")]

  - name: mx.mappings.review-order.contractedPromotionalCodeSection
    identifier: //XCUIElementTypeStaticText[@name="PromoViewController.titleLabel" and contains(@label,"collapsed")]

  - name: mx.mappings.review-order.deleteAppliedPromotionalCodeButton
    identifier: //XCUIElementTypeButton[@name="PromoViewController.removeButton"]
  
  - name: mx.mappings.review-order.payment-section.cvvInputField
    identifier: //XCUIElementTypeSecureTextField[@name="GlassTextField.textField"] | //XCUIElementTypeSecureTextField[@name="TextFieldStackView.textField"]

  - name: mx.mappings.review-order.payment-section.editPaymentMethod
    identifier: //XCUIElementTypeStaticText[@name="Cambiar método de pago"]

  - name: mx.mappings.review-order.payment-section.editOrAddPaymentMethod
    identifier: //*[contains(@name, "método de pago")]

  - name: mx.mappings.review-order.payment-section.paymentLabel
    identifier: //*[@name="WalletSummaryViewController.card"]

  - name: mx.mappings.review-order.payment-section.payAtDeliveryMethodIsSelected
    identifier: //XCUIElementTypeStaticText[@name="CardSummaryView.titleLabel" and contains(@label,"arjeta de crédito") or contains(@label,"fectivo")]

  - name: mx.mappings.review-order.payment-section.payWithCardMethodIsSelected
    identifier: //XCUIElementTypeStaticText[@name="CardSummaryView.titleLabel" and contains(@value,"Con terminación en")]

  - name: mx.mappings.review-order.payment-section.payWithCardLast4DigitsIsSelected
    identifier: //*[@name="CardSummaryView.titleLabel" and contains(@label,"${last4Digits}")]
  
  - name: mx.mappings.review-order.payment-section.paypalMethodIsSelected
    identifier: //XCUIElementTypeStaticText[@name="PayPalSummaryView.emailLabel" and contains(@label,".com")]
  
  - name: mx.mappings.review-order.payment-section.selectedPaypalAccountByEmail
    identifier: //XCUIElementTypeStaticText[@name="PayPalSummaryView.emailLabel" and @label="${expectedUserPaypalEmail}"]
  
  - name: mx.mappings.review-order.payment-section.totalValueForAssertion
    identifier: //XCUIElementTypeStaticText[(@name="PayPalSummaryView.amountLabel" or @name="$${expectedTotal}") and @value="$${expectedTotal}"]

  - name: mx.mappings.review-order.payment-section.paypalIcon
    identifier: //XCUIElementTypeImage[@name="PayPalSummaryView.paypalImageView"]

  - name: mx.mappings.review-order.payment-section.blueMessage
    identifier: //XCUIElementTypeOther[@name="WalletSummaryViewController.infoBanner"]

  - name: mx.mappings.review-order.payment-section.listoButton
    identifier: //XCUIElementTypeButton[@name="Listo"]

  - name: mx.mappings.review-order.leftPOSLineItem
    identifier: //XCUIElementTypeStaticText[@name="POSLineItemView.leftLabel" and contains(@label, "${posLineItem}")]

  - name: mx.mappings.review-order.newSubtotalValue
    identifier: //XCUIElementTypeStaticText[@name="POSLineItemView.rightLabel" and contains(@label, "Subtotal (")]

  - name: mx.mappings.review-order.discountIndicator
    identifier: //*[contains(@name,"POSLineItemView.Ahorros")]

  - name: mx.mappings.review-order.discountValue # On Android this element is always visible.
    identifier: //*[contains(@name, "POSLineItemView.Ahorros")]//*[@name= "POSLineItemView.rightLabel"]

  - name: mx.mappings.review-order.subtotalValueBeforeDiscount # This mapping only works when discounts are present.
    identifier: //*[@name= "POSViewController.stackView" and(.//*[contains(@name,"POSLineItemView.Ahorros")])]//*[contains(@name, "POSLineItemView.Subtotal") and contains(@name, "artículo")]//*[@name= "POSLineItemView.rightLabel"]

  - name: mx.mappings.review-order.subtotalValueAfterDiscount # This mapping only works when discounts are present.
    identifier: //*[contains(@name,"POSLineItemView..$")]//*[contains(@value,"Subtotal")]

  - name: mx.mappings.review-order.subtotalValueNoDiscount # This mapping only works when discounts are NOT present.
    identifier: //*[@name= "POSViewController.stackView" and not(.//*[contains(@name,"POSLineItemView.Ahorros")])]//*[contains(@name, "POSLineItemView.Subtotal") and contains(@name, "artículo")]//*[@name= "POSLineItemView.rightLabel"]

  - name: mx.mappings.review-order.subtotalValue # If discounts: Points to the subtotal value BEFORE discount.
    identifier: //*[@name= "POSViewController.stackView" and(.//*[contains(@name,"POSLineItemView.Ahorros")])]//*[contains(@name, "POSLineItemView.Subtotal") and contains(@name, "artículo")]//*[@name= "POSLineItemView.rightLabel"] | //*[@name= "POSViewController.stackView" and not(.//*[contains(@name,"POSLineItemView.Ahorros")])]//*[contains(@name, "POSLineItemView.Subtotal") and contains(@name, "artículo")]//*[@name= "POSLineItemView.rightLabel"]
  
  - name: mx.mappings.review-order.restrictionMessage
    identifier: //*[@name="ComplianceViewController.titleLabel" and contains(@value, "Restricción de entrega")]

  - name: mx.mappings.review-order.reviewFieldsErrorMessage
    identifier: //*[@name="LDAlert.messageLabel" and contains(@value, "Revisa los siguientes campos.")]

  - name: mx.mappings.review-order.invalidCouponErrorMessage
    identifier: //*[@name="LDAlert.messageLabel" and contains(@value, "Este cupón no es válido.")]

  # Product details -----------------------
  - name: mx.mappings.review-order.viewButton
    identifier: FulfillmentProductView.detailButton

  - name: mx.mappings.review-order.productByName
    identifier: //*[contains(@name, "CheckoutItemTileCell")]//*[contains(@value, "${productName}")]

  - name: mx.mappings.review-order.productPriceByName
    identifier: //*[contains(@name, "CheckoutItemTileCell")]//*[contains(@value, "${productName}") and contains(@value, "${expectedProductPrice}")]

  - name: mx.mappings.review-order.productQuantityByName
    identifier: //*[contains(@name, "CheckoutItemTileCell")]//*[contains(@value, "${productName}") and contains(@value, "Qty ${expectedProductQuantity}")]

  - name: mx.mappings.review-order.products-details-popup.doneButton
    identifier: CheckoutItemDetailsListViewController.doneButton
  