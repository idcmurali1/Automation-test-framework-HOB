#======================================================================================================================
#    AUTHOR: Isis Rojas Tolentino (vn53dge)
#   CREATED: Jan/20/2023
#  REVISION: ---
#
#  Copyright Â© 2022 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # Documentation: This function hides the keyboard on this page, because the R2 function "hideKeyboard" forces the edit 
  # address form popup to close, this function is really important because trying to perform a scroll, while the keyboard 
  # is displayed also forces the form to close. This function only works on this view and that is the reason why it is 
  # being added here and not on the "utils.yaml" file.
  - name: mx.functions.edit-address-form.hideKeyboard
    platform: android
    flow:
      - executeAppiumScript:
          method: "mobile: performEditorAction"
          params:
            - key: action
              value: done

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function clicks on close button.
  - name: mx.functions.edit-address-form.tapClose
    platform: android
    flow:
      - click: 
          identifier: mx.mappings.edit-address-form.closeButton

  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: It clears the corresponding field.
  - name: mx.functions.edit-address-form.clearName
    platform: android
    flow:
      - log:
          message: "Clearing name field ..."
          color: CYAN
      - enterText:
          identifier: mx.mappings.edit-address-form.nameField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Enters the user's name.
  # Param: ${userName} [Mandatory] User's name to enter.
  - name: mx.functions.edit-address-form.enterName
    platform: android
    flow:
      - log:
          message: "Adding ${userName} as new user name ..."
          color: CYAN
      - enterText:
          identifier: mx.mappings.edit-address-form.nameField
          string: ${userName}
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.edit-address-form.clearLastName
    platform: android
    flow:
      - log:
          message: "Clearing last name field ..."
          color: CYAN    
      - enterText:
          identifier: mx.mappings.edit-address-form.lastNameField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Enters the user's last name.
  # Param: ${userLastName} [Mandatory] User's last name to enter.
  - name: mx.functions.edit-address-form.enterLastName
    platform: android
    flow:
      - log:
          message: "Adding ${userLastName} as new user last name ..."
          color: CYAN
      - enterText:
          identifier: mx.mappings.edit-address-form.lastNameField
          string: ${userLastName}
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.edit-address-form.clearStreet
    platform: android
    flow:
      - log:
          message: "Clearing street field ..."
          color: CYAN   
      - enterText:
          identifier: mx.mappings.edit-address-form.streetField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Enters the user's street.
  # Param: ${userStreet} [Mandatory] User's street to enter.
  - name: mx.functions.edit-address-form.enterStreet
    platform: android
    flow:
      - log:
          message: "Adding ${userStreet} as new user street ..."
          color: CYAN
      - enterText:
          identifier: mx.mappings.edit-address-form.streetField
          string: ${userStreet}
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.edit-address-form.clearExteriorNumber
    platform: android
    flow:
      - log:
          message: "Clearing exterior number field ..."
          color: CYAN 
      - enterText:
          identifier: mx.mappings.edit-address-form.exteriorNumberField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Enters the user's exterior number.
  # Param: ${userExteriorNumber} [Mandatory] User's exterior number to enter.
  - name: mx.functions.edit-address-form.enterExteriorNumber
    platform: android
    flow:
      - log:
          message: "Adding ${userExteriorNumber} as new user exterior number ..."
          color: CYAN
      - enterText:
          identifier: mx.mappings.edit-address-form.exteriorNumberField
          string: ${userExteriorNumber}
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.edit-address-form.clearInteriorNumber
    platform: android
    flow:
      - log:
          message: "Clearing interior number field ..."
          color: CYAN 
      - enterText:
          identifier: mx.mappings.edit-address-form.interiorNumberField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Enters the user's interior number.
  # Param: ${userInteriorNumber} [Mandatory] User's interior number to enter.
  - name: mx.functions.edit-address-form.enterInteriorNumber
    platform: android
    flow:
      - log:
          message: "Adding ${userInteriorNumber} as new user interior number ..."
          color: CYAN
      - enterText:
          identifier: mx.mappings.edit-address-form.interiorNumberField
          string: ${userInteriorNumber}
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.edit-address-form.clearZipCode
    platform: android
    flow:
      - log:
          message: "Clearing zipcode field ..."
          color: CYAN 
      - enterText:
          identifier: mx.mappings.edit-address-form.zipCodeField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard
          
  #--------------------------------------------------------------------------------------------------------------------

  # Description: Enters the user's zip code number.
  # Param: ${userZipCode} [Mandatory] User's zip code number to enter.
  - name: mx.functions.edit-address-form.enterZipCode
    platform: android
    flow:
      - log:
          message: "Adding ${userZipCode} as new user zipcode number ..."
          color: CYAN
      - enterText:
          identifier: mx.mappings.edit-address-form.zipCodeField
          string: ${userZipCode}
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # NOTE: This field may become a list selector like the one on iOS. It will be treated as a text field for the moment.
  # Description: Enters the user's colony/neighborhood.
  # Param: ${userNeighborhood} [Mandatory] User's colony/neighborhood to enter.
  - name: mx.functions.edit-address-form.selectNeighborhood
    platform: android
    flow:
      - log:
          message: "Selecting ${userNeighborhood}} as new user neighborhood ..."
          color: CYAN 
      - enterText:
          identifier: mx.mappings.edit-address-form.neighborhoodField
          string: ${userNeighborhood}
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.edit-address-form.clearPhoneNumber
    platform: android
    flow:
      - log:
          message: "Clearing phone number field ..."
          color: CYAN 
      - if:
          identifier:
            present:
              - identifier: mx.mappings.edit-address-form.phoneNumberField
          then:
            - enterText:
                identifier: mx.mappings.edit-address-form.phoneNumberField
                string: ""
                clearField: true
          else:
            - scroll:
                direction: down
                scrollLimit: 1
                untilIdentifier: mx.mappings.edit-address-form.phoneNumberField
            - enterText:
                identifier: mx.mappings.edit-address-form.phoneNumberField
                string: ""
                clearField: true
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Enters the user's phone number.
  # Param: ${userPhoneNumber} [Mandatory] User's phone number to enter.
  - name: mx.functions.edit-address-form.enterPhoneNumber
    platform: android
    flow:
      - log:
          message: "Adding ${userPhoneNumber} as new phone number ..."
          color: CYAN
      - if:
          identifier:
            present:
              - identifier: mx.mappings.edit-address-form.phoneNumberField
          then:
            - enterText:
                identifier: mx.mappings.edit-address-form.phoneNumberField
                string: ${userPhoneNumber}
                clearField: true
          else:
            - scroll:
                direction: down
                scrollLimit: 1
                untilIdentifier: mx.mappings.edit-address-form.phoneNumberField
            - enterText:
                identifier: mx.mappings.edit-address-form.phoneNumberField
                string: ${userPhoneNumber}
                clearField: true
      - executeFunction:
          name: mx.functions.edit-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the favorite address checkbox, does not verify if checkbox is marked.
  - name: mx.functions.edit-address-form.tapFavoriteAddressCheckbox
    platform: android
    flow:
      - log:
          message: "Tapping the favorte address checkbox ..."
          color: CYAN
      - if:
          identifier:
            present:
              - identifier: mx.mappings.edit-address-form.favoriteAddressCheckbox
          then:
            - click:
                identifier: mx.mappings.edit-address-form.favoriteAddressCheckbox
          else:
            - scroll:
                direction: down
                scrollLimit: 1
                untilIdentifier: mx.mappings.edit-address-form.favoriteAddressCheckbox
            - click:
                identifier: mx.mappings.edit-address-form.favoriteAddressCheckbox

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the save ("Contiunar") button.
  - name: mx.functions.edit-address-form.tapSave
    platform: android
    flow:
      - log:
          message: "Tapping save button ..."
          color: CYAN
      - click:
          identifier: mx.mappings.edit-address-form.saveButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the back button.
  - name: mx.functions.edit-address-form.tapBack
    platform: android
    flow:
      - log:
          message: "Tapping back button ..."
          color: CYAN
      - click:
          identifier: mx.mappings.edit-address-form.backButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Asserts edit-address-form page is displayed.
  - name: mx.functions.edit-address-form.assertPageDisplayed
    platform: android
    flow:
      - log:
          message: "Asserting page displayed ..."
          color: CYAN
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.edit-address-form.pageTitle
            - identifier: mx.mappings.edit-address-form.closeButton
            - identifier: mx.mappings.edit-address-form.saveButton
            - identifier: mx.mappings.edit-address-form.nameField

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Asserts the correct user's name.
  # Param: ${userName} [Mandatory] User's name to verify.
  - name: mx.functions.edit-address-form.assertName
    platform: android
    flow:
      - log:
          message: "Asserting ${userName} is displayed into name field ..."
          color: CYAN
      - verifyIdentifier:
          text:
            - identifier: mx.mappings.edit-address-form.nameField
              equals: ${userName}
