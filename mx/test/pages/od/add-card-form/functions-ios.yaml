#======================================================================================================================
#    AUTHOR: Francisco Javier Ramírez Hernandez (vn53vq4)
#   CREATED: Mar/13/2022
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

## IOS ----------------------------------------------------------------------------------------------------------------

  # Description: This function clicks on back button.
  - name: mx.functions.add-card-form.tapBack
    platform: ios
    flow:
      - click: 
          identifier: mx.mappings.add-card-form.backButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function clicks on cancel button.
  - name: mx.functions.add-card-form.tapCancel
    platform: ios
    flow:
      - click: 
          identifier: mx.mappings.add-card-form.cancelButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters card number.
  # Param ${cardNumber} [Mandatory] Card Number to enter.
  - name: mx.functions.add-card-form.enterCardNumber
    platform: ios
    flow:
      - enterText:
            identifier: mx.mappings.add-card-form.cardNumberField
            clickFirst: true
            clearField: true   
            string: ${cardNumber}
      - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
      - log:
            message: "End function: add-card-form.enterCardNumber"
            color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters card holder name.
  # Param ${cardHolderName} [Mandatory] Card Holder Name to enter.
  - name: mx.functions.add-card-form.enterCardHolderName
    platform: ios
    flow:
      - enterText:
            identifier: mx.mappings.add-card-form.cardHolderNameField
            clearField: true
            clickFirst: true
            string: ${cardHolderName}
      - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
      - log:
           message: "End function: add-card-form.enterCardHolderName"
           color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function selects expiration date.
  # Param ${expectedExpirationMonth} [Mandatory] expiration month.
  # Param ${expectedExpirationYear} [Mandatory] expiration year.
  - name: mx.functions.add-card-form.selectExpirationDate
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-card-form.expirationDateOpenButton
      - enterText:
          identifier: mx.mappings.add-card-form.pickerWheelMonth
          string: ${expectedExpirationMonth}
          clearField: false
          clickFirst: false
      - enterText:
          identifier: mx.mappings.add-card-form.pickerWheelYear
          string: ${expectedExpirationYear}
          clearField: false
          clickFirst: false
      - click:
          identifier: Listo
      - log:
           message: "End function: add-card-form.selectExpirationDate"
           color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters card CVV.
  # Param ${cardCVV} [Mandatory] Card CVV to enter.
  - name: mx.functions.add-card-form.enterCVV
    platform: ios
    flow:
      - enterText:
            identifier: mx.mappings.add-card-form.CVVField
            clickFirst: true
            clearField: true
            string: ${cardCVV}
      - executeFunction:
             name: mx.functions.utils.tapCloseKeyboardButton
      - log:
           message: "End function: add-card-form.enterCVV"
           color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function clicks on add address button.
  - name: mx.functions.add-card-form.tapAddAddress
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-card-form.addAddressButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function clicks on use existing address button.
  - name: mx.functions.add-card-form.tapUseExistingAddress
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-card-form.useExistingAddressButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function selects mx as country.
  - name: mx.functions.add-card-form.selectCountryAsMX
    platform: ios
    flow:
      - click: 
          identifier: mx.mappings.add-card-form.mxButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function clicks on us button.
  - name: mx.functions.add-card-form.selectCountryAsUS
    platform: ios
    flow:
      - click: 
          identifier: mx.mappings.add-card-form.usButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters street data.
  # Param ${streetName} [Mandatory] street name to enter.
  - name: mx.functions.add-card-form.enterStreetName
    platform: ios
    flow:
      - enterText:
          identifier: mx.mappings.add-card-form.calleField
          string: ${streetName}
          clickFirst: true
          clearField: true
      - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
      - log:
           message: "End function: add-card-form.enterStreetName"
           color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters exterior number data.
  # Param ${exteriorNumber} [Mandatory] exterior number to enter.
  - name: mx.functions.add-card-form.enterExteriorNumber
    platform: ios
    flow:
      - enterText:
            identifier: mx.mappings.add-card-form.exteriorNumField
            clickFirst: true
            clearField: true
            string: ${exteriorNumber}
      - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
      - log:
           message: "End function: wallet.enterAddress"
           color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters city data.
  # Param ${cityName} [Mandatory] city name to enter.
  - name: mx.functions.add-card-form.enterCity
    platform: ios
    flow:
      - enterText:
          identifier: mx.mappings.add-card-form.cityField
          clickFirst: true
          clearField: true
          string: ${cityName}
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
           message: "End function: add-card-form.enterCity"
           color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters interior number data.
  # Param ${interiorNumber} [Mandatory] interior number to enter.
  - name: mx.functions.add-card-form.enterInteriorNumber
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-card-form.interiorNumField
      - enterText:
          identifier: mx.mappings.add-card-form.interiorNumField
          string: ${interiorNumber}

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters neighborhood data.
  # Param ${neighborhoodName} [Mandatory] neighborhood name to enter.
  - name: mx.functions.add-card-form.enterNeighborhood
    platform: ios
    flow:
      - enterText:
            identifier: mx.mappings.add-card-form.neighborhoodField
            clearField: true
            clickFirst: true
            string: ${neighborhoodName}
      - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
      - log:
            message: "End function: add-card-form.enterNeighborhood"
            color: BLUE
  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters municipality data.
  # Param ${municipalityName} [Mandatory] municipality name to enter.
  - name: mx.functions.add-card-form.enterMunicipality
    platform: ios
    flow:
      - enterText:
            identifier: mx.mappings.add-card-form.municipalityField
            clickFirst: true
            clearField: true
            string: ${municipalityName}
      - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
      - log:
            message: "End function: add-card-form.enterMunicipality"
            color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters state data.
  # Param ${stateName} [Mandatory] city name to enter.
  - name: mx.functions.add-card-form.enterState
    platform: ios
    flow:
      - enterText:
            identifier: mx.mappings.add-card-form.stateField
            clearField: true
            clickFirst: true
            string: ${stateName}
      - executeFunction:
          name: mx.functions.utils.tapCloseKeyboardButton
      - log:
          message: "End function: wallet.enterState"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function enters zip code data.
  # Param ${zipCode} [Mandatory] city name to enter.
  - name: mx.functions.add-card-form.enterZipCode
    platform: ios
    flow:
      - enterText:
            identifier: mx.mappings.add-card-form.zipcodeField
            clearField: true
            clickFirst: true
            string: ${zipCode}       
      - executeFunction:
            name: mx.functions.utils.tapCloseKeyboardButton
      - log:
            message: "End function: add-card-form.enterZipCode"
            color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function tap favorite card checkbox.
  - name: mx.functions.add-card-form.tapFavoriteCardCheckbox
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-card-form.favoriteCardCheckBox

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function tap save.
  - name: mx.functions.add-card-form.tapSave
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-card-form.saveCardButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function assert page is displayed.
  - name: mx.functions.add-card-form.assertPageDisplayed
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.add-card-form.pageTitle
            - identifier: mx.mappings.add-card-form.cardNumberField
            - identifier: mx.mappings.add-card-form.calleField

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function assert save error message is displayed.
  - name: mx.functions.add-card-form.assertSaveErrorMessageDisplayed
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.add-card-form.saveErrorMessage
      - log:
          message: SAVE ERROR MESSAGE IS DISPLAYED
          color: CYAN

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function assert save error message is not displayed.
  - name: mx.functions.add-card-form.assertSaveErrorMessageNotDisplayed
    platform: ios
    flow:
      - verifyIdentifier:
          notPresent:
            - identifier: mx.mappings.add-card-form.saveErrorMessage
      - log:
          message: SAVE ERROR MESSAGE IS NOT DISPLAYED
          color: CYAN

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function clicks on address button.
  # Param ${addressData} [Mandatory] address data to click.
  - name: mx.functions.add-card-form.selectAddress
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-card-form.addressDataButton
  
  #--------------------------------------------------------------------------------------------------------------------
                 
  # Description: Scrolls down to the bottom page.
  - name: mx.functions.add-card-form.scrollDownToBottomPage
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.add-card-form.bottomPage
          scrollLimit: 2
          wait: 1000
      - log:
          message: "End function: add-card-form.scrollDownToBottomPage"
          color: BLUE


  #--------------------------------------------------------------------------------------------------------------------
   
  # Description: This method asserts a card was added successfully. (recently added)
  # Param: ${last4Digits} [Mandatory] User's card termination.
  - name: mx.functions.add-card-form.assertCardAdded
    platform: ios
    flow: 
        - verifyIdentifier:
            present:
                - identifier: mx.mappings.add-card-form.cardLast4Digits
        - log:
            message: "End function: wallet.assertCardAdded"
            color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------
   
  # Description: This method taps on remove card button
  - name: mx.functions.add-card-form.tapRemoveCard
    platform: ios
    flow: 
        - click:
            identifier: mx.mappings.edit-card-form.removeCardButton
        - click:
            identifier: mx.mappings.edit-card-form.confirmButton
        - log:
            message: "End function: add-card-form.tapRemoveCard"
            color: BLUE