#======================================================================================================================
#    AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
#   CREATED: Feb/02/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # -------------------------------------------------------------------------------------------------------------------

  # Description: Closes the pop-up if displayed.
  - name: mx.functions.delivery-methods-info-popup.dismissPopupIfDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.delivery-methods-info-popup.popupTitle
          then:
            - executeFunction:
                name: mx.functions.delivery-methods-info-popup.tapUnderstood
      - log:
          message: "End function: delivery-methods-info-popup.dismissPopupIfDisplayed"
          color: BLUE

  # -------------------------------------------------------------------------------------------------------------------

  # Description: This function verifies if the 'ways to receive your products' pop-up is displayed or not and returns a 
  #              boolean value in the global variable ${returnedIsPopupDisplayed}
  - name: mx.functions.delivery-methods-info-popup.isDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.delivery-methods-info-popup.popupTitle
          then:
            - log:
                message: "Pop-up is displayed, returning true"
                color: CYAN
            - storeIn:
                key: returnedIsPopupDisplayed
                value: true
          else:
            - log:
                message: "Pop-up is not displayed, returning false."
                color: CYAN
            - storeIn:
                key: returnedIsPopupDisplayed
                value: false
      - log:
          message: "End function: delivery-methods-info-popup.isDisplayed"
          color: BLUE

  # -------------------------------------------------------------------------------------------------------------------

  # Description: Taps the "Understood" button.
  - name: mx.functions.delivery-methods-info-popup.tapUnderstood
    flow:
      - click:
          identifier: mx.mappings.delivery-methods-info-popup.understoodButton
      - log:
          message: "End function: delivery-methods-info-popup.tapUnderstood"
          color: BLUE
