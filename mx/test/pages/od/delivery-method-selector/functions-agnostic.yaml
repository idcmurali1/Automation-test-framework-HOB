#======================================================================================================================
#  AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
#  CREATED: Oct/9/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.delivery-method-selector.closeSelectorIfExpanded
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.delivery-method-selector.collapseLocationBanner
          then:
            - click:
                identifier: mx.mappings.delivery-method-selector.collapseLocationBanner
      - log:
          message: Selector is closed.
          color: GREEN
      - log:
          message: "End function: delivery-method-selector.closeSelectorIfExpanded"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.delivery-method-selector.expandSelectorIfCollapsed
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.delivery-method-selector.expandLocationBanner
          then:
            - click:
                identifier: mx.mappings.delivery-method-selector.expandLocationBanner
      - log:
          message: Selector is expanded.
          color: CYAN
      - log:
          message: "End function: delivery-method-selector.expandSelectorIfCollapsed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.delivery-method-selector.expandSelector
    flow:
      - click:
          identifier: mx.mappings.delivery-method-selector.expandLocationBanner
      - log:
          message: "End function: delivery-method-selector.expandSelector"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  - name: mx.functions.delivery-method-selector.closeSelector
    flow:
      - click:
          identifier: mx.mappings.delivery-method-selector.collapseLocationBanner
      - log:
          message: "End function: delivery-method-selector.closeSelector"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
  # EDITORS: Sergio Fernandez (vn0t1qt)
  - name: mx.functions.delivery-method-selector.tapPickupButtonIfNotSelected
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.delivery-method-selector.selectedDeliveryMethodIsPickup
          then:
            - click:
                identifier: mx.mappings.delivery-method-selector.pickupButton
            - log:
                message: Pickup Delivery Method selected.
                color: GREEN
          else:
            - log:
                message: Pickup Delivery Method was already selected.
                color: GREEN
      - log:
          message: 'End function: delivery-method-selector.tapPickupButtonIfNotSelected'
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Teresa Partida (vn55epy)
  - name: mx.functions.delivery-method-selector.tapHomeDeliveryButtonIfNotSelected
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.delivery-method-selector.selectedDeliveryMethodIsHomeDelivery
          then:
            - click:
                identifier: mx.mappings.delivery-method-selector.homeDeliveryButton
            - log:
                message: Home Delivery Method selected.
                color: GREEN
          else:
            - log:
                message: Home Delivery Method was already selected.
                color: GREEN
      - log:
          message: 'End function: delivery-method-selector.tapHomeDeliveryButtonIfNotSelected'
          color: BLUE

  #----------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Sergio Fernández (vn0t1qt)
  # EDITED: Jorge Carrillo (vn575hp)
  - name: mx.functions.delivery-method-selector.assertSelectorDisplayed
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.delivery-method-selector.selectorContainer
            - identifier: mx.mappings.delivery-method-selector.pickupButton
            - identifier: mx.mappings.delivery-method-selector.homeDeliveryButton
            - identifier: mx.mappings.delivery-method-selector.selection-options.container
      - log:
          message: Delivery Method Selector displayed
          color: GREEN
      - log:
          message: "End function: mx.functions.delivery-method-selector.assertSelectorDisplayed"
          color: BLUE

  #----------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Sergio Fernández (vn0t1qt)
  # EDITED: Jorge Carrillo (vn575hp)
  - name: mx.functions.delivery-method-selector.selection-options.tapChangeStoreButton
    flow:
      - click:
          identifier: mx.mappings.delivery-method-selector.selection-options.changeStoreButton
      - log:
          message: "End function: mx.functions.delivery-method-selector.selection-options.tapChangeStoreButton"
          color: BLUE

  #----------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Teresa Partida (vn55epy)
  - name: mx.functions.delivery-method-selector.tapHomeDeliveryAddressSelectorIfDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.delivery-method-selector.homeDeliveryAddressSelectorButton
          then:
            - click:
                identifier: mx.mappings.delivery-method-selector.homeDeliveryAddressSelectorButton
          else:
            - click:
                identifier: mx.mappings.delivery-method-selector.homeDeliveryAddressAddButton
      - log:
          message: "End function: delivery-method-selector.tapHomeDeliveryAddressSelectorIfDisplayed"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.delivery-method-selector.assertTitleWithNoOptionSelected
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: mx.mappings.delivery-method-selector.noSelectedDeliveryMethod
      - log:
          message: "Assertion succeded: No delivery method is selected in GIC"
          color: GREEN_BOLD
      - log:
          message: "mx.functions.delivery-method-selector.assertTitleWithNoOptionSelected"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # PARAM: ${selectedStore} [Mandatory] Name of the selected store to assert in collapsed view
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.delivery-method-selector.assertStoreSelectedInCollapsedView
    flow:
      - verifyIdentifier: 
         present: 
          - identifier: mx.mappings.delivery-method-selector.selectedStore # PARAM: ${selectedStore}
      - log:
         message: "Assertion succeded: '${selectedStore}' is selected in collapsed view"
         color: GREEN_BOLD
      - log:
          message: "mx.functions.delivery-method-selector.assertStoreSelectedInCollapsedView"
          color: BLUE