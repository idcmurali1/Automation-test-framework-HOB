#======================================================================================================================
#    AUTHOR: Rodrigo Pacheco Cámara (vn53g23)
#   CREATED: Mar/31/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # Description: This function verifies if the customized buy experience pop-up is displayed or not and returns a boolean
  #              value in the global variable ${returnedIsPopupDisplayed}
  - name: mx.functions.customized-buy-experience-popup.isPopupDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.customized-buy-experience-pop-up.popupTitle
          then:
            - storeIn:
                key: returnedIsPopupDisplayed
                value: true
            - log:
                message: "End function: customized-buy-experience-popup.isPopupDisplayed (popup displayed)"
                color: BLUE
          else:
            - storeIn:
                key: returnedIsPopupDisplayed
                value: false
            - log:
                message: "End function: customized-buy-experience-popup.isPopupDisplayed (popup not displayed)"
                color: BLUE

   #--------------------------------------------------------------------------------------------------------------------

   # Description: Taps the "Accept" button.
  - name: mx.functions.customized-buy-experience-popup.tapAccept
    flow:
      - click:
          identifier: mx.mappings.customized-buy-experience-pop-up.acceptButton
      - log:
          message: "End function: customized-buy-experience-popup.tapAccept"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.customized-buy-experience-popup.dismissPopupIfDisplayed
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.customized-buy-experience-pop-up.popupTitle
          then:
            - executeFunction:
                name: mx.functions.customized-buy-experience-popup.tapAccept
      - log:
          message: "End function: customized-buy-experience-popup.dismissPopupIfDisplayed"
          color: BLUE
