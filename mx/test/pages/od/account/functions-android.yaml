#======================================================================================================================
#  AUTHOR: Francisco Javier Ramirez Hernandez (vn53vq4)
#  CREATED: Mar/13/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

## ANDROID ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openOrdersHistory
    platform: android
    flow: 
      - click: 
          identifier: mx.mappings.account.ordersHistoryButton
      - log:
          message: "End function: account.openOrdersHistory"
          color: BLUE

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapTrackOrder
    platform: android
    flow: 
      - click: 
          identifier: mx.mappings.account.trackOrderButton
  
  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openCommunicationsAndPrivacy
    platform: android
    flow: 
      - click: 
          identifier: mx.mappings.account.communicationsAndPrivacyButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openReorderList
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.reorderListButton
          then:
            - click:
                identifier: mx.mappings.account.reorderListButton
          else:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.account.reorderListButton
                scrollLimit: 1
                position: center
            - click:
                identifier: mx.mappings.account.reorderListButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openLists
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.listsButton
          then:
            - click:
                identifier: mx.mappings.account.listsButton
          else:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.account.listsButton
                scrollLimit: 1
                position: center
            - click:
                identifier: mx.mappings.account.listsButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openWalmartPassSubscription
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.walmartPassSubscriptionButton
          then:
            - click:
                identifier: mx.mappings.account.walmartPassSubscriptionButton
          else:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.account.walmartPassSubscriptionButton
                scrollLimit: 2
                position: center
            - click:
                identifier: mx.mappings.account.walmartPassSubscriptionButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapLogout
    platform: android
    flow: 
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.account.termsAndConditionsLink
      - click:
          identifier: mx.mappings.account.logoutButton
#the scroll up is to show HOME button since is not showing until scroll
      - scroll:
          direction: up
          scrollLimit: 1
      - log:
          message: "End function: account.tapLogout"
          color: BLUE

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapHelpLink
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.helpLink
          then:
            - click:
                identifier: mx.mappings.account.helpLink
          else:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.account.helpLink
                scrollLimit: 3
                position: center
            - click:
                identifier: mx.mappings.account.helpLink

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapTermsAndConditionsLink
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.termsAndConditionsLink
          then:
            - click:
                identifier: mx.mappings.account.termsAndConditionsLink
          else:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.account.termsAndConditionsLink
                scrollLimit: 3
                position: center
            - click:
                identifier: mx.mappings.account.termsAndConditionsLink

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapPrivacyAndSecurityLink
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.privacyPolicyLink
          then:
            - click:
                identifier: mx.mappings.account.privacyPolicyLink
          else:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.account.privacyPolicyLink
                scrollLimit: 3
                position: center
            - click:
                identifier: mx.mappings.account.privacyPolicyLink
