#======================================================================================================================
#  AUTHOR: Francisco Javier Ramirez Hernandez (vn53vq4)
#  CREATED: Mar/13/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

## IOS ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.createAccountButton
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.account.createAccountButton

  # ------------------------------------------------------------------------------------------------------------
          
  - name: mx.functions.account.tapTrackOrder
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.account.trackOrderButton
      - log:
          message: "End function: account.tapTrackOrder"
          color: BLUE

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openOrdersHistory
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.account.ordersHistoryButton
      - log:
          message: "End function: account.openOrdersHistory"
          color: BLUE

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openWallet
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.account.walletButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openCommunicationsAndPrivacy
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.account.communicationsAndPrivacyButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.expandYourProductsSection
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.reorderListButton
              - identifier: mx.mappings.account.listsButton
          then:
              - log: "Your products section already expanded"
          else:
              - click:
                  identifier: mx.mappings.account.yourProductsSection

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.contractYourProductsSection
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.reorderListButton
              - identifier: mx.mappings.account.listsButton
          then:
              - click:
                  identifier: mx.mappings.account.yourProductsSection
          else:
              - log: "Your products section is already expanded"

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openReorderList
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.account.reorderListButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openLists
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.account.listsButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.expandSubscriptionsSection
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.walmartPassButton
          then:
              - log: "Subscriptions Section already expanded"
          else:
              - click:
                  identifier: mx.mappings.account.subscriptionSectionButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.contractSubscriptionsSection
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.walmartPassButton
          then:
              - click:
                  identifier: mx.mappings.account.subscriptionSectionButton
          else:
              - log: "Subscriptions section is already contracted"
  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.openWalmartPassSubscription
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.account.walmartPassButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapLogout
    platform: ios
    flow:
      - if:
          identifier:
            visible:
              - identifier: mx.mappings.account.logoutButton
                value: 'true'
          then:
            - click:
                identifier: mx.mappings.account.logoutButton
          else:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.account.logoutButton
                scrollLimit: 2
                position: center
                wait: 1000
            - click:
                identifier: mx.mappings.account.logoutButton
      - log:
          message: "End function: account.tapLogout"
          color: BLUE

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapHelpLink
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.helpButton
          then:
              - click:
                  identifier: mx.mappings.account.helpButton
          else:
              - scroll:
                  direction: down
                  position: center
                  scrollLimit: 3
                  untilIdentifier: mx.mappings.account.helpButton
              - click:
                  identifier: mx.mappings.account.helpButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapTermsAndConditionsLink
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.termsAndConditionsButton
          then:
              - click:
                  identifier: mx.mappings.account.termsAndConditionsButton
          else:
              - scroll:
                  direction: down
                  position: center
                  scrollLimit: 3
                  untilIdentifier: mx.mappings.account.termsAndConditionsButton
              - click:
                  identifier: mx.mappings.account.termsAndConditionsButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapPrivacyAndSecurityLink
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.privacyAndSecurityButton
          then:
              - click:
                  identifier: mx.mappings.account.privacyAndSecurityButton
          else:
              - scroll:
                  direction: down
                  position: center
                  scrollLimit: 3
                  untilIdentifier: mx.mappings.account.privacyAndSecurityButton
              - click:
                  identifier: mx.mappings.account.privacyAndSecurityButton

    # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapPrivacyCenterLink
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.privacyCenterButton
          then:
              - click:
                  identifier: mx.mappings.account.privacyCenterButton
          else:
              - scroll:
                  direction: down
                  position: center
                  scrollLimit: 3
                  untilIdentifier: mx.mappings.account.privacyCenterButton
              - click:
                  identifier: mx.mappings.account.privacyCenterButton

  # ------------------------------------------------------------------------------------------------------------

  - name: mx.functions.account.tapDeleteAccountLink
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.account.deleteAccountButton
          then:
              - click:
                  identifier: mx.mappings.account.deleteAccountButton
          else:
              - scroll:
                  direction: down
                  position: center
                  scrollLimit: 3
                  untilIdentifier: mx.mappings.account.deleteAccountButton
              - click:
                  identifier: mx.mappings.account.deleteAccountButton
