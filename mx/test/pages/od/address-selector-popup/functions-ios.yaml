#======================================================================================================================
#    AUTHOR: Rodrigo Pacheco Cámara (vn53p0i)
#   CREATED: Feb/10/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

#######################################################################################################################
## IOS ################################################################################################################
#######################################################################################################################

  # Description: This method taps on Add Address button
  - name: mx.functions.address-selector-popup.tapAddAddress
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.address-selector-popup.addAddressButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method selects an address by name
  # Param ${addressName} [Mandatory] User address name
  - name: mx.functions.address-selector-popup.selectAddressByName
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.address-selector-popup.addressSelected
          then:
            - log: 
                message: "The preferred address is already selected!"
                color: CYAN
          else:
            - if:
                identifier:
                  present:
                    - identifier: mx.mappings.address-selector-popup.addressByName
                then:
                  - click:
                      identifier: mx.mappings.address-selector-popup.addressByName

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method selects address by position 
  # Param ${addressPosition} [Mandatory] User address position (address index)
  # Note: Address possition count starts from 1 not 0.
  - name: mx.functions.address-selector-popup.selectAddressByPosition
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.address-selector-popup.addressSelectedByIndex
          then:
            - log: 
                message: "The preferred address is already selected!"
                color: CYAN
      - if:
          identifier:
            present:
              - identifier: mx.mappings.address-selector-popup.addressByIndex
          then:
            - click:
                identifier: mx.mappings.address-selector-popup.addressByIndex

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Returns the name of the address selected.
  - name: mx.functions.address-selector-popup.getSelectedAddressName
    platform: ios
    flow:
      - getString:
          identifier: mx.mappings.address-selector-popup.addressLabel
          storeIn: returnedAddressName
      - log: 
          message: "The address name selected is: ${returnedAddressName}"
          color: CYAN
      - log:
          message: "End function: address-selector-popup.getSelectedAddressName"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on edit address button
  - name: mx.functions.address-selector-popup.tapEditAddress
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.address-selector-popup.editAddressButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Scrolls Up until address with name
  # Param ${addressName} [Mandatory] User address
  # Note: Please first verify the order of the string for correct validation
  - name: mx.functions.address-selector-popup.scrollUpToAddress
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.address-selector-popup.addressByName
          then: 
            - log:
                message: "The selected address is already shown"
                color: CYAN
          else:
            - scroll:
                direction: up
                untilIdentifier: mx.mappings.address-selector-popup.addressByName
                withinIdentifier: mx.mappings.address-selector-popup.addressesContainer
                wait: 1000

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Scrolls down until address with name
  # Param ${addressName} [Mandatory] User address
  # Note: Please first verify the order of the string for correct validation
  - name: mx.functions.address-selector-popup.scrollDownToAddress
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.address-selector-popup.addressByName
          then: 
            - log:
                message: "The selected address is already shown"
                color: CYAN
          else:
            - scroll:
                direction: down
                untilIdentifier: mx.mappings.address-selector-popup.addressByName
                withinIdentifier: mx.mappings.address-selector-popup.addressesContainer
                wait: 1000

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on Continue button
  - name: mx.functions.address-selector-popup.tapContinue
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.address-selector-popup.continueButton
