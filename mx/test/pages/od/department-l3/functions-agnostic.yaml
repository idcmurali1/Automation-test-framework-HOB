#======================================================================================================================
#    AUTHOR: Osmar Juárez (vn56dce)
#   CREATED: Apr/29/2024
#  REVISION: ---
#
#  Copyright © 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # DESCRIPTION: This function clicks on add product to cart inside carousel into departments l1-l2 using index to add products.
  # PARAM: ${indexProduct}  [Mandatory]  Index of the product to be added to cart. # TODO: change variable name to ${productIndex} for android and iOS
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.department-l3.addProductToCartByIndex
    flow:
      - log:
          message: "Product index for add to cart: '${indexProduct}'"
          color: CYAN
      - if:
          condition: ${APP_PLATFORM} == 'android'
          then:
            - click:
                identifier: mx.mappings.department-l3.addToCartButton
                index: ${indexProduct}
          else:
            - click:
                identifier: mx.mappings.department-l3.addToCartButton # PARAM: --${indexProduct}-- >> Only for iOS
      - log:
          message: "End function: mx.functions.department-l3.addProductToCartByIndex"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: This function clicks on add product to cart inside carousel into departments l1-l2 using index to add products.
  # PARAM: ${productIndex}  [Mandatory]  Index of the product to be added to cart.
  # RETURN: ${displayedProductName}  Product name text displayed in element
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.department-l3.getProductNameByIndex
    flow:
      - log:
          message: "Get product name at index: '${productIndex}'"
          color: CYAN
      - if:
          condition: ${APP_PLATFORM} == 'android'
          then:
            - getString :
                identifier: mx.mappings.department-l3.productNameLabel
                index: ${productIndex}
                storeIn: displayedProductName
          else:
            - getString :
                identifier: mx.mappings.department-l3.productNameLabel # PARAM: --${productIndex}-- Only for iOS
                storeIn: displayedProductName
      - log:
          message: "Product name at index '${productIndex}': '${displayedProductName}'"
          color: GREEN_BOLD
      - log:
          message: "End function: mx.functions.department-l3.getProductNameByIndex"
          color: BLUE