#======================================================================================================================
#    AUTHOR: Octavio Cabrales Zárate (vn53g23)
#   CREATED: Jan/04/2023
#  REVISION: ---
#
#  Copyright © 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:
 
 # Description: This method select a certain brand
 # Params:   {brand}  [Mandatory] Brand
 - name: mx.functions.brand-filter-pop-up.unselectBrand
   platform: android
   flow: 
     - log:
         message: Unselecting brand ${brand} filter 
         color: CYAN
     - getString: 
         identifier: mx.mappings.brand-filter-pop-up.brandOption
         attribute: checked
         storeIn: boxChecked
     - if:
         condition: ${boxChecked} == false
         then:
           - log:
               message: Brand is unselected already
               color: CYAN
         else:
           - click:
               identifier: mx.mappings.brand-filter-pop-up.brandOption
           - log:
               message: Brand unselected
               color: CYAN

 # -------------------------------------------------------------------------------------------------------------------
 
 # Description: This method gets the amount of products within brand filter
 # Params:   {brand}  [Mandatory] Brand
 # Return:   {brandProductsCount} number of products for the given brand
 # Editor: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.getBrandProductsCount
   platform: android
   flow: 
     - log:
         message: Extracting products count for brand ${brand}
         color: CYAN
     - getString: 
         identifier: mx.mappings.brand-filter-pop-up.brandProductsCount
         attribute: text
         storeIn: brandProductsCount
     - log:
         message: Extracted count - ${brandProductsCount}
         color: GREEN_BOLD
     - log:
          message: "End function: brand-filter-pop-up.getBrandProductsCount"
          color: BLUE
 
         
 # -------------------------------------------------------------------------------------------------------------------
 
 # Description: This method clears the search selection
 - name: mx.functions.brand-filter-pop-up.deleteSearch
   platform: android
   flow: 
     - log:
         message: Displaying all brands
         color: CYAN
     - click: 
         identifier: mx.mappings.brand-filter-pop-up.clearSearch
     - log:
         message: Brand list displayed
         color: CYAN

# -------------------------------------------------------------------------------------------------------------------
 
 # RETURN:   ${firstBrandName}   String with the first Brand name displayed in filter 
 # AUTHOR: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.getFirstBrandName
   platform: android
   flow: 
     - getString:
        identifier: mx.mappings.brand-filter-pop-up.firstBrandNameTextView
        storeIn: firstBrandName
     - log:
         message: "First Brand Name displayed: '${firstBrandName}'"
         color: GREEN_BOLD
     - log:
          message: "End function: brand-filter-pop-up.getFirstBrandName"
          color: BLUE

# -------------------------------------------------------------------------------------------------------------------
 
 # DESSCRIPTION: This method search for a brand usign the search brand inside of the filter pupup
 # PARAMS:   ${brand}      [Mandatory] Brand name
 # AUTHOR: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.searchBrand
   platform: android
   flow: 
     - log:
         message: "Looking for brand: '${brand}'"
         color: CYAN
     - enterText:
         identifier: mx.mappings.brand-filter-pop-up.textField
         string: ${brand}
         clickFirst: true
         clearField: true
     - log:
          message: "End function: brand-filter-pop-up.searchBrand"
          color: BLUE       