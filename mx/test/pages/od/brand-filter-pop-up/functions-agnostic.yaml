#======================================================================================================================
#    AUTHOR: Osmar Juárez (vn56dce)
#   CREATED: May/15/2024
#  REVISION: ---
#
#  Copyright © 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:

 # AUTHOR: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.tapSeeResults
   flow: 
     - click:
         identifier: mx.mappings.brand-filter-pop-up.seeResultsButton
         coordinates: 75%,75%
     - log:
          message: "End function: brand-filter-pop-up.tapSeeResults"
          color: BLUE

 # -------------------------------------------------------------------------------------------------------------------
 
 # AUTHOR: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.assertPopupDisplayed
   flow: 
     - verifyIdentifier:
         present:
           - identifier: mx.mappings.brand-filter-pop-up.closeButton
           - identifier: mx.mappings.brand-filter-pop-up.brandFilterPopupTitle
     - verifyIdentifier:
         present:
           - identifier: mx.mappings.brand-filter-pop-up.seeResultsButton
           - identifier: mx.mappings.brand-filter-pop-up.filtersContainer 
     - log:
         message: Assertion Success brand filter poup is displayed
         color: GREEN_BOLD
     - log:
          message: "End function: brand-filter-pop-up.assertPopupDisplayed"
          color: BLUE

 # -------------------------------------------------------------------------------------------------------------------
 
 # AUTHOR: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.tapDeleteSelections
   flow: 
     - log:
         message: Unselecting all brand filters
         color: CYAN
     - click:
         identifier: mx.mappings.brand-filter-pop-up.deleteSelectionsButton
     - log:
          message: "End function: brand-filter-pop-up.tapDeleteSelections"
          color: BLUE
 
 # -------------------------------------------------------------------------------------------------------------------
 
 # DESSCRIPTION: This method assert the searched brand validating search bar and results displayed with only 1 result wich match with the searched.
 # PARAMS:   ${brand}      [Mandatory] Brand name
 # AUTHOR: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.assertSearchedBrand
   flow: 
     - log:
         message: "Assert searched brand: '${brand}'"
         color: CYAN
     - if:
        condition: ${APP_PLATFORM} == 'ios'
        then:
          - getString:
              identifier: mx.mappings.brand-filter-pop-up.textField
              attribute: value
              storeIn: displayedBrandSearched
        else:
          - getString:
              identifier: mx.mappings.brand-filter-pop-up.textField
              storeIn: displayedBrandSearched
     - log:
        message: "Dipslayed brand in search bar: '${displayedBrandSearched}'."
        color: CYAN

     - numberOfChildElements:
        identifier: mx.mappings.brand-filter-pop-up.filtersContainer
        filterBy: mx.mappings.brand-filter-pop-up.filtersContainerSingularViewGroup
        storeIn: numOfBrandMatches
     - log:
        message: "Dipslayed numbers of brand resutls matched with search: '${numOfBrandMatches}'."
        color: CYAN

     - verifyCondition: "${displayedBrandSearched} == ${brand} && ${numOfBrandMatches} == 1"
     
     - executeFunction:
         name: mx.functions.brand-filter-pop-up.getFirstBrandName # RETURN: --${firstBrandName}--
     - log:
        message: "Brand name of the matched search: '${firstBrandName}'."
        color: CYAN
     - verifyCondition: "${firstBrandName} == ${brand}"
     
     - log:
         message: "Success brand searched '${brand}' is founded with only '${numOfBrandMatches}' result matched"
         color: GREEN_BOLD
     - log:
          message: "End function: brand-filter-pop-up.assertSearchedBrand"
          color: BLUE

 # -------------------------------------------------------------------------------------------------------------------

 # PARAMS:   {brand}  [Mandatory] Brand name
 # AUTHOR: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.selectBrand
   flow: 
     - log:
         message: Select brand '${brand}'
         color: CYAN
     - click:
         identifier: mx.mappings.brand-filter-pop-up.brandOption # PARAM --${brand}--
     - if:
        condition: ${APP_PLATFORM} == 'ios'
        then:
          - verifyIdentifier:
              value:
                - identifier: mx.mappings.brand-filter-pop-up.brandOption
                  equals: "1"
        else:
          - verifyIdentifier:
              checked:
                - identifier: mx.mappings.brand-filter-pop-up.brandOption
                  value: true     
     - log:
        message: Brand selected Successfully
        color: GREEN_BOLD
     - log:
          message: "End function: brand-filter-pop-up.selectBrand"
          color: BLUE

 # -------------------------------------------------------------------------------------------------------------------
 
 # AUTHOR: Osmar Juárez (vn56dce)
 - name: mx.functions.brand-filter-pop-up.tapClose
   flow: 
     - log:
         message: Closing brand filter page
         color: CYAN
     - click: 
         identifier: mx.mappings.brand-filter-pop-up.closeButton
     - log:
          message: "End function: brand-filter-pop-up.tapClose"
          color: BLUE
  
