#======================================================================================================================
#  AUTHOR:  Osmar Juárez (vn56dce)
#  CREATED: Feb/29/2024
#  REVISION: ---
#
#  Copyright © 2024 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.assertPopupDisplayed
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.title
              - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.filtersContainer
              - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.seeResultsButton
              - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.closeButton
          then:
            - log:
                message: "Assertion Succeeded: Sort and Filter Popup is displayed."
                color: GREEN_BOLD
          else:
            - failTest:
                message: "Failed: Sort and Filter Popup did not display."
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.assertPopupDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function expands the 'Has Promotion' (Tiene promoción) section if not expanded already.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.expandHasPromotionFilterIfNotExpanded
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.hasPromotionCheckbox
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.openCloseHasPromotionFilter
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.hasPromotionCheckbox
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.expandHasPromotionFilterIfNotExpanded"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function selects the option from the 'Has promotion' (Tiene promoción) filter section.
  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.selectHasPromotionCheckbox
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.hasPromotionCheckbox
      - log:
          message: "Filter 'Tiene promociones' has been selected."
          color: GREEN_BOLD
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.selectHasPromotionCheckbox"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Osmar Juárez (vn56dce)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.tapSeeResults
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.seeResultsButton
          coordinates: 75%,75%
          wait: 3500
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.tapSeeResults"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------
  
  # DESCRIPTION:  This function expands the 'Sort by' (Ordenar por) section if not expanded already.
  # AUTHOR: Fernanda Peruyero (vn54e7a)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.expandSortByFilterIfNotExpanded
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMostRelevantRadioButton
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.openCloseSortByFilter
            - verifyIdentifier:
                present:
                  - identifier:  mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMostRelevantRadioButton
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.expandSortByFilterIfNotExpanded"
          color: BLUE

#-----------------------------------------------------------------------------------------------------------------------
  
  # DESCRIPTION:  This function selects an option from the 'Sort by' (Ordenar por) section defined by a parameter.
  # PARAM:        ${sortByOption}   [Mandatory] Defines the 'Sort By' option to select, options: [ MostRelevant | MinFirst | MaxFirst ].
  # AUTHOR: Fernanda Peruyero (vn54e7a)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.selectSortByOption
    platform: ios
    flow:
      # Verifying provided Filter Option...
      - if:
          condition: ${sortByOption} != 'MostRelevant' && ${sortByOption} != 'MinFirst' && ${sortByOption} != 'MaxFirst'
          then:
            - failTest:
                message: "Invalid 'Sort By' Filter Option provided: '${sortByOption}'"
      - log:
          message: "'Sort by' Filter Option: '${sortByOption}'"
          color: CYAN

      # mostRelevant option...
      - if:
          condition: ${sortByOption} == 'MostRelevant'
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMostRelevantRadioButton
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMostRelevantRadioButtonSelected
            - log:
                message: "'Sort by Most Relevant Option' has been selected."
                color: CYAN

      # minFirst option...
      - if:
          condition: ${sortByOption} == 'MinFirst'
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMinFirstRadioButton
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMinFirstRadioButtonSelected
            - log:
                message: "'Sort by Min Price First Option' has been selected."
                color: CYAN

      # maxFirst option...
      - if:
          condition: ${sortByOption} == 'MaxFirst'
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMaxFirstRadioButton
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMaxFirstRadioButtonSelected
            - log:
                message: "'Sort by Max Price First Option' has been selected."
                color: CYAN
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.selectSortByOption"
          color: BLUE