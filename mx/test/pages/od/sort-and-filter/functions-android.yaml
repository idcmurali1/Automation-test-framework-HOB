#======================================================================================================================
#  AUTHOR: Isis Tolentino. (vn53dge)
#  CREATED: Jan/24/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.assertPopupDisplayed
    platform: android
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.title
            - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.filtersContainer
            - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.seeResultsButton
            - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.closeButton
      - log:
          message: "Assertion Succeeded: Sort and Filter Popup is displayed."
          color: CYAN
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.assertPopupDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function expands the 'Sort by' (Ordenar por) section if not expanded already.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.expandSortByFilterIfNotExpanded
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByFilterExpanded
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByFilterCollapsed
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByFilterExpanded
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.expandSortByFilterIfNotExpanded"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This function selects an option from the 'Sort by' (Ordenar por) section defined by param.
  # PARAM:        ${sortByOption}   [Mandatory]   'Sort By' option to select, options: [ MostRelevant | MinFirst | MaxFirst ].
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.selectSortByOption
    platform: android
    flow:
      # Verifying provided Filter Option...
      - if:
          condition: ${sortByOption} != 'MostRelevant' && ${sortByOption} != 'MinFirst' && ${sortByOption} != 'MaxFirst'
          then:
            - failTest:
                message: "Invalid 'Sort By' Filter Option provided: '${sortByOption}'"
      - log:
          message: "'Sort by' Filter Option: '${sortByOption}'"
          color: CYAN

      # mostRelevant option...
      - if:
          condition: ${sortByOption} == 'MostRelevant'
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMostRelevantRadioButton
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMostRelevantRadioButtonSelected
            - log:
                message: "'Sort by Most Relevant Option' has been selected."
                color: CYAN

      # minFirst option...
      - if:
          condition: ${sortByOption} == 'MinFirst'
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMinFirstRadioButton
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMinFirstRadioButtonSelected
            - log:
                message: "'Sort by Min Price First Option' has been selected."
                color: CYAN

      # maxFirst option...
      - if:
          condition: ${sortByOption} == 'MaxFirst'
          then:
            - click:
                identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMaxFirstRadioButton
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.sortByMaxFirstRadioButtonSelected
            - log:
                message: "'Sort by Max Price First Option' has been selected."
                color: CYAN
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.selectSortByOption"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.sort-and-filter.sort-and-filter-popup.tapSeeResults
    platform: android
    flow:
      - click:
          identifier: mx.mappings.sort-and-filter.sort-and-filter-popup.seeResultsButton
      - log:
          message: "End function: sort-and-filter.sort-and-filter-popup.tapSeeResults"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.sort-and-filter.price-filter-popup.assertPopupDisplayed
    platform: android
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: mx.mappings.sort-and-filter.price-filter-popup.title
            - identifier: mx.mappings.sort-and-filter.price-filter-popup.filterValuesContainer
            - identifier: mx.mappings.sort-and-filter.price-filter-popup.seeResultsButton
            - identifier: mx.mappings.sort-and-filter.price-filter-popup.closeButton
      - log:
          message: "Assertion Succeeded: Price Filter Popup is displayed."
          color: CYAN
      - log:
          message: "End function: sort-and-filter.price-filter-popup.assertPopupDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # PARAM:        ${minPrice}   [Mandatory]   Expected minimum price. 
  # PARAM:        ${maxPrice}   [Mandatory]   Expected maximum price.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.sort-and-filter.price-filter-popup.setPriceRage
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.sort-and-filter.price-filter-popup.minRangeButton
          string: ${minPrice}
          clickFirst: false
          clearField: false
      - sleep:
          duration: 3000
      - enterText:
          identifier: mx.mappings.sort-and-filter.price-filter-popup.maxRangeButton
          string: ${maxPrice}
          clickFirst: false
          clearField: false
      - sleep:
          duration: 3000
      - log:
          message: "Price Range set between ${minPrice} and ${maxPrice}."
          color: CYAN
      - log:
          message: "End function: sort-and-filter.price-filter-popup.setPriceRage"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.sort-and-filter.price-filter-popup.tapSeeResults
    platform: android
    flow:
      - click:
          identifier: mx.mappings.sort-and-filter.price-filter-popup.seeResultsButton
      - log:
          message: "End function: sort-and-filter.price-filter-popup.tapSeeResults"
          color: BLUE