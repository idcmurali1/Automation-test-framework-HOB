#======================================================================================================================
#    AUTHOR: Prasanna Kumar Reddy (g0r06e5)
#   CREATED: Nov/15/2022
#  REVISION: ---
#
#  Copyright Â© 2022 Walmart. All rights reserved.
#======================================================================================================================

functions:

  - name: mx.functions.helpCentre.clickArticleAndValidate
    platform: ios
    flow:
      - getString:
          identifier: mx.mappings.helpcenter.articleTitle
          index: 1
          storeIn: articleTitle
      - click:
            identifier: mx.mappings.helpcenter.articleTitle
            index: 1
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.atriclePageTitle
            - identifier: mx.mappings.helpcenter.articleContent
          label:
            - identifier: mx.mappings.helpcenter.atriclePageTitle
              equals: ${articleTitle}

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickReturnHelp
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.returnToHelp
          position: center
      - click:
            identifier: mx.mappings.helpcenter.returnToHelp

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.searchSuggestionCount
    platform: ios
    flow:
    - numberOfChildElements:
        identifier: mx.mappings.helpcenter.searchSuggestion
        filterBy: mx.mappings.helpcenter.staticText
        storeIn: searchSuggestionCount

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.navigateToHelpCentre
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.bottom-menu.accountButton
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.account.helpButton
          position: center    
      - click:
          identifier: mx.mappings.account.helpButton
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.welcome   

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.verifyWhatsAppButtonPresent
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.whatsApp
          position: center    
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.whatsAppButton       
            - identifier: mx.mappings.helpcenter.whatsAppLogo

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickChannel
    platform: ios
    flow:
      - click:
            identifier: mx.mappings.helpcenter.channelTitle
            index: 1

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickArticle
    platform: ios
    flow:
      - click:
            identifier: mx.mappings.helpcenter.articleTitle
            index: 1

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnSubmitWithSpace
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.feedbackNo
          position: center
      - click:
          identifier: mx.mappings.helpcenter.feedbackNo
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.submitFeedback
      - click:
          identifier: mx.mappings.helpcenter.feedbackOthers   
      - enterText:
          identifier: mx.mappings.helpcenter.commentField
          string: "      "
      - click:
          identifier: mx.mappings.helpcenter.submitFeedback
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.commentError

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnYesButton
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.feebackYes
          position: center
      - click:
          identifier: mx.mappings.helpcenter.feebackYes
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.feedbackSucess

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnSubmitWithEmptyFeeback
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.feedbackNo
          position: center
      - click:
          identifier: mx.mappings.helpcenter.feedbackNo
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.submitFeedback
      - click:
          identifier: mx.mappings.helpcenter.feedbackOthers 
      - click:
          wait: 2000
          identifier: mx.mappings.helpcenter.submitFeedback
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.commentError

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnValidOptionAndSubmit
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.feedbackNo
          position: center
      - click:
          identifier: mx.mappings.helpcenter.feedbackNo
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.submitFeedback
      - click:
          identifier: mx.mappings.helpcenter.feedbackReason
      - click:
          wait: 3000
          identifier: mx.mappings.helpcenter.submitFeedback
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.feedbackSucess
  
  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.validateRelatedArticles
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.relatedArticleTitle
          position: center
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.relatedArticleTitle    

  #-----------------------------------------------------------------------------------------------------------------------

  # Description: Enter the search keyword.
  # Param: ${helpsearch} [Mandatory] search term to pass.
  - name: mx.functions.helpCentre.enterSearchTerm
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.helpcenter.searchBar
      - enterText:
         identifier: mx.mappings.helpcenter.searchText
         string: ${helpsearch}
      - sleep:
          duration: 3
          units: SECONDS

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickCancel
    platform: ios
    flow:
      - click:
         identifier: mx.mappings.helpcenter.searchCancel

  - name: mx.functions.helpCentre.verifyHelpCentreScreenElements
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.welcome
            - identifier: mx.mappings.helpcenter.qal

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickClearText
    platform: ios
    flow:
      - click:
         identifier: mx.mappings.helpcenter.searchClear

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.getSearchText
    platform: ios
    flow:
      - getString:
          identifier: mx.mappings.helpcenter.searchText
          storeIn: searchText

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnSearchFor
    platform: ios
    flow:
    - click:
        identifier: mx.mappings.helpcenter.searchFor  

  #-----------------------------------------------------------------------------------------------------------------------
   # Description: Validating the Articel Page navigation from Search results
  # Storing value in 'searchArticleText' and validate it against the expected result
  - name: mx.functions.helpCentre.validateSearchArticleNavigation
    platform: ios
    flow:
    - getString:
          identifier: mx.mappings.helpcenter.searchFor
          index: 1
          storeIn: searchArticleText
    - click:
        identifier: mx.mappings.helpcenter.searchFor
        index: 1
    - verifyIdentifier:
          label:
            - identifier: mx.mappings.helpcenter.atriclePageTitle
              equals: ${searchArticleText}

  #-----------------------------------------------------------------------------------------------------------------------
  - name: mx.functions.helpCentre.clickSearchAgain
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.returnToHelp
          position: center
      - click:
            identifier: mx.mappings.helpcenter.searchAgain

  - name: mx.functions.helpCentre.verifySearchInput
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.searchCancel

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.helpCentre.returnAndCancellation.assertPageDisplayed
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.returnsAndCancellationTitle
      - log:
          message: "End function: helpCentre.returnAndCancellation.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.helpCentre.returnAndCancellation.closeWebPage
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.returnsAndCancellationWebCloseButton
      - log:
          message: "End function: helpCentre.returnAndCancellation.closeWebPage"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.functions.helpCentre.returnAndCancellation.tapBack
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.returnsAndCancellationBackButton
      - log:
          message: "End function: helpCentre.returnAndCancellation.tapBack"
          color: BLUE
