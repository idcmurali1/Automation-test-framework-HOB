#======================================================================================================================
#    AUTHOR: Prasanna Kumar Reddy (g0r06e5)
#   CREATED: Nov/15/2022
#  REVISION: ---
#
#  Copyright Â© 2022 Walmart. All rights reserved.
#======================================================================================================================

functions:

  - name: mx.functions.helpCentre.navigateToHelpCentre
    platform: android
    flow:
      - click:
          identifier: mx.mappings.bottom-menu.accountButton
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.account.helpLink
          position: center    
      - click:
          identifier: mx.mappings.account.helpLink
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.welcomeMessage
  
  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.verifyHelpCentreScreenElements
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.welcomeMessage
            - identifier: mx.mappings.helpcenter.qal

  #-----------------------------------------------------------------------------------------------------------------------
  - name: mx.functions.helpCentre.clickChannel
    platform: android
    flow:
      - click:
            identifier: mx.mappings.helpcenter.channelTitle
            index: 1

  #-----------------------------------------------------------------------------------------------------------------------
  - name: mx.functions.helpCentre.verifyChannelExpand
    platform: android
    flow:
      - click:
            identifier: mx.mappings.helpcenter.channelTitle
            index: 1
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.expand
            - identifier: mx.mappings.helpcenter.articleTitle

#-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickChannelCollpase
    platform: android
    flow:
      - click:
            identifier: mx.mappings.helpcenter.channelTitle
            index: 1
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.collapse
          notPresent:
            - identifier: mx.mappings.helpcenter.articleTitle
            
  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickArticle
    platform: android
    flow:
      - getString:
          identifier: mx.mappings.helpcenter.articleTitle
          storeIn: articleTitle
      - click:
            identifier: mx.mappings.helpcenter.articleTitle
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.articlePageTitle
            - identifier: mx.mappings.helpcenter.articleContent
          text:
            - identifier: mx.mappings.helpcenter.articlePageTitle
              equals: ${articleTitle}

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnArticleYes
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.articleYes
          position: center
      - click:
          identifier: mx.mappings.helpcenter.articleYes
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.feedbackSucessMessage

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnSubmitButtonWithEmptyData
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.articleNo
          position: center
      - click:
          identifier: mx.mappings.helpcenter.articleNo
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.submitFeedback
      - click:
          identifier: mx.mappings.helpcenter.feedbackReasonOther      
      - click:
          identifier: mx.mappings.helpcenter.submitFeedback
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.articleFeedbackError

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnSubmitButtonWithSpace
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.articleNo
          position: center
      - click:
          identifier: mx.mappings.helpcenter.articleNo
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.submitFeedback
      - click:
          identifier: mx.mappings.helpcenter.feedbackReasonOther      
      - enterText:
          identifier: mx.mappings.helpcenter.feedbackComment
          string: "      "
      - hideKeyboard: true
      - click:
          identifier: mx.mappings.helpcenter.submitFeedback
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.articleFeedbackError       

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnValidOptionAndSubmit
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.articleNo
          position: center
      - click:
          identifier: mx.mappings.helpcenter.articleNo
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.submitFeedback
      - click:
          identifier: mx.mappings.helpcenter.feedbackReason
      - click:
          identifier: mx.mappings.helpcenter.submitFeedback
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.feedbackSucessMessage

  #-----------------------------------------------------------------------------------------------------------------------

  # Description: Enter the search keyword.
  # Param: ${helpsearch} [Mandatory] search term to pass.
  - name: mx.functions.helpCentre.enterSearch
    platform: android
    flow:
      - click:
          identifier: mx.mappings.helpcenter.search
      - enterText:
         identifier: mx.mappings.helpcenter.searchTopics
         string: ${helpsearch}
      - sleep:
          duration: 3
          units: SECONDS

  #-----------------------------------------------------------------------------------------------------------------------
  # Description: Validation of Articel Navigation.
  # We are storing in value which we are about click searchArticleText and validating it
  - name: mx.functions.helpCentre.validateSearchArticleNavigation
    platform: android
    flow:
    - getString:
          identifier: mx.mappings.helpcenter.searchArticleText
          index: 1
          storeIn: searchArticleText
    - click:
        identifier: mx.mappings.helpcenter.searchArticleText
        index: 1
    - verifyIdentifier:
          text:
            - identifier: mx.mappings.helpcenter.articlePageTitle
              equals: ${searchArticleText}

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickOnSearchFor
    platform: android
    flow:
    - click:
        identifier: mx.mappings.helpcenter.searchArticleText
  
  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickReturnHelp
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.returnToHelp
          position: center
      - click:
            identifier: mx.mappings.helpcenter.returnToHelp

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickSearchAgain
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.returnToHelp
          position: center
      - click:
            identifier: mx.mappings.helpcenter.searchAgain

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.verifySearchInput
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.clearText
            - identifier: mx.mappings.helpcenter.cancelButton

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickCancel
    platform: android
    flow:
      - click:
         identifier: mx.mappings.helpcenter.cancelButton

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.clickClearText
    platform: android
    flow:
      - click:
         identifier: mx.mappings.helpcenter.clearText

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.verifySearchForPresent
    platform: android
    flow:
    - verifyIdentifier:
        present:
          - identifier: mx.mappings.helpcenter.searchArticleText   

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.searchForNotPresent
    platform: android
    flow:
    - verifyIdentifier:
        notPresent:
          - identifier: mx.mappings.helpcenter.searchArticleText

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.getSearchText
    platform: android
    flow:
      - getString:
          identifier: mx.mappings.helpcenter.searchTopics
          storeIn: searchText

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.verifyAndClickOnWhatsAppButton
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.whatsAppButton
          position: center    
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.whatsAppButton    
      - click:
         identifier: mx.mappings.helpcenter.whatsAppButton

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.verifyWhatsAppButtonPresent
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.whatsAppButton
          position: center    
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.whatsAppButton      

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.searchSuggestionCount
    platform: android
    flow:
    - numberOfChildElements:
        identifier: mx.mappings.helpcenter.suggestions
        filterBy: mx.mappings.helpcenter.viewGroup
        storeIn: searchSuggestionCount

  #-----------------------------------------------------------------------------------------------------------------------

  - name: mx.functions.helpCentre.validateRelatedArticles
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.helpcenter.relatedArticles
          position: center
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.helpcenter.relatedArticleTitle
