#======================================================================================================================
#    AUTHOR: Francisco Javier Ramirez Hernandez (vn53vq4)
#   CREATED: Mar/13/2022
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

## IOS ----------------------------------------------------------------------------------------------------------------

  # Description: It verifies if the clear button is displayed and then it clicks it
  - name: mx.functions.add-address-form.clearName
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.add-address-form.clearNameButton
          then:
            - click:
                identifier: mx.mappings.add-address-form.clearNameButton
          else:
            - click:
                identifier: mx.mappings.add-address-form.nameField
            - click:
                identifier: mx.mappings.add-address-form.clearNameButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It verifies if the clear button is displayed and then it clicks it
  - name: mx.functions.add-address-form.clearLastName
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.add-address-form.clearLastNameButton
          then:
            - click:
                identifier: mx.mappings.add-address-form.clearLastNameButton
          else:
            - click:
                identifier: mx.mappings.add-address-form.lastNameField
            - click:
                identifier: mx.mappings.add-address-form.clearLastNameButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It verifies if the clear button is displayed and then it clicks it
  - name: mx.functions.add-address-form.clearStreet
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.add-address-form.clearStreetButton
          then:
            - click:
                identifier: mx.mappings.add-address-form.clearStreetButton
          else:
            - click:
                identifier: mx.mappings.add-address-form.streetField
            - click:
                identifier: mx.mappings.add-address-form.clearStreetButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It verifies if the clear button is displayed and then it clicks it
  - name: mx.functions.add-address-form.clearExteriorNumber
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.add-address-form.clearExteriorNumberButton
          then:
            - click:
                identifier: mx.mappings.add-address-form.clearExteriorNumberButton
          else:
            - click:
                identifier: mx.mappings.add-address-form.exteriorNumberField
            - click:
                identifier: mx.mappings.add-address-form.clearExteriorNumberButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It verifies if the clear button is displayed and then it clicks it
  - name: mx.functions.add-address-form.clearZipCode
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.add-address-form.clearZipCodeButton
          then:
            - click:
                identifier: mx.mappings.add-address-form.clearZipCodeButton
          else:
            - click:
                identifier: mx.mappings.add-address-form.zipCodeField
            - click:
                identifier: mx.mappings.add-address-form.clearZipCodeButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It verifies if the clear button is displayed and then it clicks it
  - name: mx.functions.add-address-form.clearPhoneNumber
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.add-address-form.clearPhoneNumberButton
          then:
            - click:
                identifier: mx.mappings.add-address-form.clearPhoneNumberButton
          else:
            - click:
                identifier: mx.mappings.add-address-form.phoneNumberField
            - click:
                identifier: mx.mappings.add-address-form.clearPhoneNumberButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Asserts the correct user's street.
  # Param: ${userStreet} [Mandatory] User's street to verify.
  - name: mx.functions.add-address-form.assertStreet
    platform: ios
    flow:
      - verifyIdentifier:
          value:
            - identifier: mx.mappings.add-address-form.streetField
              equals: ${userStreet}

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the "Regresar" button.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.add-address-form.confirmation-map.tapBack
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-address-form.confirmation-map.backButton
      - log:
          message: "End function: add-address-form.confirmation-map.tapBack"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the Close button.
  - name: mx.functions.add-address-form.tapClose
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-address-form.closeButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the back arrow button.
  - name: mx.functions.add-address-form.tapBack
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.add-address-form.backButton

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: On iOS multiple keyboards open while trying to edit an address. One click will close them all but one.
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.add-address-form.closeMultipleKeyboards
    platform: ios
    flow:
      - log:
          message: "Closing multiple keyboards."
          color: CYAN
      - executeFunction:
          name: mx.functions.utils.extractElementCoordinates
          params:
            - name: element
              string: mx.mappings.add-address-form.pageTitle
      # This click will hide all the keyboards except one.
      - click:
          coordinates: ${x}, ${y}
      # This click will hide the last keyboard.
      - if:
          identifier:
            present:
              - identifier: mx.mappings.utils.closeKeyboardButton
          then:
          - click:
              identifier: mx.mappings.utils.closeKeyboardButton
      - executeFunction:
          name: mx.functions.utils.scrollToTop
      - log:
          message: "End function: add-address-form.closeMultipleKeyboards"
          color: BLUE