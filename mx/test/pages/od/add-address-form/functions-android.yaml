#======================================================================================================================
#    AUTHOR: Francisco Javier Ramirez Hernandez (vn53vq4)
#   CREATED: Mar/13/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

## ANDROID ------------------------------------------------------------------------------------------------------------

  # Documentation: This function hides the keyboard on this page, because the R2 function "hideKeyboard" forces the add 
  # address form pop-up to close, this function is really important because trying to perform a scroll, while the keyboard 
  # is displayed also forces the form to close. This function only works on this view and that is the reason why it is 
  # being added here and not on the "utils.yaml" file.
  - name: mx.functions.add-address-form.hideKeyboard
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.utils.performActionDone
      - log:
          message: "End function: add-address-form.hideKeyboard"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: It clears the corresponding field.
  - name: mx.functions.add-address-form.clearName
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.add-address-form.nameField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.add-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.add-address-form.clearLastName
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.add-address-form.lastNameField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.add-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.add-address-form.clearStreet
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.add-address-form.streetField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.add-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.add-address-form.clearExteriorNumber
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.add-address-form.exteriorNumberField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.add-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.add-address-form.clearZipCode
    platform: android
    flow:
      - enterText:
          identifier: mx.mappings.add-address-form.zipCodeField
          string: ""
          clearField: true
      - executeFunction:
          name: mx.functions.add-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: It clears the corresponding field.
  - name: mx.functions.add-address-form.clearPhoneNumber
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.add-address-form.phoneNumberField
          then:
            - enterText:
                identifier: mx.mappings.add-address-form.phoneNumberField
                string: ""
                clearField: true
            - executeFunction:
                name: mx.functions.add-address-form.hideKeyboard
          else:
            - scroll:
                direction: down
                scrollLimit: 1
                untilIdentifier: mx.mappings.add-address-form.phoneNumberField
            - enterText:
                identifier: mx.mappings.add-address-form.phoneNumberField
                string: ""
                clearField: true
            - executeFunction:
                name: mx.functions.add-address-form.hideKeyboard

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Asserts the correct user's street.
  # Param: ${userStreet} [Mandatory] User's street to verify.
  - name: mx.functions.add-address-form.assertStreet
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: mx.mappings.add-address-form.streetField
              equals: ${userStreet}

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the close button.
  - name: mx.functions.add-address-form.tapClose
    platform: android
    flow:
      - click:
          identifier: mx.mappings.add-address-form.closeButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the back button (only on reserve a time page version of the form).
  - name: mx.functions.add-address-form.tapBack
    platform: android
    flow:
      - click:
          identifier: mx.mappings.add-address-form.backButton
  
  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the back button on the top left corner (only available in "reserve a time" version of the form).
  # AUTHOR: Rodrigo Pacheco (vn53p0i)
  - name: mx.functions.add-address-form.confirmation-map.tapBack
    platform: android
    flow:
      - click:
          identifier: mx.mappings.add-address-form.confirmation-map.backButton
      - log:
          message: "End function: add-address-form.confirmation-map.tapBack"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Taps the close button on the top right corner.
  - name: mx.functions.add-address-form.confirmation-map.tapClose
    platform: android
    flow:
      - click:
          identifier: mx.mappings.add-address-form.confirmation-map.closeButton
