#======================================================================================================================
#  AUTHOR: Isis Rojas Tolentino (vn53dge)
#  CREATED: Mar/13/2023
#  REVISION: ---
#
#  Copyright Â© 2022 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # Description: this function taps the close button
  - name: mx.functions.oos.tapCloseButton
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.oos.closeButton

  # ---------------------------------------------------------------------------------------------------------------

  # Description: this function taps the "Delete and Continue" (Eliminar y continuar) Button
  - name: mx.functions.oos.tapDeleteAndContinueButton
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.oos.deleteAndContinueButton

  # ---------------------------------------------------------------------------------------------------------------

  # Description: this function taps the "Accept" (De acuerdo) button
  - name: mx.functions.oos.tapAcceptButton
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.oos.acceptButton

  # ---------------------------------------------------------------------------------------------------------------

  # Description: this function taps the "Cancel" button
  - name: mx.functions.oos.tapCancelButton
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.oos.cancelButton
  
  # ---------------------------------------------------------------------------------------------------------------

  # Description: this function asserts the OOS products quanity
  # Params: ${expectedQuantity} [Mandatory] quantity expected to display on OOS message
  - name: mx.functions.oos.assertProductCount
    platform: ios
    flow: 
      - verifyIdentifier: 
          present:
            - identifier: mx.mappings.oos.oosProductsQuantity
  
  #--------------------------------------------------------------------------------------------------------------------

  # Description: Asserts the expected OOS product to be displayed.
  # Param ${productName} [Mandatory] Name of the product to assert.
  - name: mx.functions.oos.assertProductDisplayed
    platform: ios
    flow:
      - log:
          message: "OOS Product Name: ${productName}"
          color: CYAN
      - if:
          identifier:
              notPresent:
                - identifier: mx.mappings.oos.productByName
          then:
            - scroll:
                direction: down
                position: center
                scrollLimit: 15
                untilIdentifier: mx.mappings.oos.productByName
            - verifyIdentifier:
                present:
                  - identifier: mx.mappings.oos.productByName
      - log:
          message: "OOS Product found."
          color: CYAN
      - log:
          message: "End function: oos.assertProductDisplayed"
          color: BLUE
               
  # ---------------------------------------------------------------------------------------------------------------

  # Description: this function asserts the OOS page displayed
  - name: mx.functions.oos.assertPageDisplayed
    platform: ios
    flow: 
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.oos.pageTitle
            - identifier: mx.mappings.oos.warningIcon
            - identifier: mx.mappings.oos.oosMessage
      - log:
          message: "End function: oos.assertPageDisplayed"
          color: BLUE

  # ---------------------------------------------------------------------------------------------------------------

  # Description: This function deletes all OOS products
  - name: mx.functions.oos.deleteAllOOSProducts
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.oos.deleteAndContinueButton
          coordinates: 50%,50%
      - log:
          message: "End function: oos.deleteAllOOSProducts"
          color: BLUE
            
  #--------------------------------------------------------------------------------------------------------------------          

  # Description: This clicks on "Eliminar" link of specific OOS product
  # Params: ${productNameOOS} [Mandatory] OOS product
  - name: mx.functions.oos.tapDeleteLinkByProductName
    platform: ios
    flow: 
      - log:
          message: "Product to delete: ${productNameOOS}"
          color: BLUE
      - click:
          identifier: mx.mappings.oos.deleteLinkByProductName
      - log:
          message: "End function: oos.tapDeleteLinkByProductName"
          color: BLUE