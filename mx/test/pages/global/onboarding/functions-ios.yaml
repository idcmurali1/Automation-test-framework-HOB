#======================================================================================================================
#  AUTHOR: Francisco Javier Ramírez Hernández (vn53vq4)
#  CREATED: Oct/17/2022
#  REVISION: ---
#
#  Copyright © 2022 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # Description: This method taps on Enable Later button
  - name: mx.functions.onboarding.tapEnableLater
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.onboarding.notifications.allowLater
      - log:
          message: "End function: onboarding.tapEnableLater"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on Allow Notifications button

  - name: mx.functions.onboarding.tapEnableNotifications
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.onboarding.allowNotificationsButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on Allow button

  - name: mx.functions.notifications-popup.onboarding.tapAllow
    platform: ios
    flow: 
      - verifyIdentifier:
          present: 
            - identifier: mx.mappings.onboarding.notifications-popup.allowButton
      - click: 
          identifier: mx.mappings.onboarding.notifications-popup.allowButton
  
  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on Don't Allow button

  - name: mx.functions.onboarding.notifications-popup.tapDontAllow
    platform: ios
    flow: 
      - verifyIdentifier:
          present: 
            - identifier: mx.mappings.onboarding.notifications-popup.dontAllowButton
      - click: 
          identifier: mx.mappings.onboarding.notifications-popup.dontAllowButton
  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on Don't Allow button
  - name: mx.functions.onboarding.notifications-popup.assertPageDisplayed
    platform: ios
    flow: 
      - verifyIdentifier:
          present: 
            - identifier: mx.mappings.onboarding.notifications-popup.dontAllowButton
            - identifier: mx.mappings.onboarding.notifications-popup.allowButton
            - identifier: mx.mappings.onboarding.notifications-popup.pageTitle
      - log:
          message: "End function: onboarding.notifications-popup.assertPageDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on Allow While Using App button
  - name: mx.functions.onboarding.location-popup.tapAllowWhileUsingApp
    platform: ios
    flow: 
      - click: 
          identifier: mx.mappings.onboarding.location-popup.allowWhileUsingAppButton
      - log:
          message: "End function: onboarding.location-popup.tapAllowWhileUsingApp"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Sergio Fernandez (vn0t1qt)
  - name: mx.functions.onboarding.location-popup.tapAllowWhileUsingAppIfDisplayed
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: mx.mappings.onboarding.location-popup.allowWhileUsingAppButton
          then:
            - click:
                identifier: mx.mappings.onboarding.location-popup.allowWhileUsingAppButton
          else:
            - log:
                message: "Button 'Allow while using app' not displayed. Process will continue."
                color: CYAN
      - log:
          message: "End function: onboarding.location-popup.tapAllowWhileUsingAppIfDisplayed"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on Not Allow option

  - name: mx.functions.onboarding.location-popup.tapNotAllow
    platform: ios
    flow: 
      - verifyIdentifier:
          present: 
            - identifier: mx.mappings.onboarding.location-popup.notAllowButton
      - click: 
          identifier: mx.mappings.onboarding.location-popup.notAllowButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method enter Zip code to select a store
  # Param ${zipCode} [Mandatory] Zip code of the desired store
  # Note: hidekeyboard doesn't work on numeric pad, will use click on "Listo" instead
  - name: mx.functions.onboarding.location.enterZipCode
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.onboarding.location.zipCodeField
      - enterText:
          identifier: mx.mappings.onboarding.location.zipCodeField
          string: ${zipCode}
      - click:
          identifier: mx.mappings.onboarding.listoButton
      - log:
          message: "End function: onboarding.location.enterZipCode"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method taps on Use Current Location

  - name: mx.functions.onboarding.location.tapUseCurrentLocation
    platform: ios
    flow: 
      - verifyIdentifier:
          present: 
            - identifier: mx.mappings.onboarding.location.currentLocationButton
      - click: 
          identifier: mx.mappings.onboarding.location.currentLocationButton

  #--------------------------------------------------------------------------------------------------------------------

  # AUTHOR: Sergio Fernandez (vn0t1qt)
  - name: mx.functions.onboarding.location.tapContinueOrEnableLocationButton
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.onboarding.location.continueOrEnableLocationButton
      - log:
          message: "End function: onboarding.location.tapContinueOrEnableLocationButton"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method asserts Welcome Page is displayed
  - name: mx.functions.onboarding.assertWelcomePageisDisplayed
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.onboarding.welcomePage
            - identifier: mx.mappings.onboarding.loginButton
            - identifier: mx.mappings.onboarding.continueAsGuestButton
          
  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method assert Allow Notifications Page is displayed
  - name: mx.functions.onboarding.notifications-popup.assertNotificationsPageisDisplayed
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.onboarding.notifications-popup.notificationsPage
            - identifier: mx.mappings.onboarding.notifications-popup.allowButton
            - identifier: mx.mappings.onboarding.notifications-popup.allowLaterButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method assert Alert Pop-up is displayed
  - name: mx.functions.onboarding.assertLocationPopupDisplayed
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.onboarding.location-popup.allowLocationPopup
            - identifier: mx.mappings.onboarding.location-popup.allowOnceButton
            - identifier: mx.mappings.onboarding.location-popup.allowWhileUsingAppButton
            - identifier: mx.mappings.onboarding.location-popup.notAllowButton

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This method clicks on use my current location button
  - name: mx.functions.onboarding.location.tapSearch
    platform: ios
    flow:
      - click:
          identifier: mx.mappings.onboarding.location.searchButton
          coordinates: 75%, 75%
      - log: 
          message: "End function: onboarding.location.tapSearch"
          color: BLUE