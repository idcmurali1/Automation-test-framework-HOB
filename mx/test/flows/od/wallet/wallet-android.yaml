#======================================================================================================================
#    AUTHOR: Francisco Javier Ramirez Hernandez
#   CREATED: Mar/06/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

#----------------------------------------------------------------------------------------------------------------------

  # TODO: Move to agnostic file and remove references to wallet
  # Description: This flow adds a new CC/DC from account page. (Staging environment) 
  # Param: ${cardName} [Mandatory] User's full name.
  # Param: ${cardNumber} [Mandatory] User's card number.
  # Param: ${expirtationDate} [Mandatory] User's card expiration date (Eg. 12/25).
  # Param: ${cvv} [Mandatory] User's card cvv.
  # Param: ${country} [Mandatory] User's country selection.
  # Param: ${userAddress} [Mandatory] User's address.
  # Param: ${addressNumber} [Mandatory] User's address ext number.
  # Param: ${city} [Mandatory] User's city.
  # Param: ${colony} [Mandatory] User's colony.
  # Param: ${municipality} [Mandatory] User's municipality.
  # Param: ${state} [Mandatory] User's State.
  # Param: ${zipCode} [Mandatory] User's Zip code.
  # Param: ${last4Digits} [Mandatory] Last 4 digits of user's card.
  - name: mx.flows.od.wallet.addNewDebitOrCreditCard
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.wallet.tapAddDebitCreditCard
      - executeFunction:
          name: mx.functions.add-card-form.enterCardNumber
      - executeFunction:
          name: mx.functions.add-card-form.selectExpirationDate
      - executeFunction:
          name: mx.functions.add-card-form.enterCVV
      - executeFunction:
          name: mx.functions.wallet.enterCardName
      - executeFunction:
          name: mx.functions.wallet.selectCountry
      - executeFunction:
          name: mx.functions.wallet.enterAddress
      - executeFunction:
          name: mx.functions.wallet.enterExteriorNumber
      - executeFunction:
          name: mx.functions.wallet.enterCity
      - executeFunction:
          name: mx.functions.wallet.enterColony
      - executeFunction:
          name: mx.functions.wallet.enterMunicipality
      - executeFunction:
          name: mx.functions.wallet.enterState
      - executeFunction:
          name: mx.functions.wallet.enterZipCode
      - executeFunction:
          name: mx.functions.wallet.tapSave
      - executeFunction:
          name: mx.functions.wallet.assertCardAdded
      - log:
          message: "End flow: od.wallet.addNewDebitOrCreditCard"
          color: BLUE

#----------------------------------------------------------------------------------------------------------------------

  # Description: This flow adds a new CC/DC from account page. (Staging environment) 
  # Param: ${cardName} [Mandatory] User's full name.
  # Param: ${cardNumber} [Mandatory] User's card number.
  # Param: ${expirationDate} [Mandatory] User's card expiration date (Eg. 12/25).
  # Param: ${cvv} [Mandatory] User's card cvv.

  - name: mx.flows.od.wallet.addDebitOrCreditCardWithInvalidData
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.wallet.tapAddDebitCreditCard
      - executeFunction:
          name: mx.functions.add-card-form.enterCardNumber
      - executeFunction:
          name: mx.functions.add-card-form.selectExpirationDate
      - executeFunction:
          name: mx.functions.add-card-form.enterCVV
      - executeFunction:
          name: mx.functions.wallet.tapSave
      - verifyIdentifier:
          present:
            - identifier: mx.mappings.add-address-form.errorMessages
      - log:
          message: "End flow: od.wallet.addDebitOrCreditCardWithInvalidData"
          color: BLUE