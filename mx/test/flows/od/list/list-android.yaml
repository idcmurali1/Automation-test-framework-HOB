#======================================================================================================================
#    AUTHOR: Rodrigo Pacheco C. (vn53p0i)
#   CREATED: Feb/08/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # Description: This flow marks as favorite a product that doesn't have any special badges from SLP.
  # NOTE:        This function does not take a product price limit into consideration.
  # PARAMS:  ${previousList}  [OPTIONAL]  In order to run this function multiple times on the same page
  #                                         it is possible to pass a List generated from a previous
  #                                         execution of this function '${returnedCheckedProductsList}'.
  #                                         Set to 'null' in order to restart the product verification process.
  # RETURNS:
  #   ${returnedCheckedProductsList}
  #   ${returnedProductName}
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.flows.od.list.markProductAsFavoriteWithoutSpecialBadgesInSLP
    platform: android
    flow:
      # This drag action will hide the bottom menu in case it ends on top of the name label or the heart icon.
      - drag:
          from:
            x: 50%
            y: 55%
          to:
            x: 50%
            y: 50%
      - executeFunction:
          name: mx.functions.slp.getProductNameWithoutSpecialBadges #--RETURNS--${returnedProductNameWithoutSpecialBadges}--${returnedCheckedProductsList}-->
          params:
            - name: previousList
              string: ${previousList}
      - executeFunction:
          name: mx.functions.slp.centerProductIfDisplayedInTheLowerSectionOfTheScreen
          params:
            - name: productName
              string: ${returnedProductNameWithoutSpecialBadges}
      - storeIn:
          key: returnedProductName
          value: ${returnedProductNameWithoutSpecialBadges}
      - log:
          message: "Product Name got: ${returnedProductName}"
          color: CYAN
      - executeFunction:
          name: mx.functions.slp.markProductAsFavorite
          params:
            - name: productName
              string: ${returnedProductName}
      - log:
          message: "End flow: od.list.markProductAsFavoriteWithoutSpecialBadgesInSLP"
          color: BLUE

  #----------------------------------------------------------------------------------------------------------------------

  # Description: This flow marks as favorite a product that doesn't have any special badges from PLP.
  # NOTE:        This function does not take a product price limit into consideration.
  # PARAMS:  ${previousList}  [OPTIONAL]  In order to run this function multiple times on the same page
  #                                         it is possible to pass a List generated from a previous
  #                                         execution of this function '${returnedCheckedProductsList}'.
  #                                         Set to 'null' in order to restart the product verification process.
  # RETURNS:
  #   ${returnedCheckedProductsList}
  #   ${returnedProductName}
  # AUTHOR: Rodrigo Pacheco C. (vn53p0i)
  - name: mx.flows.od.list.markProductAsFavoriteWithoutSpecialBadgesInPLP
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.department-l3.getProductNameWithoutSpecialBadges #--RETURNS--${returnedProductNameWithoutSpecialBadges}--${returnedCheckedProductsList}-->
          params:
            - name: previousList
              string: ${previousList}
      - executeFunction:
          name: mx.functions.department-l3.centerProductIfDisplayedInTheLowerSectionOfTheScreen
          params:
            - name: productName
              string: ${returnedProductNameWithoutSpecialBadges}
      - storeIn:
          key: returnedProductName
          value: ${returnedProductNameWithoutSpecialBadges}
      - log:
          message: "Product Name got: ${returnedProductName}"
          color: CYAN
      - executeFunction:
          name: mx.functions.department-l3.markProductAsFavorite
          params:
            - name: productName
              string: ${returnedProductName}
      - log:
          message: "End flow: od.list.markProductAsFavoriteWithoutSpecialBadgesInPLP"
          color: BLUE
