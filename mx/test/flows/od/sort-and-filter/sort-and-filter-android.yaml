#======================================================================================================================
#  AUTHOR: Isis Tolentino. (vn53dge)
#  CREATED: Jan/24/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # DESCRIPTION:  This flow adds the 'Price' filter.
  # PARAM:        ${minPrice}   [Mandatory]   Expected minimum price. 
  # PARAM:        ${maxPrice}   [Mandatory]   Expected maximum price.
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.flows.sort-and-filter.setPriceRangeFromSLP
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.slp.tapPriceFilterButton
      - executeFunction:
          name: mx.functions.sort-and-filter.price-filter-popup.assertPopupDisplayed
      - executeFunction:
          name: mx.functions.sort-and-filter.price-filter-popup.setPriceRage
          params:
            - name: minPrice
              string: ${minPrice}
            - name: maxPrice
              string: ${maxPrice}
      - sleep:
          duration: 3000
      - executeFunction:
          name: mx.functions.sort-and-filter.price-filter-popup.tapSeeResults
      - sleep:
          duration: 5000
      - log:
          message: "End flow: sort-and-filter.setPriceRangeFromSLP"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION:  This flow adds the 'sort and filter' filter.
  # PARAM:        ${sortByOption}   [Mandatory]   'Sort By' option to select, options: [ MostRelevant | MinFirst | MaxFirst ].
  # AUTHOR: Isis Tolentino (vn53dge)
  - name: mx.flows.sort-and-filter.setSortByFilterByOptionFromSLP
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.slp.tapSortAndFilterButton
      - executeFunction:
          name: mx.functions.sort-and-filter.sort-and-filter-popup.assertPopupDisplayed
      - executeFunction:
          name: mx.functions.sort-and-filter.sort-and-filter-popup.expandSortByFilterIfNotExpanded
      - executeFunction:
          name: mx.functions.sort-and-filter.sort-and-filter-popup.selectSortByOption
          params:
            - name: sortByOption
              string: ${sortByOption}
      - sleep:
          duration: 3000
      - executeFunction:
          name: mx.functions.sort-and-filter.sort-and-filter-popup.tapSeeResults
      - sleep:
          duration: 5000
      - log:
          message: "End flow: sort-and-filter.setSortByFilterByOptionFromSLP"
          color: BLUE