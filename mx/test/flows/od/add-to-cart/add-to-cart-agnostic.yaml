#======================================================================================================================
#    AUTHOR: Sergio Fernandez Aldana (vn0t1qt)
#   CREATED: Feb/16/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

#----------------------------------------------------------------------------------------------------------------------

  # DESCRIPTION: Scrolls to the given direction into the given product name and tries to add it to the Cart from SLP.
  #   If the product is not found within 20 swipes max or it is already added to the cart, the function will fail.
  #   At the end, the method will assert in the same SLP the product was added to Cart.
  # PARAM:  ${productName}  [Mandatory]  Product name to add to cart.
  # PARAM:  ${direction}    [Mandatory]  Direction to perform the scroll into. (Values: [UP | DOWN])
  - name: mx.flows.od.add-to-cart.addProductToCartByNameInSLP
    flow:
      - log:
          message: "Product Name: ${productName}"
          color: CYAN
      - log:
          message: "Direction: ${direction}"
          color: CYAN
      - if:
          condition: ${direction} == 'UP' || ${direction} == 'up'
          then:
            - executeFunction:
                name: mx.functions.slp.scrollUpToProductByName
                params:
                  - name: productName
                    string: ${productName}
          else:
            - if:
                condition: ${direction} == 'DOWN' || ${direction} == 'down'
                then:
                  - executeFunction:
                      name: mx.functions.slp.scrollDownToProductByName
                      params:
                        - name: productName
                          string: ${productName}
                else:
                  - failTest:
                      message: "Given direction not valid"
      - executeFunction:
          name: mx.functions.slp.addProductToCart
          params:
            - name: productName
              string: ${productName}
      - executeFunction:
          name: mx.functions.slp.assertProductAddedToCart
          params:
            - name: productName
              string: ${productName}
      - log:
          message: "End Flow: od.add-to-cart.addProductToCartByNameInSLP"
          color: BLUE