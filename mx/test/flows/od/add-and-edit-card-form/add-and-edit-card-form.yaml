#======================================================================================================================
#  AUTHOR: Isis Tolentino (vn53dge)
#  CREATED: Dec/19/2023
#  REVISION: ---
#
#  Copyright Â© 2023 Walmart. All rights reserved.
#======================================================================================================================

functions:

  # DESCRIPTION:  This function adds a new card from add-and-edit-card-form.
  # PARAMS:       ${cardFirstName}        [Mandatory]   Users First Name to enter (Required).
  # PARAMS:       ${cardLastName}         [Mandatory]   Users Last Name to enter (Required).
  #               ${cardNumber}           [Mandatory]   Card Number to enter (Required).
  #               ${cardExpirationDate}   [Mandatory]   Card Expiration Date to enter (Required).
  #               ${cardCVV}              [Mandatory]   Card CVV to enter (Required).
  #               ${cardCountry}          [Mandatory]   Card Country to enter (Required).
  #               ${cardStreet}           [Mandatory]   Card Street to enter (Required).
  #               ${cardExteriorNumber}   [Mandatory]   Card Exterior Number to enter (Required).
  #               ${cardZipCode}          [Mandatory]   Card Zipcode to eter (Required).
  #               ${cardNeighborhood}     [Mandatory]   Card Neighborhood to enter (Required).
  #               ${cardState}            [Mandatory]   Card State to enter (Required).
  #               ${cardCity}             [Mandatory]   Card City to enter (Required).
  #               ${cardMunicipality}     [Mandatory]   Card Municipality to enter (Required).
  #
  # AUTHOR: Isis Tolentino (vn53dge)
  # EDITED: Jorge Carrillo (vn575hp)
  - name: mx.flows.add-and-edit-card-form.addNewCard
    platform: android
    flow:
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.enterCardName
          params:
            - name: cardHolderFirstName
              string: ${cardFirstName}
            - name: cardHolderLastName
              string: ${cardLastName}
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.enterCardNumber
          params:
            - name: cardNumber
              string: ${cardNumber}
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.enterExpirationDate
          params:
            - name: cardExpirationDate
              string: ${cardExpirationDate}
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.enterCVV
          params:
            - name: cardCVV
              string: ${cardCVV}
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.enterStreet
          params:
            - name: cardStreet
              string: ${cardStreet}
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.enterExteriorNumber
          params:
            - name: cardExteriorNumber
              string: ${cardExteriorNumber}
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.enterZipCode
          params:
            - name: cardZipCode
              string: ${cardZipCode}
      - scroll:
          direction: down
          untilIdentifier: mx.mappings.add-and-edit-card-form.municipalityField
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.enterNeighborhood
          params:
            - name: cardNeighborhood
              string: ${cardNeighborhood}
      - executeFunction:
          name: mx.functions.add-and-edit-card-form.tapSave
      - executeFunction:
          name: mx.functions.payment.assertCardAdded
      - log:
          message: "End flow: add-and-edit-card-form.addNewCard"
          color: BLUE