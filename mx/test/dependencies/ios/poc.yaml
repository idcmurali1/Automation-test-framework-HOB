#======================================================================================================================
#    AUTHOR: Sergio Fernandez (vn0t1qt)
#   CREATED: Dec/17/2021
#  REVISION: ---
#
#  Copyright Â© 2021 Walmart. All rights reserved.
#======================================================================================================================

general:
  automationName: XCUITest
  bundleId: ${BUNDLE_ID}
  appiumVersion: 1.20.1
  mappingLabels: ${MAPPING_LABELS:staging}
  combineScenarios: true
  glassEnv: '{"env":{"config":"{\"environment\":\"${GLASS_ENV:staging}\"}"},"args":["-kGlassExpEnabled","true","-com.walmart.px.disable","YES"]}'
  fullReset: ${fullReset:false}
  noReset: false
  build: r2-glass-mx-${APP_PLATFORM}-${TEST_TAGS}-${TEST_SESSION_ID}
  newCommandTimeout: 0
  idleTimeout: 1000
  commandTimeout: 600
  # retryFailedTests: true
  launchTimeout: 6000000
  iosInstallPause: 20000
  noLimitTraceObject: true

profiles:
  #--------------------------------------------------------------------------------------------------------------------
  - name: local
    general:
      app: ${WALMART_APP_FILENAME_IOS:./mx/app/ios/glass-mx.zip}
      serverURL: "http://127.0.0.1:4723/wd/hub"
      combineScenarios: ${COMBINE_SCENARIOS:true}
      glassEnv: '{"env":{"config":"{\"environment\":\"${GLASS_ENV:teflon}\"}"},"args":["-kGlassExpEnabled","true","-com.walmart.px.skip-catcha","YES"]}'

    device:
      - deviceName: ${DEVICE_NAME_IOS:iPhone 11 (14.5)}
        platformName: ${PLATFORM_NAME_IOS:iOS}
        platformVersion: ${PLATFORM_VERSION_IOS:14.5}
        deviceOrientation: ${DEVICE_ORIENTATION_IOS:portrait}

  #--------------------------------------------------------------------------------------------------------------------
  - name: saucelabs
    general:
      app: storage:filename=glass-mx.zip
      testrailProxyHost: sysproxy.wal-mart.com
      testrailProxyPort: 8080
      combineScenarios: ${COMBINE_SCENARIOS:true}
      glassEnv: '{"env":{"config":"{\"environment\":\"${GLASS_ENV:teflon}\"}"},"args":["-kGlassExpEnabled","true","-com.walmart.px.skip-catcha","YES"]}'
        
    saucelabs:
      userName: $SAUCE_USERNAME
      accessKey: $SAUCE_ACCESS_KEY
      useNewSauceAPI: true

    device:
      - deviceName: ${REMOTE_DEVICE_NAME_IOS:iPhone 12 Simulator}
        platformName: ${REMOTE_PLATFORM_NAME_IOS:iOS}
        platformVersion: ${REMOTE_PLATFORM_VERSION_IOS:14.5}
        deviceOrientation: ${REMOTE_DEVICE_ORIENTATION_IOS:portrait}
