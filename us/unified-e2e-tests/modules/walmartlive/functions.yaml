functions:
  - name: unified.us.functions.walmartlive.browseAllFromRixbbonBar
    flow:
        - log: click on browser all from top bar
        - verifyIdentifier:
            present:
              - identifier: us.mappings.wlive.discoverPageTopBanner
              - identifier: us.mappings.Services.walmartLiveLogo
              - identifier: us.mappings.wlive.shareButtonAtDiscoveryPage
        - scroll:
            direction: left
            untilIdentifier: us.mappings.wlive.browseAllButton
            withinIdentifier: us.mappings.wlive.discoverPageTopBanner
            scrollLimit: 20  
        - verifyIdentifier:
            present:
              - identifier: us.mappings.wlive.browseAllButton
        - click:
            identifier: us.mappings.wlive.browseAllButton
        #Validate the vertical scroll for Category page
        - verifyIdentifier:
            present:
              - identifier: us.mappings.wlive.categoryVerticalScroll

  - name: unified.us.functions.walmartlive.selectViewAllForBeautyCategory
    flow:
      - log: Beauty category view all
      - scroll:
          direction: down
          untilIdentifier: us.mappings.walmartlive.beautyCategory
      - click:
          identifier: us.mappings.wlive.beautyCategoryViewAllButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlive.firstVideoInCategoryItemPage
              - identifier: us.mappings.wlive.firstVideoTitleInCategoryItemPage
          then:
            - click:
                identifier: us.mappings.wlive.firstVideoInCategoryItemPage
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - Can't find and click the live video for categorized items

  #click on the first vide and ATC first item from carousel           
  - name: unified.us.function.walmartlive.findFirstItemUnderLiveVideoAndATC
    flow:
        - verifyIdentifier:
            present:
              - identifier: us.mappings.wlive.liveVideoView
              - identifier: us.mappings.wlive.liveVideoFirstItem
        - log:
            message: Verify Shows Page
        - verifyIdentifier:
            timeout: 3000
            present:
            - identifier: us.mappings.walmartlive.verifySpinnerVideo 
        - log: verify unable to play video in shows page or not 
        - if:
            identifier:
              present:
                - identifier: us.mappings.walmartlive.unbaleToplayVideo
            then:
              - failTest:
                  message: ENV_FAILURE - ${env} - Unable to load page
            else:
              - log:
                  message: Able to load page     
        - log: verify share icon in shows page
        - log:
            message: Share Icon exist at show page 
        - click:
            identifier: us.mappings.walmartlive.verifyShowsPageShareIcon
            coordinates: 50% , 50%
        - if: 
            identifier:
              present:
                - identifier: us.mappings.walmartlive.shareIcon
            then:
              - log: Share is correct
              - click:
                  identifier: us.mappings.walmartlive.close
                  coordinates: 50% , 50%
            else:
              - failTest:
                  message: ENV_FAILURE - ${env} - Share is incorrect    
        - log: verify captions icon in shows page
        - if: 
            identifier:
              present:
                - identifier: us.mappings.walmartlive.verifyCaptionsIcon
            then:
                - log:
                      message: Captions exist at show page 
                - click:
                      identifier: us.mappings.walmartlive.verifyCaptionsIcon
                      coordinates: 50% , 50%
                - if:
                    identifier:
                      present:
                        - identifier: us.mappings.walmartlive.captionsIcon
                    then:
                      - log:
                            message: captions is correct
                      - click:
                            identifier: us.mappings.walmartlive.close
                            coordinates: 50% , 50%          
                    else:
                      - failTest:
                          message: ENV_FAILURE - ${env} - captions is incorrect
            else:
              - failTest:
                  message: ENV_FAILURE - ${env} - Captions Icon dose not exist at show page          
        - log: verify brand button in show page
        - if: 
            identifier:
              present:
                - identifier: us.mappings.walmartlive.verifyShowsPageBrandButton
            then:
                - log:
                    message: Brand button exist at show page 
                - click:
                      identifier: us.mappings.walmartlive.verifyShowsPageBrandButton
                      coordinates: 50% , 50%
                - if:
                    identifier:
                      present:
                        - identifier: us.mappings.walmartlive.BrandButton
                    then:
                      - log:
                            message: Brand Button is correct
                      - click:
                            identifier: us.mappings.walmartlive.close 
                            coordinates: 50% , 50%          
                    else:
                      - failTest:
                          message: ENV_FAILURE - ${env} - Brand Button is incorrect
            else:
              - failTest:
                  message: ENV_FAILURE - ${env} - Brand button dose not exist at show page
        - click:
           identifier: us.mappings.wlive.addItemButton
           coordinates: 50%,50%
        - if:
            identifier:
              present:
                - identifier: us.mappings.wlive.unableATCErrorTitle
            then:
              - log:
                  message: Unable to add item to cart                   
              - click:
                  identifier: us.mappings.wlive.unableATCCloseButton
                  coordinates: 50%,50%
            else:
              - log: Increate first item by 1 from the carousal              
              - verifyIdentifier:
                  present:
                    - identifier: us.mappings.wlive.itemAddedButton 
              - click:
                  identifier: us.mappings.wlive.itemAddedButton 
                  coordinates: 50% , 50%
              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.wlive.increaseItemQuantityButton
                      - identifier: us.mappings.wlive.decreaseItemQuantityButton
                  then:
                    - click:
                        identifier: us.mappings.wlive.increaseItemQuantityButton
                        coordinates: 50%, 50%
                    - sleep:
                        duration: 3000
                  else:
                    - log:
                        message: ${env} - Can't increase the item quantity from the carousal
              - verifyIdentifier:
                  timeout: 3000
                  present:
                    - identifier: us.mappings.wlive.itemQuantityAfterIncreasement

  - name: unified.us.functions.walmartlive.selectViewAllForHomeImprovementCategory
    flow:
      - log: Home improvement view all
      - scroll:
          direction: down
          untilIdentifier: us.mappings.walmartlive.homeImprovementCategory
      - click:
          identifier: us.mappings.wlive.homeImprovementCategoryViewAllButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlive.firstVideoInCategoryItemPage
              - identifier: us.mappings.wlive.firstVideoTitleInCategoryItemPage
          then:
            - click:
                identifier: us.mappings.wlive.firstVideoInCategoryItemPage
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - Can't find and click the live video for categorized items

  - name: unified.functions.cart.GuidedDeliveryInhome.validation
    flow:
      - executeFunction:
          name: us.functions.selectTabForSlotBooking
      - executeFunction:
          name: us.functions.selectDayForSlotDisplay
          params:
            - name: slotDay
              string: tomorrow
      - verifyIdentifier:
          timeout: 3000
          present:
            - identifier: us.mappings.wplus.inhome.tipfree
      - if:
          identifier:
            present:
              - identifier:  us.mappings.wplus.inhome.deliveryTime.9to1
          then:
            - log: 9 to 1 pm slot available
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.9to1
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.9to1
                wait: 3000
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.2to6
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.2to6
                wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reserveSlot.continueButton
      - click:
          identifier: us.mappings.reserveSlot.continueButton
          wait: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.missingAnythingTitle
          then:
              - click:
                  identifier: us.mappings.cart.missingAnything.ContinueButton
                  wait: 5000