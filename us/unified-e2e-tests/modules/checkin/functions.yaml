functions:

  - name: unified.us.functions.checkin.checkinUnscheduledPickup.inStorePickup
    flow:
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.orderDetails.checkInButton
          then:    
            - click:
                wait: 10000
                identifier: us.mappings.orderDetails.checkInButton

      - if:
          condition: ${platform} == 'Android'
          then: 
            - if: 
                identifier:
                  present: 
                    - identifier: us.mappings.checkin.enableLocationButton
                then:
                  - click:
                      wait: 5000
                      identifier: us.mappings.checkin.enableLocationButton
            - if: 
                identifier:
                  present: 
                    - identifier: us.mappings.permissions.title
                then:
                  - click:
                      wait: 5000
                      identifier: us.mappings.permissions.title

            - if: 
                identifier:
                  present: 
                    - identifier: us.mappings.Locations.Title
                then:
                  - click:
                      wait: 5000
                      identifier: us.mappings.Locations.Title

            - if: 
                identifier:
                  present: 
                    - identifier: us.mappings.Locations.AllowOnlyWhileUsingTheApp.button
                then:
                  - click:
                      wait: 5000
                      identifier: us.mappings.Locations.AllowOnlyWhileUsingTheApp.button

            - goBack: true
            - goBack: true
            - goBack: true

            - if: 
                identifier:
                  present: 
                    - identifier: us.mappings.checkin.confirm.LocationAccess
                then:
                  - click:
                      wait: 5000
                      identifier: us.mappings.checkin.confirm.LocationAccess

            - if: 
                identifier:
                  present: 
                    - identifier: us.mappings.orderDetails.checkInButton
                then:    
                  - click:
                      wait: 5000
                      identifier: us.mappings.orderDetails.checkInButton

      - if:
          condition: ${platform} == 'iOS'
          then: 
            - if: 
                identifier:
                  present: 
                    - identifier: us.mappings.checkin.without.sharePreciseLocation.button
                then:
                  - click:
                      wait: 5000
                      identifier: us.mappings.checkin.without.sharePreciseLocation.button
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.selectAnOrder
          then:
             #Add the below identifier for android once incident:INC45865174  is resolved
            - if:
                condition: ${platform} == 'iOS'
                then: 
                  - click: 
                      identifier: us.mappings.checkin.selectAnOrder.inStoreRadioButton
            - sleep:
                duration: 3000
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.checkin.selectAnOrder.continueButton
                then:
                  - click:
                      identifier: us.mappings.checkin.selectAnOrder.continueButton            

  - name: unified.us.functions.checkin.instore.verifyUnScheduledCheckedInScreen
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then:
            - verifyIdentifier: 
                present: 
                  - identifier: us.mappings.checkin.checkedin.pageTitle
                  - identifier: us.mappings.checkin.willSeeYouSoonText
                  - identifier: us.mappings.orderDetails.barcode
                  - identifier: us.mappings.checkin.instorePickup.firstInstruction
                  - identifier: us.mappings.checkin.instorePickup.secondInstruction
                  - identifier: us.mappings.checkin.instorePickup.thirdInstruction
                  - identifier: us.mappings.checkin.instorePickup.seeDirectionsLinkText 
            - if:
                condition: ${platform} == 'iOS'
                then: 
                  - verifyIdentifier:
                      label:
                        - identifier: us.mappings.checkin.instorePickup.firstInstruction
                          equals: Head to the store
                        - identifier: us.mappings.checkin.instorePickup.secondInstruction
                          equals: Go to the pickup area inside
                        - identifier: us.mappings.checkin.instorePickup.thirdInstruction
                          equals: Get your order 
            - if:
                condition: ${platform} == 'Android'
                then: 
                  - verifyIdentifier:
                      text:
                        - identifier: us.mappings.checkin.instorePickup.firstInstruction
                          contains: Head to the store
                        - identifier: us.mappings.checkin.instorePickup.secondInstruction
                          contains: Go to the pickup area inside
                        - identifier: us.mappings.checkin.instorePickup.thirdInstruction
                          contains: Get your order                       
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Screen not displayed as per expectation"
                
      