functions:
  - name: unified.us.functions.returns.goToStartReturn
    flow:
      - executeFunction:
          name: unified.us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.orderNumber
            - name: direction
              string: up
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.orderNumber
      - executeFunction:
          name: unified.us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.startReturnButton
            - name: direction
              string: down
      - click:
          identifier: us.mappings.orderDetails.startReturnButton


  - name: unified.us.functions.returns.verifyStartReturnScreen
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.returns.startReturnScreenHeader
          then:
            - log: "Screen header displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Return item selection window not displayed"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.returns.selectItemsText


  - name: unified.us.functions.returns.itemReturn
    flow:
      - executeFunction:
          name: us.functions.returns.requiredReturnDataSetup
      - executeFunction:
          name: us.functions.returns.returnItemAndReasonSelection
      - executeFunction:
          name: us.functions.returns.returnTypeSelection
      - sleep:
          duration: 5000          
      - executeFunction:
          name: us.functions.returns.returnMethodSelection
      - executeFunction:
          name: us.functions.returns.returnReviewDetailsValidation
      - executeFunction:
          name: us.functions.returns.returnConfirmationValidation

  - name: unified.us.function.returns.mp.contactSellerFromReturns
    flow:
      - click:
          identifier: us.mappings.returns.ContactSellerButton
      - verifyIdentifier:
          present:      
            - identifier: us.mappings.contactSellerTitle
            - identifier: us.mappings.contactSellerSendMessageToText
            - identifier: us.mappings.contactSellerReasonForContactText
            - identifier: us.mappings.returns.contactSellerInitiateReturnText
      - enterText:
          identifier: us.mappings.contactSellerMessageField
          string: ${message}
      - goBack: true
      - click:
          identifier: us.mappings.contactSellerSendButton
      - sleep:
          duration: 5000
          
      - if:
          identifier:
            present:
              - identifier: us.mappings.popup.technicalError
          then:    
              - log: Trying again due to technical error
              - click:
                  identifier: us.mappings.amend.confirmation.okay
              - click:
                  identifier: us.mappings.contactSellerSendButton
              - sleep:
                  duration: 2000
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.contactSellerConfirmationText
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Contact Seller Confirmation Not available "
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.contactSellerConfirmationText
      - click:
          identifier: us.mappings.contactSellerDoneButton
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.returns.startReturnScreenHeader
