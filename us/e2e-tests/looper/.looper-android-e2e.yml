#DEPRECATED 

inherit: 'job:///glass-mobile-app-automation/looper-base:.looper.yml'

gitShallowDepth: 10

branches:
  - spec: development
    scheduling: concurrent

    triggers:
      - pr: disabled
      - push:
          manualOnly: true

      - manual: #migrated to loooper
          name: Run [p0-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p0-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 5,14 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p0-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual:  #migrated to loooper
          name: Run [p1-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P1
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 5,14 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual: #migrated to loooper
          name: Run [p2-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P2
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p2-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 8,14 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p2-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      #unified p0 ecomm flows
      - manual:  #migrated to loooper
          name: Run [unified-p0-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p0-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 5,14 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p0-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      #unified p1 ecomm flows

      - manual: #migrated to loooper
          name: Run [unified-p1-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P1
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 5,14 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual: #migrated to loooper
          name: Run [unified-p2-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P2
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p2-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 8,14 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p2-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual: #migrated to loooper
          name: Run Android E2E Golden Flows- duplicate pre-tx in teflon
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'dupe-pre-tx-teflon', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 14 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'dupe-pre-tx-teflon', DEPENDENCY_PROFILE = 'looper')

      - manual: #migrated to loooper
          name: Run Android E2E PetRx flows in teflon
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'PetRx', DEPENDENCY_PROFILE = 'looper')

      - manual: #migrated to loooper
          name: Run Android E2E Tipping flows in teflon
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'Tipping', DEPENDENCY_PROFILE = 'looper')

      - manual: 
          name: Run Android E2E Temp Tipping flows in teflon
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'tipping', DEPENDENCY_PROFILE = 'looper')
      - cron:
          spec: "0 3,19 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'faultboard', DEPENDENCY_PROFILE = 'looper')
     

      # W+ Looper job configurations
      
      - manual:  #migrated to loooper
          name: Run [p0-wplus-teflon-e2e] Android E2E Wplus Golden Flows P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p0-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 3,19 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p0-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')
            
      - manual:  #migrated to loooper
          name: Run [p1-wplus-teflon-e2e] Android E2E Wplus Golden Flows P1
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 3,19 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual:  #migrated to loooper
          name: Run [p2-wplus-teflon-e2e] Android E2E Wplus Golden Flows P2
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p2-wplus-teflon-e2e, DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 7,23 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p2-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      # W+ Unified Looper job configurations      
      - manual:  #migrated to loooper
          name: Run [unified-p0-wplus-teflon-e2e] Android E2E Wplus Golden Flows P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p0-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 3,19 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p0-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual:  #migrated to loooper
          name: Run [unified-p1-wplus-teflon-e2e] Android E2E Wplus Golden Flows P1
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 3,19 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual:  #migrated to loooper
          name: Run [unified-p2-wplus-teflon-e2e] Android E2E Wplus Golden Flows P2
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p2-wplus-teflon-e2e, DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 7,23 * * 3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'unified-p2-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      # Run P1 E2E flows on Teflon on feature build
      - manual: #migrated to loooper
          name: Run iOS Teflon Ecomm P1 flows on Feature build- All
          call: run_tests(SAUCE_APP = "${SAUCE_APP_FILE_NAME}", TEST_TAGS = 'p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper', POST_TO_SPLUNK = true)

      - manual: #migrated to loooper
          name: Run P1 W+ Teflon flows on Feature build
          call: run_tests(SAUCE_APP = "${SAUCE_APP_FILE_NAME}", TEST_TAGS = 'p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper', POST_TO_SPLUNK = true)

      - manual: #migrated to loooper
          name: Run P2 W+ Teflon flows on Feature build
          call: run_tests(SAUCE_APP = "${SAUCE_APP_FILE_NAME}", TEST_TAGS = 'p2-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper', POST_TO_SPLUNK = true)
      
      # Run Unified P1 E2E flows on Teflon on feature build
      - manual: #migrated to loooper
          name: Run Unified iOS Teflon Ecomm P1 flows on Feature build- All
          call: run_tests(SAUCE_APP = "${SAUCE_APP_FILE_NAME}", TEST_TAGS = 'unified-p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper', POST_TO_SPLUNK = true)

      - manual: #migrated to loooper
          name: Run Unified P1 W+ Teflon flows on Feature build
          call: run_tests(SAUCE_APP = "${SAUCE_APP_FILE_NAME}", TEST_TAGS = 'unified-p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper', POST_TO_SPLUNK = true)

      # Run Spanish flows on Teflon on dev build
      - manual: #migrated to loooper
          name: Run Android E2E Spanish Golden Flows 
          call:  run_spanish_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p1-spanish-teflon-e2e', DEPENDENCY_PROFILE = 'looper-spanish')

      - cron: #migrated to loooper
          spec: "0 17 * * 3-7"
          call: run_spanish_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p1-spanish-teflon-e2e', DEPENDENCY_PROFILE = 'looper-spanish')

      # Run Quantum related flows on Teflon on dev build
      - manual: #migrated to loooper
          name: Run Android E2E Quantum Flows
          call: run_tests_quantum(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'qmandroid', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 6,17 * * *"
          call: run_tests_quantum(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'qmandroid', DEPENDENCY_PROFILE = 'looper')

      # Run Quantum related flows on Teflon on dev build - New TC
      - manual: #migrated to loooper
          name: Run Android E2E Quantum Flows New
          call: run_tests_quantum(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'qmandroid1', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 6,17 * * *"
          call: run_tests_quantum(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'qmandroid1', DEPENDENCY_PROFILE = 'looper')

          # Run Fulcrum E2E flows on teflon build
      - manual:  #migrated to loooper
          name: Run Fulcrum Regression flows - All p1 Tests
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p1-fulcrum-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 5,16 * * 1-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-development-latest.apk', APP_BUILD_BRANCH = 'development-latest', TEST_TAGS = 'p1-fulcrum-teflon-e2e', DEPENDENCY_PROFILE = 'looper')     

  - spec: us/release-latest
    scheduling: concurrent

    triggers:
      - pr: disabled
      - push:
          manualOnly: true

      - manual:  #migrated to loooper
          name: Run [p0-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p0-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper-release')

      - cron: #migrated to loooper
          spec: "00 12 * * 1,3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p0-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper-release')

      - manual: #migrated to loooper
          name: Run [p1-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P1
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 18 * * *"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      # Unified ecomm P0 flows
      - manual: #migrated to loooper
          name: Run [unified-p0-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'unified-p0-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 18 * * *"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'unified-p0-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      # Unified ecomm P1 flows
      - manual: #migrated to loooper
          name: Run [unified-p1-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P1
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'unified-p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 18 * * *"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'unified-p1-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

    #   - manual:
    #       name: Run Android E2E Golden Flows - Ecomm P2
    #       call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p2-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper-release')

    #   - cron:
    #       spec: "0 17 * * *"
    #       call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p2-ecomm-teflon-e2e', DEPENDENCY_PROFILE = 'looper-release')

    #   - manual:
    #       name:  Run Android E2E Golden Flows- duplicate pre-tx in teflon
    #       call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'dupe-pre-tx-teflon', DEPENDENCY_PROFILE = 'looper-release')

    #   - cron:
    #       spec: "0 17 * * *"
    #       call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'dupe-pre-tx-teflon', DEPENDENCY_PROFILE = 'looper-release')

 
      # W+ Looper job configurations   

      - manual: #migrated to loooper
          name: Run [p0-wplus-teflon-e2e] Android E2E Wplus Golden Flows P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p0-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper-wplus-release')

      - cron: #migrated to loooper
          spec: "00 12 * * 1,3-7"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p0-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper-wplus-release')

      - manual: #migrated to loooper
          name: Run [p1-wplus-teflon-e2e] Android E2E Wplus Golden Flows P1
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron: #migrated to loooper
          spec: "0 18 * * *"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')
    
      # - manual:
      #     name: Run [p2-wplus-teflon-e2e] Android E2E Wplus Golden Flows P2
      #     call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p2-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper-wplus-release')

      # - cron:
      #     spec: "0 20 * * *"
      #     call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p2-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper-wplus-release')

      # W+ Looper unified job configurations      
      - manual: #migrated to loooper
          name: Run [unified-p0-wplus-teflon-e2e] Android E2E Wplus Golden Flows P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'unified-p0-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 18 * * *"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'unified-p0-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual: #migrated to loooper
          name: Run [unified-p1-wplus-teflon-e2e] Android E2E Wplus Golden Flows P1
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'unified-p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - cron:  #migrated to loooper
          spec: "0 18 * * *"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'unified-p1-wplus-teflon-e2e', DEPENDENCY_PROFILE = 'looper')

      - manual:
          name: Run [p0-ecomm-teflon-e2e] Android E2E Golden Flows - Ecomm P0
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p0-fulfillment', DEPENDENCY_PROFILE = 'looper-release')

      - cron: 
          spec:  "0 23 * * *"
          call: run_tests(SAUCE_APP = 'storage:filename=glass-release-latest.apk', APP_BUILD_BRANCH = 'release-latest', TEST_TAGS = 'p0-fulfillment', DEPENDENCY_PROFILE = 'looper-release')
envs:
  global:
    variables:
      MARKET: us
      APP_PLATFORM: android
      SLACK_CHANNEL: r2-glass-test-result
      POST_TO_ES: true
      POST_TO_ANIVIA: true
    #   TESTRAIL_PLAN_ID: 778418
      APPLITOOLS_API_KEY: ENC[Rt+/oXg4fNf9b2Pq2MQ47frfGB42KVDp7l7/tQ/1na985VV7Ia42QMgDDOppIoaDTWfXJmsQW0Imo7rpXjXaQQ==]

  # Environment profiles can be specified here with specific environment variable values.
  env_android_teflon:
    variables:
      TEST_SESSION_ID: '%{(Math.abs(new(java.util.Random).nextInt()) % 100000000 + 1)}'
      DEPENDENCY_FILE_NAME: us/e2e-tests/dependencies/android/android-default.yaml
    #   DEPENDENCY_PROFILE: looper
      GLASS_ENV: teflon
      MAPPING_LABELS: teflon

  env_spanish_android_teflon:
    variables:
      TEST_SESSION_ID: '%{(Math.abs(new(java.util.Random).nextInt()) % 100000000 + 1)}'
      DEPENDENCY_FILE_NAME: us/e2e-tests/dependencies/android/android-default.yaml
    #   DEPENDENCY_PROFILE: looper
      GLASS_ENV: teflon
      MAPPING_LABELS: spanish_teflon_e2e

flows:
  run_tests:
    - call: build(env_android_teflon)
  run_spanish_tests:
    - call: build(env_spanish_android_teflon)
  run_pii_tests:
    - call: build_pii_check(env_android_teflon)

  run_tests_quantum:
    - call: build_quantum(env_android_teflon)

  build_quantum:
    - node(label = linux, isolation = except_project, ws = exclusive, group = '${APP_PLATFORM} - ${TEST_TAGS}'):
        try:
          - declare(APP_VERSION)
          - call: setup
          - call: get_app_version
          - call: get_repository_build
          - call: return_sauce_app_location
          - call: get_build_app_version
          - call: execute_test
          - shell: node ./us/e2e-tests/helpers/generateQuantumReport.js
          - if: |
              %{GLASS_ENV == 'teflon'}
            then:
              - call: check_pii_data
          - call: generate_sauce_labs_build_url
          - call: publish_report
          # - shell: node ./us/e2e-tests/helpers/calculateAvgTestTime.js
          - call: get_test_failures
          - var(TEST_RUN_STATUS = $TEST_RUN_PASSED)
        catch:
          - var(TEST_RUN_STATUS = $TEST_RUN_FAILED)
          - shell: exit 1
        finally:
          - call: slack_test_run_helper
          - call: post_test_results_json_to_es
          - call: post_test_results_json_to_splunk
          - call: update_test_results_to_xray
          - if: |
              %{GLASS_ENV == 'teflon'}
            then:
              - call: check_pii_failure