functions:

  - name: us.functions.checkin.checkinScheduledPickup
    platform: ios
    flow:
      - click:
          identifier: us.mappings.checkIn.checkInButton
          wait: 10000
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.enableLocation
          then:
            - click:
                wait: 5000
                identifier: us.mappings.checkin.enableLocation
            - click:
                wait: 5000
                identifier: us.mappings.checkin.location.allow

      - executeFunction:
          name: us.functions.checkin.verifyScheduledCheckedInScreen

      - click:
          identifier: us.mappings.checkin.iveParkedButton
          wait: 10000
      # - setLocation: "37.3304698,-121.8603036,0"

      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.checkin.iveParkedButton

      - executeFunction:
          name: us.functions.checkin.verifyArrivedScreen

      - executeFunction:
          name: us.functions.checkin.selectParkingSpotAndCarColor

      - executeFunction:
          name: us.functions.checkin.verifyYouAllSetScreen

  - name: us.functions.checkin.checkinUnscheduledPickup
    platform: ios
    flow:
      - click:
          identifier: us.mappings.checkIn.checkInButton
          wait: 10000
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.enableLocationButton
          then:
            - click:
                wait: 5000
                identifier: us.mappings.checkin.enableLocationButton
            - sleep:
                duration: 6000
            - click:
                wait: 5000
                identifier: us.mappings.checkin.location.allow
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.selectAnOrder.continueButton
          then:
            - click:
                identifier: us.mappings.checkin.selectAnOrder.continueButton
      - if: 
          identifier: 
            present:
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then: 
            - executeFunction:
                name: us.functions.checkin.verifyUnScheduledCheckedInScreen
            - click:
                identifier: us.mappings.checkin.iveParkedButton
                wait: 10000
            - verifyIdentifier:
                notPresent:
                    - identifier: us.mappings.checkin.iveParkedButton
      - executeFunction:
          name: us.functions.checkin.verifyArrivedScreen
      - executeFunction:
          name: us.functions.checkin.selectParkingSpotAndCarColor # This function could be parameterized need to know how the elements are coded
      - executeFunction:
          name: us.functions.checkin.verifyYouAllSetScreen
      - click:
          identifier: us.mappings.checkin.confirmationButton
          

  - name: us.functions.checkin.checkinUnscheduledPickupFromOrderDetails
    platform: ios
    flow:
      - click:
          identifier: us.mappings.home.ost.checkInButton
          wait: 10000
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.enableLocation
          then:
            - click:
                identifier: us.mappings.checkin.enableLocation
            - click:
                identifier: us.mappings.checkin.location.allow 

      - executeFunction:
          name: us.functions.checkin.verifyUnScheduledCheckedInScreen
        
      - click:
          identifier: us.mappings.checkin.closeButton

      - executeFunction:
          name: us.functions.home.ost.verify.youHaveCheckedIn

      - click:
          identifier: us.mappings.home.ost.iHaveParkedButton
          wait: 10000
          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.checkedin.pageTitle
      
      - executeFunction:
          name: us.functions.checkin.verifyUnScheduledCheckedInScreen

      - click:
          identifier: us.mappings.checkin.checkedIn.iveParkedButton

      - executeFunction:
          name: us.functions.checkin.verifyArrivedScreen

      - click:
          identifier: us.mappings.checkin.closeButton

      - executeFunction:
          name: us.functions.home.ost.verify.checkedInOrder.addParkingInfo

      - click:
          identifier: us.mappings.home.ost.addParkingInfoButton
          wait: 10000

      - executeFunction:
          name: us.functions.checkin.selectParkingSpotAndCarColor # This function could be parameterized need to know how the elements are coded

      - executeFunction:
          name: us.functions.checkin.verifyYouAllSetScreen

      - click:
          identifier: us.mappings.checkin.closeButton

      - executeFunction:
          name: us.functions.home.ost.verify.checkedInOrder.editParkingInfo

  - name: us.functions.checkin.checkinUnscheduledMultiStorePickupFromOrderDetails
    platform: ios
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.account.yourOrdersButton
          wait: 5000
      - click:
          identifier: us.mappings.home.ost.checkInButton
          wait: 5000
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.enableLocation
          then:
            - click:
                identifier: us.mappings.checkin.enableLocationButton
            - click:
                identifier: us.mappings.checkin.location.allow 
      
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.selectAnOrder # Verify select an order title for multiple store overlay
            - identifier: us.mappings.checkin.selectAnOrderStore1NameText
            - identifier: us.mappings.checkin.selectAnOrderStore2NameText
            - identifier: us.mappings.checkin.selectAnOrderStore1ViewDetailsLink
            - identifier: us.mappings.checkin.selectAnOrderStore2ViewDetailsLink
        
      - click:
          identifier: us.mappings.checkin.selectAnOrder.continueButton
      
      - executeFunction:
          name: us.functions.checkin.verifyUnScheduledCheckedInScreen

      - click:
          identifier: us.mappings.checkin.checkedIn.iveParkedButton

      - executeFunction:
          name: us.functions.checkin.verifyArrivedScreen

      - executeFunction:
          name: us.functions.checkin.selectParkingSpotAndCarColor

      - executeFunction:
          name: us.functions.checkin.verifyYouAllSetScreen

      - click:
          identifier: us.mappings.checkin.closeButton     

  - name: us.functions.checkin.verifyScheduledCheckedInScreen
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then:
            - log: "Schedule Checked In screen displayed correctly"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.checkin.ArriveBetweenText
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Schedule Checked In screen is not displayed correctly"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.checkin.checkedin.pageTitle
      #       - identifier: us.mappings.checkin.ArriveBetweenText
            # - identifier: us.mappings.orderDetails.vewOrderDetailsButton

  - name: us.functions.checkin.verifyUnScheduledCheckedInScreen
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then:
            - log: "Unscheduled checked in screen displayed correctly"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.checkin.willSeeYouSoonText
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Unscheduled checked in screen not displayed correctly"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.checkin.checkedin.pageTitle
      #       - identifier: us.mappings.checkin.willSeeYouSoonText
            # - identifier: us.mappings.orderDetails.vewOrderDetailsButton

#work around until we figure why Arrival is triggered on Sauce labs soon after checkin
  - name: us.function.checkin.verifyFlow
    platform: ios
    flow:
      - click:
          identifier: us.mappings.orderDetails.checkInButton
          wait: 20000
      - log: check in button is clicked 
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.enableLocationButton
          then:
            - click:
                identifier: us.mappings.checkin.enableLocationButton # us.mappings.checkin.enableLocation
                wait: 5000
            - click:
                identifier: us.mappings.checkin.location.allow
                wait: 5000
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.selectAnOrder
          then:
            - click:
                identifier: us.mappings.checkin.selectAnOrder.continueButton
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then:
            - executeFunction:
                name: us.functions.checkin.verifyUnScheduledCheckedInScreen
            - click:
                identifier: us.mappings.checkin.iveParkedButton
                wait: 10000
                
            - verifyIdentifier:
                notPresent:
                    - identifier: us.mappings.checkin.iveParkedButton

            - executeFunction:
                name: us.functions.checkin.verifyArrivedScreen

            - executeFunction:
                name: us.functions.checkin.selectParkingSpotAndCarColor # This function could be parameterized need to know how the elements are coded

            - executeFunction:
                name: us.functions.checkin.verifyYouAllSetScreen
          else:
            - executeFunction:
                name: us.functions.checkin.verifyArrivedScreen

            - executeFunction:
                name: us.functions.checkin.selectParkingSpotAndCarColor # This function could be parameterized need to know how the elements are coded

            - executeFunction:
                name: us.functions.checkin.verifyYouAllSetScreen

  - name: us.functions.checkin.verifyArrivedScreen
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.arrived.pageTitle
          then:
            - log: "Arrived screen displayed correctly"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.checkin.arrived.howCanWeFindYouText
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Arrived screen not displayed correctly"
      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.checkin.arrived.pageTitle
      #       - identifier: us.mappings.checkin.arrived.howCanWeFindYouText

  - name: us.functions.checkin.verifyYouAllSetScreen
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.youAllSetPageTitle
            - identifier: us.mappings.checkin.weWillBeOutText
            - identifier: us.mappings.checkin.editParkingInfoButton

  - name: us.functions.checkin.selectParkingSpotAndCarColor
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.arrived.pageTitle

      - click:
          identifier: us.mappings.checkin.parkingSpot2 # This could be a parameter need to know how this is coded
          wait: 10000

      - click:
          identifier: us.mappings.checkin.carColor # This could be a parameter need to know how this is coded
          wait: 10000
      - click:
          identifier: us.mappings.checkin.doneButton 
          wait: 10000
      - log: Done button clicked
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.AddtoSiri
          then:
            - click:
                identifier: us.mappings.checkin.PopUpcloseButton

  - name: us.functions.checkin.confirmationPopUp
    flow:
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.checkin.confirmationPopUp
            - identifier: us.mappings.checkin.greencheckMark
            - identifier: us.mappings.checkin.thanksForShopping
            - identifier: us.mappings.checkin.givefeedback.button

      - click:
          identifier: us.mappings.checkin.doneButton
          wait: 10000

      - verifyIdentifier:
          timeout: 40000
          notPresent:
            - identifier: us.mappings.checkin.confirmationPopUp

  - name: us.functions.checkin.changePickUpStore            
    platform: ios
    flow:
      - click:
          wait: 5000
          identifier: us.mappings.reserveSlot.curbsidePickup.tab
      - click:
          identifier: us.mappings.reserveSlot.deliveryfromStoreTab.changeAddressLink
      - click:
          identifier: us.mappings.reserveSlot.selectStore.zicodeTextfield
      - enterText:
          identifier: us.mappings.reserveSlot.selectStore.zicodeTextfield
          string: 72740
          pressEnter: true
      - click:
          identifier: us.mappings.resrveSlot.selectStore.firstStoreName
      - click:
          identifier: us.mappings.reserveSlot.selectStore.saveButton
          wait: 4000
      - click:
          identifier: us.mappings.reserveSlot.close.button

  - name: us.functions.checkin.checkinUnscheduledMultiStorePickupFromHomeScreen
    platform: ios
    flow:
      - scroll:
          direction: up
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.ost.multiOrdersReadyForPickup
#            - identifier: us.mappings.home.ost.checkInSubText (in order detail page only checkin button and order status is present no sub text checkin is there )
            - identifier: us.mappings.home.checkinButton
      - click:
          wait: 5000
          identifier: us.mappings.home.checkinButton
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.enableLocationButton
          then:
            - click:
                identifier: us.mappings.checkin.enableLocationButton
            - click:
                identifier: us.mappings.checkin.location.allow 
      - loop:
          begin: 1
          end: 3
          storeIndex: i
          mode: increment
          flow:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.checkin.multiStore.detailsCollapsed
                then:
                  - click:
                      identifier: us.mappings.checkin.multiStore.detailsCollapsed
                  - sleep:
                      duration: 3000
                else:
                  - break: true

      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.selectAnOrder # Verify select an order title for multiple store overlay
            - identifier: us.mappings.checkin.selectAnOrderStore1NameText
            - identifier: us.mappings.checkin.selectAnOrderStore2NameText
            - identifier: us.mappings.checkin.selectAnOrderStore1ViewDetailsLink
            - identifier: us.mappings.checkin.selectAnOrderStore2ViewDetailsLink
        
      - click:
          identifier: us.mappings.checkin.selectAnOrder.continueButton
      
      - executeFunction:
          name: us.functions.checkin.verifyUnScheduledCheckedInScreen

      - click:
          identifier: us.mappings.checkin.checkedIn.iveParkedButton

      - executeFunction:
          name: us.functions.checkin.verifyArrivedScreen

    #   - click:
    #       identifier: us.mappings.checkin.closeButton

      - executeFunction:
          name: us.functions.checkin.selectParkingSpotAndCarColor

      - executeFunction:
          name: us.functions.checkin.verifyYouAllSetScreen

      - sleep:
          duration: 5000

      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.PopUpcloseButton 
          then:
            - click:
                identifier: us.mappings.checkin.PopUpcloseButton

      - click:
          identifier: us.mappings.checkin.confirmationButton

  #Instore pickup
  - name: us.functions.checkin.checkinUnscheduledPickup.inStorePickup
    platform: ios
    flow:
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkIn.checkInButton
          then:    
            - click:
                wait: 10000
                identifier: us.mappings.checkIn.checkInButton
          
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.enableLocationButton
          then:
            - click:
                wait: 5000
                identifier: us.mappings.checkin.enableLocationButton
            - click:
                wait: 5000
                identifier: us.mappings.checkin.location.allow
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then:
            - executeFunction:
                name: us.functions.checkin.verifyUnScheduledCheckedInScreen

      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.iveParkedButton  
          then:                            
            - click:
                identifier: us.mappings.checkin.iveParkedButton
                wait: 10000                
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.selectAnOrder.store1RadioButton 
          then:                
            - executeFunction: 
                name: us.functions.checkin.instore.verifyUnScheduledCheckedInScreen

  - name: us.functions.checkin.instore.verifyUnScheduledCheckedInScreen
    platform: ios
    flow:
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.selectAnOrder.store1RadioButton
          then:
            - click:
                identifier: us.mappings.checkin.selectAnOrder.store1RadioButton            
            - click:
                identifier: us.mappings.checkin.selectAnOrder.continueButton 
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then:
            - log: checkin page loaded  
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Screen not displayed as expected."
      - sleep:
          duration: 5000                       
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.checkin.checkedin.pageTitle
            - identifier: us.mappings.checkin.instorePickup.firstInstruction
            - identifier: us.mappings.checkin.instorePickup.secondInstruction
            - identifier: us.mappings.checkin.instorePickup.thirdInstruction
            - identifier: us.mappings.orderDetails.barcode
            - identifier: us.mappings.checkin.instorePickup.seeDirectionsLinkText
            # - identifier: us.mappings.checkin.instorePickup.seePickupLocationLinkText #Uncomment after this issue is resolved https://jira.walmart.com/browse/CEPG-193080
          label:
            - identifier: us.mappings.checkin.instorePickup.firstInstruction
              equals: Head to the store
            - identifier: us.mappings.checkin.instorePickup.secondInstruction
              equals: Go to the pickup area inside
            - identifier: us.mappings.checkin.instorePickup.thirdInstruction
              equals: Get your order        
            

################################################ Andriod ###################################################

  - name: us.functions.checkin.checkinUnscheduledPickup
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.checkInButton
      - click:
           identifier: us.mappings.orderDetails.checkInButton   
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.locationAccessPopup
          then:
            - click:
                identifier: us.mappings.global.closeButton    
      - sleep:
          duration: 6000  
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.enableLocation
          then:
            - click:
                identifier: us.mappings.checkin.enableLocation
                wait: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.locationAccessPopup
          then:
            - click:
                identifier: us.mappings.checkin.enableLocationButton               
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.global.onboarding.allowWhileUsingAppButton
          then:
            - click: 
                identifier: us.mappings.global.onboarding.allowWhileUsingAppButton
                wait: 5000
            - log: Location prompt dismissed
      - sleep:
          duration: 10000

  - name: us.functions.checkin.verifyUnScheduledCheckedInScreen
    platform: android
    flow:
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.selectAnOrder
          then:
            - click:
                identifier: us.mappings.checkin.selectAnOrder
            - click:
                identifier: us.mappings.checkin.selectAnOrder.continueButton                      
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then:
            - verifyIdentifier:
                timeout: 60000  #added
                present:
                  - identifier: us.mappings.checkin.checkedin.pageTitle
                  - identifier: us.mappings.checkin.willSeeYouSoonText
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.iveParkedButton                 
          then:                  
            - click:
               identifier: us.mappings.checkin.iveParkedButton
               wait: 10000
          else:
            - sleep:
                duration: 2000
    
  - name: us.functions.checkin.verifyArrivedScreen
    platform: android
    flow: 
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.checkin.arrived.pageTitle
            - identifier: us.mappings.checkin.arrived.howCanWeFindYouText

  - name: us.functions.checkin.selectParkingSpotAndCarColor
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.arrived.howCanWeFindYouText

      - click:
          identifier: us.mappings.checkin.parkingSpot2
          wait: 10000

      - click:
          identifier: us.mappings.checkin.carColor
          wait: 10000

      - click:
          identifier: us.mappings.checkin.doneButton 
          wait: 10000

  - name: us.functions.checkIn.verifyYouAllSetScreen
    platform: android
    flow:
      - try:
          flow:
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier: us.mappings.unifiedCheckin.parkingDetails
                  - identifier: us.mappings.checkin.weWillBeOutText
                  - identifier: us.mappings.checkin.editParkingInfoButton
          catch:
            flow:
              - failTest:
                  message: "ENV_FAILURE - ${env} - All set screen not displayed after parking details are entered"

  #Checkin from home

  - name: us.functions.checkin.checkinUnscheduledPickupFromHomeScreen
    platform: android
    flow:
      - click:
          identifier: us.mappings.home.checkinButton
          wait: 10000
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.enableLocation
          then:
            - click:
                identifier: us.mappings.checkin.enableLocation
            - click:
                identifier: us.mappings.checkin.location.allow 

      - executeFunction:
          name: us.functions.checkin.verifyUnScheduledCheckedInScreen
        
      - click:
          identifier: us.mappings.checkin.closeButton

      - executeFunction:
          name: us.functions.home.ost.verify.youHaveCheckedIn

      - click:
          identifier: us.mappings.home.ost.iHaveParkedButton
          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.checkedin.pageTitle
      
      - executeFunction:
          name: us.functions.checkin.verifyUnScheduledCheckedInScreen

      - click:
          identifier: us.mappings.checkin.iveParkedButton

      - executeFunction:
          name: us.functions.checkin.verifyArrivedScreen

      - executeFunction:
          name: us.functions.checkin.selectParkingSpotAndCarColor 

      - executeFunction:
          name: us.functions.checkIn.verifyYouAllSetScreen

      - click:
          identifier: us.mappings.checkin.closeButton
          
      - scroll:
          direction: up
          wait: 6000

      #- executeFunction:
          #name: us.functions.home.ost.verify.checkedInOrder.editParkingInfo

  - name: us.functions.checkin.instore.verifyUnScheduledCheckedInScreen
    platform: android
    flow:
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.selectAnOrder.continueButton
          then:
            - click:
                identifier: us.mappings.checkin.selectAnOrder.continueButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.checkedin.pageTitle
          then:
            - verifyIdentifier:
                timeout: 60000  #added
                present:
                  - identifier: us.mappings.checkin.checkedin.pageTitle
                  - identifier: us.mappings.checkin.willSeeYouSoonText
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Screen not displayed as per expectation"

 
  - name: us.functions.checkin.checkinUnscheduledMultiStorePickupFromOrderDetails
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.account.yourOrdersButton
          wait: 5000
      - click:
          identifier: us.mappings.home.checkinButton
          wait: 5000
      - click:
          identifier: us.mappings.checkin.location.allow
      
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.selectAnOrder # Verify select an order title for multiple store overlay
            - identifier: us.mappings.checkin.selectAnOrderStore1NameText
            - identifier: us.mappings.checkin.selectAnOrderStore2NameText
            - identifier: us.mappings.checkin.selectAnOrderStore1ViewDetailsLink
            - identifier: us.mappings.checkin.selectAnOrderStore2ViewDetailsLink
        
      - click:
          identifier: us.mappings.checkin.selectAnOrder.continueButton
      
      - executeFunction:
          name: us.functions.checkin.instore.verifyUnScheduledCheckedInScreen 

     #Verify Order in Checked In screen
  - name: us.functions.checkin.verifyUnscheduledpickupOrder.CheckedInScreen 
    platform: android
    flow:
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.checkin.verifyUnscheduledpickupOrder.CheckedInScreen  
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.verifyUnscheduledpickupOrder.CheckedInScreen
          then:
            - log: "Screen displayed as per expectation"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Screen not displayed as per expectation"

  # Description  : Utility to checkIn arrival for a curbside / inStore order
  # Params      : Yes
  # -------------------------------------------- Params --------------------------------------------
  # [Optional] ${orderType}  - curbside / inStore [default 'curbside']
  # -------------------------------------------- Params --------------------------------------------
  - name: us.functions.checkIn.checkInOrder
    platform: android
    flow:
      - executeFunction:
          name: us.functions.checkIn.initiateCheckIn
      - executeFunction:
          name: us.functions.checkIn.locationAccessPermissions
      - executeFunction:
          name: us.functions.checkIn.verifyCheckInConfirmation
      - if:
          condition: ${orderType} != 'inStore'
          then:
            - executeFunction:
                name: us.functions.checkIn.parkingDetailsSelection
            - executeFunction:
                name: us.functions.checkIn.verifyYouAllSetScreen
            - click:
                identifier: us.mappings.unifiedCheckin.parkingDetails.iAmFinished

  - name: us.functions.checkIn.initiateCheckIn
    platform: android
    flow:
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.checkInButton
          catch:
            flow:
              - log: Refreshing the page and checking Checkin Button
              - executeFunction:
                  name: us.functions.global.navigation.goToDeepLink
                  params:
                    - name: deepLinkUrl
                      string: walmart://orders/$orderNo
              - if:
                  identifier:
                    notPresent:
                      - identifier: us.mappings.orderDetails.checkInButton
                  then:
                      - failTest:
                          message: "ENV_FAILURE - ${env} - Check In button not displayed in ODP"
      - click:
           identifier: us.mappings.orderDetails.checkInButton

  - name: us.functions.checkIn.locationAccessPermissions
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.locationAccessPopup
          then:
            - click:
                identifier: us.mappings.checkin.enableLocationButton
      - sleep:
         duration: 3000
      - if:
          identifier:
            present: 
              - identifier: us.mappings.global.onboarding.allowWhileUsingAppButton
          then:
            - click: 
                identifier: us.mappings.global.onboarding.allowWhileUsingAppButton

  - name: us.functions.checkIn.verifyCheckInConfirmation
    platform: android
    flow:
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.checkin.selectAnOrder
          then:
            - click:
                identifier: us.mappings.checkin.selectAnOrder
            - sleep:
                duration: 3000
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.checkin.selectAnOrder.continueButton
                then:
                  - click:
                      identifier: us.mappings.checkin.selectAnOrder.continueButton
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.checkin.checkedin.pageTitle
                  - identifier: us.mappings.checkin.willSeeYouSoonText
                  - identifier: us.mappings.checkin.imFinished.button
            - click:
                identifier: us.mappings.checkin.imFinished.button
                wait: 3000
          catch:
            flow:
              - failTest:
                  message: "ENV_FAILURE - ${env} - Checked In screen or I'm finished button Not seen"

  - name: us.functions.checkIn.loadAndVerifyArrivedScreen
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.checkin.iveParkedButton
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Parked button not displayed"
          else:
            - click:
                identifier: us.mappings.checkin.iveParkedButton
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.checkin.arrived.pageTitle
                  - identifier: us.mappings.checkin.arrived.howCanWeFindYouText
          catch:
            flow:
              - failTest:
                  message: "ENV_FAILURE - ${env} - Parked button or arrvied text not not displayed"

  - name: us.functions.checkIn.parkingDetailsSelection
    platform: android
    flow:
      - executeFunction:
          name: us.functions.checkIn.loadAndVerifyArrivedScreen
      - click:
          identifier: us.mappings.checkin.parkingSpot2
      - click:
          identifier: us.mappings.checkin.carColor
      - click:
          identifier: us.mappings.checkin.doneButton

#Unified Checkin skelton 
  - name: us.functions.unifiedCheckin.validateTripOverview
    platform: android
    flow:
      - click:
          identifier: us.mappings.unifiedCheckin.IamOnMyWayButton
          wait: 5000
      - click:
          identifier: us.mappings.deliveryAddress.add.shareLocation
      - click:
          identifier: us.mappings.global.onboarding.allowWhileUsingAppButton
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.unifiedCheckin.continueBtn
          wait: 5000

      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.tripOverview
            - identifier: us.mappings.unifiedCheckin.tripOverview.storeName
            - identifier: us.mappings.unifiedCheckin.tripOverview.storeAddress
            - identifier: us.mappings.unifiedCheckin.tripOverview.map
            - identifier: us.mappings.unifiedCheckin.tripOverview.arriveBy
            - identifier: us.mappings.unifiedCheckin.tripOverview.stopAtOneLocation
            - identifier: us.mappings.unifiedCheckin.tripOverview.locationMessage
      - click:
          identifier: us.mappings.unifiedCheckin.tripOverview.mapZoomInButton
      - click:
          identifier: us.mappings.unifiedCheckin.tripOverview.mapZoomOutButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.tripOverview.mapPickupPin
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.tripOverview.pickupTypeTitle
            - identifier: us.mappings.unifiedCheckin.tripOverview.items
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderType
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne.qty
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne.viewDetailsCta
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo.qty
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo.viewDetailsCta 
      - click:
          identifier: us.mappings.unifiedCheckin.tripOverview.iHaveParked
      - if:
          identifier:
            present:
              - identifier: us.mappings.unifiedCheckin.tripOverview.alreadyHereTitle
          then:
            - click:
                identifier: us.mappings.unifiedCheckin.tripOverview.alreadyHereButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingInfo

  - name: us.functions.unifiedCheckin.validateParkingInfo
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingInfo
            - identifier: us.mappings.unifiedCheckin.parkingInfo.welcome
            - identifier: us.mappings.unifiedCheckin.parkingInfo.message
            - identifier: us.mappings.unifiedCheckin.parkingInfo.selectSpot
            - identifier: us.mappings.unifiedCheckin.parkingInfo.selectColor
      - click:
          identifier: us.mappings.unifiedCheckin.parkingInfo.selectSpot
      - click:
          identifier: us.mappings.unifiedCheckin.parkingInfo.selectColor

  - name: us.functions.unifiedCheckin.validateParkingDetails
    platform: android
    flow:
      - click:
          identifier: us.mappings.unifiedCheckin.parkingInfo.done
          wait: 5000                 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingDetails
            - identifier: us.mappings.unifiedCheckin.parkingDetails.header
            - identifier: us.mappings.unifiedCheckin.parkingDetails.subHeader
            - identifier: us.mappings.unifiedCheckin.parkingDetails.walmartPlusBanner           
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo.edit
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfoTitle
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo.edit
      - click:
          identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo.edit
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingInfo
            - identifier: us.mappings.unifiedCheckin.parkingInfo.welcome
      - click:
          identifier: us.mappings.unifiedCheckin.parkingInfo.done
          wait: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberTwo
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetailsTitle
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.qty
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.pickupType
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberOne
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberOne.qty
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberOne.viewDetailsCta
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberTwo
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberTwo.qty
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberTwo.viewDetailsCta
      - click:
          identifier: us.mappings.unifiedCheckin.parkingDetails.iAmFinished
      - sleep: 
          duration: 2000  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackOrderButton

  - name: us.functions.unifiedCheckin.validateTripOverview
    platform: ios
    flow:
      - click:
          identifier: us.mappings.orderDetails.checkInButton
          wait: 3000
      - if:
          identifier:
            present:
              - identifier: us.mappings.checkin.enableLocationButton
          then:
            - click:
                identifier: us.mappings.checkin.enableLocationButton
            - click:
                wait: 5000
                identifier: us.mappings.checkin.location.allow
      - click:
          identifier: us.mappings.checkin.selectAnOrder.continueButton
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.tripOverview
            - identifier: us.mappings.unifiedCheckin.tripOverview.storeName
            - identifier: us.mappings.unifiedCheckin.tripOverview.storeAddress
            - identifier: us.mappings.unifiedCheckin.tripOverview.map
            - identifier: us.mappings.unifiedCheckin.tripOverview.arriveBy
            - identifier: us.mappings.unifiedCheckin.tripOverview.stopAtOneLocation
            - identifier: us.mappings.unifiedCheckin.tripOverview.locationMessage
            - identifier: us.mappings.unifiedCheckin.tripOverview.pickupTypeTitle
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderType
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne.qty
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne.viewDetailsCta
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo.qty
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo.viewDetailsCta
      - verifyIdentifier:
          present:                  
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo.viewDetailsCta
      - click:
          identifier: us.mappings.checkin.iveParkedButton
          wait: 3000
      - if:
          identifier:
            present:
              - identifier: us.mappings.unifiedCheckin.tripOverview.alreadyHereTitle
          then:
            - click:
                identifier: us.mappings.unifiedCheckin.tripOverview.alreadyHereButton

  - name: us.functions.unifiedCheckin.validateParkingInfo
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingInfo
            - identifier: us.mappings.unifiedCheckin.parkingInfo.welcome
            - identifier: us.mappings.unifiedCheckin.parkingInfo.message
            - identifier: us.mappings.checkin.parkingSpot2
            - identifier: us.mappings.checkin.carColor
      - click:
          identifier: us.mappings.checkin.parkingSpot2
      - click:
          identifier: us.mappings.checkin.carColor
          
  - name: us.functions.unifiedCheckin.validateParkingDetails
    platform: ios
    flow:
      - click:
          identifier: us.mappings.checkin.doneButton
          wait: 5000          
      - scroll:
          direction: down
          untilIdentifier: us.mappings.global.editButton
          position: center          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingDetails
            - identifier: us.mappings.unifiedCheckin.parkingDetails.header
            - identifier: us.mappings.unifiedCheckin.parkingDetails.subHeader
            - identifier: us.mappings.unifiedCheckin.parkingDetails.walmartPlusBanner
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfoTitle
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo
            - identifier: us.mappings.global.editButton
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetailsTitle
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderType
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne
          position: center
      - verifyIdentifier:
          present:
            - identifier:  us.mappings.unifiedCheckin.tripOverview.orderType
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne.qty
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne.viewDetailsCta
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo.qty
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo.viewDetailsCta
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.qty
      - click:
          identifier: us.mappings.global.editButton
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingInfo
            - identifier: us.mappings.unifiedCheckin.parkingInfo.welcome
      - click:
          identifier: us.mappings.checkin.doneButton
          wait: 5000
      - scroll:
          direction: up
          untilIdentifier: us.mappings.unifiedCheckin.parkingDetails.subHeader
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.barCodeHeader
            - identifier: us.mappings.unifiedCheckin.pickupBarCodeText
            - identifier: us.mappings.unifiedCheckin.pickupBarCodeModule
            - identifier: us.mappings.unifiedCheckin.pickupBarCodePin            
            - identifier: us.mappings.unifiedCheckin.parkingDetails.header
            - identifier: us.mappings.unifiedCheckin.parkingDetails.subHeader
      - click:
          identifier: us.mappings.unifiedCheckin.parkingDetails.iAmFinished
          wait: 5000
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://orders/$orderNo1    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkIn.showBarCode


  - name: us.functions.unifiedCheckinAndCurbsideReturn.validateshowBarcode
    platform: ios
    flow:
      - click:
          identifier: us.mappings.checkin.doneButton
          wait: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcodeHeader
            - identifier: us.mappings.unifiedCheckin.parkingDetails.header
            - identifier: us.mappings.unifiedCheckin.parkingDetails.subHeader
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcode
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcode.returnBarcodeText 
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcodeImage
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne
          position: center 
      - verifyIdentifier:
          present:                   
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfoTitle
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo
            - identifier: us.mappings.global.editButton
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetailsTitle
            - identifier: us.mappings.unifiedCheckin.showBarcode.orderAndReturnDetails
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderType
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcode.returnDetailsTitle
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne.qty
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberOne.viewDetailsCta
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo 
            - identifier: us.mappings.unifiedCheckin.tripOverview.orderNumberTwo.viewDetailsCta
      - click:
          identifier: us.mappings.global.editButton
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingInfo
            - identifier: us.mappings.unifiedCheckin.parkingInfo.welcome
      - click:
          identifier: us.mappings.checkin.doneButton
          wait: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcodeHeader
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcode
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcode.returnBarcodeText 
            - identifier: us.mappings.unifiedCheckinAndCurbsideReturn.showBarcodeImage
      - click:
          identifier: us.mappings.unifiedCheckin.parkingDetails.iAmFinished
          wait: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkIn.checkInButton

  - name: us.functions.unifiedCheckin.validateShowBarcode
    platform: android
    flow:
      - click:
          identifier: us.mappings.unifiedCheckin.parkingInfo.done
          wait: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.showBarcodeTitle
            - identifier: us.mappings.unifiedCheckin.showBarcode.header
            - identifier: us.mappings.unifiedCheckin.showBarcode.subHeader
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo.edit
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingDetails.walmartPlusBanner
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfoTitle
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo
            - identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo.edit
      - click:
          identifier: us.mappings.unifiedCheckin.parkingDetails.parkingInfo.edit
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingInfo
            - identifier: us.mappings.unifiedCheckin.parkingInfo.welcome
      - click:
          identifier: us.mappings.unifiedCheckin.parkingInfo.done
          wait: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.pickupType
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetailsTitle
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.qty
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.pickupType
      - scroll:
          direction: down
          untilIdentifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberTwo
      - verifyIdentifier:
          present:
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberOne
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberOne.qty
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberOne.viewDetailsCta
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberTwo
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberTwo.qty
            - identifier: us.mappings.unifiedCheckin.parkingDetails.orderDetails.orderNumberTwo.viewDetailsCta

      - click:
          identifier: us.mappings.unifiedCheckin.parkingDetails.iAmFinished
      - sleep: 
          duration: 4000  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderHistory.showBarcode