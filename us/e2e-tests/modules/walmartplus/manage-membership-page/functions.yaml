functions:

  # Deeplink to MMP Flow
  - name: us.functions.wplus.newMmpRedesign.expo.deeplink
    platform: ios
    flow:
      # Deeplink to exxon flow
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
          - name: deepLinkUrl
            string: us.data.mmpredesign.expo.deepLink
  
  # Deeplink to MMP Flow
  - name: us.functions.wplus.newMmpRedesign.expo.deeplink
    platform: android
    flow:
      # Deeplink to exxon flow
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
          - name: deepLinkUrl
            string: us.data.mmpredesign.expo.deepLink
  
  - name: us.functions.wplus.managemembership.findManageCTAAndNavigateToL2Page
    platform: ios
    flow:
      - scroll :
          direction: down
          untilIdentifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - click:
              identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
  
  - name: us.functions.wplus.managemembership.findManageCTAAndNavigateToL2Page
    platform: android
    flow:
      - scroll :
          direction: down
          untilIdentifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - click:
              identifier: us.mappings.wplus.managemembership.managewalmartplus.cta

  - name: us.functions.wplus.managemembership.navigateToManageyourplanpageFromMemberShipPage
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.wplus.managemembership.findManageCTAAndNavigateToL2Page
      - verifyIdentifier: 
          timeout: 5000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.cancelmembership.title
  
  - name: us.functions.wplus.managemembership.navigateToManageyourplanpageFromMemberShipPage
    platform: android
    flow:
      - executeFunction:
          name: us.functions.wplus.managemembership.findManageCTAAndNavigateToL2Page
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.cancelmembership.title

  - name: us.functions.wplus.managemembership.navigateToManageyourplanpageForFreePlans
    platform: ios
    flow:
      - scroll :
          direction: down
          untilIdentifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - click:
              identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.cancelmembership.title
  
  - name: us.functions.wplus.managemembership.navigateToManageyourplanpageForFreePlans
    platform: android
    flow:
      - scroll :
          direction: down
          untilIdentifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - click:
              identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.cancelmembership.title

  # Navigate to Cancel Membership Screen from Manage Membership settings page
  - name: us.functions.wplus.managemembership.navigateToCancelFreeTrialMemberFromMemberShipPage
    platform: ios
    flow:
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - executeFunction:
          name: us.functions.wplus.managemembership.navigateToManageyourplanpageFromMemberShipPage
      - click:
          identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.cancelmembership.cancel.cta
  
  # Navigate to Cancel Membership Screen from Manage Membership settings page
  - name: us.functions.wplus.managemembership.navigateToCancelFreeTrialMemberFromMemberShipPage
    platform: android
    flow:
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
      - executeFunction:
          name: us.functions.wplus.managemembership.navigateToManageyourplanpageFromMemberShipPage
      - click:
          identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.cancelmembership.cancel.cta

  # Navigate to Cancel Membership Screen from Manage Membership settings page
  - name: us.functions.wplus.managemembership.navigateToCancelPaidMemberFromMemberShipPage
    platform: ios
    flow:
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
            - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.title
            - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.price.title
      - executeFunction:
          name: us.functions.wplus.managemembership.navigateToManageyourplanpageFromMemberShipPage
      - click:
          identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.cancelmembership.cancel.cta
  
  # Navigate to Cancel Membership Screen from Manage Membership settings page
  - name: us.functions.wplus.managemembership.navigateToCancelPaidMemberFromMemberShipPage
    platform: android
    flow:
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
            - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.title
            - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.price.title
      - executeFunction:
          name: us.functions.wplus.managemembership.navigateToManageyourplanpageFromMemberShipPage
      - click:
          identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.cancelmembership.cancel.cta

# Navigate to Pause Membership Screen from Manage Membership settings page
  - name: us.functions.wplus.managemembership.navigateToPauseMembershipPageFromMemberShipPage
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.wplus.managemembership.navigateToManageyourplanpageFromMemberShipPage
      - click:
          identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.pausemembership.pause.cta
  
  # Navigate to Pause Membership Screen from Manage Membership settings page
  - name: us.functions.wplus.managemembership.navigateToPauseMembershipPageFromMemberShipPage
    platform: android
    flow:
      - executeFunction:
          name: us.functions.wplus.managemembership.navigateToManageyourplanpageFromMemberShipPage
      - click:
          identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.pausemembership.pause.cta

  - name: us.functions.wplus.validate.verizontracfone
    platform: ios
    flow:
      - verifyIdentifier: 
            timeout: 3000
            present: 
              - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
              - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
              - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.title
              - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.freeplan.title
      - executeFunction:
          name: us.functions.wplus.managemembership.findManageCTAAndNavigateToL2Page
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.straighttalk.title
          then:
            - log: "Monthly plan with Straight talk text present as expected"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.straighttalk.title
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Monthly plan with Straight talk text not displayed as expected"  
  
  - name: us.functions.wplus.validate.verizontracfone
    platform: android
    flow:
      - verifyIdentifier: 
            timeout: 3000
            present: 
              - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
              - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
              - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.title
              - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.freeplan.title
      - executeFunction:
          name: us.functions.wplus.managemembership.findManageCTAAndNavigateToL2Page
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.straighttalk.title
          then:
            - log: "Monthly plan with Straight talk text present as expected"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule.straighttalk.title
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Monthly plan with Straight talk text not displayed as expected"  

  # Verify My Membership details on Manage Membership Screen
  # if tenure is annual, then annual verification happens
  # otherwise monthly verification happens
  # if membership type is trial, then trial verification happens
  - name: us.functions.wplus.membership.verifyMyMembershipDetails
    platform: ios
    flow:
      - log: Verifying My Membership Details on Manage Membership
      - if:
          condition: ${membershipType} == 'paid'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Paid Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
                          - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.annual.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.annual.price.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.renew.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.renew.date
                  - verifyIdentifier:
                        notPresent:
                          - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
                else:
                  - log: Verifying Paid Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
                          - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.monthly.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.monthly.price.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.renew.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.renew.date
                          - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
      - if:
          condition: ${membershipType} == 'trial'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Trial Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
                          - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.trial.annual.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.trial.price.annual.title
                else:
                  - log: Verifying Trial Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
                          - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.trial.monthly.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.trial.price.monthly.title

  # Verify My Membership details on Manage Membership Screen
  # if tenure is annual, then annual verification happens
  # otherwise monthly verification happens
  # if membership type is trial, then trial verification happens
  - name: us.functions.wplus.membership.verifyMyMembershipDetails
    platform: android
    flow:
      - log: Verifying My Membership Details on Manage Membership
      - if:
          condition: ${membershipType} == 'paid'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Paid Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
                          - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.annual.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.annual.price.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.renew.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.renew.date
                  - verifyIdentifier:
                        notPresent:
                          - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
                else:
                  - log: Verifying Paid Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
                          - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.monthly.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.paid.monthly.price.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.renew.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.renew.date
                          - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
      - if:
          condition: ${membershipType} == 'trial'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Trial Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
                          - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.trial.annual.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.trial.price.annual.title
                else:
                  - log: Verifying Trial Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
                          - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.trial.monthly.title
                          - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.trial.price.monthly.title

  # Description: This method changes payment method to Paypal
  # Platform: iOS
  - name: us.functions.wplus.payment.changePaymentMethodToPaypal
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.managemembership.paymentMethod.overlay.module
      - click:
          identifier: us.mappings.managemembership.paymentMethod.overlay.module 

      - verifyIdentifier:
          present:
            - identifier: us.mappings.managemembership.paymentMethod.change.cta
      - click:
          identifier: us.mappings.managemembership.paymentMethod.change.cta 

      - verifyIdentifier:
          present:
            - identifier: us.mappings.paymentMethod.selectPaypal
      - click:
          identifier: us.mappings.paymentMethod.selectPaypal

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wrs.saveButton
      - click:
          identifier: us.mappings.wrs.saveButton
      
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.paymentMethod.selectPaypal

      - verifyIdentifier:
          present:
            - identifier: us.mappings.managemembership.paymentMethod.overlay.module
  
  # Description: This method changes payment method to Paypal
  # Platform: Android
  - name: us.functions.wplus.payment.changePaymentMethodToPaypal
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.managemembership.paymentMethod.overlay.module
      - click:
          identifier: us.mappings.managemembership.paymentMethod.overlay.module 

      - verifyIdentifier:
          present:
            - identifier: us.mappings.managemembership.paymentMethod.change.cta
      - click:
          identifier: us.mappings.managemembership.paymentMethod.change.cta

      - verifyIdentifier:
          present:
            - identifier: us.mappings.paymentMethod.selectPaypal

      - click:
          identifier: us.mappings.paymentMethod.selectPaypal

      - verifyIdentifier:
          present:
            - identifier: us.maappings.reviewOrder.affirm.confirmPageContinueButton

      - click:
          identifier: us.maappings.reviewOrder.affirm.confirmPageContinueButton

      - verifyIdentifier:
          present:
            - identifier: us.mappings.paymentMethod.paypalCardView   

  # Validate Inhome plan details on Manage membership screen  
  - name: us.functions.wplus.inHome.validateMyPlusUpsDetailsOnManageMembershipPage
    platform: ios
    flow:
      - log: Verifying PlusUps Membership Details on Manage Membership
      - if:
          condition: ${membershipType} == 'paid'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Paid Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.annual.price.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.renew.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.renew.date
                else:
                  - log: Verifying Paid Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.monthly.price.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.renew.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.renew.date
                          - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
      - if:
          condition: ${membershipType} == 'trial'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Trial Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.annual.price.title
                else:
                  - log: Verifying Trial Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.monthly.price.title
  
  # Validate Inhome Manage membership details  
  - name: us.functions.wplus.inHome.validateMyPlusUpsDetailsOnManageMembershipPage
    platform: android

    flow:
      - log: Verifying PlusUps Membership Details on Manage Membership
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.plusups.title
            - identifier: us.mappings.wplus.managemembership.manageplusups.cta
      - if:
          condition: ${membershipType} == 'paid'
          then:
            - verifyIdentifier: 
                present: 
                  - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.renew.title
                  - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.renew.date
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Paid Annual Tenure Details
                  - verifyIdentifier: 
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.annual.price.title
                else:
                  - log: Verifying Paid Monthly Tenure Details
                  - verifyIdentifier: 
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.monthly.price.title
                          - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
      - if:
          condition: ${membershipType} == 'trial'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Trial Annual Tenure Details
                  - verifyIdentifier: 
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.annual.price.title
                else:
                  - log: Verifying Trial Monthly Tenure Details
                  - verifyIdentifier: 
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.monthly.price.title

  # Click upgrade to annual button
  - name: us.functions.wplus.assist.manageMembership.clickUpgradeToAnnualBtn
    platform: ios
    flow:
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
            - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.title
      - click:
          identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
          wait: 3000
  
  # Click upgrade to annual button
  - name: us.functions.wplus.assist.manageMembership.clickUpgradeToAnnualBtn
    platform: android
    flow:
      - verifyIdentifier: 
          timeout: 3000
          present: 
            - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
            - identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.title
      - click:
          identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
          wait: 1000
  
  # Validate Inhome Manage membership details  
  - name: us.functions.wplus.inHome.validatecancelmemberPlusUpsOnManageMembershipPage
    platform: ios
    flow:
      - log: Verifying PlusUps Membership Details on Manage Membership
      - if:
          condition: ${membershipType} == 'paid'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Paid Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.annual.price.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.canceled.title
                  - verifyIdentifier: 
                        timeout: 3000
                        notPresent:                    
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta

                else:
                  - log: Verifying Paid Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.monthly.price.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.canceled.title
                  - verifyIdentifier: 
                        timeout: 3000
                        notPresent:                    
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
      - if:
          condition: ${membershipType} == 'trial'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Trial Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        notPresent:
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.annual.price.title
                else:
                  - log: Verifying Trial Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        notPresent: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.monthly.price.title
  
  # Validate Inhome Manage membership details  
  - name: us.functions.wplus.inHome.validatecancelmemberPlusUpsOnManageMembershipPage
    platform: android
    flow:
      - log: Verifying PlusUps Membership Details on Manage Membership
      - if:
          condition: ${membershipType} == 'paid'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Paid Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.annual.price.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.canceled.title
                  - verifyIdentifier: 
                        timeout: 3000
                        notPresent:                    
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta

                else:
                  - log: Verifying Paid Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        present: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.paid.monthly.price.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.paid.canceled.title
                  - verifyIdentifier: 
                        timeout: 3000
                        notPresent:                    
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
      - if:
          condition: ${membershipType} == 'trial'
          then:
            - if:
                condition: ${tenure} == 'annual'
                then:
                  - log: Verifying Trial Annual Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        notPresent:
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.annual.price.title
                else:
                  - log: Verifying Trial Monthly Tenure Details
                  - verifyIdentifier: 
                        timeout: 3000
                        notPresent: 
                          - identifier: us.mappings.wplus.managemembership.plusups.title
                          - identifier: us.mappings.wplus.managemembership.manageplusups.cta
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.title
                          - identifier: us.mappings.wplus.managemembership.plusups.planoverview.planname.trial.monthly.price.title

  #Upgrade membership to annual
  - name: us.functions.wplus.manageMembership.upgradeToAnnual
    platform: ios
    flow:
      # Click the upgrade to annual button
      - click:
          wait: 2000
          identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
      - click:
          identifier: us.mappings.wplus.annualTenurePlan
      - log: 'Annual Plan selected'
      - scroll:
          direction: down
      - click:
          identifier: us.mappings.wplus.changePlanButton
  
  #Upgrade membership to annual
  - name: us.functions.wplus.manageMembership.upgradeToAnnual
    platform: android
    flow:
      # Click the upgrade to annual button
      - click:
          wait: 2000
          identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
      - click:
          identifier: us.mappings.wplus.annualTenurePlan
      - log: 'Annual Plan selected'
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.changePlan.agreeCheckbox
      - scroll:
          direction: down
      - click:
          identifier: us.mappings.wplus.changePlan.agreeCheckbox
      - click:
          identifier: us.mappings.wplus.changePlanButton
  
  #Upgrade membership to annual
  - name: us.functions.wplus.manageMembership.upgradeToAnnual
    platform: android
    flow:
      # Click the upgrade to annual button
      - click:
          wait: 2000
          identifier: us.mappings.wplus.managemembership.nbacard.upgradetoannual.cta
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.annualTenurePlan
          then:
            - click:
                identifier: us.mappings.wplus.annualTenurePlan
      - log: 'Annual Plan selected'
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.changePlan.agreeCheckbox
      - scroll:
          direction: down
      - click:
          identifier: us.mappings.wplus.changePlan.agreeCheckbox
      - click:
          identifier: us.mappings.wplus.changePlanButton
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.wplus.WelcomeBottomSheetClose