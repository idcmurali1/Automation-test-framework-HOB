functions:

#************************************************* iOS ******************************************************
 # Wplus
  - name: us.functions.wplus.handle.bottomOverlay
    platform: ios
    flow:
      - if:
          identifier:
            present: 
              - identifier: us.mappings.home.gotItButton
          then:
            - click:
                wait: 5000
                # identifier: us.mappings.home.gotItButton
                #temp fix to dismiss beta message overlay as tapping Got it does not work.
                coordinates: 195,215
          else:
            - log: "overlay not displayed"

  - name: us.functions.wplus.handle.viewFullScreen
    platform: android
    flow:
      - if:
          identifier:
            present: 
              - identifier: us.mappings.inhome.viewFullScreen.Btn
              - identifier: us.mappings.inhome.viewFullScreen.Title
          then:
            - click:
                wait: 5000
                # identifier: us.mappings.home.gotItButton
                #temp fix to dismiss beta message overlay as tapping Got it does not work.
                identifier: us.mappings.inhome.viewFullScreen.Btn
          else:
            - log: "View full screen overlay is not displayed"

  # Utility to validate display/non display of waive Off details related to Wplus/other fees in review order page based on checkout total and type of fulfilment items in review order page
  # [mandatory] ${basketType} - fcOnly/scOnly/both [Indicates what type of items are available during checkout to make appropriate validations]
  # [optional] ${storeOrderType} - pickup/delivery/none [Default 'none'] [If store item is available in checkout basket, is it store pickup or store delivery]
  - name: us.functions.wplus.reviewOrder.chargeWaiveOffValidation
    platform: ios
    flow:
      # Pre-requisite to set the cart display properly
      # Section to identify what type of items are in the cart
      - if:
          condition: ${basketType} == null
          then:
            - log: Fetching details about type of items in checkout
            # TODO
      - if:
          condition: ${storeOrderType} == null
          then:
            - log: Fetching details if store order type is 'Pickup' or 'Delivery from store'
            # TODO
            - storeIn:
                key: storeOrderType
                value: none
      - if:
          condition: ${minFeeWaived} == null
          then:
            - storeIn:
                key: minFeeWaived
                value: notWaived
      # End of pre-requisite section

      # Section to get subtotal of the cart using js function
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.reviewOrder.subTotalEffectiveAmount
            - name: attribute
              string: label
            - name: delimeter
              string: '$'

      - log: Checkout total - ${amountValue}
      - log: Checkout basket type - ${basketType}

      - if:
          condition: ${amountValue} > 35.00
          then:
            # If cart subtotal is > 35$
            - log: (Amount > 35-00) For Wplus user, waiveOff text should not be displayed
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.wplus.reviewOrder.pos.noOrderMinimumCharges.leftLabel
                  - identifier: us.mappings.reviewOrder.thresholdText
            
      - if:
          condition: ${amountValue} < 35.00
          then:
            - if:
                condition: ${basketType} == 'fcOnly'
                then:
                  - log: (Amount < 35-00)(FC item only) For Wplus user, waiveOff text should be displayed
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.wplus.reviewOrder.pos.noOrderMinimumCharges.leftLabel
                      notPresent:
                        - identifier: us.mappings.reviewOrder.thresholdText
                else:
                  - log: (Amount < 35-00)(With SC pickup/delivery item) For Wplus user, waiveOff text should be/not be displayed
                  - if:
                      condition: ${minFeeWaived} == 'waived'
                      then:
                        - verifyIdentifier:
                            present:
                              - identifier: us.mappings.wplus.reviewOrder.pos.noOrderMinimumCharges.leftLabel
                              - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.rightLabel
                            notPresent:
                              - identifier: us.mappings.reviewOrder.thresholdText
                      else:
                        - verifyIdentifier:
                            notPresent:
                              - identifier: us.mappings.wplus.reviewOrder.pos.noOrderMinimumCharges.leftLabel
                            present:
                              - identifier: us.mappings.reviewOrder.thresholdText
      - if:
          condition: ${storeOrderType} == 'delivery'
          then:
            - log: (Amount > or < 35-00)(With SC delivery item) For Wplus user, delivery waiveOff text should be displayed
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.leftLabel
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.rightLabel
          else:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.leftLabel
      - storeIn:
          key: minFeeWaived
          value: 'null'
      - storeIn:
          key: storeOrderType
          value: 'null'

  # Wplus
  - name: us.functions.wplus.navigateToWalmartPlus
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.seeTimes
      - click:
          identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.account.walmartplus 

  - name: us.functions.wplus.navigateToWalmartPlus
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - sleep:
          duration: 2000
      - scroll:
          direction: down
          scrollLimit: 1
      - click:
          identifier: us.mappings.wplus.walmartBenefitsButton

  # Wplus
  - name: us.functions.wplus.navigateHomeToSignIn
    platform: ios
    flow:
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.home.seeTimes
      - click:
          identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.account.signInButton

  
  # Redeem Gift Card
  - name: us.functions.wplus.redeemGiftCard
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - if:
          identifier:
            present:
              - identifier: us.mappings.accounts.wallet.redeemGiftCardLink
          then:
            - click:
                identifier: us.mappings.accounts.wallet.redeemGiftCardLink    
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.accounts.wallet.redeemGifttitle
          else:
            - log: "Redeem Membership Gift Card button not visible"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cashbackJoinwplusBtn 
            - click:
                identifier: us.mappings.wplus.cashbackJoinwplusBtn    
            - sleep:
                duration: 3000
            - verifyIdentifier:
                present:
                  - identifier: us.mapppings.wplus.SelectPlanViewController.titleLabel

  - name: us.functions.wplus.account.navigateToWalmartPlus
    platform: ios
    flow:
      - sleep:
          duration: 2000
      
      #Using Deeplink URL to access new mmp redesign expo
      - executeFunction:
          name: us.functions.wplus.newMmpRedesign.expo.deeplink
      
      - executeFunction:
          name: us.functions.home.close.bottomSheet.inHomestartTrial.cta
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.account.wplusModuleHeader
          then:
              - scroll:
                  direction: down
                  untilIdentifier: us.mappings.wplus.account.wplusModuleHeader
            
              - verifyIdentifier:
                  present:
                    - identifier: us.mappings.wplus.account.wplusModuleHeader

              - click:
                  identifier: us.mappings.wplus.account.wplusModuleHeader

              - if:
                  identifier:
                    present:
                    - identifier: us.mappings.wplus.openWalmartPlusPage
                  then:
                    - click:
                        identifier: us.mappings.wplus.openWalmartPlusPage
                        doubleClick: true
              - sleep:
                  duration: 5000 

              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.wplus.RafPopupScreen
                  then:
                    - click:
                        identifier: us.mappings.wlus.membershipBottomsheetClose
              - if:
                  condition: ${membership} == 'nonMember'
                  then:
                    - if:
                        identifier:
                          notPresent:
                            - identifier: us.mappings.wplus.addPaypal.claimOffers
                        then:
                          - scroll:
                              direction: down
                              untilIdentifier: us.mappings.wplus.wplusSection
                          - click:
                              identifier: us.mappings.wplus.wplusSection
          else:
              - verifyIdentifier:
                  timeout: 20000
                  present:
                    - identifier: us.mappings.account.yourOrdersButton #${APP_PACKAGE:com.walmart.android.debug}:id/purchase_history_header
              - scroll:
                  direction: up
                  scrollLimit: 2
              # don't delete this scroll up    
              - scroll:
                  direction: down
                  untilIdentifier: us.mappings.account.subscriptionsAndPlans
                  position: center
                  
              - verifyIdentifier:
                  present:
                    - identifier: us.mappings.account.subscriptionsAndPlans

              - click:
                  identifier: us.mappings.account.subscriptionsAndPlans 

              - verifyIdentifier:
                  present:
                    - identifier: us.mappings.account.walmartplus

              - click:
                  identifier: us.mappings.account.walmartplus

      # Uncomment line no 214- 236 ,if Subscription and Plans are availbe in Account Section

  
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.wplus.account.wplusModuleHeader
          
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.account.wplusModuleHeader

      # - click:
      #     identifier: us.mappings.wplus.account.wplusModuleHeader
      # - if:
      #     identifier:
      #      present:
      #        - identifier: us.mappings.wplus.openWalmartPlusPage
      #     then:
      #       - click:
      #           identifier: us.mappings.wplus.openWalmartPlusPage
      #           doubleClick: true
      # - sleep:
      #     duration: 5000 

      # - if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.wplus.RafPopupScreen
      #     then:
      #       - click:
      #           identifier: us.mappings.wlus.membershipBottomsheetClose

  - name: us.functions.wplus.startFreeTrailMembership.verifyCard
    platform: ios
    flow:

      - executeFunction:
          name: us.functions.wplus.nonMemberClaimOffers
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.signup.tryWPlusforFreeButton
            #- identifier: us.mappings.wplus.mlp.walmartplusLogo    Content on mlp keep on changing so commenting out this validation
     # - scroll:
     #     untilIdentifier: us.mappings.wplus.MLP screen.viewAllMemberBenefitsLink  #us.mappings.wplus.MLPscreen.exploreWalmartPlusOffersLabel
     #     direction: down
     #     position: center   
     # - verifyIdentifier:
     #     present:
     #       - identifier: us.mappings.wplus.MLP screen.viewAllMemberBenefitsLink   

      

  - name: us.functions.wplus.startFree30daysTrailMembershipRx
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.signup.trywalmartplusforFree
            - identifier: us.mappings.wplus.mlp.walmartplusLogo

      - click:
          identifier: us.mappings.wplus.signup.trywalmartplusforFree

      - click:
          identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
          wait: 8000
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.switchToOriginalApp.startShopping
          then:
            - click:
                identifier: us.mappings.wlus.switchToOriginalApp.startShopping
      - click:      
          identifier: us.mappings.wlus.membershipBottomsheetClose
      - if:
          identifier:
            present:
              - identifier: us.mappings.return.odp.returnDetails.okayButton
          then:
            - click:
                identifier: us.mappings.return.odp.returnDetails.okayButton   

  
  - name: us.functions.wplus.startFree30daysTrailMembership
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.signup.trywalmartplusforFree
            - identifier: us.mappings.wplus.mlp.walmartplusLogo
      - click:
          identifier: us.mappings.wplus.rxForLess.startPaidMembership
          wait: 10000
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.rxForLess.unlockRxForLessText
            - identifier: us.mappings.wplus.annualTenurePlan 
#            - identifier: us.mappings.wplus.monthlyTenurePlan (only annual tenure is display in that page no mnthly plan are displaying)
            - identifier: us.mappings.paymentMethod.addPayment.overlay.title
            - identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
      - verifyIdentifier: 
          timeout: 10000
          present: 
            - identifier: us.mappings.wplus.annualTenurePlan
      - if: 
          condition: ${tenure} == 'annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected' 

      - verifyIdentifier:
          present:
            - identifier: us.mappings.paymentMethod.addPayment.overlay.title

      - click:
          identifier: us.mappings.paymentMethod.addPayment.overlay.title
          wait: 8000

      # - click:
      #     identifier: us.mappings.paymentMethod.addPayment.overlay.addCardButton
      #     wait: 8000
      - executeFunction:
          name: us.functions.account.paymentMethod.addCardDetailsAndAddress
          params:
            - name: firstName
              string: us.data.flow005.payment.firstName
            - name: lastName
              string: us.data.flow005.payment.lastName
            - name: number
              string: us.data.flow005.payment.creditCard
            - name: expiration
              string: us.data.flow005.payment.expiration
            - name: cvv
              string: us.data.flow005.payment.cvv
            - name: streetAddress
              string: us.data.flow005.streetAddress
            - name: city
              string: us.data.flow005.city
            - name: state
              string: us.data.flow005.state
            - name: zipcode
              string: us.data.flow005.zipcode
            - name: phoneNumber
              string: us.data.flow005.phoneNumber

      - click:
          identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
          wait: 8000
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.switchToOriginalApp.startShopping
          then:
            - click:
                identifier: us.mappings.wlus.switchToOriginalApp.startShopping
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.rxForLess.trialToPaidBottomSheet.walmartPlusLogoBlueLogo
            - identifier: us.mappings.wplus.membershipBottomsheetTitle
            - identifier: us.mappings.wplus.walmartPlusFreeBenefitUntil
            - identifier: us.mappings.wplus.startUsingwplusBenefitsButton
            - identifier: us.mappings.wplus.walmartPlusEnableNotificationsToggle 
            - identifier: us.mappings.wplus.walmartPlusMemberShipNotificationBannerMainLabel
            - identifier: us.mappings.wplus.walmartPlusMemberShipNotificationBannerSecondaryLabel
            - identifier: us.mappings.wlus.membershipBottomsheetClose
      - click:
          # identifier: us.mappings.wplus.signup.closeButton        
          identifier: us.mappings.wlus.membershipBottomsheetClose

# new functions added on 15th April 2021
  # wPlus member reserving a scheduled delivery slot
  - name: us.functions.wplus.reserveSlot.scheduledDelivery.bookSlot
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reserveSlot.title
      - click:
          wait: 5000
          identifier: us.mappings.reserveSlot.scheduledDelivery.tab
      - verifyIdentifier:
          notPresent:
            - identifier: mapping.reserveSlot.unScheduledPickup.pickupAnytimeAfterBanner
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.firstLogo
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.walmartPlusEnrolledDateLabel
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.walmartPlusDivider
      - if:
          identifier:
            present:
              - identifier: us.mappings.reserveSlot.thirdSlot
          then:
            - log: "todays slot was available"
            - executeFunction:
                name: us.functions.wplus.reserveSlot.reserveThirdSlot
          else:
            - log: "Selecting third slot for third day"
            - click:
                wait: 3000
                identifier: us.mappings.reserveSlot.selectThirdDay #us.mappings.reserveSlot.selectTomorrow
                wait: 3000
            - executeFunction:
                name: us.functions.wplus.reserveSlot.reserveThirdSlot

  - name: us.functions.wplus.reserveSlot.reserveThirdSlot
    platform: ios
    flow:
      - getString:
          identifier: us.mappings.reserveSlot.thirdSlot
          attribute: label
          storeIn: slotTime
      - click:
          wait: 3000
          identifier: us.mappings.reserveSlot.thirdSlot
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.secondLogo
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusBackgroundView
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusContainerView
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusSlotReservationLabel
          # label:
          #   - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusSlotReservationLabel
          #     equals: Members save $816 a year on average!
      - if: 
          identifier: 
            label:
              - identifier: us.mappings.reserveSlot.thirdSlot
                contains: $7.95
          then:
            - storeIn:
                key: actualDeliveryCharges
                value: $7.95
          else:
            - storeIn:
                key: actualDeliveryCharges
                value: $9.95
      - verifyIdentifier:
          label:
            - identifier: us.mappings.reserveSlot.thirdSlot
              contains: was ${actualDeliveryCharges} , is now $0
      - if:
          identifier: 
            label:
              - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.bottomSectionDetails
                contains: ${actualDeliveryCharges}
          then:
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.bottomSectionDetails
                    equals: Walmart+ Way to go! You're about to save ${actualDeliveryCharges}
          else:
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.bottomSectionDetails
                    equals: Walmart+ Members save $816 a year on average!

      - click:
          wait: 3000
          identifier: us.mappings.reserveSlot.saveButton

  # function to verify account page for wplus member
  - name: us.functions.wplus.account.existingMember.verifyCard
    platform: ios
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: mapppings.wplus.account.wPlusImage
            - identifier: mapppings.wplus.account.wPlusMembershipLabel
          label:
            - identifier: mapppings.wplus.account.wPlusMembershipLabel
              contains: Thanks for being a member since


  - name: us.functions.wplus.cart.validateMinFeeWaiveOffForTestStore
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.cart.subTotalEffectiveAmount
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.cart.subTotalEffectiveAmount
            - name: delimeter
              string: '$'
      - if:
          condition: ${amountValue} < 35.00     
          then:             
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.thresholdLabel
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel 

  - name: us.functions.wplus.reviewOrder.validateMinFeeWaiveOffForTestStore
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.reviewOrder.totalLabel
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.reviewOrder.subTotalEffectiveAmount
            - name: attribute
              string: label
            - name: delimeter
              string: '$'

      - if:
          condition: ${amountValue} < 35.00     
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.thresholdLabel
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel 




  - name: us.functions.wplus.changeMembership
    platform: ios
    flow:
      - if:
          identifier: 
            label:
                - identifier: us.mappings.wplus.membership.plan
                  contains: ${membership}
          then:
            - log: "Membership plan is already set to : ${membership}"
          else:
            - scroll:
                direction: up
            - click: 
                identifier: us.mappings.global.changeButton
            - if: 
                condition: ${membership} == 'Annual plan'
                then:
                  - click: 
                      identifier: us.mappings.wplus.annualTenurePlan
                  - log: 'Annual Plan selected'
                else:
                  - click: 
                      identifier: us.mappings.wplus.monthlyTenurePlan
                  - log: 'Monthly Plan selected' 
            - if: 
                condition: ${PlusUps} == 'InHome'
                then:
                  - verifyIdentifier:
                      value:
                         - identifier: us.mappings.wplus.inhome.manageMembership.chooseplan.annualprice
                           contains:  $138/yr  
            - if: 
                condition: ${validateInhome} == true
                then:    
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.wplus.payment_start_disclaimer
                        - identifier: us.mappings.wplus.paymentDivider
            - scroll:
                direction: down
                untilIdentifier: us.mappings.wplus.changePlan.agreeCheckbox
            - scroll:
                direction: down
            - click:
                identifier: us.mappings.wplus.changePlan.agreeCheckbox                             
            - click: 
                identifier: us.mappings.wplus.changePlanButton
            - if: 
                condition: ${PlusUps} == 'InHome'
                then:
                  - verifyIdentifier:
                      label:
                         - identifier: us.mappings.wplus.inhome.manageMembership.bottomSheettitle
                           contains: You're all set to enjoy your Walmart+ Annual plan!
                         - identifier: us.mappings.wplus.inhome.manageMembership.chooseplan.bottomSheetSavePrice
                           contains: You saved $101 just by upgrading today.
            - click: 
                identifier: us.mappings.wlus.membershipBottomsheetClose
            - click:
                identifier: us.mappings.global.navigateBackArrow 
            - click:
                identifier: us.mappings.wplus.manageMembership.gearIcon  
            - if:
                condition: ${membership} == 'Annual plan'
                then:
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.wplus.membership.plan
                else:
                  - verifyIdentifier:
                      label:
                        - identifier: us.mappings.wplus.membership.plan
                          contains: ${membership}

  # function to verify POS for FC order on cart page having wplus membership and subtotal > $35
  - name: us.functions.wplus.cart.fc.pos.subtotalGreaterThanThirtyFive.verifyCard
    platform: ios
    flow:
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.cart.thresholdText
            - identifier: us.mappings.cart.taxPrice
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
            - identifier: us.mappings.reviewOrder.scDelivery.fee

  # function to verify POS for FC order on review order page having wplus membership and subtotal > $35
  - name: us.functions.wplus.reviewOrder.fc.pos.subtotalGreaterThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          scrollLimit: 1
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.cart.thresholdText
            - identifier: us.mappings.cart.taxPrice
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
            - identifier: us.mappings.reviewOrder.scDelivery.fee

  # function to verify details of FC on order confirmation page having wplus membership and subtotal > $35
  - name: us.functions.wplus.orderConfirmation.fc.subtotalGreaterThanThirtyFive.verifyCard
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.orderConfirmation.navBarTitle
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.orderConfirmation.fcDelivery.cardTitle
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusBackgroundView
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusCardBannerButton
          label:
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              notContains: You saved $
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              equals: Thank you for your order

  # function to verify POS for FC order on order details page having wplus membership and subtotal > $35
  - name: us.functions.wplus.orderDetails.fc.pos.subtotalGreaterThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.barcode

      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText
            - identifier: us.mappings.reviewOrder.scDelivery.fee
              
  # function to verify sc item delivery charges on cart
  - name: us.functions.wplus.cart.scItem.verifyDeliveryCharges
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.cart.chargesLabel
          label:
            - identifier: us.mappings.cart.chargesLabel
              contains: Free delivery with

  # function to verify fc+sc delivery fee and taxes in cart POS having wplus membership and subtotal < $35
  - name: us.functions.wplus.cart.fcAndScDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          scrollLimit: 2

      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.thresholdText
            - identifier: us.mappings.cart.taxPrice
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
          label:
            - identifier: us.mappings.cart.thresholdText
              contains: $5.99
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
              contains: walmart plus, Free delivery from store, shipping was ${actualDeliveryCharges}, is now $0
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
              contains: ${actualDeliveryCharges} $0

  # function to verify fc+sc delivery fee and taxes in review order POS having wplus membership and subtotal < $35
  - name: us.functions.wplus.reviewOrder.fcAndScDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          scrollLimit: 2

      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.thresholdText
            - identifier: us.mappings.cart.taxPrice
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
          label:
            - identifier: us.mappings.cart.thresholdText
              contains: $5.99
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
              contains: walmart plus, Free delivery from store, shipping was ${actualDeliveryCharges}, is now $0
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
              contains: ${actualDeliveryCharges} $0

  - name: us.functions.wplus.nonmember.SplashpageonLogin
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
             - identifier: us.mappings.home.splashPagecloseBtn
          then:
            #- executeFunction:
               #name: us.test.functions.utils.relaunchApp

            #Lauch Multi Splash Page by using deep link
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: walmart://plus/signupoffers?programName=multiBenefitmonthly

            - verifyIdentifier:
                timeout: 50000
                present:
                  - identifier: us.mappings.home.splashpagecheck #us.mappings.splashpageOnLogin.cardDetails
                  - identifier: us.mappings.home.splashPagecloseBtn
                  # - identifier: us.mappings.home.splashPage.MonthlyTenure

          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Wplus Splash Page did not launch"


      - if:
          condition: ${addCreditCard}
          
          then:
          - click:
              identifier: us.mapping.wplus.splashPage.AddCreditCard
              wait: 8000

          - executeFunction:
              name: us.functions.account.paymentMethod.addCardDetailsAndAddress
              params:
                - name: firstName
                  string: us.data.flow005.payment.firstName
                - name: lastName
                  string: us.data.flow005.payment.lastName
                - name: number
                  string: us.data.flow005.payment.creditCard
                - name: expirationMonth
                  string: us.data.flow005.payment.expirationMonth
                - name: expirationYear
                  string: us.data.flow005.payment.expirationYear
                - name: cvv
                  string: us.data.flow005.payment.cvv
                - name: streetAddress
                  string: us.data.flow005.streetAddress
                - name: city
                  string: us.data.flow005.city
                - name: state
                  string: us.data.flow005.state
                - name: zipcode
                  string: us.data.flow005.zipcode
                - name: phoneNumber
                  string: us.data.flow005.phoneNumber

      #Legal Terms Validation and Selecting Check Box
      - executeFunction:
          name: us.functions.wplus.aquisition.legalErrorAlertCheck

      #check and Click Join Walmart+ on Splash Page
      - if:
          identifier:
            present:
             - identifier: us.mappings.home.splashPageJoinWplusBtn
          then:
            - click:
                identifier: us.mappings.home.splashPageJoinWplusBtn

      - if:
          condition: ${phoneVerification}        
          then:
          - executeFunction:
              name: us.functions.wplus.phoneVerificationPage
      - if:
          identifier:
            present:
             - identifier: us.mappings.wlus.membershipBottomsheetClose
          then:
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose


                
    
           

  # function to verify details of fc+sc delivery on order confirmation page having wplus membership and subtotal < $35
  - name: us.functions.wplus.orderConfirmation.fcAndScDelivery.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.orderConfirmation.navBarTitle
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.orderConfirmation.scheduledDelivery.cardTitle
            - identifier: us.mappings.orderConfirmation.fcDelivery.cardTitle
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusBackgroundView
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusCardBannerButton
          label:
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              equals: You saved ${actualDeliveryCharges} as a Walmart+ member!
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              notEquals: Thanks for your order!

  # function to verify POS for fc+sc delivery on order details page having wplus membership and subtotal < $35
  - name: us.functions.wplus.orderDetails.fcAndScDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.barcode

      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
          label:
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText
              contains: $5.99


# function to verify fc delivery fee, minimum order fee and taxes in cart POS having wplus membership and subtotal < $35
  # function to verify fc delivery fee, minimum order fee and taxes in cart POS having wplus membership and subtotal < $35
  - name: us.functions.wplus.cart.fcDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.taxPrice
            - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
            - identifier: us.mappings.cart.thresholdText
          label:
            - identifier: us.mappings.cart.taxPrice
              equals: $5.99 $0
            - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
              equals: walmart plus, Free shipping, no order minimum, shipping was $5.99, is now $0
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
              equals: $5.99 $0

  # function to verify fc delivery fee, minimum order fee and taxes in reviewOrder POS having wplus membership and subtotal < $35
  - name: us.functions.wplus.reviewOrder.fcDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          scrollLimit: 1
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.taxPrice
            - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
            - identifier: us.mappings.cart.thresholdText
          label:
            - identifier: us.mappings.cart.taxPrice
              equals: $5.99 $0
            - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
              equals: walmart plus, Free shipping, no order minimum, shipping was $5.99, is now $0
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
              equals: $5.99 $0

# function to verify details of fc delivery on order confirmation page having wplus membership and subtotal < $35
  - name: us.functions.wplus.orderConfirmation.fcDelivery.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.orderConfirmation.navBarTitle
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.orderConfirmation.fcDelivery.cardTitle
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusBackgroundView
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusCardBannerButton
          label:
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              equals: You saved $5.99 as a Walmart+ member!
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              notEquals: Thanks for your order!

# function to verify POS for fc delivery on order details page having wplus membership and subtotal < $35
  - name: us.functions.wplus.orderDetails.fcDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.barcode
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText

# function to verify sc delivery fee and taxes in cart POS having wplus membership and subtotal < $35
  - name: us.functions.wplus.cart.scDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      
      - if: 
          condition: ${fulfillmentType} == 'delivery'
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
                notPresent:
                  - identifier: us.mappings.reviewOrder.scDelivery.fee
                label:
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
                    contains: Free delivery from store
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
                    contains: $0 
      
      - if: 
          condition: ${fulfillmentType} == 'pickup'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.leftLabel
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.rightLabel
                label:
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.leftLabel
                    contains: Pickup, Free
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.rightLabel
                    contains: Free 

      - if: 
          condition: ${ebtItem}
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.wplus.cart.ebtFoodEligible
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.ebtFoodEligible
                label:
                  - identifier: us.mappings.wplus.cart.ebtFoodEligible
                    contains: EBT food eligible
                # notPresent:
                #   - identifier: us.mappings.cart.thresholdText
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.cart.thresholdText 
                  - identifier: us.mappings.cart.thresholdValue
                  - identifier: us.mappings.cart.taxPriceCart
                label:
                  - identifier: us.mappings.cart.thresholdValue
                    contains: $6.99
                  - identifier: us.mappings.cart.taxPriceCart
                    equals: Calculated at checkout
      # Resetting variable
      - storeIn:
          key: ebtItem
          value: 'null'
            
# function to verify sc delivery fee and taxes in review order POS having wplus membership and subtotal < $35
  - name: us.functions.wplus.reviewOrder.scDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          scrollLimit: 2
      - if: 
          condition: ${fulfillmentType} == 'delivery'
          then:
          - verifyIdentifier:
              present:
                - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
                - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
              notPresent:
                - identifier: us.mappings.reviewOrder.scDelivery.fee
              label:
                - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
                  contains: Free delivery from store
                - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
                  contains: $0
      - if: 
          condition: ${ebtItem}
          then:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.cart.thresholdText
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.cart.thresholdText
                  - identifier: us.mappings.cart.thresholdValue
                  - identifier: us.mappings.reviewOrder.estimatedTaxes
                label:
                  - identifier: us.mappings.cart.thresholdValue
                    contains: $6.99

      # Resetting variable
      - storeIn:
          key: ebtItem
          value: 'null'

  # function to verify sc delivery fee and taxes in review order POS having wplus membership and subtotal > $35
  - name: us.functions.wplus.reviewOrder.scDelivery.pos.subtotalGreaterThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: up
          scrollLimit: 3
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
                scrollLimit: 4
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
          label:
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
              contains: Free delivery from store #equals: walmart plus, Free delivery from store, it was ${actualDeliveryCharges}, is now $0
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
              contains: $0 #equals: ${actualDeliveryCharges} $0

 # function to verify details of sc delivery on order confirmation page having wplus membership and subtotal < $35
  - name: us.functions.wplus.orderConfirmation.scDelivery.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.orderConfirmation.navBarTitle
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.orderConfirmation.scheduledDelivery.cardTitle
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusBackgroundView
           # - identifier: us.mappings.wplus.orderConfirmation.walmartPlusCardBannerButton
          label:
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              contains: as a Walmart+ member!
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              notEquals: Thanks for your order!

 # function to verify POS for sc delivery on order details page having wplus membership and subtotal < $35
  - name: us.functions.wplus.orderDetails.scDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.barcode
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
      - if: 
          condition: ${ebtItem}
          then:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.orderDetails.belowOrderMinFeeTexts
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.belowOrderMinFeeText
                notPresent:
                  - identifier: us.mappings.reviewOrder.scDelivery.fee
                label:
                  - identifier: us.mappings.orderDetails.belowOrderMinFeeText
                    contains: Below order minimum fee
      # Resetting variable
      - storeIn:
          key: ebtItem
          value: 'null'
        

# function to verify POS for sc delivery on order details page having wplus membership and subtotal > $35
  - name: us.functions.wplus.orderDetails.scDelivery.pos.subtotalGreaterThanThirtyFive.verifyCard
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.barcode
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.reviewOrder.scDelivery.fee

  - name: us.functions.wplus.cart.verifyDeliveryFeesWaivedOff
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.cancelledStoreDeliveryFee
            - identifier: us.mappings.cart.zeroDeliveryFeesW+

  - name: us.functions.wplus.reviewOrder.verifyDeliveryFeesWaivedOff
    platform: ios
    flow:
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.cart.zeroDeliveryFeesW+
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.zeroDeliveryFeesW+

  - name: us.functions.wplus.cart.verifyBelowMinimumOrderFeeExists
    platform: ios
    flow:
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.cart.belowOrderMinimumLineItem
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.belowOrderMinimumLineItem
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.zeroDeliveryFeesW+

  - name: us.functions.wplus.cart.verifyBelowMinimumOrderFeeWaived
    platform: ios
    flow:
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.home.feedback.givefeedback.label
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.cart.belowOrderMinimumLineItem

  # Function to Start Free 30 days trial from express signup
  - name: us.functions.wplus.account.expressSignup.startFree30daysTrailMembership
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.trywalmartplus.header
            - identifier: us.mappings.wplus.trywalmartplus.subheader
            - identifier: us.mappings.wplus.express.signup.trywalmartplusforFreeButton
      - click:
          identifier: us.mappings.wplus.express.signup.trywalmartplusforFreeButton
          wait: 5000

  # Function to explore benefits
  - name: us.functions.wplus.account.NavigateToBenefitsFromExpressSignup
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.membershipBottomsheetHeaderBackgroundImage
            # - identifier: us.mappings.wplus.membershipBottomsheetHeaderLogo
            - identifier: us.mappings.wplus.membershipBottomsheetTitle
            - identifier: us.mappings.wplus.membershipBottomsheetSubTitle
            - identifier: us.mappings.wplus.startUsingwplusBenefitsButton
            - identifier: us.mappings.wlus.membershipBottomsheetClose
      - click:
          identifier: us.mappings.wplus.startUsingwplusBenefitsButton
          wait: 5000
      - click:
          identifier: us.mappings.wplus.benefitsTabSelected        

  - name: us.functions.wplus.account.exploreBenefits
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTabSelected
      - scroll:
          direction: down                       
          untilIdentifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton 
      - click:
          identifier: us.mappings.wplus.rxForLess.startPaidMembership
      - sleep:
          duration: 2000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.startWPlusPaidMembership
      - click:
          identifier: us.mappings.wplus.closeButton                                       
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.rxForLess.learnMoreButton
          position: center
      - verifyIdentifier: 
          notPresent: 
            - identifier: us.mappings.wplus.rxForLess.learnMoreButton
      - verifyIdentifier:
          notPresent:            
            - identifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
            - identifier: us.mappings.wplus.benefitsTabFuelFindAStationNearYouButton
      - click:
          identifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
      - sleep:
          duration: 2000    
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabMemberPricesonFuel.onboardingTitle  
      - click:
          identifier: us.mappings.global.navigateBackArrow                           
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
      - click:
          identifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
      - sleep:
          duration: 3000              
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://account/plus/overview
      - if:
          identifier:
            present:
             - identifier: us.mappings.global.authentication.passwordKeyChainAlertDon'tAllowButton
          then:
            - click:
                identifier: us.mappings.global.authentication.passwordKeyChainAlertDon'tAllowButton 
      - if:
          identifier:
            present:
             - identifier: us.mappings.wplus.locationDon'tAllowButton
          then:
            - click:
                identifier: us.mappings.wplus.locationDon'tAllowButton

  - name: us.functions.wplus.account.exploreBenefitsTabFreeDeliveryFromStoreButton
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
      - click:
          identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
      - sleep:
          duration: 2000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStore.addAddressTitle  
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://account/plus/overview

  - name: us.functions.wplus.account.exploreBenefitsTabFreeShipping.startShoppingButton
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
      - click:
          identifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
      - sleep:
          duration: 2000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.home.userNameGreeting

  - name: us.functions.wplus.account.NavigateToBenefitsTab
    platform: ios
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.benefits.title
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.benefits.title 
     # us.mappings.wplus.benefitsTabSelected #Delete this once Hub redesign is enabled 100%
     # - click:
     #     identifier: us.mappings.wplus.benefitsTabSelected
     #     wait: 3000

  - name: us.functions.wplus.account.exploreBenefitsForMemberAccount
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTabSelected
      - click:
          identifier: us.mappings.wplus.benefitsTabSelected
          wait: 3000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton 
            - name: direction
              string: down               
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
            - name: direction
              string: up               
      
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
            - identifier: us.mappings.wplus.benefitsTabFuelFindAStationNearYouButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems

  - name: us.functions.wplus.account.navigateToEarlyAccessBrowseDealsAndVerify
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTabSelected
      - click:
          identifier: us.mappings.wplus.benefitsTabSelected
          wait: 3000
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
          position: center
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
            - identifier: us.mapppings.wplus.earlyaccessScreen.verifybannerMessage
            - identifier: us.mapppings.wplus.earlyaccessScreen.verifyhowItWorksLink
            - identifier: us.mapppings.wplus.earlyaccessScreen.verifyBrowseDealsButton
            #Commenting this step because browse deals is navigating to the Sorry page (Known issue). 
            # Will uncomment when the issue is resolved - Jira - CEWMPLUS-22272
      # - click:
      #     identifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
      #     wait: 3000

  - name: us.functions.wplus.account.us.functions.wplus.account.clickonGotItButton
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.account.clickonGotItButton
      - click:
            identifier: us.mappings.wplus.account.clickonGotItButton

  - name: us.functions.wplus.account.earlyAccessBrowseDealsScreenVerification
    platform: ios
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.earlyaccessScreen.verifybannerMessage
            - identifier: us.mapppings.wplus.earlyaccessScreen.verifyhowItWorksLink
            - identifier: us.mapppings.wplus.earlyaccessScreen.verifyBrowseDealsButton
            # (These steps are carried out after cliking Browse Deals which is directing to sorry page (Known issue)
            # Commenting these steps until the issue is resolved) - Jira - CEWMPLUS-22272
            # - identifier: us.mapppings.wplus.earlyaccessScreen.searchInput
            # - identifier: us.mapppings.wplus.earlyaccessScreen.productListHeader
            # - identifier: us.mapppings.wplus.earlyaccessScreen.productList


  

  # Function to explore savings
  - name: us.functions.wplus.account.exploreSavings
    platform: ios
    flow:
      - log: 'Spotify offer verified'
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.savingsTab
      - click:
          identifier: us.mappings.wplus.savingsTab
          wait: 5000
          #Commenting this as we are not seeing this tiles and seeing Rewards tiles right now. Will check back later to uncomment this.
      # - verifyIdentifier: 
      #     present: 
      #       - identifier: us.mappings.wplus.savingsTabMoneySavedImage
      # - verifyIdentifier: 
      #     present: 
      #       - identifier: us.mappings.wplus.savingsTabHoursSavedImage
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.savingsTabSpotifyGetThisOfferButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.savingsTabSpotifyGetThisOfferButton
          
  - name: us.functions.wplus.account.trailMember.verifyRxForLess
    platform: ios
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabSelected
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.rxForLess.freeTrailText
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.rxForLessText
            - identifier: us.mappings.wplus.rxForLess.freeTrailText
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.learnMoreButton
            - identifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
      - click:
          identifier: us.mappings.wplus.rxForLess.learnMoreButton
      - sleep:
          duration: 6000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.searchPrescriptions
            - identifier: us.mappings.wplus.rxForLess.startPaidMembership
      - executeFunction:
          name: us.functions.global.navigation.backNavigation
      - sleep:
          duration: 6000
      - click:
          identifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
          wait: 120000
      - click:
          identifier: us.mappings.flex.doneButton
      - sleep:
          duration: 6000

  - name: us.functions.wplus.account.convertTrailMemberToPaidMember
    platform: ios  
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.benefits.title
          position: center
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.benefits.title
      - scroll: 
          direction: down
          untilIdentifier: us.mappings.benefits.earlyAccess.tile
          position: center

      - click:
          identifier: us.mappings.benefits.earlyAccess.tile

      - verifyIdentifier:
          present:
            - identifier: us.mappings.benefits.earlyAccess.browseDealsButton 
      - click:
          identifier:  us.mappings.benefits.earlyAccess.learnmoreButton
      - click:
          identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
      
      - verifyIdentifier: 
          timeout: 10000
          present: 
            - identifier: us.mappings.wplus.annualTenurePlan
      - if: 
          condition: ${tenure} == 'annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected'    
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.startYourPaidWplusMembership
      - click:  
          identifier: us.mapppings.wplus.startYourPaidWplusMembership 
          wait: 10000 
         
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.PaidMembership.paidMemberBottomSheetHeader
            - identifier: us.mapppings.wplus.PaidMembership.paidMemberBottomSheetYourInText
            - identifier: us.mapppings.wplus.PaidMembership.bottomSheetYourBrowserDealsLink
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose   

  - name: us.functions.wplus.account.ClickStartPaidMembershipCTA
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mapppings.wplus.gotItInRefferalDialog
          then:
            - click:
                identifier: us.mapppings.wplus.gotItInRefferalDialog
      - sleep:
          duration: 3000                    
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.cashbackJoinwplusBtn
          then:
            - click:
                identifier: us.mappings.wplus.cashbackJoinwplusBtn
      - verifyIdentifier: 
          timeout: 10000
          present: 
            - identifier: us.mappings.wplus.annualTenurePlan
      - if: 
          condition: ${tenure} == 'annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected'    
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.startYourPaidWplusMembership
      - click:  
          identifier: us.mapppings.wplus.startYourPaidWplusMembership 
          wait: 2000 
         
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.PaidMembership.paidMemberBottomSheetHeader
            - identifier: us.mapppings.wplus.PaidMembership.paidMemberWelcomeText
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose 

  - name: us.functions.wplus.account.viewSavingsCardFromBenefits
    platform: ios
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.viewSavingsCard
            - identifier: us.mappings.wplus.rxForLess.searchPrescriptions
      - click:
          identifier: us.mappings.wplus.rxForLess.viewSavingsCard
      - sleep:
          duration: 6000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.digitalSavingsCardTitle
            - identifier: us.mapppings.wplus.rxForLess.howItWorksText
            - identifier: us.mapppings.wplus.rxForLess.searchEligiblePrescriptionsLink
      - executeFunction:
            name: us.functions.global.navigation.backNavigation
      - sleep:
          duration: 6000
      - click:
          identifier: us.mappings.wplus.rxForLess.searchPrescriptions
          wait: 120000
      - click:
          identifier: us.mappings.flex.doneButton
      - sleep:
          duration: 6000
  
  # Function to sign up for Paid Membership (trail to paid membership)
  - name: us.functions.wplus.account.paidMembershipSignup
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.walmartPlusSeeAllBenefits
          wait: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wPlus.nonMemberBannerButton
      - click:
          identifier: us.mappings.wplus.rxForLess.startPaidMembership
          wait: 5000

      - verifyIdentifier:
          present: 
            - identifier: us.mapppings.wplus.SelectPlanViewController.titleLabel
            - identifier: us.mapppings.wplus.TenureLabel
            - identifier: us.mapppings.wplus.TenureDetailLabel
            - identifier: us.mapppings.wplus. Change
            - identifier: us.mapppings.wplus.Terms
  
      - click:
          identifier: us.mapppings.wplus.SelectPlanViewController.startPlanButtonView
          wait: 5000

      - verifyIdentifier:
          present: 
            - identifier: us.mapppings.wplus.TrialToPaidBottomSheetView.titleLabel
            - identifier: us.mapppings.wplus.TrialToPaidBottomSheetView.subtitleLabel
            - identifier: us.mapppings.wplus.TrialToPaidBottomSheetView.exploreBenefitsButton
      - click:
          identifier: us.mapppings.wplus.TrialToPaidBottomSheetView.exploreBenefitsButton


      - verifyIdentifier:
          notPresent: 
             - identifier: TrialToPaidBottomSheetView.exploreBenefitsButton 

  # [optional] ${wplusUser} - optIn / optOut [default 'optOut'][optIn: if an user needs to optIn to wplus membership / optOut: if an user needs to optOut of wplus membership]
  - name: us.functions.wplus.reserveSlot.optInOrOutWPlusMembership
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optInSection 
          then:
            - log: Wplus Banner Available
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Wplus Banner not Available"
      - if:
          condition: ${wplusUser} == 'optIn'
          then:
            - log: Opting in for wplus membership
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optOutButton 
                then:
                  - click:
                      identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optOutButton
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.cancelReservation
                then:
                  - click:
                      identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.selectNewTime
                  - sleep:
                      duration: 3000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optInSection
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optInSignInButton
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optInSignInButton
            # - try:
            #     flow:
            #       - verifyIdentifier:
            #           present:
            #             - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optOutButton
            #       - log: Opt-out button is displayed for wplus user
            #     catch:
            #       flow:
            #         - failTest:
            #             message: "ENV_FAILURE - ${env} - Opt-out button is not displayed for wplus user"
          else:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optOutButton
                then:
                  - log: Opting out of wplus membership
                  - click:
                      identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optOutButton
            - try:
                flow:
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optInSignInButton
                  - log: Opt-in button is displayed for non wplus user
                catch:
                  flow:
                    - failTest:
                        message: "ENV_FAILURE - ${env} - Opt-in button is not displayed for non wplus user"                

  - name: us.functions.wplus.reserveSlot.validateWPlusDetails
    platform: ios
    flow:
      - log: Validating wplus membership details  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.firstLogo
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.walmartPlusEnrolledDateLabel
              contains: Walmart Plus Member since
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.bottomSectionDetails
            - identifier: us.mappings.reserveSlot.checkoutByToKeepReservationMessage
          label:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.bottomSectionDetails
              contains: Walmart+ Way to go! You're about to save

  # Validating that the minimum order fee is waived off for shipping item with 3 days shipping added to cart
  - name: us.functions.wplus.cart.noMinimumOrderFeeWaived
    platform: ios
    flow:
       - if:
          identifier:
            present:
               - identifier: us.mappings.wplus.freeShippingNoOrderMinimumLabel 
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.freeShippingNoOrderMinimumLabel
                      #Verify wplus free shipping no order minumum text on buyno overlay
          else: 
            # - scroll:
            #     direction: down
            #     untilIdentifier: us.mappings.home.feedback.module.button
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.home.feedback.module.button
                  - name: direction
                    string: down               
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.freeShippingNoOrderMinimumLabel

  # Validating that the minimum order fee is waived off for shipping item with 3 days shipping in review order screen
  - name: us.functions.wplus.reviewOrder.noMinimumOrderFeeWaived
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.home.feedback.givefeedback.button
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.freeShippingNoOrderMinimumLabel

  - name:  us.functions.wplus.savingsTabReactivationScreen.ReturnsFromHome
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.savingsTab
      - sleep:
          duration: 2000 
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string:  us.mappings.saveAndEarnReactivateWalmartPlusNow
            - name: direction
              string: down
            - name: scrollPosition
              string: center               
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.saveAndEarnReactivateWalmartPlusNow
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.saveAndEarnReturnsFromHome
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.saveAndEarnReturnsFromHome

  - name: us.functions.wplus.benfitsReturnFromHomeTile
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.benefitsTabSelected
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.inHome.returnFromHomeTile
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.inHome.returnFromHomeTile
            - identifier: us.mappings.benefitHub.inHome.viewMyOrderButton
            - identifier: us.mappings.benefitHub.inHome.howItWorksButton

  - name: us.functions.wplus.homeScreen.nonMemberBanner
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wPlus.nonMemberBannerButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wPlus.nonMemberBannerButton

  - name: us.functions.wplus.accountTab.yourTrialEndsMsg
    platform: ios
    flow:
      #We need to Scroll down and up because the walmartPlusSeeAllBenefits badge is not showing up instantly.
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.walmartPlusSeeAllBenefits
            - name: direction
              string: down
            - name: scrollPosition
              string: center 

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartPlusTileHeader
            - identifier: us.mappings.wplus.walmartPlusSeeAllBenefits
      - click:
          identifier: us.mappings.wplus.walmartPlusSeeAllBenefits
          wait: 8000

  - name: us.functions.wplus.benefitScreen.benefitScreenDetails
    platform: ios
    flow:
      - if:
          condition: ${membershipType} == 'extendedTrial'
          then:
            - scroll:
                direction: up
                untilIdentifier: us.mappings.benefits.title
                position: center
            - verifyIdentifier:
               timeout: 2000
               present:
                 - identifier: us.mappings.benefits.title
           # Delete this once Hub redesign is enabled 100%
           # - verifyIdentifier: 
           #     present:
                  #- identifier: us.mappings.wplus.benefitsTabSelected
                 # - identifier: us.mappings.wplus.signup.walmartplusLogo
                 # - identifier: us.mappings.wPlus.hiCustomerGreetings
           # - verifyIdentifier:
           #     label:
           #       - identifier: us.mappings.wPlus.benefitsWalmartSubheader
           #         contains: us.data.wplus.benefits.extendTrailmsg
          else:
            - verifyIdentifier:
                present:
                 # - identifier: us.mappings.wplus.benefitsTabSelected   #benefits tab its not present 
                  - identifier: us.mappings.wplus.signup.walmartplusLogo
                  - identifier: us.mappings.wPlus.hiCustomerGreetings
              # - verifyIdentifier:                    #trial message is not shown in wplus benefits page.
              #     label:
              #       - identifier: us.mappings.wPlus.benefitsWalmartSubheader
              #         contains: us.data.wplus.benefits.trailmsg

  - name: us.functions.wplus.benefitScreen.afterMembershipCancelled
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTabSelected
            - identifier: us.mappings.wplus.signup.walmartplusLogo
            - identifier: us.mappings.wPlus.hiCustomerGreetings
            - identifier: us.mappings.wPlus.yourTrialMembershipEnded

  - name: us.functions.wplus.validateWalmartRewardsFromBenefitsHub
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.benefitsTabSelected
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabWalmartRewards
          scrollLimit: 2
      - try:
         flow:
          - verifyIdentifier: 
              present:
                - identifier: us.mappings.wplus.benefitsTabWalmartRewards
                - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel       
         catch:
           flow:
            - log: scrolling up
            - scroll:
                direction: up
                untilIdentifier: us.mappings.wplus.benefitsTabWalmartRewards
                position: center
            - verifyIdentifier: 
                present:
                  - identifier: us.mappings.wplus.benefitsTabWalmartRewards
                  - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel     
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabWalmartRewardsForWalmart
          position: center
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.benefitsTabWalmartRewardsForWalmart
            - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel  

  - name: us.functions.wplus.orderConfirmation.verifyDeliveryFeesWaivedOff
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.cancelledStoreDeliveryFee
            - identifier: us.mappings.cart.zeroDeliveryFeesW+

  #####################################################################

  # -
  #   platform: android
  #   flow:

  #     - sleep:
  #         duration: 5000

  #     - executeFunction:
  #         name: us.functions.utils.scrollIfNotVisible
  #         params:
  #           - name: identifier
  #             string: us.mappings.wplus.WalmartRewardSectionFromHub
  #           - name: direction
  #             string: down
  #           - name: scrollPosition
  #             string: center

  #     - verifyIdentifier:
  #         present:
  #           - identifier: us.mappings.wplus.WalmartRewardSectionFromHub

  #     - click:
  #         identifier: us.mappings.wplus.WalmartRewardSectionFromHub
            
  #     - sleep:
  #         duration: 5000

  #     - verifyIdentifier:
  #         present:
  #           - identifier: us.mappings.wplus.WalmartRewardCenterTitle
  #           - identifier: us.mappings.wplus.WalmartRewardBalance          
  #           - identifier: us.mappings.wplus.WalmartRewardEarning

  - name: us.functions.wplus.validateWalmartRewardsFromBenefitsHub
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.benefitsTab
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.benefitsTabParamountTab
            - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabWalmartRewards
          position: center
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.benefitsTabWalmartRewards
            - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel            
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabWalmartRewardsForWalmart
          position: center
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.benefitsTabWalmartRewardsForWalmart
            - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel
            
 
  - name: us.functions.wplus.itemPage.validateWplusStartFreetrialText
    platform: android
    flow:
      - sleep:
          duration: 6000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.itemPage.wplus.freeDeliveryShippingText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.itemPage.wplus.wplusImage
      - verifyIdentifier:
          present:
            - identifier: us.mappings.itemPage.wplus.freeDeliveryShippingText
      - click:
           identifier: us.mappings.itemPage.wplus.startFreetrialLink


  - name: us.functions.wplus.cart.validateMinFeeWaiveOffForTestStore
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.cart.subTotalEffectiveAmount
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.cart.subTotalEffectiveAmount
            - name: delimeter
              string: '$'
      - if:
          condition: ${amountValue} < 35.00     
          then:             
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.wplusIcon
                  - identifier: us.mappings.wplus.cart.pos.freeshippingText
                  - identifier: us.mappings.wplus.cart.pos.shippingCost   

  - name: us.functions.wplus.reviewOrder.validateMinFeeWaiveOffForTestStore
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.reviewOrder.totalLabel
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.reviewOrder.subTotalEffectiveAmount
            - name: attribute
              string: content-desc
            - name: delimeter
              string: '$'
     
      - if:
          condition: ${amountValue} < 35.00     
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reviewOrder.pos.wplusIcon
                  - identifier: us.mappings.wplus.reviewOrder.pos.freeshippingText 
                  - identifier: us.mappings.wplus.reviewOrder.pos.oldThresholdValue
                  - identifier: us.mappings.wplus.reviewOrder.pos.thresholdValue 


  - name: us.functions.wplus.account.existingMember.verifyCard
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mapppings.wplus.account.wPlusSeeAllBenefitsButton
            - name: direction
              string: down
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.account.wPlusSeeAllBenefitsButton
            - identifier: us.mapppings.wplus.account.wPlusLogo
            - identifier: us.mapppings.wplus.account.wPlusDescription
            - identifier: us.mapppings.wplus.account.wPlusMembershipHeader
          text:
            - identifier: us.mapppings.wplus.account.wPlusSeeAllBenefitsButton
              equals: See all Walmart+ benefits
            - identifier: us.mapppings.wplus.account.wPlusDescription
              contains: Kickstart your savings. Enjoy free shipping, no order min  plus more exclusive benefits!

  - name: us.functions.wplus.account.W+benefitsExpressSignupUserAfterCancellation
    platform: android
    flow:
      - click:
          identifier: us.mappings.global.navigateBackArrow
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.account.wallet.card.layout        
      - verifyIdentifier:
          notPresent:
            - identifier: us.mapppings.wplus.account.wPlusLogo
            - identifier: us.mapppings.wplus.account.wPlusDescription
            - identifier: us.mapppings.wplus.account.wPlusSeeAllBenefitsButton

  - name: us.functions.wplus.cart.fc.pos.subtotalGreaterThanThirtyFive.verifyCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.cart.subTotalItemCount
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.cart.pos.wplusIcon
            - identifier: us.mappings.wplus.cart.pos.freeshippingText
            - identifier: us.mappings.wplus.cart.pos.shippingCost

  - name: us.functions.wplus.reviewOrder.fc.pos.subtotalGreaterThanThirtyFive.verifyCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.subtotalPricelabel
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.reviewOrder.pos.wplusIcon
            - identifier: us.mappings.wplus.reviewOrder.pos.freeshippingText
            - identifier: us.mappings.wplus.reviewOrder.pos.oldThresholdValue
            - identifier: us.mappings.wplus.reviewOrder.pos.thresholdValue

  - name: us.functions.wplus.orderConfirmation.fc.subtotalGreaterThanThirtyFive.verifyCard
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsIcon
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsTitle
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsDescription
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
              contains: Thank you for your order!

      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsTitle
              contains: Save more with Walmart+

      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsDescription
              contains: See all the ways your membership can help you save time and money

  - name: us.functions.wplus.orderDetails.fc.pos.subtotalGreaterThanThirtyFive.verifyCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.barcode

      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText

  - name: us.functions.wplus.reserveSlot.scheduledDelivery.verifyCard
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: us.mappings.reserveSlot.title
      - click:
          wait: 5000
          identifier: us.mappings.reserveSlot.scheduledDelivery.tab
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPopup    
      - if:
          identifier:
            present:
              - identifier: us.mappings.deliveryAddress.addAddress.overlay.addAddressButton
          then:
            - executeFunction:
                name: us.functions.reserveSlot.noAddress.addDeliveryAddress
                params:
                  - name: streetAddress
                    string: ${streetAddress}
                  - name: city
                    string: ${city}
                  - name: state
                    string: ${state}
                  - name: zipcode
                    string: ${zipcode}
                  - name: phoneNumber
                    string: ${phoneNumber}
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.reserveSlot.curbsidePickup.unscheduled.banner
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.firstLogo
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.slotPriceLabel
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.walmartPlusDivider
      - if:
          identifier:
            present:
              - identifier: us.mappings.reserveSlot.thirdSlot
          then:
            - log: "todays slot was available"
            - executeFunction:
                name: us.functions.wplus.reserveSlot.reserveThirdSlot
          else: 
            - click:
                wait: 3000
                identifier: us.mappings.reserveSlot.selectThirdDay
                wait: 3000
            - executeFunction:
                name: us.functions.wplus.reserveSlot.reserveThirdSlot

  - name: us.functions.wplus.reserveSlot.reserveThirdSlot
    platform: android
    flow:
      - getString:
          identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.slotPriceLabel
          attribute: text
          storeIn: slotTime
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reserveSlot.thirdSlot
      - click:
          wait: 3000
          identifier: us.mappings.reserveSlot.thirdSlot
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusContainerView
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusSlotReservationLabel
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.bottomSectionSaveDetails
      - if: 
          identifier: 
            text:
              - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.bottomSectionSaveDetails
                contains: Way to go!
                #Way to go! You're about to save

          then:
            - log: Existing User

          else:
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.bottomSectionSaveDetails
                    equals: Members save $816 a year on average!                
      - if: 
          identifier: 
            text:
              - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.slotPriceLabel
                contains: $7.95
          then:
            - storeIn:
                key: actualDeliveryCharges
                value: $7.95
          else:
            - storeIn:
                key: actualDeliveryCharges
                value: $9.95
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.slotPriceLabel
              contains: $0

              #${actualDeliveryCharges} $0
      - click:
          wait: 3000
          identifier: us.mappings.reserveSlot.saveButton

  # function to verify sc item delivery charges on cart
  - name: us.functions.wplus.cart.scItem.verifyDeliveryCharges
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.cart.expressDeliveryBar.chargesLabel
          text:
            - identifier: us.mappings.cart.expressDeliveryBar.chargesLabel
              contains: Free delivery with

  - name: us.functions.wplus.cart.fcAndScDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
          position: center
      - verifyIdentifier:
          present:
            #- identifier: us.mappings.cart.thresholdText
            - identifier: us.mappings.wplus.cart.pos.wplusIcon
            - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
            - identifier: us.mappings.wplus.cart.pos.shippingCost

  - name: us.functions.wplus.reviewOrder.fcAndScDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.wplusIcon

      - verifyIdentifier:
          present:
            #- identifier: us.mappings.cart.thresholdText
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.wplusIcon
            - identifier: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.oldThresholdValue
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.thresholdValue

          text:
            - identifier: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
              contains: Free delivery from store
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.thresholdValue
              contains: $0

  # function to verify details of fc+sc delivery on order confirmation page having wplus membership and subtotal < $35
  - name: us.functions.wplus.orderConfirmation.fcAndScDelivery.subtotalLessThanThirtyFive.verifyCard
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderConfirmation.navBarTitle
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsIcon
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsTitle
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsDescription
          text:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
              equals: You saved ${actualDeliveryCharges} as a Walmart+ member!
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              notEquals: Thanks for your order!

  - name: us.functions.wplus.account.navigateToWalmartPlus
    platform: android
    flow:
      #Using Deeplink URL to access new mmp redesign expo
      - executeFunction:
          name: us.functions.wplus.newMmpRedesign.expo.deeplink

      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: ${APP_PACKAGE:com.walmart.android.debug}:id/purchase_history_header
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.account.walmartplus
      #     position: center
          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.walmartplus 

      - click:
          identifier: us.mappings.account.walmartplus

      - sleep:
          duration: 5000 

      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.RafPopupScreen
          then:
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose

  # Function to explore savings
  - name: us.functions.wplus.account.exploreSavings
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.savingsTab
      - click:
          identifier: us.mappings.wplus.savingsTab
          wait: 5000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.search.rewards.verifyRewardAddedLabel	
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.savings.WalmartRewardCenterLink
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.savings.viewOfferCTA
      - scroll:
          direction: down
      # - verifyIdentifier: 
      #     present: 
      #       - identifier: us.mappings.wplus.savings.referAFriendCard(Commenting since the RAF is disabled )

  - name: us.functions.wplus.startFreeTrailMembership.verifyCard
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reactivate.clickStartTrial
            - identifier: us.mappings.wplus.signup.walmartplusLogo
      - click:
          identifier: us.mappings.wplus.reactivate.clickStartTrial

  - name: us.functions.wplus.startFree30daysTrailMembership
    platform: android
    flow:
      - sleep:
          duration: 5000
      - scroll:
          direction: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.signup.selectPlan.annual 
            - identifier: us.mappings.wplus.signup.selectPlan.monthly 
            - identifier: us.mappings.wplus.paymentmethod.addCardButton
          #  - identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
      - if: 
          condition: ${tenure} == 'annual'
          then:
            - click: 
                identifier: us.mappings.wplus.signup.selectPlan.annual
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.signup.selectPlan.monthly
            - log: 'Monthly Plan selected'  
      - click:
          identifier: us.mappings.wplus.paymentmethod.addCardButton
          wait: 8000

      - executeFunction:
          name: us.functions.account.paymentMethod.addCardDetails
          params:
            - name: firstName
              string: us.data.flow005.payment.firstName
            - name: lastName
              string: us.data.flow005.payment.lastName
            - name: number
              string: us.data.flow005.payment.creditCard
            - name: expiration
              string: us.data.flow005.payment.expiration
            - name: cvv
              string: us.data.flow005.payment.cvv
            - name: streetAddress
              string: us.data.flow005.streetAddress
            - name: city
              string: us.data.flow005.city
            - name: state
              string: us.data.flow005.state
            - name: zipcode
              string: us.data.flow005.zipcode
            - name: phoneNumber
              string: us.data.flow005.phoneNumber
      - scroll:
          direction: down
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.splashPage.IagreeTermsAndConditionCheckBox
          then:
            - click: 
                identifier: us.mappings.wplus.splashPage.IagreeTermsAndConditionCheckBox 
      # - getString:
      #     identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
      #     attribute: enabled
      #     storeIn: state
      # - log : ${state}
      # - if:
      #     condition: ${state} == false
      #     then:
      #       - click:
      #           identifier: us.mappings.wplus.paymentmethod.addCardButton
      #       - click:
      #           identifier: us.mappings.amend.cc.confirmbutton
      #           wait: 8000
      # - click:
      #     identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
      #     wait: 8000
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.switchToOriginalApp.startShopping
          then:
            - click:
                identifier: us.mappings.wlus.switchToOriginalApp.startShopping
      # - verifyIdentifier:
      #     present:
      # #       - identifier: us.mappings.wplus.extendTrail.title
      # #       - identifier: us.mappings.wplus.extendTrail.subTitle
      # #       - identifier: us.mappings.wplus.signup.closeButton
      # #       - identifier: us.mappings.wlus.extendfreetraildays
      # #       - identifier: us.mappings.wplus.extendTrail.noThanksButton 
      #       - identifier: us.mappings.wplus.membershipBottomsheetTitle
      #       - identifier: us.mappings.wplus.membershipBottomsheetSubTitle
      #       - identifier: us.mappings.wplus.startUsingwplusBenefitsButton
      #       - identifier: us.mappings.wlus.membershipBottomsheetClose
      # - click:
      #     # identifier: us.mappings.wplus.signup.closeButton        
      #     identifier: us.mappings.wlus.membershipBottomsheetClose

      # - if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.wlus.membershipBottomsheetClose
      #     then:
      #       - click:
      #           identifier: us.mappings.wlus.membershipBottomsheetClose

      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.switchToOriginalApp.startShopping
          then:
            - click:
                identifier: us.mappings.wlus.switchToOriginalApp.startShopping

      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.cashbackStart30dayfreetrialBtn
          then:
            - click:
                identifier: us.mappings.wplus.cashbackStart30dayfreetrialBtn   

  - name: us.functions.cart.wplus.pos.fc.subtotalLessthanThirtyFive.verifyCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.cart.pos.wplusIcon

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cart.pos.wplusIcon
            - identifier: us.mappings.wplus.cart.pos.freeshippingText
            - identifier: us.mappings.wplus.cart.pos.shippingCost
          text:
            # - identifier: us.mappings.wplus.cart.pos.freeshippingText
            #   contains: Free shipping, no order minimum #No $35 order minimum fee 
            - identifier: us.mappings.wplus.cart.pos.shippingCost
              contains: $0

      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.cart.thresholdText


  - name: us.functions.reviewOrder.wplus.pos.fc.subtotalLessthanThirtyFive.verifyCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.reviewOrder.pos.wplusIcon

      - verifyIdentifier:
          present:
            #- identifier: us.mappings.cart.thresholdText
            - identifier: us.mappings.wplus.reviewOrder.pos.wplusIcon
            - identifier: us.mappings.wplus.reviewOrder.pos.freeshippingText
            #- identifier: us.mappings.wplus.reviewOrder.pos.oldThresholdValue
            - identifier: us.mappings.wplus.reviewOrder.pos.thresholdValue

          text:
            # - identifier: us.mappings.wplus.reviewOrder.pos.freeshippingText
            #   contains: Free shipping, no order minimum #No $35 order minimum fee
            - identifier: us.mappings.wplus.reviewOrder.pos.thresholdValue
              contains: $0

  # function to verify details of fc+sc delivery on order confirmation page having wplus membership and subtotal < $35
  - name: us.functions.wplus.orderConfirmation.fc.subtotalLessThanThirtyFive.verifyCard
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderConfirmation.navBarTitle
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderConfirmation.navBarTitle
          else:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.orderConfirmation.navBarTitle
      - verifyIdentifier:
          present:
            #- identifier: us.mappings.orderConfirmation.navBarTitle
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.orderConfirmation.fcDelivery.cardTitle
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsIcon
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsTitle
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsDescription
          text:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
              equals: You saved $6.99 as a Walmart+ member!
         #   - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
         #     notEquals: Thanks for your order!


  - name: us.functions.cart.wplus.pos.scDelivery.subtotalLessthanThirtyFive.verifyCard
    platform: android
    flow:
      - if: 
          condition: ${fulfillmentType} == 'delivery'
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
                notPresent:
                  - identifier: us.mappings.reviewOrder.scDelivery.fee
                text:
                  - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
                    contains: Free delivery from store
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
                    contains: $0 

      - if:   
          condition: ${fulfillmentType} == 'pickup'
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.leftLabel
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.leftLabel
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.rightLabel
                text:
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.leftLabel
                    contains: Pickup
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.rightLabel
                    contains: Free 

      - if: 
          condition: ${ebtItem}
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.ebtFoodEligible
                text:
                  - identifier: us.mappings.wplus.cart.ebtFoodEligible
                    contains: EBT SNAP eligible
                notPresent:
                  - identifier: us.mappings.cart.thresholdText
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.cart.belowMinFee
                  - identifier: us.mappings.cart.taxPrice
                text:
                  - identifier: us.mappings.cart.belowMinFee
                    contains: $6.99
                  - identifier: us.mappings.cart.taxesValue
                    equals: Calculated at checkout
      # Resetting variable
      - storeIn:
          key: ebtItem
          value: 'null'


  - name: us.functions.wplus.reviewOrder.scDelivery.pos.subtotalLessThanThirtyFive.verifyCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.wplusIcon

      - if: 
          condition: ${fulfillmentType} == 'delivery'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.rightLabel
                notPresent:
                  - identifier: us.mappings.reviewOrder.scDelivery.fee
                text:
                  - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
                    contains: Free delivery from store
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.rightLabel
                    contains: $0 

      - if:   
          condition: ${fulfillmentType} == 'pickup'
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.leftLabel
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.leftLabel
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.rightLabel
                text:
                  - identifier: us.mappings.wplus.cart.pos.pickupFromStoreChargesFree.leftLabel
                    contains: Pickup
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.rightLabel
                    contains: Free 


      - if: 
          condition: ${ebtItem}
          then:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.cart.thresholdText
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.checkout.belowMinFee
                  - identifier: us.mappings.reviewOrder.checkoutTaxesValue
                text:
                  - identifier: us.mappings.checkout.belowMinFee
                    contains: $6.99

      # Resetting variable
      - storeIn:
          key: ebtItem
          value: 'null'

  - name: us.functions.wplus.account.exploreBenefits
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTabSelected
      - scroll:
          direction: down                       
          untilIdentifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton    
      - click:
          identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton 
      - sleep:
          duration: 2000
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://account/plus/overview   
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed                                                                      
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.rxForLess.learnMoreButton
          position: center
      - verifyIdentifier: 
          notPresent: 
            - identifier: us.mappings.wplus.rxForLess.learnMoreButton
      - verifyIdentifier:
          notPresent:            
            - identifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
            - identifier: us.mappings.wplus.benefitsTabFuelFindAStationNearYouButton
      - click:
          identifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
      - sleep:
          duration: 2000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabMemberPricesonFuel.onboardingTitle
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://account/plus/overview            
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
      - click:
          identifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
      - sleep:
          duration: 2000
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://account/plus/overview   

  - name: us.functions.wplus.account.exploreBenefitsTabFreeDeliveryFromStoreButton
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
      - click:
          identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
      - sleep:
          duration: 2000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStore.addAddressTitle 
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://account/plus/overview

  - name: us.functions.wplus.account.exploreBenefitsTabFreeShipping.startShoppingButton
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
      - click:
          identifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
      - sleep:
          duration: 2000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.home.signInButton

  - name: us.functions.wplus.account.exploreBenefitsForMemberAccount
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTab
      - click:
          identifier: us.mappings.wplus.benefitsTab
          wait: 3000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeDeliveryFromStoreButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabFuelGetStartedButton
            - identifier: us.mappings.wplus.benefitsTabFuelFindAStationNearYouButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabMobileScanAndGoButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
          position: center
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems

  - name: us.functions.wplus.orderConfirmation.scDelivery.subtotalLessThanThirtyFive.verifyCard
    platform: android
    flow:
      - verifyIdentifier:
          present:
            #- identifier: us.mappings.orderConfirmation.navBarTitle
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsIcon
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsTitle
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsDescription
      - if: 
          identifier: 
            text:
              - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
                contains: as a Walmart+ member!
                #You saved ${actualDeliveryCharges} as a Walmart+ member!
          then:
            - log: Existing User
          else:
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
                    contains: Thanks for your order!

  - name: us.functions.wplus.switchToOriginalAppTileClose
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.switchToOriginalApp.comingSoonTitle
          then:
            # - verifyIdentifier:
            #     present:
            #       - identifier: us.mappings.wlus.switchToOriginalApp.startShopping
            #       - identifier: us.mappings.wlus.switchToOriginalApp.switchOriginalButton
            #       - identifier: us.mappings.wlus.switchToOriginalApp.closeIcon
            - click: 
                identifier: us.mappings.wlus.switchToOriginalApp.closeIcon
                wait: 20000
            - log: switch to original app dismissed     
          else:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.wlus.switchToOriginalApp.comingSoonTitle

  - name: us.functions.wplus.clickCloseButton
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.closeButton
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.closeButton
            - click:
                identifier: us.mappings.wplus.closeButton
            - sleep:
                duration: 3000
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.backButton
            - click:
                identifier: us.mappings.backButton
            - sleep:
                duration: 3000

  - name: us.functions.wplus.waitBeforeAddingItemToCart
    platform: android
    flow:
      - sleep:
          duration: 3000

  - name: us.functions.wplus.waitBeforeAddingItemToCart
    platform: ios
    flow:
      - sleep:
          duration: 3000

  - name: us.functions.wplus.cart.verifyDeliveryFeesWaivedOff
    platform: android
    flow:
      - executeFunction:
          name: us.functions.cart.scrollToTopOfCart
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.cancelledStoreDeliveryFee
      - scroll:
           direction: down
           untilIdentifier: us.mappings.cart.zeroDeliveryFeesW+ 
      - verifyIdentifier: 
          present:                 
            - identifier: us.mappings.cart.zeroDeliveryFeesW+

  - name: us.functions.wplus.reviewOrder.verifyDeliveryFeesWaivedOff
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.cart.zeroDeliveryFeesW+
          position: center

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.oldThresholdValue
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.thresholdValue
            #- identifier: us.mappings.cart.zeroDeliveryFeesW+

      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.thresholdValue
              contains: $0

  - name: us.functions.wplus.account.trailMember.verifyRxForLess
    platform: android
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.benefitsTabSelected
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.rxForLess.freeTrailText
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.rxForLessText
            - identifier: us.mappings.wplus.rxForLess.freeTrailText
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.learnMoreButton
            - identifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
      - click:
          identifier: us.mappings.wplus.rxForLess.learnMoreButton
      - sleep:
          duration: 6000
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
            - identifier: us.mapppings.wplus.rxForLess.startPaidMembershipButton
      - goBack: true
      - sleep:
          duration: 60000
      - click:
          identifier: us.mappings.wplus.benefitsTab
          wait: 5000
      - click:
          identifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
      - verifyIdentifier: 
          notPresent: 
            - identifier: us.mappings.wplus.rxForLess.searchPrescriptionsButton
      - goBack: true

  - name: us.functions.wplus.reserveSlot.scheduledDelivery.verifycardWalmartPlus
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPopup
      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: us.mappings.reserveSlot.title
      - click:
          wait: 5000
          identifier: us.mappings.reserveSlot.scheduledDelivery.tab

      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPopup
      - if:
          identifier:
            present:
              - identifier: us.mappings.deliveryAddress.addAddress.overlay.addAddressButton
          then:
            - executeFunction:
                name: us.functions.reserveSlot.noAddress.addDeliveryAddress
                params:
                  - name: streetAddress
                    string: ${streetAddress}
                  - name: city
                    string: ${city}
                  - name: state
                    string: ${state}
                  - name: zipcode
                    string: ${zipcode}
                  - name: phoneNumber
                    string: ${phoneNumber}
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.reserveSlot.curbsidePickup.unscheduled.banner
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.firstLogo
                 
      - if: 
          identifier:
            present:
              - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.noThanksButton 
          then:       
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.noThanksButton
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.tryWalmartPlusButton 
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.tryWalmartPlusButton     

          else: 
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.tryWalmartPlusButton 
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.tryWalmartPlusButton
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.noThanksButton    
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.noThanksButton 
                wait: 3000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.tryWalmartPlusButton 
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.tryWalmartPlusButton 
            - executeFunction:
                name: us.functions.utils.handleTechnicalErrorPopup           
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reserveSlot.thirdSlot 
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPopup       
      - executeFunction:
          name: us.functions.wplus.reserveSlot.reserveThirdSlotWalmartPlus 
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPopup           
                                    
                

      # - if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.reserveSlot.thirdSlot
      #     then:
      #       - log: "todays slot was available"
      #       - executeFunction:
      #           name: us.functions.wplus.reserveSlot.reserveThirdSlotWalmartPlus
      #     else: 
      #       - click:
      #           wait: 3000
      #           identifier: us.mappings.reserveSlot.selectThirdDay
      #           wait: 3000
      #       - executeFunction:
      #           name: us.functions.wplus.reserveSlot.reserveThirdSlotWalmartPlus 
      #       - executeFunction:
      #           name: us.functions.utils.handleTechnicalErrorPopup           
            

  - name:  us.functions.wplus.savingsTabReactivationScreen.ReturnsFromHome
    platform: android
    flow:
      - click:
          identifier: us.mapppings.wplus.account.wPlusSavingsTab
      - sleep:
          duration: 10000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.savings.reactivateMembershipButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center                   
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.savings.reactivateMembershipButton
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.savings.returnsFromHome
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.savings.returnsFromHome
         
  - name: us.functions.wplus.benfitsReturnFromHomeTile
    platform: android
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.benefitHub.inHome.returnFromHomeTile
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.benefitHub.inHome.returnFromHomeTile
            - scroll:
                direction: down
                untilIdentifier: us.mappings.benefitHub.inHome.viewMyOrderButton
            - identifier: us.mappings.benefitHub.inHome.howItWorksButton
            
  - name: us.functions.wplus.reviewOrder.verifyWalmartPlusPlans
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.reviewOrder.walmartPlusMonthlyPlan
            - name: direction
              string: down
            - name: scrollPosition
              string: center   
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.reviewOrder.walmartPlusAnnualPlan
            - identifier: us.mappings.reviewOrder.walmartPlusMonthlyPlan
            - identifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan
      - click:
          identifier: us.mappings.reviewOrder.walmartPlusAnnualPlan

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
            - name: direction
              string: down

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.wplusIcon
            - identifier: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.oldThresholdValue
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.thresholdValue 
           
      - scroll:
          direction: up
          untilIdentifier: us.mappings.reviewOrder.walmartPlusMonthlyPlan 

      - click:
          identifier: us.mappings.reviewOrder.walmartPlusMonthlyPlan 

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
            - name: direction
              string: down

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.wplusIcon
            - identifier: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.oldThresholdValue
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.thresholdValue   

      - scroll:
          direction: up
          untilIdentifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan

      - click:
          identifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.reviewOrder.scDelivery.fee
            - name: direction
              string: down
        
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.scDelivery.fee
            - identifier: us.mappings.reviewOrder.scDelivery.feeValue

      - scroll:
          direction: up
          untilIdentifier: us.mappings.reviewOrder.walmartPlusAnnualPlan
      - click:
          identifier: us.mappings.reviewOrder.walmartPlusAnnualPlan

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
            - name: direction
              string: down

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.wplusIcon
            - identifier: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.oldThresholdValue
            - identifier: us.mappings.wplus.reviewOrder.mixedOrder.pos.thresholdValue        

  - name: us.functions.wplus.reserveSlot.reserveThirdSlotWalmartPlus
    platform: android
    flow:
      - getString:
          identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.slotPriceLabel
          attribute: text
          storeIn: slotTime
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reserveSlot.thirdSlot
      - click:
          wait: 3000
          identifier: us.mappings.reserveSlot.thirdSlot
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusContainerView
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusSlotReservationLabel
                      
      - if: 
          identifier: 
            text:
              - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.slotPriceLabel
                contains: $7.95
          then:
            - storeIn:
                key: actualDeliveryCharges
                value: $7.95
          else:
            - storeIn:
                key: actualDeliveryCharges
                value: $9.95
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.slotPriceLabel
              contains: $0

              #${actualDeliveryCharges} $0
      - click:
          wait: 3000
          identifier: us.mappings.reserveSlot.saveButton
      - goBack: true

  - name: us.functions.wplus.benefitScreen.benefitScreenDetails
    platform: android
    flow:
      - if:
          condition: ${membershipType} == 'extendedTrial'
          then:
            - scroll:
                direction: up
                untilIdentifier: us.mappings.benefits.title
                position: center
            - verifyIdentifier:
               timeout: 2000
               present:
                - identifier: us.mappings.benefits.title
            #       - identifier: us.mappings.wplus.benefitsTabSelected
            #       - identifier: us.mappings.wplus.signup.walmartplusLogo
            #       - identifier: us.mappings.wPlus.hiCustomerGreetings
            # - verifyIdentifier:
            #     label:
            #       - identifier: us.mappings.wPlus.benefitsWalmartSubheader
            #         contains: us.data.wplus.benefits.extendTrailmsg
          else:
              - scroll:
                  direction: up
                  untilIdentifier: us.mappings.benefits.title
                  position: center
              - verifyIdentifier:
                 timeout: 2000
                 present:
                  - identifier: us.mappings.benefits.title
            # - verifyIdentifier:
            #     present:
            #       - identifier: us.mappings.wplus.benefitsTabSelected
            #       - identifier: us.mappings.wplus.signup.walmartplusLogo
            #       - identifier: us.mappings.wPlus.hiCustomerGreetings
            # - verifyIdentifier:
            #     label:
            #       - identifier: us.mappings.wPlus.benefitsWalmartSubheader
            #         contains: us.data.wplus.benefits.trailmsg

  - name: us.functions.wplus.accountTab.yourTrialEndsMsg
    platform: android
    flow:
      - sleep:
          duration: 3000 
      - executeFunction:
          name: us.functions.wplus.phoneVerificationPage
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose
          wait: 5000
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wPlus.account.seeAllYourWplusBenefitsButton #us.mapppings.wplus.account.wPlusSeeAllBenefitsButton
          position: center

      - verifyIdentifier:
          present:
           # - identifier: us.mappings.wPlus.account.wPlusYourTrialEndsin30days  this going to A/B test.
           # - identifier: us.mappings.wPlus.account.wPlusWelcomeMsgLogoTap
           # - identifier: us.mappings.wPlus.account.wPlusWelcomeMsgDesc
            - identifier: us.mappings.wPlus.account.seeAllYourWplusBenefitsButton
         # text:
         #   - identifier: us.mappings.wPlus.account.wPlusYourTrialEndsin30days  this going to A/B test.
         #     contains: Your W+ trial ends in 30 days  this going to A/B test.

      - click:
          identifier: us.mappings.wPlus.account.seeAllYourWplusBenefitsButton
          wait: 8000

  - name: us.functions.wplus.homeScreen.nonMemberBanner
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wPlus.nonMemberBannerModule
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cashbackJoinwplusBtn
           # - identifier: us.mappings.wPlus.nonMemberBannerButton
           # - identifier: us.mappings.wPlus.nonMemberBannerText

  - name: us.functions.wplus.homeToAccount.navigateToWalmartPlus
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - sleep:
         duration: 2000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.walmartPlus.chevvronLink
            - name: direction
              string: down         
            
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.account.walmartPlus.chevvronLink

      - click:
          identifier: us.mappings.account.walmartPlus.chevvronLink
      - if: 
          identifier:
            present:
              - identifier: us.mappings.wplus.signup.claimOffersNowCTA
          then:
              - click: 
                  identifier: us.mappings.wplus.signup.claimOffersNowCTA           

  - name: us.functions.wplus.homeToAccount.navigateToWalmartPlus
    platform: ios
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.wplusSection
          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.wplusSection
      - click:
          identifier: us.mappings.wplus.wplusSection

  - name: us.functions.wplus.account.membership.bottomsheet.message.container
    platform: android
    flow:
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose 
      - click:
          identifier: us.mappings.global.closeButton

  # Function to sign up for Paid Membership (trail to paid membership)
  - name: us.functions.account.wplus.paidMembership
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.benefitsTab
          wait: 3000

      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
          wait: 5000          

      - click:
          identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton          

      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.rxForLess.unlockRxForLessText
            - identifier: us.mappings.wplus.tenure_name
            - identifier: us.mappings.wplus.tenure_description
            - identifier: us.mappings.wplus.payment_method_description
            - identifier: us.mappings.wplus.payment_start_disclaimer
            - identifier: us.mappings.wplus.ChangeVISA_ending_in_0005
            - identifier: us.mappings.wplus.sign_up_terms

      - click:
          identifier: us.mappings.wplus.membership_sign_up_button
          wait: 3000

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.id/membership_bottomsheet_title
            - identifier: us.mappings.wplus.membership_bottomsheet_subtitle
            - identifier: us.mappings.wplus.membership_bottom_sheet_primary_button
      - sleep:
           duration: 5000

      - executeFunction:
          name: us.functions.search.closeHowDoYouWantYourOrderBottomTray

      - click:
          identifier: us.mappings.wplus.membership_bottom_sheet_primary_button
          wait: 10000

      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.membership_bottom_sheet_primary_button

      

  - name: us.functions.wplus.cart.verifyBelowMinimumOrderFeeExists
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.cart.thresholdText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.thresholdText
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.cart.zeroDeliveryFeesW+
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.zeroDeliveryFeesW+

  - name: us.functions.wplus.cart.verifyBelowMinimumOrderFeeWaived
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.home.feedback.givefeedback.label
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.cart.thresholdText

  # [optional] ${wplusUser} - optIn / optOut [default 'optOut'][optIn: if an user needs to optIn to wplus membership / optOut: if an user needs to optOut of wplus membership]
  - name: us.functions.wplus.reserveSlot.optInOrOutWPlusMembership
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.nonMemberWplusBanner.tryWplus 
          then:
            - log: Wplus Banner Available
          else:            
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.wplus.nonMemberWplusBanner.tryWplus
                  - name: direction
                    string: up             
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.nonMemberWplusBanner.tryWplus 
                then:
                  - log: Wplus Banner Available
                else:   
                  - failTest:
                      message: "ENV_FAILURE - ${env} - Wplus Banner not Available"
      - if:
          condition: ${wplusUser} == 'optIn'
          then:
            - log: Opting in for wplus membership
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusOptOut
                then:
                  - click:
                      identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusOptOut

            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusOptIn
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusOptIn
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusOptOut
          else:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusOptOut
                then:
                  - log: Opting out of wplus membership
                  - click:
                      identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusOptOut
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusOptIn

  - name: us.functions.wplus.reserveSlot.validateWPlusDetails
    platform: android
    flow:
      - log: Validating wplus membership details  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.firstLogo
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.membershipDuration
              contains: Member since
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusSlotReservationLabel
          text:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.wPlusSlotReservationLabel
              contains: Way to go! Youre about to save

  - name: us.functions.wplus.navigateToManageMembershipFromBenefitsPage
    platform: android
    flow:
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.manageMembership.gearIcon
      - click:
          identifier: us.mappings.wplus.manageMembership.gearIcon
      - sleep:
          duration: 5000

  - name: us.functions.wplus.navigateToBenefitsFromMembershipPage
    platform: android
    flow:
      - sleep:
          duration: 2000
      - executeFunction:
          name: us.functions.global.navigation.backNavigation
      - if:
          identifier:
            present: 
              - identifier: us.mappings.wlus.membershipBottomsheetClose
          then:
            - click: 
                identifier: us.mappings.wlus.membershipBottomsheetClose
      - if:
          identifier:
            present: 
              - identifier: us.mappings.wPlus.benifitsTabHeader
          then:
            - click: 
                identifier: us.mappings.wPlus.benifitsTabHeader   

  - name: us.functions.wplus.navigateToBenefitsTabFromHubPage
    platform: android
    flow:
      # - sleep:
      #     duration: 3000
      # - click:
      #     identifier: us.mappings.wPlus.benifitsTabHeader
      - scroll:
          direction: up
          untilIdentifier: us.mappings.benefits.title
          
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.benefits.title      

  - name: us.functions.wplus.navigateToBenefitsTabFromHubPage
    platform: ios
    flow:
      - sleep:
          duration: 3000
      # Delete this code once hub redesign is  enabled 100% 
      # #- if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.wPlus.benifitsTabHeader
      #     then:
      #       - click:
      #           identifier: us.mappings.wPlus.benifitsTabHeader
      #     else:
      # #- executeFunction:
      #       name: us.functions.utils.scrollIfNotVisible
      #       params:
      #         - name: identifier
      #           string: us.mappings.wPlus.newBenifitsTabHeader
      #         - name: direction
      #           string: up
      - scroll:
          direction: up
          untilIdentifier: us.mappings.benefits.title
          position: center
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.benefits.title

  - name: us.functions.wplus.changeMembership
    platform: android
    flow:
      - if:
          identifier: 
            text:
                - identifier: us.mappings.wplus.membership.plan
                  contains: ${membership}
          then:
            - log: "Membership plan is already set to : ${membership}"
          else:
            - scroll:
                direction: up
                untilIdentifier: us.mappings.global.changeButton
            - click: 
                identifier: us.mappings.global.changeButton
            - if: 
                condition: ${membership} == 'Annual plan'
                then:
                  - click: 
                      identifier: us.mappings.wplus.annualTenurePlan
                  - log: 'Annual Plan selected'
                else:
                  - click: 
                      identifier: us.mappings.wplus.monthlyTenurePlan
                  - log: 'Monthly Plan selected'         
            - click: 
                identifier: us.mappings.wplus.changePlanButton
            - click: 
                identifier: us.mappings.wlus.membershipBottomsheetClose
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.wplus.membership.plan
                    contains: ${membership}

  - name: us.functions.wplus.membership.verifyAnnualTenure
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.membership.annualRenewalDate
              contains: ${year}

  - name: us.functions.wplus.membership.verifyChargeDetails
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.membership.chargeAmount
              contains: ${amount}
  
  - name: us.functions.wplus.membership.verifyPaymentDetails
    platform: android
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: us.mappings.wplus.membership.paymentMethodText
            - identifier: us.mappings.wplus.membership.ccDetails
            - identifier: us.mappings.wplus.membership.paymentEditButton

  - name: us.functions.wplus.membership.verifyFaqDetails
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.membership.faqButton
      - click: 
          identifier: us.mappings.wplus.membership.faqButton

      - verifyIdentifier: 
          timeout: 40000
          present: 
            - identifier: us.mappings.wplus.membership.faqText
      - goBack: true  

  - name: us.functions.wplus.membership.verifyTermsAndConditions
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.membership.termsAndConditionButton
      - click: 
          identifier: us.mappings.wplus.membership.termsAndConditionButton
      - verifyIdentifier: 
          timeout: 40000
          present: 
            - identifier: us.mappings.wplus.membership.termsAndConditionText
      - goBack: true  

  
  - name: us.functions.wplus.verifyMembershipDetails
    platform: android
    flow:
      - executeFunction:
          name: us.functions.wplus.membership.verifyAnnualTenure
      - executeFunction:
          name: us.functions.wplus.membership.verifyChargeDetails
      - executeFunction:
          name: us.functions.wplus.membership.verifyPaymentDetails

  - name: us.functions.wplus.verifytrialmemberDetails
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.trialmember.plan
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.trialmember.trialDays
      - executeFunction:
          name: us.functions.wplus.membership.verifyChargeDetails
      - executeFunction:
          name: us.functions.wplus.membership.verifyPaymentDetails
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.trialmember.cancelfreetrial
     
      
          
  # Remove it after select the plan on splash in all of the related flows
  - name: us.functions.wplus.reviewOrder.selectAnnualAndVerifyPOS
    platform: ios
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.reviewOrder.fulfillmentTopSection.fulfillmentTypeText 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.fulfillmentTopSection.fulfillmentTypeText       
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.reviewOrder.wplus.selectBestValueAnnualOption

      - verifyIdentifier:
          present:
            - identifier: us.mapppings.reviewOrder.wplus.selectBestValueAnnualOption

      - click:
          identifier: us.mapppings.reviewOrder.wplus.selectBestValueAnnualOption

      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel

  # Remove it after select the plan on splash in all of the related flows
  - name: us.functions.wplus.reviewOrder.selectMonthlyAndVerifyPOS
    platform: ios
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.reviewOrder.fulfillmentTopSection.fulfillmentTypeText 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.fulfillmentTopSection.fulfillmentTypeText      
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.reviewOrder.wplus.selectBestValueMonthlyOption

      - verifyIdentifier:
          present:
            - identifier: us.mapppings.reviewOrder.wplus.selectBestValueMonthlyOption

      - click:
          identifier: us.mapppings.reviewOrder.wplus.selectBestValueMonthlyOption
      
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel

  # Remove it after select the plan on splash in all of the related flows
  - name: us.functions.wlus.reviewOrder.selectNotInterestedAndVerifyPOS
    platform: ios
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.reviewOrder.fulfillmentTopSection.fulfillmentTypeText 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.fulfillmentTopSection.fulfillmentTypeText      
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.reviewOrder.wplus.selectIAmNotInterestedOption

      - verifyIdentifier:
          present:
            - identifier: us.mapppings.reviewOrder.wplus.selectIAmNotInterestedOption

      - click:
          identifier: us.mapppings.reviewOrder.wplus.selectIAmNotInterestedOption
      
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.placeOrderButton

      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
  
  # Remove it after select the plan on splash in all of the related flows
  - name: us.functions.wlus.reviewOrder.selectNotInterestedAndVerifyPOS
    platform: android
    flow:
      - executeFunction:
          name: us.functions.checkout.reviewOrder.scrollToTopOfReviewOrder
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan

      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan

      - click:
          identifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan
      - sleep:
          duration: 10000

  - name: us.functions.wplus.reviewOrder.verifySplashpage
    platform: ios
    flow:
      - if:
          identifier:
           notPresent:
            - identifier: us.mappings.reviewOrder.splash.walmartPlusAnnualPlan
          then:
            - executeFunction:
                  name:  us.functions.wplus.revieworder.clickStartFreetrial

  - name: us.functions.wplus.reviewOrder.verifySplashpage
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.tryWalmartPlusButton
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.reviewOrder.tryWalmartPlusButton

            - click:
                identifier: us.mappings.reviewOrder.tryWalmartPlusButton
           
       

  - name: us.functions.wplus.reviewOrder.splash.verifyWalmartPlusPlans
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.splash.walmartPlusAnnualPlan
            - identifier: us.mappings.reviewOrder.splash.walmartPlusMonthlyPlan
      - if:
          condition: ${tenure} == 'Monthly'
          then:
            - executeFunction:
                name: us.functions.wplus.reviewOrder.splash.selectMonthlyPlan
      - if:
          condition: ${tenure} == 'Annual'
          then:
            - executeFunction:
                name: us.functions.wplus.reviewOrder.splash.selectAnnualPlan

      #Click on Confirm Btn 
      - click:
          identifier: us.mappings.reviewOrder.splash.confirmBtn

      #If Exist then Selcet the Checkbox   
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.splash.walmartPlusAgreeTermsCheckBox
          then:
            - click:
                identifier: us.mappings.reviewOrder.splash.walmartPlusAgreeTermsCheckBox

            - click:
                identifier: us.mappings.reviewOrder.splash.confirmBtn

      - sleep:
         duration: 5000

  # Select monthy plan
  - name: us.functions.wplus.reviewOrder.splash.selectMonthlyPlan
    platform: ios
    flow:
      - click:
          identifier: us.mappings.reviewOrder.splash.walmartPlusMonthlyPlan
          wait: 1000

  # Select annual plan
  - name: us.functions.wplus.reviewOrder.splash.selectAnnualPlan
    platform: ios
    flow:
      - click:
          identifier: us.mappings.reviewOrder.splash.walmartPlusAnnualPlan
          wait: 1000

  # Click confirm walmart+ button
  - name: us.functions.wplus.reviewOrder.splash.clickConfirmBtn
    platform: ios
    flow:
      - click:
          identifier: us.mappings.reviewOrder.splash.confirmBtn



  # Validating that the minimum order fee is waived off for shipping item with 3 days shipping added to cart
  - name: us.functions.wplus.cart.noMinimumOrderFeeWaived
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.freeShippingNoOrderMinimumLabel
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.freeShippingNoOrderMinimumLabel

  # Validating that the minimum order fee is waived off for shipping item with 3 days shipping in review order screen
  - name: us.functions.wplus.reviewOrder.noMinimumOrderFeeWaived
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.home.feedback.givefeedback.button
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.freeShippingNoOrderMinimumLabel

  - name: us.functions.wplus.itemPage.validateWplusFreeShippingTextPresent
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
            name: us.functions.utils.scrollIfNotVisible
            params:
              - name: identifier
                string: us.mappings.wplus.freeShippingDiscountText
              - name: direction
                string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.freeShippingDiscountText
    

  - name: us.functions.wplus.itemPage.validateWplusFreeShippingTextPresent
    platform: android
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.freeShippingDiscountText
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.freeShippingDiscountText

  # - name: us.functions.wplus.itemPage.validateWplusFreeShippingTextPresent
  #   platform: ios
  #   flow:
  #     - sleep:
  #         duration: 3000
  #     - scroll:
  #         direction: down
  #         untilIdentifier: us.mappings.itemPage.wplus.addToListOption
  #     - verifyIdentifier:
  #         present:
  #           - identifier: us.mappings.wplus.freeShippingDiscountText

  # - name: us.functions.wplus.homePage.verifyGICOnHomePage
  #   platform: ios
  #   flow:
  #     - sleep:
  #         duration: 10000
  #     - verifyIdentifier:
  #         present:
  #           - identifier: us.mappings.wplus.gicBannerImage
  #           - identifier: us.mappings.wplus.gicBannerHeader
  #           - identifier: us.mappings.wplus.gicBannerPostalCod
  #           - identifier: us.mappings.wplus.gicBannerChevron

  # - name: us.functions.wplus.homePage.verifyIntentEducationalMessages
  #   platform: ios
  #   flow:
  #     - sleep:
  #         duration: 3000
  #     - if:
  #         identifier:
  #           present:
  #             - identifier: us.mappings.wplus.globalIntentShipping
  #         then:
  #           - click:
  #               identifier: us.mappings.wplus.globalIntentShipping
  #           - verifyIdentifier:
  #               present:
  #                 - identifier: us.mappings.wplus.shippinIntentEducationalMessage
  #         else:
  #           - click:
  #               identifier: us.mappings.wplus.gicBannerChevron
  #           - click:
  #               identifier: us.mappings.wplus.globalIntentShipping
  #           - verifyIdentifier:
  #               present:
  #                 - identifier: us.mappings.wplus.shippinIntentEducationalMessage
  #           - sleep:
  #               duration: 3000
  #           - click:
  #               identifier: us.mappings.wplus.globalIntentPickup
  #           - verifyIdentifier:
  #               present:
  #                 - identifier: us.mappings.wplus.pickupIntentEducationalMessage
  #           - sleep:
  #               duration: 3000
  #           - click:
  #               identifier: us.mappings.wplus.globaIntentDelivery
  #           - verifyIdentifier:
  #               present:
  #                 - identifier: us.mappings.wplus.globalDeliveryIntentEducationalMessage
   # Redeem Gift Card
  - name: us.functions.wplus.redeemGiftCard
    platform: android
    flow:
      - sleep:
          duration: 3000
      - if:
          identifier:
            present:
              - identifier: us.mappings.accounts.wallet.redeemGiftCardLink
          then:
            - click:
                identifier: us.mappings.accounts.wallet.redeemGiftCardLink    
            - verifyIdentifier:
                timeout: 5000
                present:
                  - identifier: us.mappings.accounts.wallet.redeemGifttitle
          else:
            - log: "Redeem Membership Gift Card button not visible"
            - verifyIdentifier:
                present:
                  - identifier: us.mapppings.wplus.home.start30DaysFreeTrail.button
            - click:
                identifier: us.mapppings.wplus.home.start30DaysFreeTrail.button    
            - verifyIdentifier:
                present:
                  - identifier: us.mapppings.wplus.rxForLess.unlockRxForLessText

  # - name: us.functions.wplus.homePage.verifyGICOnHomePage
  #   platform: android
  #   flow:
  #     - sleep:
  #         duration: 10000
  #     - verifyIdentifier:
  #         present:
  #           - identifier: us.mappings.wplus.gicBannerImage
  #           - identifier: us.mappings.wplus.gicBannerHeader
  #           - identifier: us.mappings.wplus.gicBannerPostalCod
  #           - identifier: us.mappings.wplus.gicBannerChevron

  # - name: us.functions.wplus.homePage.verifyIntentEducationalMessages
  #   platform: android
  #   flow:
  #     - sleep:
  #         duration: 3000
  #     - if:
  #         identifier:
  #           present:
  #             - identifier: us.mappings.wplus.globalIntentShipping
  #         then:
  #           - click:
  #               identifier: us.mappings.wplus.globalIntentShipping
  #           - verifyIdentifier:
  #               present:
  #                 - identifier: us.mappings.wplus.shippinIntentEducationalMessage
  #         else:
  #           - click:
  #               identifier: us.mappings.wplus.gicBannerChevron
  #           - click:
  #               identifier: us.mappings.wplus.globalIntentShipping
  #           - verifyIdentifier:
  #               present:
  #                 - identifier: us.mappings.wplus.shippinIntentEducationalMessage
  #           - sleep:
  #               duration: 3000
  #           - click:
  #               identifier: us.mappings.wplus.globalIntentPickup
  #           - verifyIdentifier:
  #               present:
  #                 - identifier: us.mappings.wplus.pickupIntentEducationalMessage
  #           - sleep:
  #               duration: 3000
  #           - click:
  #               identifier: us.mappings.wplus.globaIntentDelivery
  #           - verifyIdentifier:
  #               present:
  #                 - identifier: us.mappings.wplus.globalDeliveryIntentEducationalMessage
  #           - click:
  #               identifier: us.mappings.wplus.gicBannerChevron

  # - name: us.functions.wplus.verifySwitchingOfIntentsInGICAffectsCartIntent
  #   platform: ios
  #   flow:
  #     - sleep:
  #         duration: 3000
  #     - executeFunction:
  #         name: us.functions.search.searchItem
  #         params:
  #           - name: searchTerm
  #             string: horizon organic milk
  #     - executeFunction:
  #         name: us.functions.search.clickOnFirstItem
  #     - executeFunction:
  #         name: us.functions.search.addItemtoCart
  #     - executeFunction:
  #         name: us.functions.global.navigation.toCartFromNavBar
  #     - getString:
  #         identifier: us.mappings.cart.scheduledDelivery.cardTitle
  #         storeIn: intentType
  #     - sleep:
  #         duration: 3000
  #     - if:
  #         condition: ${intentType} == "Pickup or delivery from store" | ${intentType} == "Delivery from store"
  #         then:
  #           - click:
  #               identifier: us.mappings.global.navigation.backNavigation
  #           - click:
  #               identifier: us.mappings.wplus.globalIntentShipping
  #           - click:
  #               identifier: us.mappings.wplus.gicBannerChevron
  #           - executeFunction:
  #               name: us.functions.global.navigation.toCartFromNavBar
  #           - getString:
  #               identifier: us.mappings.cart.scheduledDelivery.cardTitle
  #               storeIn: intentType2
  #           - if:
  #               condition: ${intentType2} == "Shipping to"
  #               then:
  #                 - log: Fulfilment type changed based on selected global intent
  #               else:
  #                 - log: Fulfilment type didn't change based on the selected global intent
  #         else:
  #           - if:
  #               condition: ${intentType} == "Shipping to"
  #               then:
  #                 - click:
  #                     identifier: us.mappings.global.navigation.backNavigation
  #                 - click:
  #                     identifier: us.mappings.wplus.globaIntentDelivery
  #                 - click:
  #                     identifier: us.mappings.wplus.gicBannerChevron
  #                 - executeFunction:
  #                     name: us.functions.global.navigation.toCartFromNavBar
  #                 - getString:
  #                     identifier: us.mappings.cart.scheduledDelivery.cardTitle
  #                     storeIn: intentType2
  #                 - if:
  #                     condition: ${intentType2} == "Pickup or delivery from store" | ${intentType2} == "Delivery from store"
  #                     then:
  #                       - log: Fulfilment type changed based on selected global intent
  #                     else:
  #                       - log: Fulfilment type didn't change based on the selected global intent
  #               else:
  #                 - if:
  #                     condition: ${intentType} == "Pickup at Milpitas Supercenter"
  #                     then:
  #                       - click:
  #                           identifier: us.mappings.global.navigation.backNavigation
  #                       - click:
  #                           identifier: us.mappings.wplus.globalIntentShipping
  #                       - click:
  #                           identifier: us.mappings.wplus.gicBannerChevron
  #                       - executeFunction:
  #                           name: us.functions.global.navigation.toCartFromNavBar
  #                       - getString:
  #                           identifier: us.mappings.cart.scheduledDelivery.cardTitle
  #                           storeIn: intentType2
  #                       - if:
  #                           condition: ${intentType2} == "Shipping to"
  #                           then:
  #                             - log: Fulfilment type changed based on selected global intent
  #                           else:
  #                             - log: Fulfilment type didn't change based on the selected global intent

  # - name: us.functions.wplus.verifySwitchingOfIntentsInGICAffectsCartIntent
  #   platform: android
  #   flow:
  #     - sleep:
  #         duration: 3000
  #     - executeFunction:
  #         name: us.functions.search.searchItem
  #         params:
  #           - name: searchTerm
  #             string: horizon organic milk
  #     - executeFunction:
  #         name: us.functions.search.clickOnFirstItem
  #     - executeFunction:
  #         name: us.functions.search.addItemtoCart
  #     - executeFunction:
  #         name: us.functions.global.navigation.toCartFromNavBar
  #     - getString:
  #         identifier: us.mappings.cart.scheduledDelivery.cardTitle
  #         storeIn: intentType
  #     - sleep:
  #         duration: 3000
  #     - if:
  #         condition: ${intentType} == "Pickup or delivery from store" | ${intentType} == "Delivery from store"
  #         then:
  #           - click:
  #               identifier: us.mappings.global.navigation.backNavigation
  #           - click:
  #               identifier: us.mappings.wplus.globalIntentShipping
  #           - click:
  #               identifier: us.mappings.wplus.gicBannerChevron
  #           - executeFunction:
  #               name: us.functions.global.navigation.toCartFromNavBar
  #           - getString:
  #               identifier: us.mappings.cart.scheduledDelivery.cardTitle
  #               storeIn: intentType2
  #           - if:
  #               condition: ${intentType2} == "Shipping to"
  #               then:
  #                 - log: Fulfilment type changed based on selected global intent
  #               else:
  #                 - log: Fulfilment type didn't change based on the selected global intent
  #         else:
  #           - if:
  #               condition: ${intentType} == "Shipping to"
  #               then:
  #                 - click:
  #                     identifier: us.mappings.global.navigation.backNavigation
  #                 - click:
  #                     identifier: us.mappings.wplus.globaIntentDelivery
  #                 - click:
  #                     identifier: us.mappings.wplus.gicBannerChevron
  #                 - executeFunction:
  #                     name: us.functions.global.navigation.toCartFromNavBar
  #                 - getString:
  #                     identifier: us.mappings.cart.scheduledDelivery.cardTitle
  #                     storeIn: intentType2
  #                 - if:
  #                     condition: ${intentType2} == "Pickup or delivery from store" | ${intentType2} == "Delivery from store"
  #                     then:
  #                       - log: Fulfilment type changed based on selected global intent
  #                     else:
  #                       - log: Fulfilment type didn't change based on the selected global intent
  #               else:
  #                 - if:
  #                     condition: ${intentType} == "Pickup at Milpitas Supercenter"
  #                     then:
  #                       - click:
  #                           identifier: us.mappings.global.navigation.backNavigation
  #                       - click:
  #                           identifier: us.mappings.wplus.globalIntentShipping
  #                       - click:
  #                           identifier: us.mappings.wplus.gicBannerChevron
  #                       - executeFunction:
  #                           name: us.functions.global.navigation.toCartFromNavBar
  #                       - getString:
  #                           identifier: us.mappings.cart.scheduledDelivery.cardTitle
  #                           storeIn: intentType2
  #                       - if:
  #                           condition: ${intentType2} == "Shipping to"
  #                           then:
  #                             - log: Fulfilment type changed based on selected global intent
  #                           else:
  #                             - log: Fulfilment type didn't change based on the selected global intent

  - name: us.functions.wplus.navigateToBenefitsFromMembershipPage
    platform: ios
    flow:
      - click:
          identifier: us.mappings.global.navigateBackArrow
      - if:
          identifier:
            present: 
              - identifier: us.mappings.wlus.membershipBottomsheetClose
          then:
            - click: 
                identifier: us.mappings.wlus.membershipBottomsheetClose
      - click:
          identifier: us.mappings.wplus.benefitsTabSelected

  - name: us.functions.wplus.navigateToManageMembershipFromBenefitsPage
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 50000
          present:
            - identifier: us.mappings.wplus.manageMembership.gearIcon
      - click:
          identifier: us.mappings.wplus.manageMembership.gearIcon

  - name: us.functions.wplus.verifyMembershipDetails
    platform: ios
    flow:
      # - executeFunction: on ios there is no expiry mentioned
      #     name: us.functions.wplus.membership.verifyAnnualTenure
      - executeFunction:
          name: us.functions.wplus.membership.verifyChargeDetails
      - executeFunction:
          name: us.functions.wplus.membership.verifyPaymentDetails
      - executeFunction:
          name: us.functions.wplus.membership.verifyFaqDetails
      - executeFunction:
          name: us.functions.wplus.membership.verifyTermsAndConditions

  # Verify reward banner not present
  - name: us.functions.wplus.verifyMemberRewardBannerNotPresent
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.buynow.estTotal.pos.estimatedTotalLabel.string
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - verifyIdentifier:
         notPresent:
           - identifier: us.mappings.wplus.estimatedCashbackBanner

  #TrailMemberCashbackBanner
  - name: us.functions.wplus.TrailMemberRewardBanner
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.estimatedCashbackBanner 
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.estimatedCashbackBanner
            - identifier: us.mappings.cart.wplus.rewardsBanner.amount

  #TrailMemberCashbackBanner
  - name: us.functions.wplus.TrailMemberRewardBanner
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.estimatedCashbackBanner
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.estimatedCashbackBanner
            - identifier: us.mappings.cart.wplus.rewardsBanner 
            - identifier: us.mappings.wplus.orderDetailsRewardCashAmountlnrRewards 
            - identifier: us.mappings.cart.wplus.rewardsBanner.amount

  # Function to check membership status after cancellation on Android
  - name: us.functions.wplus.membership.afterPaidMembershipCancellation
    platform: android
    flow:
      - sleep:
          duration: 6000        
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.manageMemberShip.reactivateMessage
              contains: sorry to see you go!
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mappings.wplus.manageMemberShip.reactivateMembershipButton
      # - click:
      #     wait: 3000
      #     identifier: us.mappings.global.navigateBackArrow


  # Function to check membership status after cancellation on IOS
  - name: us.functions.wplus.membership.afterPaidMembershipCancellation
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - scroll :
          direction: down
          untilIdentifier: us.mappings.wplus.manageMemberShip.reactivateModule
          position: center
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.manageMemberShip.reactivateModule
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mapppings.wplus.reactivateMembership.reactivateWalmartPlusLink
      - executeFunction:
          name: us.functions.wplus.navigateToManageMembershipFromBenefitsPage
      - verifyIdentifier: 
          timeout: 8000
          present: 
            - identifier: us.mappings.wplus.managemembership.walmartplusmodule.title
            - identifier: us.mappings.wplus.managemembership.managewalmartplus.cta
            - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.title
            - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.planname.price.title
            - identifier: us.mappings.wplus.managemembership.walmartplus.planoverview.paid.canceled.title
            - identifier: us.mappings.wplus.managemembership.nbacard.reactivate.cta
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.managemembership.walmartplus.managemodule

  # Function to check reactivate membership CTA on savings tab after cancellation on Android
    
  - name: us.functions.wplus.verifySavingsTabAfterPaidMembershipCancellation
    platform: android
    flow:
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mapppings.wplus.account.wPlusSavingsTab
          then:
            - click:
                identifier: us.mapppings.wplus.account.wPlusSavingsTab
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.savings.reactivateMembershipButton
            - name: direction
              string: down
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mappings.wplus.savings.reactivateMembershipButton

  # Function to check reactivate membership CTA on Rejoin screen after trial member cancellation on Android   
  - name: us.functions.wplus.verifyRejoinTabAfterTrialMemberCancellation
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 5000
          text:
            - identifier: us.mappings.benefits.title
              contains: rejoin for member-only savings
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.wplus.manageMemberShip.reactivateMembershipButton 

  # Function to click the cancel button on feedback page on Android
  - name: us.functions.wplus.completeExtendFreeTrial
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mapppings.wplus.cancelConfirmation.extendFreeTrialLink
      - click:
          identifier: us.mapppings.wplus.cancelConfirmation.extendFreeTrialLink
      - executeFunction:
          name: us.functions.wplus.extendFreeTrialBottomSheet
  
  # Function to verify extend free trial Success bottom sheet details
  - name: us.functions.wplus.extendFreeTrialBottomSheet
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 5000
          text:
            - identifier: us.mappings.wplus.membershipBottomsheetTitle
              contains: Your free trial has been extended 15 days!
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose

  # Extend Trial Membership on Android
  - name: us.functions.wplus.membership.extendFreeTrial
    platform: android
    flow:
      - sleep:
          duration: 5000
      - executeFunction: 
          name: us.functions.wplus.navigateToCancelFreeTrialOrCancelWalmartPlusPageFromMemberShipPage
      - executeFunction: 
          name: us.functions.wplus.completeExtendFreeTrial

  # Close W+Plus benefits on cancel membership confirmation page on IOS
  - name: us.functions.wplus.cancelConfirmation.goBackFromCancelMembershipOrCancelFreeTrialPage
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mapppings.wplus.cancelConfirmationOrCancelMembershipFeedback.continueMembership
      - click:
          identifier: us.mapppings.wplus.cancelConfirmationOrCancelMembershipFeedback.continueMembership


  # Navigate to Cancel Membership or Free trial page from Membership settings page on Android
  - name: us.functions.wplus.navigateToCancelFreeTrialOrCancelWalmartPlusPageFromMemberShipPage
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.membership.cancelFreeTrialOrCancelWalmartPlusLink
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mapppings.wplus.membership.cancelFreeTrialOrCancelWalmartPlusLink
      - click:
          identifier: us.mapppings.wplus.membership.cancelFreeTrialOrCancelWalmartPlusLink

  # Navigate to W+Plus benefits on cancel membership confirmation page on Android
  - name: us.functions.wplus.cancelConfirmation.verifyCancelFreeTrialOrCancelWalmartPlusDetails
    platform: android
    flow:
      - if:
          condition: ${membershipType} == 'extendedTrial'
          then:
            - verifyIdentifier:
                text:
                  - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusHeader
                    contains: Need more time to explore what W+ has to offer?
      - if:
          condition: ${canVerifyBenefits} == 'cancel'
          then:
            - verifyIdentifier:
                text:
                  - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusHeader
                    contains : Need more time to explore what W+ has to offer?
          else:
            - verifyIdentifier:
                text:
                  - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusHeader
                    contains: Sure you want to cancel?
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewParamountImage
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewWalmartRewardsImage
           # - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewFreeDeliveryImage
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewFreeShippingImage
      - if:
          identifier:
            present:
              - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewFreeDeliveryImage
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewFreeDeliveryImage
          else:
            - click:
                identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusScrollscreen
            - scroll:
                direction: down
            - verifyIdentifier:
                present:
                  - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewFreeDeliveryImage

      - click:
          identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusScrollscreen
      - scroll:
          direction: down  
      - verifyIdentifier:
          present:           
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewMemberPricesOnFuelImage
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewEarlyAccessImage
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewMobileScanAndGoImage
          # - identifier: s.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusBenefitsViewLimitedFreeReturnsImage


  # Validate the options present in cancel membership page
  - name: us.functions.wplus.validateCancelMembershipOptions
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelmembershipbutton
            - identifier: us.mapppings.wplus.cancelConfirmationOrcancelMembershipFeedback.RemindmeLaterbtn
            - identifier: us.mapppings.wplus.cancelConfirmationOrcancelMembershipFeedback.ContinuefreetrialLink

  # Function to check reactivate membership CTA on Rejoin screen after trial member cancellation on iOS 
  - name: us.functions.wplus.verifyRejoinTabAfterTrialMemberCancellation
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.wplus.manageMemberShip.reactivateMessage
      - verifyIdentifier:
          present:
            - identifier: us.mappings.churnedExpired.ReactivateWplusButton

  # Verify reward banner not present
  - name: us.functions.wplus.verifyMemberRewardBannerNotPresent
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.item.SubsEstTotal.EstTotal
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - verifyIdentifier:
         notPresent:
           - identifier: us.mappings.wplus.estimatedCashbackBanner

  # Function to check reactivate membership CTA on savings tab after cancellation on IOS
    
  - name: us.functions.wplus.verifyBenefitsPageAfterPaidMembershipCancellation
    platform: ios
    flow:
      #Delete this once Hub redeisgn is enabled 100%
      - if:
         identifier:
           present:
             - identifier: us.mappings.wplus.savingsTab
         then:
           - click:
               identifier: us.mappings.wplus.savingsTab
      
      - sleep:
          duration: 5000
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.churnedExpired.ReactivateWplusButton 
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.churnedExpired.ReactivateWplusButton 
     
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.churnedExpired.ReactivateWplusButton
      # - if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.wplus.mlp.churned.reactivateWPlus
      #     then:
      #         - log: "Reactivate W+ Button is displayed for Churned Member"


  - name: us.functions.wplus.TrailMemberRewardBannerInOPDPageAndVerifyEarnedRewards
    platform: ios
    flow:  
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wPlus.WalmartPlusRewardCardCashBack
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.wPlus.WalmartPlusRewardCardCashBack
          then:
           - failTest:
              message: "ENV_FAILURE - ${env} - Walmart Cash Rewards Banner is not present in ODP"
      - verifyIdentifier:
          present:
            - identifier: us mappings.wplus.WalmartPlusRewardCardCashBackRewards
      - click:
          identifier: us.mappings.orderDetails.rewardCentertext
      - sleep:
          duration: 5000                    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.viewRewardsCenter.viewRewards
            - identifier: us.mappings.savings.wplus.WalmartRewardBalance

  - name: us.functions.wplus.TrailMemberRewardBannerInOPDPageAndVerifyEarnedRewards
    platform: android
    flow:  
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.estimatedCashbackBanner
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.estimatedCashbackBanner
            - identifier: us.mappings.cart.wplus.rewardsBanner 
            - identifier: us.mappings.orderconfirmation.viewRewardsCenter.estimatedRewards  
            - identifier: us.mappings.wplus.orderDetailsRewardCashAmountlnrRewards
            - identifier: us.mappings.orderDetails.wplusCashAmount  
            - identifier: us.mappings.orderconfirmation.viewRewardsCenter
      - click:
          identifier: us.mappings.orderconfirmation.viewRewardsCenter
      - sleep:
          duration: 5000                    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.viewRewardsCenter.viewRewards
            - identifier: us.mappings.wplus.rewardEarnedInRewardCenter
            - identifier: us.mappings.rewardsitemspage.yourrewardsbalance.text

  - name: us.functions.wplus.TrailMemberRewardBannerInOrderConfirmation
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.wplus.TrailMemberRewardBanner
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.rewardCentertext 
            
  - name: us.functions.wplus.TrailMemberRewardBannerInOrderConfirmation
    platform: android
    flow:
      - executeFunction:
          name: us.functions.wplus.TrailMemberRewardBanner
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderconfirmation.viewRewardsCenter

  # Function to check Trail membership status after cancellation on Android
  - name: us.functions.wplus.membership.afterTrialMembershipCancellation
    platform: android
    flow:
      - sleep:
          duration: 5000
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.manageMembership.gearIcon 
      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mapppings.wplus.account.wPlusSavingsTab
      # - click:
      #     identifier: us.mapppings.wplus.account.wPlusSavingsTab
     
      # - verifyIdentifier:
      #     text:
      #       - identifier: us.mapppings.wplus.canceledMembership.reactivateHeader
      #         contains: Ready to start saving again?
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.churnedExpired.reactivateWplusButton
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mappings.wplus.churnedExpired.reactivateWplusButton

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.itempage.freedeliveryfromstorelabel
            - name: direction
              string: down 

  # Function to check Trail membership status after cancellation on iOS
  - name: us.functions.wplus.membership.afterTrialMembershipCancellation
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.manageMembership.gearIcon

      #- if: Delete this once Hub redeisgn is enabled 100%
      #    identifier:
      #      present:
      #        - identifier: us.mappings.wplus.savingsTab
      #    then:
      #      - verifyIdentifier:
      #          present: 
      #            - identifier: us.mappings.wplus.savingsTab
      #      - click:
      #          identifier: us.mappings.wplus.savingsTab
      #    else:
      #      - click:
      #          identifier: us.mappings.global.navigateBackArrow
      #      - verifyIdentifier:
      #          present: 
      #            - identifier: us.mappings.wplus.savingsTab
      #      - click:
      #          identifier: us.mappings.wplus.savingsTab                

      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mapppings.wplus.reactivateMembership.cta
      #     position: center

      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.reactivateMembership.cta

  - name: us.functions.wplus.membership.verifyAnnualTenure
    platform: ios
    flow:
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.membership.annualRenewalDate
              contains: ${year}

  - name: us.functions.wplus.membership.verifyChargeDetails
    platform: ios
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.membership.chargeAmount
              contains: ${amount}

  - name: us.functions.wplus.membership.verifyMemberPlanAndDaysLeft
    platform: ios
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.membership.daysLeft
              contains: ${days} 

  - name: us.functions.wplus.membership.verifyMemberPlanAndDaysLeft
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.membership.daysLeft
              contains: ${days} 

  # Function to review bottom sheet text 
  - name: us.functions.wplus.membership.verifyExtendFreeTrialBottomSheetAndCloseBottomSheet
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.membershipBottomsheetHeaderLogo
            - identifier: us.mappings.wplus.membershipBottomsheetSubTitle
            - identifier: us.mappings.orderConfirmation.ContinueShoppingButton
            - identifier: us.mappings.wlus.membershipBottomsheetClose
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.membershipBottomsheetTitle
              contains: Your free trial has been extended 15 days!
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose
          wait: 5000
  
  # Function to review bottom sheet text 
  - name: us.functions.wplus.membership.verifyExtendFreeTrialBottomSheetAndCloseBottomSheet
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.membershipBottomsheetHeaderLogo
            - identifier: us.mappings.wplus.membershipBottomsheetSubTitle
            - identifier: us.mappings.orderConfirmation.ContinueShoppingButton
            - identifier: us.mappings.wlus.membershipBottomsheetClose
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.membershipBottomsheetTitle
              contains: Your free trial has been extended 15 days!
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose
          wait: 5000

  - name: us.functions.wplus.membership.verifyFaqDetails
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.membership.faqButton
      - click: 
          identifier: us.mappings.wplus.membership.faqButton
      - verifyIdentifier: 
          timeout: 40000
          present: 
            - identifier: us.mappings.wplus.membership.faqText
      - click: 
          identifier: us.mappings.flex.doneButton

  - name: us.functions.wplus.membership.verifyTermsAndConditions
    platform: ios
    flow:
      - click: 
          identifier: us.mappings.wplus.membership.termsAndConditionButton
      - verifyIdentifier: 
          timeout: 40000
          present: 
            - identifier: us.mappings.wplus.membership.termsAndConditionPage
      - click: 
          identifier: us.mappings.flex.doneButton

  - name: us.functions.wplus.membership.verifyPaymentDetails
    platform: ios
    flow:
      - if:
          identifier: 
            label:
              - identifier: us.mappings.wplus.membership.ccDetails
                equals: Please add a debit/credit card
          then:
            - verifyIdentifier: 
                present: 
                  - identifier: us.mappings.wplus.membership.paymentMethodText
                  - identifier: us.mappings.wplus.membership.ccDetails
                notPresent:
                  - identifier: us.mappings.global.editButton
          else:
            - verifyIdentifier: 
                present: 
                  - identifier: us.mappings.wplus.membership.paymentMethodText
                  - identifier: us.mappings.wplus.membership.ccDetails
                  - identifier: us.mappings.global.editButton

  - name: us.functions.wplus.closeItemDetailsScreen
    platform: ios
    flow:
      - try:
          flow:
            - click:
                identifier: us.mappings.item.closeButton
          catch:
            flow:
              - goBack: true

# Verifying the WPlus Banner
  - name: us.functions.wplus.reserveSlot.scheduledDelivery.verifywplusbanner
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: us.mappings.wplus.nonMemberWplusBanner.Wplusbanner

  - name: us.functions.wplus.verifyWPlusHeaderAfterMembershipCancelled
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wPlus.benifitsWalmartUserName
              contains: Hi,

      - if:
          condition: ${tenure} == 'annual'
          then:
             - verifyIdentifier:
                text:
                  - identifier: us.mappings.wPlus.yourTrialEndsin30days
                    contains: Thanks for being a member since
      - if:
          condition: ${tenure} == 'monthly'
          then:
          - try:
              flow:
                - verifyIdentifier:
                   text:
                     - identifier: us.mappings.wPlus.yourTrialEndsin30days
                       contains: Thanks for being a member since
              catch:
               flow:
                - verifyIdentifier:
                   text:
                    - identifier: us.mappings.wPlus.yourTrialEndsin30days
                      contains:  Your membership ends
      # - Keeping this below commented lines of code in case if the revert the changes
      # - if:
      #     condition: ${tenure} == 'annual'
      #     then:
      #       - verifyIdentifier:
      #           text:
      #             - identifier: us.mappings.wPlus.yourTrialEndsin30days
      #               contains: Thanks for being a member since
      #     else:
      #       - verifyIdentifier:
      #           text:
      #             - identifier: us.mappings.wPlus.yourTrialEndsin30days
      #               contains: Your membership

# Click TryWPlus on Wplus Banner
  - name: us.functions.wplus.reserveSlot.scheduledDelivery.WplusSignUp
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: us.mappings.wplus.nonMemberWplusBanner.WplusSignUp
      - click:
          wait: 5000
          identifier: us.mappings.wplus.nonMemberWplusBanner.WplusSignUp

# Click No Thanks on Wplus Banner 
  - name: us.functions.wplus.reserveSlot.scheduledDelivery.WplusNoThanks
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.nonMemberWplusBanner.WplusNoThanks
          then:
            - verifyIdentifier:
                timeout: 20000
                present:
                  - identifier: us.mappings.wplus.nonMemberWplusBanner.WplusNoThanks
            - click:
                wait: 5000
                identifier: us.mappings.wplus.nonMemberWplusBanner.WplusNoThanks  
  
 # Click on a Wplus preferred time 
  - name: us.functions.wplus.reserveSlot.scheduledDelivery.nonMemberWplusPreferredTime
    platform: Android
    flow:
      - scroll:
          direction: down
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.nonMemberWplusBanner.wPlusPreferredTime
          then:
            - log: "todays slot was available"
            - click:
               identifier: us.mappings.wplus.nonMemberWplusBanner.wPlusPreferredTime
          else:
            - log: "tomorrows slots available"
            - click:
                identifier: us.mappings.reserveSlot.selectTomorrow
                wait: 3000
            - scroll:
                direction: down    
            - click:
                identifier: us.mappings.wplus.nonMemberWplusBanner.wPlusPreferredTime
                
  - name: us.functions.wplus.closeItemDetailsScreen
    platform: android
    flow:
      - click:
          identifier: us.mappings.item.closeButton 
          
 # Click TryWPlus on Wplus Banner
  - name: us.functions.wplus.reserveSlot.scheduledDelivery.WplusSignUp
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.SignInButton
          then:
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.SignInButton
            - verifyIdentifier:
                present:
                  - identifier: us.mapppings.reserveslot.noThanksButton
            - verifyIdentifier:
                present:
                  - identifier: us.mapppings.reserveslot.zeroDeliveryCharges      
            - click:
                identifier: us.mapppings.reserveslot.noThanksButton
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.SignInButton         
          else:
            - click:
                identifier: us.mapppings.reserveslot.noThanksButton
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.SignInButton
            - verifyIdentifier:
                present:
                  - identifier: us.mapppings.reserveslot.zeroDeliveryCharges   
            - click:
                identifier: us.mapppings.reserveslot.noThanksButton
            - click:
                identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.SignInButton

  - name: us.functions.reserveSlot.wplus.nonMemberWplusBanner.wPlusPreferredTime
    platform: ios
    flow:  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reserveSlot.wplusPreferredTimeSlot

      - click:
          identifier: us.mappings.reserveSlot.wplusPreferredTimeSlot    

  # W+ cart opt in
  - name: us.functions.wplus.cart.verifyTryWalmartPlusfromCart
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.cart.wantToSkipDeliveryFeeswithW+logo
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - sleep:
          duration: 1000
      - verifyIdentifier:
          label:
            - identifier: us.mappings.cart.wplusOptInBannerHeader
      - click:
          identifier: us.mappings.cart.optInCheckbox
          wait: 2000


  - name: us.functions.wplus.account.inviteFriendsFromSavingsTab
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.savingsTab
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.inviteFriendsTab
      - click:
          identifier: us.mapppings.wplus.inviteFriendsTab
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.walmartPlusRefferalNotAvailable
            - identifier: us.mapppings.wplus.gotItInRefferalDialog
      - click:
          identifier: us.mapppings.wplus.gotItInRefferalDialog
          wait: 3000 

  - name: us.functions.wplus.account.referFriendFromSavingsTab
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.savingsTab
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.inviteFriendsTab
      - click:
          identifier: us.mapppings.wplus.inviteFriendsTab
          wait: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.walmartPlusRefferralpromotext
            - identifier: us.mapppings.wplus.walmartPlusshareYourInviteLink
            - identifier: us.mapppings.wplus.walmartPlusReferralcopylink
      - click:
          identifier: us.mapppings.wplus.walmartPlusshareYourInviteLink
      - click:
          identifier:  us.mapppings.wplus.walmartPlusshareInviteclosebtn

      - click:
          identifier:  us.mapppings.wplus.walmartPlusReferralcopylink
      - click:
          identifier:  us.mapppings.wplus.walmartPlusReferralclosebtn
          wait: 3000 
           
  - name: us.functions.wplus.account.referFriendsFromManagemembership
    platform: ios
    flow:
      - click:
          identifier:  us.mappings.wplus.manageMembership.gearIcon
          wait: 3000 
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.inviteFriendsTab
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.inviteFriendsTab
      - click:
          identifier: us.mapppings.wplus.inviteFriendsTab
          wait: 2000 
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.walmartPlusRefferralpromotext
            - identifier: us.mapppings.wplus.walmartPlusshareYourInviteLink
            - identifier: us.mapppings.wplus.walmartPlusReferralcopylink
      - click:
          identifier: us.mapppings.wplus.walmartPlusshareYourInviteLink
          wait: 3000
      - click:
          identifier:  us.mapppings.wplus.walmartPlusshareInviteclosebtn
          wait: 3000
      - click:
          identifier:  us.mapppings.wplus.walmartPlusReferralcopylink
          wait: 3000
      - click:
          identifier:  us.mapppings.wplus.walmartPlusReferralclosebtn
          wait: 3000 

  - name: us.functions.wplus.account.validateInviteFriendsbanner
    platform: ios
    flow:
       
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.inviteFriendsTab
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.inviteFriendsTab

      - if: 
          condition: ${page} == 'saveandearn'
          then:
             - verifyIdentifier: 
                label: 
                 - identifier: us.mapppings.wplus.inviteFriendssaveandearnsweepStakeBanner
                   contains: Enter to win 1 year of groceries
      - if: 
          condition: ${page} == 'membership'
          then:
            - verifyIdentifier: 
               label: 
                - identifier: us.mapppings.wplus.inviteFriendssweepStakebanner
                  contains: Enter to win 1 year of groceries

     
      - click:
          identifier: us.mapppings.wplus.inviteFriendsTab
          wait: 2000 

  - name: us.functions.wplus.account.validateInvitefriendsreferralscreen
    platform: ios
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mapppings.wplus.walmartPlusRefferralpromotext
              contains: Win FREE groceries for a year
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.referralprogramshareYourInviteLink
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.referralprogramshareYourInviteLink
            - identifier: us.mapppings.wplus.walmartPlusReferralcopylink
            - identifier: us.mapppings.wplus.referralprogramTerms
            - identifier: us.mapppings.wplus.referralprogramsweepstakesRules
      - click:
          identifier: us.mapppings.wplus.referralprogramshareYourInviteLink
          wait: 1000
      - click:
          identifier:  us.mapppings.wplus.walmartPlusshareInviteclosebtn
          wait: 1000
      - click:
          identifier:  us.mapppings.wplus.walmartPlusReferralcopylink
          wait: 1000
      - click:
          identifier:  us.mapppings.wplus.walmartPlusReferralclosebtn
          wait: 1000 

  - name: us.functions.wplus.account.referFriendFromSavingsTab
    platform: android
    flow:
      - click:
          identifier: us.mapppings.wplus.account.wPlusSavingsTab
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.inviteFriendsTab
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.inviteFriendsTab
      - click:
          identifier: us.mapppings.wplus.inviteFriendsTab
          wait: 2000
      - if:
          identifier:
            present:
              - identifier: us.mappings.error.retryButton
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Invite friends page load issue, getting technical page load error"
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.walmartPlusReferralcopylink
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.walmartPlusRefferralpromotext
            - identifier: us.mapppings.wplus.walmartPlusshareYourInviteLink
            - identifier: us.mapppings.wplus.walmartPlusReferralcopylink
      - click:
          identifier: us.mapppings.wplus.walmartPlusReferralcopylink
      - click:
          identifier: us.mapppings.wplus.walmartPlusReferralclosebtn
          wait: 3000 

  - name: us.functions.wplus.account.referFriendsFromManagemembership
    platform: android
    flow:
      - click:
          identifier:  us.mappings.wplus.manageMembership.gearIcon
          wait: 3000
      - sleep:
          duration: 2000
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.inviteFriendsTab      
      - click:
          identifier: us.mapppings.wplus.inviteFriendsTab
          wait: 2000 
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.walmartPlusReferralcopylink
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.walmartPlusRefferralpromotext
            - identifier: us.mapppings.wplus.walmartPlusshareYourInviteLink
            - identifier: us.mapppings.wplus.walmartPlusReferralcopylink
      - click:
          identifier: us.mapppings.wplus.walmartPlusReferralcopylink
          wait: 3000
      - click:
          identifier: us.mapppings.wplus.walmartPlusReferralclosebtn
          wait: 3000 

  - name: us.functions.wplus.account.inviteFriendsFromSavingsTab
    platform: android
    flow:
      - click:
          identifier: us.mapppings.wplus.account.wPlusSavingsTab
          wait: 3000
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.inviteFriendsTab
      - click:
          identifier: us.mapppings.wplus.inviteFriendsTab
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.walmartPlusRefferalNotAvailable
            - identifier: us.mapppings.wplus.gotItInRefferalDialog
      - click:
          identifier: us.mapppings.wplus.gotItInRefferalDialog
          wait: 3000 

  # Vaidate credit card change
  - name: us.functions.wplus.validateCreditCardChange
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.membership.ccDetails
      - click:
          identifier: us.mappings.wplus.membership.paymentEditButton
          wait: 5000
      - getString:
          identifier: us.mappings.buynow.paymentMethods.cardEndingWithSeventySeven
          attribute: checked
          storeIn: radioButtonSelected
      - sleep:
           duration: 3000
      - if:
          condition: ${radioButtonSelected} == "true"
          then:
            - click:
                identifier: us.mappings.buynow.paymentMethods.cardEndingWithEleven
            - getString:
                identifier: us.mappings.wplus.membership.cardNumber
                extractNumbers: true
                storeIn: cardnumber
            - log: ${cardnumber}
            - click: 
                identifier: us.mappings.wplus.membership.cardEndingWith111RadioButton
            - click:
                identifier: us.mappings.amend.cc.confirmbutton
            - scroll:
                direction: up
            - sleep:
                  duration: 2000
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.wplus.membership.ccDetails
                    contains: ${cardnumber}
          else:
            - click:
                identifier: us.mappings.buynow.paymentMethods.cardEndingWithSeventySeven
            - getString:
                identifier: us.mappings.wplus.membership.cardNumber
                extractNumbers: true
                storeIn: cardnumber
            - click:
                identifier: us.mappings.buynow.paymentMethods.cardEndingWithSeventySeven
            - click:
                identifier: us.mappings.amend.cc.confirmbutton
            - scroll:
                direction: up
            - sleep:
                  duration: 3000
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.wplus.membership.ccDetails
                    contains: ${cardnumber}

  - name: us.functions.wplus.validateCancelMemberShipAndFAQLinks
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mapppings.wplus.membership.cancelFreeTrialOrCancelWalmartPlusLink
            - name: direction
              string: down
            - name: scrollPosition
              string: center  
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.membership.cancelFreeTrialOrCancelWalmartPlusLink
      - click:
          identifier: us.mapppings.wplus.membership.cancelFreeTrialOrCancelWalmartPlusLink
      - sleep:
           duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelmembershipbutton
      - click:
          identifier: us.mappings.wplus.signup.closeButton
      - sleep:
           duration: 4000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.membership.faqButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center       
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.membership.faqButton
            - identifier: us.mappings.wplus.membership.termsAndConditionButton


  - name: us.functions.wplus.account.inviteFriendsFromSettingsInWalmartPlus
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.manageMembership.gearIcon 
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.invitesTab
      - click:
          identifier: us.mapppings.wplus.inviteFriendsTab
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.walmartPlusRefferalNotAvailable
            - identifier: us.mapppings.wplus.gotItInRefferalDialog
      - click:
          identifier: us.mapppings.wplus.gotItInRefferalDialog         
          
  - name: us.functions.wplus.account.inviteFriendsFromSettingsInWalmartPlus
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.manageMembership.gearIcon 
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.inviteFriendsInMembershipPage
      - click:
          identifier: us.mapppings.wplus.inviteFriendsInMembershipPage
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.walmartPlusRefferalNotAvailable
            - identifier: us.mapppings.wplus.gotItInRefferalDialog
      - click:
          identifier: us.mapppings.wplus.gotItInRefferalDialog        
# Validates W+ Signup module on item screen--> Sign up module changed to check box option now in UI
  - name: us.functions.wplus.validatePresenceOfSignUpModuleInItemPage
    platform: ios
    flow:
      #Scroll to view the W+ Savings Option on Item Page
    - if:
        condition: ${onGoingOffer}
        then:
           - executeFunction:
              name: us.functions.utils.scrollIfNotVisible
              params:
                - name: identifier
                  string: us.mappings.wplus.wplusSignUpWithOffer
                - name: direction
                  string: down  

           - verifyIdentifier:
                  present:
                    - identifier: us.mappings.wplus.wplusSignUpWithOffer
                    - identifier: us.mappings.wplus.wplusClaimOffer
        else:
          - executeFunction:
              name: us.functions.utils.scrollIfNotVisible
              params:
                - name: identifier
                  string: us.mappings.buyNow.itemScreen.wplusCheckBox
                - name: direction
                  string: down  

          - verifyIdentifier:
                  present:
                    - identifier: us.mappings.buyNow.itemScreen.wplusCheckBox

    - executeFunction:
                name: us.functions.item.closeItemPage  
    


  # Navigates from Item screen to Start free trial screen
  - name: us.functions.wplus.navigateToStartFreeTrialScreenFromItemPage
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.signUpModulePage.signUpForWalmartLink
      - verifyIdentifier:
           present:
               - identifier: us.mappings.wplus.signupModulePage.claim30DayFreeTrailCTA
      
           
  - name: us.functions.wplus.validateMembershipHubScreen.trialMember
    platform: ios
    flow:
      - log: Validating Annual plan - trial text on membership hub screen 
      - verifyIdentifier:
          value:
            - identifier: us.mappings.wplus.membershipHub.trialMember.AnnualPlanLabel
              #equals: us.data.ios.wplus.flow014.annualPlanTextLabel
              equals: Annual plan
      
      # Validate presence of change membership link
      # - log: Validating presence of change membership CTA
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.membershipHub.trialMember.changeMembershipCTA
      
      # Validate 30 days left text
      - log: Validating 30 days left text on memberhsip hub screen
      - verifyIdentifier:
          value:
            - identifier: us.mappings.wplus.membershipHub.trialMember.30DaysLeftLabel
              equals: 30 days left

      # Validate cancel free trial CTA
      - log: Validating cancel free trial link on membership hub screen
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.membershipHub.trialMember.cancelFreeTrialCTA

      # validate presence of payment method 
      - log: Validating presence of payment method
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.membershipHub.trailMember.paymentModule

  # Vaidate credit card change
  - name: us.functions.wplus.validateCreditCardChange
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.buynow.paymentMethods.cardActive
            - name: direction
              string: up
            - name: scrollPosition
              string: center
      - getString:
          identifier: us.mappings.buynow.paymentMethods.cardActive
          attribute: label
          storeIn: cardActive
      - log: 
          message: ${cardActive}
          color: CYAN
      - if:
          identifier:
            present:
              - identifier: us.mappings.global.editButton
          then:
            - click:
                identifier: us.mappings.global.editButton
                wait: 5000
          else:
            - click:
                identifier: us.mappings.home.changeButton
      - getString:
          identifier: us.mappings.buynow.paymentMethods.cardEndingWithSeventySeven
          attribute: value
          storeIn: radioButtonSelected
      - sleep:
           duration: 3000
      - if:
          condition: ${radioButtonSelected} == "1"
          then:
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.buynow.paymentMethods.editCardEndingWithThirtyTwo
                    contains: 1732
            - click:
                identifier: us.mappings.buynow.paymentMethods.editCardEndingWithThirtyTwo
            - click: 
                identifier: us.mappings.buynow.paymentMethods.selectCreditCard
                wait: 10000
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.buynow.paymentMethods.cardActive
                    notEquals: ${cardActive}
          else:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.paymentMethods.cardCarouselView  
                then:
                  - scroll:
                      direction: left
                      position: center
                      untilIdentifier: us.mappings.buynow.paymentMethods.cardEndingWithSeventySeven
                      withinIdentifier: us.mappings.paymentMethods.cardCarouselView   
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.buynow.paymentMethods.cardEndingWithSeventySeven
            - click:
                identifier: us.mappings.buynow.paymentMethods.cardEndingWithSeventySeven
            - click: 
                identifier: us.mappings.buynow.paymentMethods.selectCreditCard
                wait: 10000
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.buynow.paymentMethods.cardActive
                    notEquals: ${cardActive}
          
   # Vaidate Renewal Date in manage membsership screen
  - name: us.functions.wplus.inhome.manageMembership.validaterenewalDate
    platform: ios
    flow:
      - getString:
          identifier: us.mappings.manageMembership.inHome.renewalDate
          attribute: label
          storeIn: membershippaymentinfo
      - executeNode:
          file: us/e2e-tests/helpers/splitpaymentDateString_iOS.js
          args:
            - value: ${membershippaymentinfo}
          getResponse:
            storeIn: paymentDate
      - log: "Payment Date: ${paymentDate}"

      - verifyIdentifier:
                label:
                  - identifier: us.mappings.wplus.manageMembership.inHome.plusUps.payment.description
                    contains: ${paymentDate}      
  - name: us.functions.wplus.churnedexpired.verifywplusbannercontent
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.shop
          wait: 5000
      - click:
          identifier: us.mappings.home.seeTimes
          wait: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.nonMemberWplusBanner.Wplusbanner
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.nonMemberWplusBanner.Wplusbannertitle 
            - identifier: us.mappings.wplus.nonMemberWplusBanner.WplusSignUp
      - click:
          identifier: us.mappings.reserveSlot.dismissPageButton

  - name: us.functions.wplus.churnedexpired.verifywplusbannercontent
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed    
      - click:
          identifier: us.mappings.tabBar.shop
          wait: 5000
      - click:
          identifier: us.mappings.home.seeTimes
          wait: 5000
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.wplus.nonMembWplusBanner.WplusSignUp
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reserveSlot.deliveryFromStore.optInSection
      #       - identifier: us.mappings.wplus.nonMembWplusBanner.WplusSignUp
      - click:
          identifier: us.mappings.reserveSlot.dismissPageButton


  - name: us.functions.wplus.churnedexpired.validateChurnedExpiredMemberNoAccess
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.savingsTab
          wait: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.churnedExpired.ReactivateWplusButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.churnedExpired.ReactivateWplusButton
      - click:
          identifier: us.mappings.wplus.benefitsTabSelected
          wait: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.earlyaccessScreen.verifyhowItWorksLink
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.earlyaccessScreen.verifyhowItWorksLink
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.manageMembership.gearIcon 
         


  - name: us.functions.wplus.churnedexpired.validateChurnedExpiredMemberNoAccess
    platform: android
    flow:
      - click:
          identifier: us.mapppings.wplus.account.wPlusSavingsTab
          wait: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.churnedExpired.reactivateWplusButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.churnedExpired.reactivateWplusButton
      - click:
          identifier: us.mappings.wPlus.benifitsTabHeader
          wait: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.earlyaccessScreen.howItWorks
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.earlyaccessScreen.howItWorks
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.manageMembership.gearIcon 

  # Function to Add W+ Membership to Account
  - name: us.functions.wplus.astro.addWplusMembershipToAccount
    flow:
      - log: Add Wplus Membership To Account
      - log: Fetching Email used for creating account using Astro API
      - log: ${payload}
      - callAPI:
          url: http://astro.walmart.com/api/v2/teflon/account/${customerEmail}/wplus
          requestMethod: POST
          wait: 5000
          verifyResponseCode: 200
          header:
            - key: Content-Type
              value: application/json
            - key: segment
              value: oaoh
          readTimeout: 30000 
          requestBody: ${payload}
          verifyResponseCode: 200
          verifyResponseBodyContains:
            - '"astroStatus":"SUCCESS"'
          getResponse:
            storeIn: response
          getValue:
            - key: tenure.name
              storeIn: tenure
      - log: $tenure
      - log: Account added to Wplus membership successfully   

  # Function to Cancel W+ Membership 
  - name: us.functions.wplus.astro.cancelWplusMembershipToAccount
    flow:
      - log: Cancel Wplus Membership To Account
      - log: Fetching Email used for creating account using Astro API
      - callAPI:
          url: http://astro.walmart.com/api/v2/teflon/account/${customerEmail}/wplus
          requestMethod: DELETE
          wait: 5000
          verifyResponseCode: 200
          header:
            - key: Content-Type
              value: application/json
            - key: value
              value: nextgen
          readTimeout: 30000 
          verifyResponseCode: 200
          verifyResponseBodyContains:
            - '"astroStatus":"SUCCESS"'
          getResponse:
            storeIn: response
      - log: Cancelled Wplus membership successfully 


  - name: us.functions.wplus.SavewithWalmartPluspill
    platform: ios
    flow:
      - verifyIdentifier:
           label:
            - identifier: us.mappings.wplus.SavewithWalmartPluspill
              contains: Save with Walmart Plus
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.freeshippingpill

  - name: us.functions.wplus.itempage.freeshippinglabel
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.itempage.freedeliveryfromstorelabel
            - name: direction
              string: down
            - name: scrollPosition
              string: center    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.itempage.freedeliveryfromstorelabel 

  - name: us.functions.wplus.itempage.freeDeliveryWithWalmartPlusLabel
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.itempage.freeDeliveryWithWalmartPlus
            - name: direction
              string: down
            - name: scrollPosition
              string: center    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.itempage.freeDeliveryWithWalmartPlus  

  - name: us.functions.wplus.storeItemsSelection
    platform: ios
    flow: 
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.choice.inStore.filter 

  - name: us.functions.wplus.integratedSignup
    platform: android
    flow:
      - if:
          condition: ${page} == 'cart'
          then:
            - executeFunction:
                name: us.functions.wplus.cart.verifyWalmartPlusSignUp
            - executeFunction:
                name: us.functions.cart.continueToCheckout
                params:
                  - name: flow
                    string: signUpWPlusFromCart
            - executeFunction:
                name: us.functions.wplus.reviewOrder.splash.verifyWalmartPlusPlans
          else:
            - if:
                condition: ${page} == 'reviewOrder'
                then:
                  - scroll:
                      direction: down
                      untilIdentifier: us.mappings.reviewOrder.wplus.optInLink
                  - click:
                      identifier: us.mappings.reviewOrder.wplus.optInLink
                  - click:
                      identifier: us.mappings.wplus.startUsingwplusBenefitsButton    

  - name: us.functions.wplus.integratedSignup
    platform: ios
    flow:
      - if:
          condition: ${page} == 'cart'
          then:
            - executeFunction:
                name: us.functions.wplus.cart.verifyWalmartPlusSignUp
            - executeFunction:
                name: us.functions.cart.continueToCheckout
            - executeFunction:
                name: us.functions.wplus.reviewOrder.verifyWalmartPlusPlans
          else:
            - if:
                condition: ${page} == 'reviewOrder'
                then:
                  - scroll:
                      direction: down
                      untilIdentifier: us.mappings.reviewOrder.wplus.optInLink
                  - click:
                      identifier: us.mappings.reviewOrder.wplus.optInLink
                  - click:
                      identifier: us.mappings.reviewOrder.wplus.confirmPlanButton   

  # W+ cart opt in
  - name: us.functions.wplus.cart.verifyWalmartPlusSignUp
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.cart.optInCheckbox
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - verifyIdentifier: 
          timeout: 20000
          present: 
            - identifier: us.mappings.cart.wplusSignupLogo
            - identifier: us.mappings.cart.wplusSignupHeaderText
            - identifier: us.mappings.cart.optInCheckbox
            - identifier: us.mappings.cart.wplusOptOutText
      - click:
          identifier: us.mappings.cart.optInCheckbox
      - sleep:
          duration: 5000
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.cart.wplusOptInText
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.cart.wplusOptInText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.wplusSignupAdditionalInfo
            - identifier: us.mappings.cart.wplusOptInText

  # Can be removed after updating select plan on splash of review order page 
  - name: us.functions.wplus.reviewOrder.verifyWalmartPlusPlans
    platform: android
    flow:
      - executeFunction:
          name: us.functions.checkout.reviewOrder.scrollToTopOfReviewOrder
      - executeFunction:
          name: us.functions.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.reviewOrder.wplus.mode
            - name: direction
              string: down
      - click:
          identifier: us.mappings.reviewOrder.wplus.mode
      - if:
          condition: ${mode} != 'Annual'
          then:
            - verifyIdentifier: 
                present:
                  - identifier: us.mappings.wplus.reviewOrder.walmartPlusIcon
            - verifyIdentifier: 
                present:
                  - identifier: us.mappings.reviewOrder.walmartPlusAnnualPlan
                  - identifier: us.mappings.reviewOrder.walmartPlusMonthlyPlan
                  - identifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan
          else:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.reviewOrder.scDelivery.fee
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reviewOrder.scDelivery.fee
                  - identifier: us.mappings.reviewOrder.scDelivery.feeValue        
                  - identifier: us.mappings.wplus.itempage.freeshippinglabel

  # W+ plans splash on review order page
  - name: us.functions.wplus.reviewOrder.splash.verifyWalmartPlusPlans
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.splash.walmartPlusAnnualPlan
            - identifier: us.mappings.reviewOrder.splash.walmartPlusMonthlyPlan
      - if:
          condition: ${tenure} == 'Monthly'
          then:
            - executeFunction:
                name: us.functions.wplus.reviewOrder.splash.selectMonthlyPlan
      - if:
          condition: ${tenure} == 'Annual'
          then:
            - executeFunction:
                name: us.functions.wplus.reviewOrder.splash.selectAnnualPlan
      # Click confirm walmart+ button
      - executeFunction:
          name: us.functions.wplus.reviewOrder.splash.clickConfirmBtn

  # Select monthy plan
  - name: us.functions.wplus.reviewOrder.splash.selectMonthlyPlan
    platform: android
    flow:
      - click:
          identifier: us.mappings.reviewOrder.splash.walmartPlusMonthlyPlan
          wait: 1000

  # Select annual plan
  - name: us.functions.wplus.reviewOrder.splash.selectAnnualPlan
    platform: android
    flow:
      - click:
          identifier: us.mappings.reviewOrder.splash.walmartPlusAnnualPlan
          wait: 1000

  # Click confirm walmart+ button
  - name: us.functions.wplus.reviewOrder.splash.clickConfirmBtn
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.splash.legalCheck
          then:
            - click:
                identifier: us.mappings.reviewOrder.splash.legalCheck
                wait: 1000
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.splash.confirmBtn
          then:
            - click:
                identifier: us.mappings.reviewOrder.splash.confirmBtn
                wait: 1000

  - name: us.functions.wplus.SavewithWalmart
    platform: ios
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.SavewithWalmartPluspill
              contains: Save with Walmart Plus   

  # Verify default plan selected in Review Order
  - name: us.functions.wplus.verifyDefaultPlanSelected
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.reviewOrder.wplus.selectIAmNotInterestedOption
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.reviewOrder.wplus.selectIAmNotInterestedOption
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.placeOrderButton
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
            - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel

  # Verify Order Confirmation for New W+ Signed Customer
  - name: us.functions.wplus.orderConfirmation.integratedSignedUpCustomer
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
            - identifier: us.mappings.wplus.orderConfirmation.pos.cardBanner
      

  - name: us.functions.wplus.account.convertTrailMemberToPaidMember
    platform: android
    flow:
      # - click:
      #     identifier: us.mappings.wplus.benefitsTab
      #     wait: 1000
      # Remove this once hub redesign is enabled 100%
      # - executeFunction:
      #     name: us.functions.utils.scrollIfNotVisible
      #     params:
      #       - name: identifier
      #         string: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
      #       - name: direction
      #         string: down 
      #       - name: scrollPosition
      #         string: center
      - scroll:
          direction: up
          untilIdentifier: us.mappings.benefits.title
          
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.benefits.title
            
      - scroll:
          direction: down
          untilIdentifier: us.mappings.benefits.earlyAccess.tile
          position: center
      - click:
          identifier: us.mappings.benefits.earlyAccess.tile
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.benefits.earlyAccess.browseDealsButton
            
      - click: 
          identifier: us.mappings.benefits.earlyAccess.learnmoreButton

      - if:
          identifier:
            present:
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
          then:
            - click:
                identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
          else:
            - failTest:
                  message: App Failure - Start Paid Membership link is not displayed under Early Access -OL 
      - verifyIdentifier: 
          timeout: 10000
          present: 
            - identifier: us.mappings.wplus.annualTenurePlan
      - if: 
          condition: ${tenure} == 'annual'
          then:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.annualTenurePlan
                then:
                  - click:
                      identifier: us.mappings.wplus.annualTenurePlan  
                  - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected'        
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.membership_sign_up_button
      - click:  
          identifier: us.mappings.wplus.membership_sign_up_button

      # Handling Let us Personalize your Shopping Experience Pop Up 
     # - executeFunction: Personalize your Shopping Experience Pop Up handled in Onboraing method.
     #     name: us.functions.home.personalizedPopUpScreenClose

      # Walmart+ Comming Soon - Access to all your walmart+ benefits.  
      - executeFunction:
         name: us.functions.home.closeWParamountPlusPopUpIfDisplayed

      # If we get Sorry Page displayed then we will navigate back to Benifits Page using DeepLink 
      # Untill Jira Ticket is Resolved #https://jira.walmart.com/browse/CEWMPLUS-28344
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.technicalSorryPageTryAgainBtn
          then:
              #Navigate to deeplink
              - log: Sorry Page is displayed -will navigate back to Benifits Page using DeepLink
              - executeFunction:
                  name: us.functions.global.navigation.goToDeepLink
                  params:
                     - name: deepLinkUrl
                       string: us.data.ios.wplus.flow014.benefitsScreenNavDeepLink


     # Commented these lines of code because there is a P2 issue (https://jira.walmart.com/browse/CEWMPLUS-28344) that is blocking this code.    
      # - if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.search.howDoYouWantYourOrderBottomTray
      #     then:
      #       - click:
      #           identifier: us.mappings.myItems.similarItems.similarItemsCloseButton
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.paideMembership.bottomSheetHeader
      #       - identifier: us.mappings.paidMembership.bottomSheetComingSoonText
      #       - identifier: us.mappings.paidMembership.bottomSheetStartShoppingLink
      #       - identifier: us.mappings.myItems.similarItems.similarItemsCloseButton
      # - click:
      #     identifier: us.mappings.myItems.similarItems.similarItemsCloseButton
  


  # Function to Reactivate Membership
  - name: us.functions.account.wplus.reactivateMembership
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.churnedExpired.reactivateWplusButton
            - name: direction
              string: down      
      - click:  
          identifier: us.mappings.wplus.churnedExpired.reactivateWplusButton
          wait: 5000        
      - if: 
          condition: ${tenure} == 'Annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected'          
      - click:  
          identifier: us.mapppings.wplus.reactivateMembership.restartWalmartPlus
          wait: 5000
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.reactivateMembership.bottomSheetHeader
      #       - identifier: us.mappings.reactivateMembership.bottomSheetStartSavingText
      #       - identifier: us.mappings.reactivateMembership.bottomSheetStartUsingWplusBenefitsLink
      - click:
           identifier: us.mappings.myItems.similarItems.similarItemsCloseButton
      - executeFunction:
          name: us.functions.wplus.account.navigateToWalmartPlus
      - executeFunction:
          name: us.functions.wplus.navigateToManageMembershipFromBenefitsPage
      - verifyIdentifier:
          notPresent:
            - identifier: us.mapppings.wplus.reactivateMembership.reactivateWalmartPlus      


   # Function to Reactivate Membership
  - name: us.functions.account.wplus.ReactivateMembership
    platform: iOS
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mapppings.wplus.reactivateMembership.reactivateWalmartPlusLink
            - name: direction
              string: down
      - click:  
          identifier: us.mapppings.wplus.reactivateMembership.reactivateWalmartPlusLink
          wait: 5000
      - if: 
          condition: ${tenure} == 'Annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected'
      - click:  
          identifier: us.mapppings.wplus.reactivateMembership.restartWalmartPlusLink
          wait: 5000
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.PaidMembership.paidMemberBottomSheetHeader
            - identifier: us.mappings.wplus.reactivateMembership.BottomSheetWelcomeGladYouAreHereText
            - identifier: us.mappings.wplus.reactivateMembership.bottomSheetStartUsingWplusBenefitsLink      
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose 
      - executeFunction:
          name: us.functions.wplus.account.navigateToWalmartPlus
      - executeFunction:
          name: us.functions.wplus.navigateToManageMembershipFromBenefitsPage
      - verifyIdentifier:
          notPresent:
            - identifier: us.mapppings.wplus.cancelMembership.reactivateWalmartPlus 

   # Verify default plan selected in Review Order
    # Can be removed after updating select plan on splash of review order page  
  - name: us.functions.wplus.verifyDefaultPlanSelected
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.walmartPlusIAmNotInterestedPlan
    
      - scroll:
          direction: up
          untilIdentifier: us.mappings.reviewOrder.walmartPlusAnnualPlan 

  # Select Monthly Plan in Review Order
  # Can be removed after updating select plan on splash of review order page 
  - name: us.functions.wplus.reviewOrder.selectMonthlyPlan
    platform: android
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.reviewOrder.walmartPlusMonthlyPlan
      - click:
          identifier: us.mappings.reviewOrder.walmartPlusMonthlyPlan

   # Verify Order Confirmation for New W+ Signed Customer
  - name: us.functions.wplus.orderConfirmation.integratedSignedUpCustomer
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsIcon
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsTitle
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsDescription
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
              equals: Welcome to W+ We're glad you're here!
                                                                     
            - identifier: us.mapppings.wplus.cancelMembership.reactivateWalmartPlus

  # Utility to validate display/non display of waive Off details related to Wplus/other fees in cart page based on cart total and type of fulfilment items in cart
  # [mandatory] ${cartType} - fcOnly/scOnly/both [Indicates what type of items are available in cart to make appropriate validations]
  # [optional] ${storeOrderType} - pickup/delivery/none [Default 'none'] [If store item is available in cart, is it store pickup or store delivery]
  - name: us.functions.wplus.cart.chargeWaiveOffValidation
    platform: ios
    flow:
      # Case where already an existing SC order is available in user's account and cart shows amend option. 
      # Waive off text should not be displayed in cart for any case then in below section
      - if: 
          identifier:
            present:
              - identifier: us.mappings.cart.amend.banner
          then:
            - log: Skipping validation as Subtotal and waiveOff details are not displayed if amend timer is visible
          else:
            # Section to identify what type of items are in the cart
            - if:
                condition: ${cartType} == null
                then:
                  - log: Fetching details about type of items in cart
                  # TODO
            - if:
                condition: ${storeOrderType} == null
                then:
                  - log: Fetching details if store order type is 'Pickup' or 'Delivery from store'
                  # TODO
                  # For timebeing, making Pickup as default value
                  - storeIn:
                      key: storeOrderType
                      value: none

            - if:
                condition: ${minFeeWaived} == null
                then:
                  - storeIn:
                      key: minFeeWaived
                      value: notWaived
            # End of pre-requisite section

            # Scrolling to amount display section
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.cart.subTotalEffectiveAmount
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center

            # Section to get subtotal of the cart using js function
            - executeFunction:
                name: us.functions.utils.fetchAmountDisplayed
                params:
                  - name: identifier
                    string: us.mappings.cart.subTotalEffectiveAmount
                  - name: delimeter
                    string: '$'

            - log: Cart total - ${amountValue}
            - log: Cart type - ${cartType}

            # If cart subtotal is > 35$
            - if:
                condition: ${amountValue} > 35.00
                then:
                  - log: (Amount > 35-00) For Wplus user, waiveOff text should not be displayed
                  - verifyIdentifier:
                      notPresent:
                        - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
                        - identifier: us.mappings.cart.thresholdText

            # If cart subtotal is < 35$
            - if:
                condition: ${amountValue} < 35.00
                then:
                  - if:
                      condition: ${cartType} == 'fcOnly'
                      then:
                        - log: (Amount < 35-00)(FC item only) For Wplus user, waiveOff text should be displayed
                        - verifyIdentifier:
                            present:
                              - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
                            notPresent:
                              - identifier: us.mappings.cart.thresholdText
                      else:
                        - log: (Amount < 35-00)(With SC pickup/delivery item) For Wplus user, waiveOff text should be/not be displayed
                        - if:
                            condition: ${minFeeWaived} == 'waived'
                            then:
                              - verifyIdentifier:
                                  present:
                                    - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
                                    - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
                                  notPresent:
                                    - identifier: us.mappings.cart.thresholdText
                            else:
                              - verifyIdentifier:
                                  present:
                                    - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
                                    - identifier: us.mappings.cart.thresholdText

            # Validations based on if SC delivery item is available or not
            - if:
                condition: ${storeOrderType} == 'delivery'
                then:
                  - log: (Amount > or < 35-00)(With SC delivery item) For Wplus user, delivery waiveOff text should be displayed
                  - verifyIdentifier:                  
                      present:
                        - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
                        - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
                else:
                  - verifyIdentifier:
                      notPresent:
                        - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel

            - storeIn:
                key: minFeeWaived
                value: 'null'
            - storeIn:
                key: storeOrderType
                value: 'null'

  # Utility to validate display/non display of waive Off details related to Wplus/other fees in cart page based on cart total and type of fulfilment items in cart
  # [mandatory] ${cartType} - fcOnly/scOnly/both [Indicates what type of items are available in cart to make appropriate validations]
  # [optional] ${storeOrderType} - pickup/delivery/none [Default 'none'] [If store item is available in cart, is it store pickup or store delivery]
  - name: us.functions.wplus.cart.chargeWaiveOffValidation
    platform: android
    flow:
      # Case where already an existing SC order is available in user's account and cart shows amend option. 
      # Waive off text should not be displayed in cart for any case then in below section
      - executeFunction:
          name: us.functions.cart.scrollToTopOfCart
      - if: 
          identifier:
            present:
              - identifier: us.mappings.cart.amend.banner
          then:
            - log: Skipping validation as Subtotal and waiveOff details are not displayed if amend timer is visible
          else:
            # Pre-requisite to set the cart display properly
            # Section to identify what type of items are in the cart
            - if:
                condition: ${cartType} == null
                then:
                  - log: Fetching details about type of items in cart
                  # TODO
            - if:
                condition: ${storeOrderType} == null
                then:
                  - log: Fetching details if store order type is 'Pickup' or 'Delivery from store'
                  # TODO
                  # For timebeing, making Pickup as default value
                  - storeIn:
                      key: storeOrderType
                      value: none

            - if:
                condition: ${minFeeWaived} == null
                then:
                  - storeIn:
                      key: minFeeWaived
                      value: notWaived

            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.cart.estimatedTotalAmount
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
            # End of pre-requisite section

            # Section to get subtotal of the cart using js function
            - executeFunction:
                name: us.functions.utils.fetchAmountDisplayed
                params:
                  - name: identifier
                    string: us.mappings.cart.subTotalEffectiveAmount
                  - name: delimeter
                    string: '$'

            - log: Cart total - ${amountValue}
            - log: Cart type - ${cartType}

            # If cart subtotal is > 35$
            - if:
                condition: ${amountValue} > 35.00
                then:
                  - log: (Amount > 35-00) For Wplus user, waiveOff text should not be displayed
                  - verifyIdentifier:
                      notPresent:
                        - identifier: us.mappings.wplus.cart.pos.freeshippingText
                        - identifier: us.mappings.cart.thresholdText
                  - if:
                      condition: ${storeOrderType} != 'delivery'
                      then:
                        - verifyIdentifier:
                            notPresent:
                              - identifier: us.mappings.wplus.cart.pos.wplusIcon

            # If cart subtotal is < 35$
            - if:
                condition: ${amountValue} < 35.00
                then:
                  - if:
                      condition: ${cartType} == 'fcOnly'
                      then:
                        - log: (Amount < 35-00)(FC item only) For Wplus user, waiveOff text should be displayed
                        - verifyIdentifier:
                            present:
                              - identifier: us.mappings.wplus.cart.pos.wplusIcon
                              - identifier: us.mappings.wplus.cart.pos.freeshippingText
                              - identifier: us.mappings.wplus.cart.pos.shippingCost
                            notPresent:
                              - identifier: us.mappings.cart.thresholdText
                      else:
                        - log: (Amount < 35-00)(With SC pickup/delivery item) For Wplus user, waiveOff text should be/not be displayed
                        - if:
                            condition: ${minFeeWaived} == 'waived'
                            then:
                              - verifyIdentifier:
                                  present:
                                    - identifier: us.mappings.wplus.cart.pos.wplusIcon
                                    - identifier: us.mappings.wplus.cart.pos.freeshippingText
                                    - identifier: us.mappings.wplus.cart.pos.shippingCost
                                  notPresent:
                                    - identifier: us.mappings.cart.thresholdText
                            else:
                              - verifyIdentifier:
                                  notPresent:
                                    - identifier: us.mappings.wplus.cart.pos.freeshippingText
                                  present:
                                    - identifier: us.mappings.cart.thresholdText
            # Validations based on if SC delivery item is available or not
            - if:
                condition: ${storeOrderType} == 'delivery'
                then:
                  - log: (Amount > or < 35-00)(With SC delivery item) For Wplus user, delivery waiveOff text should be displayed
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
                        - identifier: us.mappings.wplus.cart.pos.wplusIcon
                      text:
                        - identifier: us.mappings.wplus.cart.pos.shippingCost
                          contains: $0
                else:
                  - verifyIdentifier:
                      notPresent:
                        - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText

            - storeIn:
                key: minFeeWaived
                value: 'null'
            - storeIn:
                key: storeOrderType
                value: 'null'

  # Utility to validate display/non display of waive Off details related to Wplus/other fees in review order page based on checkout total and type of fulfilment items in review order page
  # [mandatory] ${basketType} - fcOnly/scOnly/both [Indicates what type of items are available during checkout to make appropriate validations]
  # [optional] ${storeOrderType} - pickup/delivery/none [Default 'none'] [If store item is available in checkout basket, is it store pickup or store delivery]
  - name: us.functions.wplus.reviewOrder.chargeWaiveOffValidation
    platform: android
    flow:
      # Pre-requisite to set the cart display properly
      # Section to identify what type of items are in the cart
      - if:
          condition: ${basketType} == null
          then:
            - log: Fetching details about type of items in cart
            # TODO
      - if:
          condition: ${storeOrderType} == null
          then:
            - log: Fetching details if store order type is 'Pickup' or 'Delivery from store'
            # TODO
            - storeIn:
                key: storeOrderType
                value: none

      - if:
          condition: ${minFeeWaived} == null
          then:
            - storeIn:
                key: minFeeWaived
                value: notWaived

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.reviewOrder.subTotalEffectiveAmount
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      # End of pre-requisite section

      # Section to get subtotal of the cart using js function
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.reviewOrder.subTotalEffectiveAmount
            - name: attribute
              string: content-desc
            - name: delimeter
              string: '$'

      - log: Checkout total - ${amountValue}
      - log: Checkout basket type - ${basketType}

      - if:
          condition: ${amountValue} > 35.00
          then:
            # If cart subtotal is > 35$
            - log: (Amount > 35-00) For Wplus user, waiveOff text should not be displayed
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.wplus.reviewOrder.pos.freeshippingText
                  - identifier: us.mappings.wplus.reviewOrder.pos.oldThresholdValue
                  - identifier: us.mappings.wplus.reviewOrder.pos.thresholdValue
            - if:
                condition: ${storeOrderType} != 'delivery'
                then:
                  - verifyIdentifier:
                      notPresent:
                        - identifier: us.mappings.wplus.reviewOrder.pos.wplusIcon
            
      - if:
          condition: ${amountValue} < 35.00
          then:
            - if:
                condition: ${basketType} == 'fcOnly'
                then:
                  - log: (Amount < 35-00)(FC item only) For Wplus user, waiveOff text should be displayed
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.wplus.reviewOrder.pos.wplusIcon
                        - identifier: us.mappings.wplus.reviewOrder.pos.freeshippingText
                        - identifier: us.mappings.wplus.reviewOrder.pos.oldThresholdValue
                        - identifier: us.mappings.wplus.reviewOrder.pos.thresholdValue
                      notPresent:
                        - identifier: us.mappings.reviewOrder.POS.threshold
                        - identifier: us.mappings.reviewOrder.POS.thresholdAmount
                else:
                  - log: (Amount < 35-00)(With SC pickup/delivery item) For Wplus user, waiveOff text should be/not be displayed
                  - if:
                      condition: ${minFeeWaived} == 'waived'
                      then:
                        - verifyIdentifier:
                            present:
                              - identifier: us.mappings.wplus.reviewOrder.pos.wplusIcon
                              - identifier: us.mappings.wplus.reviewOrder.pos.freeshippingText
                            notPresent:
                              - identifier: us.mappings.reviewOrder.POS.threshold
                              - identifier: us.mappings.reviewOrder.POS.thresholdAmount
                      else:
                        - verifyIdentifier:
                            notPresent:
                              - identifier: us.mappings.wplus.reviewOrder.pos.freeshippingText
                            present:
                              - identifier: us.mappings.reviewOrder.POS.threshold
                              - identifier: us.mappings.reviewOrder.POS.thresholdAmount

      - if:
          condition: ${storeOrderType} == 'delivery'
          then:
            - log: (Amount > or < 35-00)(With SC delivery item) For Wplus user, delivery waiveOff text should be displayed
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
                  - identifier: us.mappings.wplus.reviewOrder.pos.scDelivery.wplusIcon
          else:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.wplus.reviewOrder.pos.freeDeliveryFromStoreText
      - storeIn:
          key: minFeeWaived
          value: 'null'
      - storeIn:
          key: storeOrderType
          value: 'null'

  # Utility to validate display/non display of waive Off details related to Wplus/other fees in order confirmation page based on checkout total and type of fulfilment items in the order
  # [mandatory] ${basketType} - fcOnly/scOnly/both [Indicates what type of items are available during checkout to make appropriate validations]
  # [optional] ${storeOrderType} - pickup/delivery/none [Default 'none'] [If store item is available in order, is it store pickup or store delivery]
  - name: us.functions.wplus.orderConfirmation.chargeWaiveOffValidation
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
           # - identifier: us.mappings.wplus.orderConfirmation.walmartPlusBackgroundView
           # - identifier: us.mappings.wplus.orderConfirmation.walmartPlusCardBannerButton

      # ${amountValue} is saved from 'us.functions.wplus.reviewOrder.chargeWaiveOffValidation'
      - if:
          condition: ${amountValue} > 35.00
          then:
            - if:
                condition: ${basketType} == 'fcOnly' || ${storeOrderType} == 'pickup'
                then:
                  - verifyIdentifier:
                      label:
                        - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
                          contains: Now kick back and relax, we'll take care of the rest!
                else:
                  - verifyIdentifier:
                      label:
                        - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
                          contains: You saved
                        - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
                          contains: W+ helps your savings
          else:
            - if:
                condition: ${storeOrderType} == 'pickup'
                then:
                  - verifyIdentifier:
                      label:
                        - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
                          contains: Now kick back and relax, we'll take care of the rest!
                else:
                  - verifyIdentifier:
                      label:
                        - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
                          contains: You saved
                        - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
                          contains: W+ helps your savings

  # Utility to validate display/non display of waive Off details related to Wplus/other fees in order confirmation page based on checkout total and type of fulfilment items in the order
  # [mandatory] ${basketType} - fcOnly/scOnly/both [Indicates what type of items are available during checkout to make appropriate validations]
  # [optional] ${storeOrderType} - pickup/delivery/none [Default 'none'] [If store item is available in order, is it store pickup or store delivery]
  - name: us.functions.wplus.orderConfirmation.chargeWaiveOffValidation
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderConfirmation.orderNumber
            - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
      - if:
          identifier:
            present:
                - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsIcon
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsTitle
                  - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsDescription

      # ${amountValue} is saved from 'us.functions.wplus.reviewOrder.chargeWaiveOffValidation'
      - if:
          condition: ${amountValue} > 35.00
          then:
            - if:
                condition: ${basketType} == 'fcOnly' || ${storeOrderType} == 'pickup'
                then:
                  - verifyIdentifier:
                      text:
                        - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
                          contains: Now kick back and relax, we'll take care of the rest!
                else:
                  - verifyIdentifier:
                      text:
                        - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
                          contains: You saved
                        - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
                          contains: W+ helps your savings #as a Walmart+ member!
          else:
            - if:
                condition: ${storeOrderType} == 'pickup'
                then:
                  - verifyIdentifier:
                      text:
                        - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
                          contains: Thank you for your order
                else:
                  - verifyIdentifier:
                      text:
                        - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
                          contains: You saved
                        - identifier: us.mappings.wplus.orderConfirmation.pos.benefitsHeader
                          contains: W+ helps your savings #as a Walmart+ member!

  - name: us.functions.wplus.account.navigateToEarlyAccessBrowseDealsAndVerify
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTabSelected
      - click:
          identifier: us.mappings.wplus.benefitsTabSelected
          wait: 3000
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.benefitsTabFreeShippingNoOrderMinimumButton
          position: center
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
          position: center
      - verifyIdentifier: 
          timeout: 30000
          present: 
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
            - identifier: us.mapppings.wplus.earlyaccessScreen.browseItemsButton
            - identifier: us.mappings.wplus.earlyaccessScreen.howItWorks
      #Commenting this step because browse deals is navigating to the Sorry page (Known issue). 
            # Will uncomment when the issue is resolved - Jira - CEWMPLUS-22272
      # - click:
      #     identifier: us.mappings.wplus.benefitsTabEarlyAccessBrowseItems
      #     wait: 3000

  - name: us.functions.wplus.account.earlyAccessBrowseDealsScreenVerification
    platform: android
    flow:
      - verifyIdentifier: 
          present: 
            - identifier: us.mapppings.wplus.earlyaccessScreen.browseItemsButton
            - identifier: us.mappings.wplus.earlyaccessScreen.howItWorks
            #Commenting this step because browse deals is navigating to the Sorry page (Known issue). 
            # Will uncomment when the issue is resolved - Jira - CEWMPLUS-22272
            # - identifier: us.mapppings.wplus.earlyaccessScreen.searchInput
            # - identifier: us.mapppings.wplus.earlyaccessScreen.productListHeader
            # - identifier: us.mapppings.wplus.earlyaccessScreen.productList

  # Wplus
  - name: us.functions.wplus.navigateHomeToSignIn
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.account.signInButton

  - name: us.functions.wplus.churnedActiveMember.benefitScreen.benefitScreenDetails
    platform: ios
    flow:
      - if:
          identifier:
            present:
                - identifier: us.mappings.wplus.benefitsTabSelected
          then:
            - verifyIdentifier:
                present:
                  - identifier:  us.mappings.wplus.benefitsTabSelected
                  - identifier: us.mappings.wplus.signup.walmartplusLogo
                  - identifier: us.mappings.wPlus.hiCustomerGreetings
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.wPlus.benefitsWalmartSubheader
                    contains: Thanks for being a member since

  - name: us.functions.wplus.churnedActiveMember.benefitScreen.benefitScreenDetails
    platform: android
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.benefits.subheader         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.benefits.subheader
      - verifyIdentifier:
          text:
            - identifier: us.mappings.benefits.subheader
              contains: we're sorry to see you go!
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.savings.benefitsList
      - verifyIdentifier:
          present:                 
            - identifier: us.mappings.wplus.membershipBottomsheetHeaderLogo
            - identifier: us.mappings.wplus.savings.reactivateMembershipButton
            - identifier: us.mappings.wplus.savings.benefitsList


  - name: us.functions.wplus.verifySavewithWalmartPluspill
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.SavewithWalmartPluspill
            - name: direction
              string: down
            - name: scrollPosition
              string: center
              
  - name: us.functions.wplus.itempage.verifyFreeShippinglabel
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.item.IlcShippingTile
          position: center

      - verifyIdentifier:
          present:
            - identifier: us.mappings.item.IlcShippingTile
            - identifier: us.mappings.item.IlcPickupTile
            - identifier: us.mappings.item.IlcDeliveryTile

  - name: us.functions.cart.wplus.cashbackBanner
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                present:             
                  - identifier: us.mappings.wplus.estimatedCashbackBanner 
          catch:
            flow:
              - log: relaunching the app and checking for wplus cashback banner
              - terminateApp: true
              - executeFunction:
                  name: us.functions.global.navigation.goToDeepLink
                  params:
                    - name: deepLinkUrl
                      string: walmart://home
              - sleep:
                  duration: 3000   
              - executeFunction:
                  name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed       
              - executeFunction:
                  name: us.functions.global.navigation.toCartFromNavBar
              - if:
                  identifier:
                    notPresent:
                      - identifier: us.mappings.wplus.estimatedCashbackBanner
                  then: 
                      - failTest:
                          message: "ENV_FAILURE - ${env} - Cashback banner section is not displayed"
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.cart.wplus.rewardsBanner.amount
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      # - verifyIdentifier:
      #     present:             
      #       - identifier: us.mappings.cart.wplus.rewardsBanner 
      # - verifyIdentifier:
      #     label:
      #       - identifier: us.mappings.cart.wplus.rewardsBanner 
      #         contains: Estimated Walmart Rewards
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.cart.subTotalEffectiveAmount
            - name: delimeter
              string: '$'           
      - arithmetic:
          expression: ${amountValue} * 0.02
          numberOfDecimalPlaces: 2             
          storeIn: totalReward                                     
      - verifyIdentifier:
          label:
            - identifier: us.mappings.cart.wplus.rewardsBanner.amount
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.cart.wplus.rewardsBanner.amount
            - name: delimeter
              string: '$'    
      - storeIn:
          key: Cashback Amount
          value: ${amountValue}                                    
      - verifyIdentifier:
          label:
            - identifier: us.mappings.cart.wplus.rewardsBanner.amount
              contains: ${totalReward} 
      - log: "Succesful"       

  - name: us.functions.cart.wplus.cashbackBanner
    platform: android
    flow:
      - sleep:
          duration: 10000
      - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.wplus.estimatedCashbackBanner
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center    
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.cart.wplus.rewardsBanner
          catch:
            flow:
              - log: relaunching the app and checking for wplus cashback banner
              - terminateApp: true
              - openLink: walmart://home
              - sleep:
                  duration: 3000   
              - executeFunction:
                  name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed       
              - executeFunction:
                  name: us.functions.global.navigation.toCartFromNavBar
              - executeFunction:
                  name: us.functions.utils.scrollIfNotVisible
                  params:
                    - name: identifier
                      string: us.mappings.wplus.estimatedCashbackBanner
                    - name: direction
                      string: down
                    - name: scrollPosition
                      string: center 
              - if:
                  identifier:
                    notPresent:
                      - identifier: us.mappings.cart.wplus.rewardsBanner
                  then: 
                      - failTest:
                          message: "ENV_FAILURE - ${env} - Rewards banner section is not displayed"
      - verifyIdentifier:
          text:
            - identifier: us.mappings.cart.wplus.rewardsBanner 
              contains: Estimated rewards
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.cart.subTotalEffectiveAmount
            - name: delimeter
              string: '$'           
      - arithmetic:
          expression: ${amountValue} * 0.02
          numberOfDecimalPlaces: 2             
          storeIn: totalReward                                     
      - verifyIdentifier:
          text:
            - identifier: us.mappings.cart.wplus.rewardsBanner.amount
              contains: ${totalReward}
      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.cart.wplus.rewardsBanner.amount
            - name: delimeter
              string: '$'    
      - storeIn:
          key: Cashback Amount
          value: ${amountValue}                                    
      - verifyIdentifier:
          text:
            - identifier: us.mappings.cart.wplus.rewardsBanner.amount
              contains: ${totalReward} 
      - log: "Succesful"       

  - name: us.functions.account.wplusVerify
    platform: ios
    flow:
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.wplus.walmartPlusLogo 
      - if:
           identifier:
              present:
               - identifier: us.mappings.wplus.backToAccountButton 
           then:
             - click:
                identifier: us.mappings.wplus.backToAccountButton 
      - if:
           identifier:
              present:
               - identifier: us.mappings.wplus.closeButton
           then:
             - click:
                identifier: us.mappings.wplus.closeButton


  - name: us.functions.home.clickJoinWplusOnHomepageBanner
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.viewLimitedTimeOffer
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.wplus.viewLimitedTimeOffer
      - click:
          identifier: us.mappings.wplus.viewLimitedTimeOffer

  - name: us.functions.account.cashback.clickJoinwplus
    platform: ios
    flow:
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.wplus.cashbackJoinwplusBtn    
      - click:
          identifier: us.mappings.wplus.cashbackJoinwplusBtn
      - sleep: 
          duration : 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.page.technicalIssue
          then:
            - failTest:
                message: "ENV_FAILURE - {env} - Error while joining cashback offer" 

  - name: us.functions.home.clickJoinWplusOnHomepageBanner
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.EAJoinWplusCTA
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.wplus.EAJoinWplusCTA
            - identifier: us.mappings.wplus.headingtText
            - identifier: us.mappings.wplus.termsAndConditionText
      - click:
          identifier: us.mappings.wplus.EAJoinWplusCTA
      - sleep:
          duration: 3000  

  - name: us.functions.wplus.account.ClickStartPaidMembershipCTA
    platform: android
    flow:
      - verifyIdentifier: 
          timeout: 10000
          present: 
            - identifier: us.mappings.wplus.annualTenurePlan
      - if: 
          condition: ${tenure} == 'annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected'    
      - scroll:
          direction: down
          untilIdentifier: us.mapppings.wplus.startYourPaidWplusMembership
      - click:  
          identifier: us.mapppings.wplus.startYourPaidWplusMembership 
          wait: 2000 

      # Handling Let us Personalize your Shopping Experience Pop Up 
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed

      - sleep:
          duration: 5000

      # Walmart+ Coming Soon - Access to all your walmart+ benefits.  
      - executeFunction:
         name: us.functions.home.closeWParamountPlusPopUpIfDisplayed

      - sleep:
          duration: 5000

      # If we get Sorry Page displayed then we will navigate back to Benifits Page using DeepLink 
      # Until Jira Ticket is Resolved #https://jira.walmart.com/browse/CEWMPLUS-28344
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.technicalSorryPageTryAgainBtn
          then:
              #Navigate to deeplink
              - log: Sorry Page is displayed -will navigate back to Benifits Page using DeepLink
              - executeFunction:
                  name: us.functions.global.navigation.goToDeepLink
                  params:
                     - name: deepLinkUrl
                       string: us.data.ios.wplus.flow014.benefitsScreenNavDeepLink


     # Commented these lines of code because there is a P2 issue (https://jira.walmart.com/browse/CEWMPLUS-28344) that is blocking this code.    
      # - if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.search.howDoYouWantYourOrderBottomTray
      #     then:
      #       - click:
      #           identifier: us.mappings.myItems.similarItems.similarItemsCloseButton
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.paideMembership.bottomSheetHeader
      #       - identifier: us.mappings.paidMembership.bottomSheetComingSoonText
      #       - identifier: us.mappings.paidMembership.bottomSheetStartShoppingLink
      #       - identifier: us.mappings.myItems.similarItems.similarItemsCloseButton
      # - click:
      #     identifier: us.mappings.myItems.similarItems.similarItemsCloseButton
  
               

  - name: us.functions.wplus.cashback.validateBottomsheetSignup
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.wplus.cashback.bottomSheetrewardsText
                    contains: 2% Walmart Rewards
          catch:
            flow:
              - verifyIdentifier:
                  label:
                    - identifier: us.mappings.wplus.cashback.bottomSheetrewardsText
                      contains: 2% rewards
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.wplus.cashback.bottomSheetAnnualplan
            - identifier: us.mappings.wplus.cashback.bottomSheetMonthlyplan
            - identifier: us.mappings.wplus.cashback.bottomSheetpaidMembershipBtn
      - click:
          identifier: us.mappings.wplus.cashback.bottomSheetcloseBtn


  - name: us.functions.wplus.handle.SubstitutionPreferencePopup
    platform: ios 
    flow: 
      - if: 
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.viewSubstitutionPopUp
          then: 
            - click:
                identifier: us.mappings.reviewOrder.viewSubstitutionPopUpCloseButton
                coordinates: 50% , 50%
                      
#========================================================================================
#Function to Check 35$ min charge waved off in Cart Page
  - name: us.functions.wplus.cart.chargeWaiveOff-No-35$-minfee
    platform: ios
    flow:
      - try:
          flow:
            - scroll:
                direction: down
                scrollLimit: 6
                untilIdentifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
                  - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.rightLabel
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - No $35 order minimum fee Message is NOT displayed"

  #============================================================================================
  #Function to Check Delivery charge waved off in Cart Page
  - name: us.functions.wplus.cart.chargeWaiveOff-deliveryFromStoreCharges
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
          position: center
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.leftLabel
                  - identifier: us.mappings.wplus.cart.pos.deliveryFromStoreCharges.rightLabel
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - free Delivery from Store Message is NOT displayed"

  #=====================================================================================================
  #Function to Check minimum charges applied for non-wplus user if the cart is <35$
  - name: us.functions.wplus.cart.charges-NonWplus-BelowOrderMinimum
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.cart.thresholdText
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - Below order minimum charges is NOT displayed"


  #============================================================================================
#Function to Check 35$ min charge waved off in reviewOrder Page
  - name: us.functions.wplus.reviewOrder.chargeWaiveOff-No-35$-minfee
    platform: ios
    flow:
      - try:
          flow: 
            - scroll:
                direction: down
                scrollLimit: 6
                untilIdentifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.noOrderMinimumCharges.leftLabel
                  - identifier: us.mappings.wplus.reviewOrder.pos.noOrderMinimumCharges.rightLabel
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - No $35 order minimum fee Message is NOT displayed"

  #============================================================================================
  #Function to Check Delivery charge waved off in reviewOrder Page
  - name: us.functions.wplus.reviewOrder.chargeWaiveOff-deliveryFromStoreCharges
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.leftLabel
                  - identifier: us.mappings.wplus.reviewOrder.pos.deliveryFromStoreCharges.rightLabel
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - free Delivery from Store Message is NOT displayed"

  #=====================================================================================================
  #Function to Check minimum charges applied for non-wplus user if the reviewOrder is <35$
  - name: us.functions.wplus.reviewOrder.charges-NonWplus-BelowOrderMinimum
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reviewOrder.thresholdText
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - Below order minimum charges is NOT displayed"

  #============================================================================================
              
  - name: us.functions.cart.inhome.validation
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.loadBookingSlotScreen      
          params:
            # - name: page
            #   string: cart
            - name: tab
              string: delivery
            # - name: addAddress
            #   string: true
            # - name: addExistingAddress
            #   string: true             
      - executeFunction:
          name: us.functions.selectDayForSlotDisplay
          params:          
            - name: slotDay
              string: dayAfter      
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.inhome.tipfree
      - if:
          identifier:
            present:
              - identifier:  us.mappings.wplus.inhome.deliveryTime.9to1
          then:
            - log: 9 to 1 pm slot available
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.9to1
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.9to1
          else:            
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.2to6
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.2to6        
      - sleep:
          duration: 3000            
      - click:
          identifier: us.mappings.reserveSlot.continueButton
      - sleep:
          duration: 10000         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.inhome.titleValidation

#Added by Murali Krish - Inhome Guided delivery Validation
  - name: us.functions.cart.GuidedDeliveryInhome.validation
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.selectTabForSlotBooking
      - executeFunction:
          name: us.functions.selectDayForSlotDisplay
          params:
            - name: slotDay
              string: tomorrow
      - verifyIdentifier:
          timeout: 3000
          present:
            - identifier: us.mappings.wplus.inhome.tipfree
      - if:
          identifier:
            present:
              - identifier:  us.mappings.wplus.inhome.deliveryTime.9to1
          then:
            - log: 9 to 1 pm slot available
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.9to1
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.9to1
                wait: 3000
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.2to6
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.2to6
                wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reserveSlot.continueButton
      - click:
          identifier: us.mappings.reserveSlot.continueButton
          wait: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.missingAnythingTitle
          then:
              - click:
                  identifier: us.mappings.cart.missingAnything.ContinueButton
                  wait: 5000


#Added by Murali Krish - Inhome Guided delivery Validation
  - name: us.functions.cart.GuidedDeliveryInhome.validation
    platform: android
    flow:
      - executeFunction:
          name: us.functions.loadBookingSlotScreen      
          params:
            - name: tab
              string: delivery    
      - executeFunction:
          name: us.functions.selectDayForSlotDisplay
          params:
            - name: slotDay
              string: tomorrow
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.inhome.tipfree
      - if:
          identifier:
            present:
              - identifier:  us.mappings.wplus.inhome.deliveryTime.9to1
          then:
            - log: 9 to 1 pm slot available
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.9to1
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.9to1
                wait: 3000
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.2to6
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.2to6
                wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reserveSlot.continueButton
      - click:
          identifier: us.mappings.reserveSlot.continueButton
          wait: 10000 
   

  - name: us.functions.cart.inhome.validation
    platform: android
    flow:
      - executeFunction:
          name: us.functions.loadBookingSlotScreen      
          params:
            - name: tab
              string: delivery
            - name: addAddress
              string: true
            - name: addExistingAddress
              string: true
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPopup  
      - sleep:
          duration: 5000        
      - executeFunction:
          name: us.functions.selectDayForSlotDisplay
          params:          
            - name: slotDay
              string: dayAfter  

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.inhome.tipfree
      - if:
          identifier:
            present:
              - identifier:  us.mappings.wplus.inhome.deliveryTime.9to1
          then:
            - log: 9 to 1 pm slot available
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.9to1
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.9to1
          else:            
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.inhome.deliveryTime.2to6
            - click:
                identifier: us.mappings.wplus.inhome.deliveryTime.2to6        
      - sleep:
          duration: 3000            
      - click:
          identifier: us.mappings.reserveSlot.continueButton
      - sleep:
          duration: 10000         

  - name: us.functions.wplus.validateWalmartRewardCenterFromHub
    platform: ios
    flow:

      - sleep:
          duration: 5000

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.WalmartRewardSectionFromHub
            - name: direction
              string: down
            - name: scrollPosition
              string: center

      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.WalmartRewardSectionFromHub

      - click:
          identifier: us.mappings.wplus.WalmartRewardSectionFromHub
            
      - sleep:
          duration: 5000

      - verifyIdentifier:
          present:
            - identifier: us.mappings.savings.wplus.WalmartRewardCenterTitle
            - identifier: us.mappings.savings.wplus.WalmartRewardBalance          
            - identifier: us.mappings.savings.wplus.WalmartRewardEarning  


  - name: us.functions.wplus.validateWalmartRewardCenterViaHub
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.ViewRewardsCenter
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.WalmartRewardSectionViaHub
            - identifier: us.mappings.wplus.ViewRewardsCenter
      - click:
          identifier: us.mappings.wplus.ViewRewardsCenter
            
      - sleep:
          duration: 5000

      - verifyIdentifier:
          present:
            - identifier: us.mappings.savings.wplus.WalmartRewardCenterTitle
            - identifier: us.mappings.savings.wplus.WalmartRewardBalance          
            - identifier: us.mappings.savings.wplus.WalmartRewardEarning                               

  - name: us.functions.wplus.validateWalmartRewardCenterPage
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.savings.wplus.WalmartRewardCenterTitle
            # - identifier: us.mappings.savings.wplus.WalmartRewardBalance          
            # - identifier: us.mappings.savings.wplus.WalmartRewardEarning  

  - name: us.functions.wplus.validateWalmartRewardCenterPage
    platform: android
    flow:
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.viewRewardsCenter.viewRewards
            # - identifier: us.mappings.wplus.WalmartRewardBalance          
            # - identifier: us.mappings.wplus.WalmartRewardEarning
          
  - name: us.functions.wplus.validateSavedRewardPage
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.carouselViewAllButton
      - click:
          identifier: us.mappings.home.carouselViewAllButton
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myitems.savedRewardTab   
      - click:
          identifier: us.mappings.myitems.savedRewardTab                  


  # Navigate to cash center via account page
  - name: us.functions.wplus.account.navigateToCashCenter
    platform: android
    flow:
      - click:
          wait: 2000
          identifier: us.mappings.account.navigateToCashCenterLink


  # Navigate to cash center via account page
  - name: us.functions.wplus.account.navigateToCashCenter
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.account.navigateToCashCenterLink
          then:    
              - scroll:
                  direction: down
                  untilIdentifier: us.mappings.account.navigateToCashCenterLink
      - click:
          wait: 2000
          identifier: us.mappings.account.navigateToCashCenterLink


  - name: us.functions.wplus.validateChangeBillingDateOption
    platform: android
    flow:
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.changeBillingDateOption
            - identifier: us.mappings.wplus.changeBillingDateInfoIcon
      - click:
          identifier: us.mappings.wplus.changeBillingDateInfoIcon
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.changeBillingDateBottomSheetTitle
            - identifier: us.mappings.wplus.changeBillingDateBottomSheetDescription
            - identifier: us.mappings.wplus.changeBillingDateBottomSheetGotItButton
      - click:
          identifier: us.mappings.wplus.changeBillingDateBottomSheetGotItButton
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.wplus.changeBillingDateOption
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.changePaymentDateBottomSheetTitle
            - identifier: us.mappings.wplus.changePaymentDateBottomSheetDescription
            - identifier: us.mappings.wplus.enterDateTextField
            - identifier: us.mappings.wplus.calendarView
            - identifier: us.mappings.wplus.confirmationText
            - identifier: us.mappings.reviewOrder.paymentMethod.continueButton
      - click:
          identifier: us.mappings.wplus.selectedDate
      - click:
          identifier: us.mappings.reviewOrder.paymentMethod.continueButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reviewPaymentBottomSheetTitle
            - identifier: us.mappings.wplus.reviewPaymentDateDecription
            - identifier: us.mappings.wplus.membershipBasePlanText
            - identifier: us.mappings.wplus.emailConfirmationText
      - click:
          identifier: us.mappings.global.closeButton

  - name: us.functions.wplus.validateChangeBillingDateOption
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.changeBillingDateOption
            - identifier: us.mappings.wplus.changeBillingDateInfoIcon
      - click:
          identifier: us.mappings.wplus.changeBillingDateInfoIcon
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.changeBillingDateBottomSheetTitle
            - identifier: us.mappings.wplus.changeBillingDateBottomSheetDescription
            - identifier: us.mappings.wplus.changeBillingDateBottomSheetGotItButton
      - click:
          identifier: us.mappings.wplus.changeBillingDateBottomSheetGotItButton
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.wplus.changeBillingDateOption
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.changePaymentDateBottomSheetTitle
            - identifier: us.mappings.wplus.changePaymentDateBottomSheetDescription
            - identifier: us.mappings.wplus.enterDateTextField
            - identifier: us.mappings.wplus.calendarView
            - identifier: us.mappings.wplus.confirmationText
            - identifier: us.mappings.returns.continueButton
      - click:
          identifier: us.mappings.wplus.selectedDate
      - click:
          identifier: us.mappings.returns.continueButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reviewPaymentBottomSheetTitle
            - identifier: us.mappings.wplus.reviewPaymentDateDecription
            - identifier: us.mappings.wplus.membershipBasePlanText
            - identifier: us.mappings.wplus.emailConfirmationText
      - click:
          identifier: us.mappings.global.closeButton



  - name: us.functions.wplusChurnedExpired.verifyRejoinWalmartPlusButton
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.RejoinWalmartPlusButton
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.benefitsTabExclusiveAccess
            - name: direction
              string: down    
      - click:
          identifier: us.mappings.wplus.benefitsTabExclusiveAccess
      - sleep:
          duration: 2000         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
      - click:
          identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
      - sleep:
          duration: 2000 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.annualTenurePlan
            - identifier: us.mappings.wplus.monthlyTenurePlan


  - name: us.functions.wplus.buyNow.wplusOptIn
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.buyNow.walmartOptInBanner
          then:
            - log: Wplus Banner Available
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.buyNow.walmartOptInHeader
                    contains: $6.99 order min fee
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Wplus Banner not Available"
      - if:
          condition: ${wplusUser} == 'optIn'
          then:
            - log: Opting in for wplus membership
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.buyNow.walmartOptInCheckbox
                then:
                  - click:
                      identifier: us.mappings.buyNow.walmartOptInCheckbox
                  - scroll:
                      wait: 3000
                      direction: down
                      untilIdentifier: us.mappings.buyNow.walmartOptInBannerIAgreeCheckBox
                  - click:
                      identifier: us.mappings.buyNow.walmartOptInBannerIAgreeCheckBox   
                  - sleep:
                      duration: 2000
                  - click:
                     identifier: us.mappings.buyNow.placeOrderButton
          else:
            - log: Opting out of wplus membership
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.buyNow.walmartOptOutCheckbox
            - click:
                identifier: us.mappings.buyNow.walmartOptOutCheckbox       


  - name: us.functions.wplus.buyNow.wplusOptIn
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.buyNow.walmartOptInHeader
          then:
            - log: Wplus Banner Available
            - verifyIdentifier: 
                present: 
                  - identifier: us.mappings.buyNow.walmartOptInHeader
                text:
                  - identifier: us.mappings.buyNow.walmartOptInHeader
                    contains: $6.99 order min fee
          else:            
            - failTest:
                message: "ENV_FAILURE - ${env} - Wplus Banner not Available"       

      - if:
          condition: ${wplusUser} == 'optIn'
          then:
            - log: Opting in for wplus membership
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.buyNow.walmartOptInOutCheckbox
                then:
                  - click:
                      identifier: us.mappings.buyNow.walmartOptInOutCheckbox
                  - scroll:
                      wait: 3000
                      direction: down
                      untilIdentifier: us.mappings.buyNow.walmartOptInBannerIAgreeCheckBox
                  - click:
                      identifier: us.mappings.buyNow.walmartOptInBannerIAgreeCheckBox
                  - click:
                      identifier: us.mappings.buyNow.placeOrderButton        
          else:
            - log: Opting out of wplus membership
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.buyNow.walmartOptInOutCheckbox
            - click:
                identifier: us.mappings.buyNow.walmartOptInOutCheckbox

  # Function to  reactive wplus membership from manageMemberShip page 
  - name: us.functions.wplus.membership.reactivatePaidMembership
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.wplus.navigateToManageMembershipFromBenefitsPage
      - if:
          condition: ${plan} == 'annual'
          then:
            - verifyIdentifier: 
                  label:
                    - identifier: us.mappings.wplus.membership.plan
                      contains: Annual plan
          else:
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.wplus.membership.plan
                    contains: Monthly plan    
      - click:
          wait: 3000
          identifier: us.mapppings.wplus.reactivateMembership.reactivateWalmartPlusLink
      - sleep:
          duration: 7000           
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.monthlyTenurePlan             
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.changePlanButton
      - click:
          identifier: us.mappings.wplus.changePlanButton
          wait: 5000
      - if:
          identifier:
            present:
              - identifier: us.mapppings.wplus.PaidMembership.paidMemberBottomSheetHeader
          then:
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose                
      - sleep:
          duration: 3000 
      - executeFunction:
          name: us.functions.wplus.account.navigateToWalmartPlus  
      - scroll:
          direction: up
          untilIdentifier: us.mappings.benefits.title
          
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.benefits.title                           
     # - verifyIdentifier:
     #     present: 
     #       - identifier: us.mappings.wPlus.thanksForBeingMembercustomerGreetings

  - name: us.functions.wplusChurnedExpired.verifyRejoinWalmartPlusButton
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.RejoinWalmartPlusButton
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.benefitsTabExclusiveAccess
            - name: direction
              string: down    
      - click:
          identifier: us.mappings.wplus.benefitsTabExclusiveAccess
      - sleep:
          duration: 2000         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
      - click:
          identifier: us.mappings.wplus.benefitsTabEarlyAccessStartPaidMembershipButton
      - sleep:
          duration: 2000 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.annualTenurePlan
            - identifier: us.mappings.wplus.monthlyTenurePlan

  # Function to  reactive wplus membership from manageMemberShip page 
  - name: us.functions.wplus.membership.reactivatePaidMembership
    platform: android
    flow:
      - executeFunction:
          name: us.functions.wplus.navigateToManageMembershipFromBenefitsPage
      - if:
          condition: ${plan} == 'annual'
          then:
            - verifyIdentifier: 
                  text:
                    - identifier: us.mappings.wplus.membership.plan
                      contains: Annual plan
          else:
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.wplus.membership.plan
                    contains: Monthly plan    
      - click:
          wait: 3000
          identifier: us.mappings.wplus.manageMemberShip.reactivateMembershipButton 
      - sleep:
          duration: 7000           
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.monthlyTenurePlan              
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.changePlanButton
      - click:
          identifier: us.mappings.wplus.changePlanButton
          wait: 5000
      - executeFunction:
          name: us.functions.home.personalizedPopUpScreenClose
      - executeFunction:
          name: us.functions.item.handleWalmart+BottomTray
      - sleep:
          duration: 3000                    
     # - verifyIdentifier:
     #     present: 
     #       - identifier: us.mapppings.wplus.account.wPlusMembershipLabel

  - name: us.functions.wplus.membership.joinWalmartPlusClick
    platform: android
    flow:
      - if: 
          identifier:
            present:
              - identifier: us.mappings.cart.itemUpdatesContinueButton 
          then: 
            - click:
                identifier: us.mappings.cart.itemUpdatesContinueButton    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.homepage.JoinWplusBanner
      - click:
          identifier: us.mappings.wplus.homepage.JoinWplusBanner

  - name: us.functions.wplus.membership.joinWalmartPlusClick
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cashbackJoinwplusBtn
      - click:
          identifier: us.mappings.wplus.cashbackJoinwplusBtn

  - name: us.functions.wplus.navigateToBenefitsPageFromAccounts
    platform: android
    flow:
      - scroll:
          direction: up
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.tabBar.account
      - sleep:
          duration: 3000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.seeAllWalmartPlusBenefits
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.seeAllWalmartPlusBenefits
      - click:
          identifier: us.mappings.wplus.seeAllWalmartPlusBenefits
      - sleep:
          duration: 8000

  - name: us.functions.wplus.benefitsTab.cashbackTileValidation
    platform: ios
    flow:
      - sleep:
          duration: 2000
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.benefitsTab.yourWalmartPlusBenefitsLabel
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string:  us.mappings.wplus.benefits.cashbackTileHeader
            - name: direction
              string: down
            - name: scrollPosition
              string: center  
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.wplus.benefits.cashbackTile.earn2PercentWhenShopAtwalmartLabel
          then:    
              - failTest:
                  message: "ENV_FAILURE - ${env} - Earn 2% reward section not present"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefits.cashbackTile.earn2PercentWhenShopAtwalmartLabel
            - identifier: us.mappings.wplus.benefits.cashbackTile.availableToPaidMembersOnlyLabel
            - identifier: us.mappings.wplus.benefits.cashbackTile.howRewardsWorkCTA

  - name: us.functions.wplus.benefitsTab.rewardsTileValidation
    platform: ios 
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.benefitsTab.yourWalmartPlusBenefitsLabel  
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefits.rewardsTileHeader
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefits.rewardsTile.rewardsOnEligibleItemsLabel
            - identifier: us.mappings.wplus.benefits.rewardsTile.availableToTrialAndPaidMembersOnlyLabel
            - identifier: us.mappings.wplus.benefits.rewardsTile.viewRewardsCenterCTA
            - identifier: us.mappings.wplus.benefits.rewardsTile.learnMoreButton

  - name: us.functions.wplus.cashback.MLPdeeplinkLandingScreen
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.benefitsTab.yourWalmartPlusBenefitsLabel
          then:  
            - log: "MLP Deeplink landed on Benefits screen"   
          else:
            - log: "MLP Deeplink landed on Save and earn screen, navigating to benefits screen" 
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.benefitsTabSelected 
            - click:
                identifier: us.mappings.wplus.benefitsTabSelected                 
            

  - name: us.functions.wplus.account.clickOnJoinWplusFromMlp
    platform: android
    flow:
      - verifyIdentifier:
          present:

            - identifier: us.mappings.wplus.reactivate.clickStartTrial
      - if: 
          condition: ${flow} == 'reactivate'
          then:
            - click:
                identifier: us.mappings.wplus.reactivate.clickStartTrial
          else:
            - log: Churned Expired user is navigated to W+ MLP

  - name: us.functions.wplus.account.chooseWplusPlan
    platform: android 
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.planCheckbox
          then:
            - click:
                identifier: us.mappings.wplus.planCheckbox
      - if: 
          condition: ${plan} == 'annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected'         
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.reactivate.checkBox
          then:
            - click:
                identifier: us.mappings.wplus.reactivate.checkBox
      - click: 
          identifier: us.mappings.wplus.reactivate.clickRestartWplusButton
      - sleep:
          duration: 8000 
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.membershipBottomsheetClose
          then:
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose
      - if:
          identifier:
            notPresent:
            - identifier: us.mappings.account.walmartplus
          then:
            - scroll:
                direction: up 
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.walmartplus 
            - name: direction
              string: down
      - click : 
         identifier: us.mappings.account.walmartplus 


  - name: us.functions.wplus.reviewOrder.selectWplusTenure
    platform: android
    flow:
      - executeFunction:
          name: us.functions.checkout.reviewOrder.scrollToTopOfReviewOrder
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.reviewOrder.selectWalmartPlusPlan
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.tryWalmartPlusButton
      - click:
          identifier: us.mappings.reviewOrder.tryWalmartPlusButton
      - sleep:
           duration: 2000    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.splash.walmartPlusAnnualPlan
            - identifier: us.mappings.reviewOrder.splash.walmartPlusMonthlyPlan   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.selectWalmartPlusPlan
      - click:
          identifier: us.mappings.reviewOrder.walmartPlusAnnualPlan

      - click:
          identifier: us.mappings.reviewOrder.splash.confirmBtn

      - sleep:
          duration: 3000

  - name: us.functions.wplus.reviewOrder.selectWplusTenure
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.checkout.reviewOrder.scrollToTopOfReviewOrder
      - if:
           identifier:
             present:
               - identifier: us.mappings.reviewOrder.viewSubstitutionPreferenceButton
           then: 
             - click:
                 identifier: us.mappings.reviewOrder.viewSubstitutionPreferenceButton
             - click:
                 identifier: us.mappings.reviewOrder.viewSubstitutionPreferenceCloseButton
                 wait: 5000        
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.reviewOrder.tryWalmartPlusButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - click:
          identifier: us.mappings.reviewOrder.tryWalmartPlusButton
      - sleep:
           duration: 2000 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.selectWalmartPlusPlan            
      - click:
          identifier: us.mapppings.reviewOrder.wplus.selectBestValueAnnualOption
      - sleep:
          duration: 5000          

  - name: us.functions.wplus.verifyThankYouPage
    platform: android
    flow:
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.verifyThankyouPage

  - name: us.functions.wplus.verifyThankYouPage
    platform: ios
    flow:
      - sleep:
          duration: 5000    
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
          label:
            - identifier: us.mappings.wplus.orderConfirmation.walmartPlusHeaderLabel
              contains: "Welcome to W+ We're glad you're here!"              

  - name: us.functions.account.cashback.clickJoinwplus
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cashback.bottomSheetrewardsText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cashbackJoinwplusBtn
      - click:
          identifier: us.mappings.wplus.cashbackJoinwplusBtn
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.page.technicalIssue
          then:
            - failTest:
                message: "ENV_FAILURE - {env} - Error while joining cashback offer"

  - name: us.functions.wplus.cashback.validateBottomsheetSignup
    platform: android
    flow:
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.cashback.bottomSheetrewardsText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cashback.bottomSheetAnnualplan
            - identifier: us.mappings.wplus.cashback.bottomSheetMonthlyplan
            - identifier: us.mappings.wplus.cashback.bottomSheetpaidMembershipBtn
      - click:
          identifier: us.mappings.wplus.cashback.bottomSheetcloseBtn

  - name: us.functions.wplus.account.clickOnJoinWplusFromMlp
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reactivate.clickPrimaryCtaButton
      - if: 
          condition: ${flow} == 'reactivate'
          then:
            - click:
                identifier: us.mappings.wplus.reactivate.clickPrimaryCtaButton
          else:
            - log: Churned Expired user is navigated to W+ MLP

  - name: us.functions.wplus.reviewOrder.verifyDefaultSelection.annualPlan
    platform: android
    flow:
      - executeFunction:
          name: us.functions.checkout.reviewOrder.scrollToTopOfReviewOrder
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.annualTenurePlan
            - name: direction
              string: down
            - name: scrollPosition
              string: center   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.annualTenurePlan
      - log:  Annual plan is selected

  - name: us.functions.wplus.reserveSlot.optInOrOutWPlusMembershipCharge
    platform: android
    flow:
      - if:
          condition: ${wplusUser} == 'optIn'
          then:
            - log: Opting in for wplus membership
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reserveSlot.optInSlotCharge
          else:
            - log: Opting out of wplus membership
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reserveSlot.optOutSlotCharge

  - name: us.functions.wplus.reserveSlot.optInOrOutWPlusMembershipCharge
    platform: ios
    flow:
      - if:
          condition: ${wplusUser} == 'optIn'
          then:
            - log: Opting in for wplus membership
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reserveSlot.optInSlotCharge
          else:
            - log: Opting out of wplus membership
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reserveSlot.optOutSlotCharge


  - name: us.functions.wplus.reviewOrder.verifyDefaultselection.annualPlan
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.checkout.reviewOrder.scrollToTopOfReviewOrder
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mapppings.reviewOrder.wplus.selectBestValueAnnualOption
            - name: direction
              string: down
            - name: scrollPosition
              string: center   
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.reviewOrder.wplus.selectBestValueAnnualOption
      - log:  Annual plan is selected

  - name: us.functions.wplus.account.chooseWplusPlan
    platform: ios 
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.planCheckbox
          then:
            - click:
                identifier: us.mappings.wplus.planCheckbox
      - if: 
          condition: ${plan} == 'annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected'         
      - click: 
          identifier: us.mappings.wplus.reactivate.clickRestartWplusButton
      - sleep:
          duration: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.membershipBottomsheetClose
          then:
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose
      

  - name: us.functions.skinnybanner.validations
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.browse.skinnyBanner
          then: 
            - log: Skinny Banner is displayed
            - verifyIdentifier:
                present:
                - identifier: us.mappings.browse.skinnyBanner.heading
            - verifyIdentifier:
                present:
                - identifier: us.mappings.browse.skinnyBanner.subHeading
          else:
            - log: Skinny Banner is NOT displayed

  - name: us.functions.skinnybanner.validations
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.browse.skinnyBanner
          then: 
            - log: Skinny Banner is displayed
            - verifyIdentifier:
                present:
                - identifier: us.mappings.browse.skinnyBanner.heading
            - verifyIdentifier:
                present:
                - identifier: us.mappings.browse.skinnyBanner.subHeading
            - verifyIdentifier:
                present:
                - identifier: us.mappings.browse.skinnyBanner.tryWalmartPlusLink
          else:
            - log: Skinny Banner is NOT displayed 

  - name: us.functions.skinnybanner.click.tryWalmartPlusLink
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.browse.skinnyBanner
          then: 
            - verifyIdentifier:
                present:
                - identifier: us.mappings.browse.skinnyBanner.tryWalmartPlusLink
            - click: 
                identifier: us.mappings.browse.skinnyBanner.tryWalmartPlusLink
            - log: Try walmart+ link is clicked
            - sleep:
                duration: 3000
          else:
            - log: Skinny Banner is NOT displayed

  - name: us.functions.skinnybanner.click.tryWalmartPlusLink
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.browse.skinnyBanner
          then: 
            - verifyIdentifier:
                present:
                - identifier: us.mappings.browse.skinnyBanner.tryWalmartPlusLink
            - click: 
                identifier: us.mappings.browse.skinnyBanner.tryWalmartPlusLink
            - log: Try walmart+ link is clicked
            - sleep:
                duration: 3000
          else:
            - log: Skinny Banner is NOT displayed
  
  - name: us.functions.wplus.validateWalmartRewardsFromNonCashbackStore
    platform: android
    flow:  
      - if:
          identifier:
            present:
              - identifier: us.mappings.wPlus.benifitsTabHeader
          then:
            - click:
                identifier: us.mappings.wPlus.benifitsTabHeader
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.benefitsTabWalmartRewards
      - sleep:
          duration: 5000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string:  us.mappings.wplus.benefitsTabParamountTab
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.benefitsTabParamountTab
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel
          then:
            - click:
                identifier: us.mappings.wplus.benefitsTabParamountTab
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.benefitsTabMembershipCardViewDisclaimerLabel
                

  - name: us.functions.skinnybanner.bottomsheet.freetrial.signup
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.skinnyBanner.bottomSheet.container
            - identifier: us.mappings.skinnyBanner.bottomSheet.title
            - identifier: us.mappings.skinnyBanner.bottomSheet.annual.tenure
            - identifier: us.mappings.skinnyBanner.bottomSheet.monthly.tenure
            - identifier: us.mappings.skinnybanner.bottomSheet.payment.desc
            - identifier: us.mappings.skinnyBanner.bottomSheet.startTrial.cta  
      - if:
          condition: ${tenure} == 'monthly'
          then:
            - verifyIdentifier:
                present: 
                - identifier: us.mappings.skinnyBanner.bottomSheet.monthly.tenure  
                - identifier: us.mappings.skinnyBanner.bottomSheet.startTrial.cta         
            - log: Verifying Monthly trial Tenure Details
            - click: 
                identifier: us.mappings.skinnyBanner.bottomSheet.monthly.tenure
            - click: 
                identifier: us.mappings.skinnyBanner.bottomSheet.startTrial.cta
            - log: Start 30-day free trial CTA is clicked    
          else:
            - log: Verifying Annual trial tenure Details
            - verifyIdentifier:
                present: 
                - identifier: us.mappings.skinnyBanner.bottomSheet.annual.tenure
            - click: 
                identifier: us.mappings.skinnyBanner.bottomSheet.startTrial.cta
            - log: Start 30-day free trial CTA is clicked    
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.skinnybanner.bottomSheet.successMsg.container
      - verifyIdentifier:
          present:
            - identifier: us.mappings.skinnybanner.bottomSheet.successMsg.subHeading
      - log: Free Trial sign up is Succesful.                               


  - name: us.functions.close.bottomSheet
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.skinnybanner.bottomSheet.successMsg.container
          then:
            - verifyIdentifier:
                present: 
                - identifier: us.mappings.wlus.membershipBottomsheetClose
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose

  - name: us.functions.account.wplus.clickStart30dayfreetrialwplus
    platform: ios
    flow:
      - verifyIdentifier:
          present:             
            - identifier: us.mapppings.wplus.home.start30DaysFreeTrail.button   
      - click:
          identifier: us.mapppings.wplus.home.start30DaysFreeTrail.button
      - sleep: 
          duration : 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.page.technicalIssue
          then:
            - failTest:
                message: "ENV_FAILURE - {env} - Error while joining free trial membership"

  - name: us.functions.account.home.clickJoinwplusCTA
    platform: ios
    flow:
     - try:
         flow:
          - executeFunction:
                    name: us.functions.utils.scrollIfNotVisible
                    params:
                      - name: identifier
                        string: us.mappings.wplus.homepage.JoinWplusBanner
                      - name: direction
                        string: down
                      - name: scrollPosition
                        string: center
          - click:
              identifier: us.mappings.wplus.homepage.JoinWplusCTA
         catch:
           flow:
                - log: Evergreen banner with regular W+ signup text not found, checking for any existing offers.
                - storeIn:
                    key: onGoingOffer
                    value: true
                #resetting scroll to top of the home page
                - executeFunction:
                    name: us.functions.utils.scrollIfNotVisible
                    params:
                      - name: identifier
                        string: us.mappings.wplus.welcomePage.departmentsAndSavingsHeader
                      - name: direction
                        string: up
                      - name: scrollPosition
                        string: center
                - executeFunction:
                    name: us.functions.home.wplus.clickJoinW+OfferPeriod

  - name: us.functions.home.wplus.clickJoinW+OfferPeriod
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.homepage.JoinWplusOfferBanner
            - name: direction
              string: down
            - name: scrollPosition
              string: center
          
      - verifyIdentifier:
            present: 
                - identifier: us.mappings.wplus.homepage.JoinWplusOfferBanner
      - click:
            identifier: us.mappings.wplus.welcomePage.joinWalmartPlusOffer 
             

  - name: us.functions.account.wplus.closechooseplanPage
    platform: ios
    flow:
      - if: 
          identifier:
            present:
              - identifier: us.mappings.wplus.chooseplansCloseBtn
          then:
            - click:
                identifier: us.mappings.wplus.chooseplansCloseBtn
      - if: 
         condition: ${onGoingOffer}
         then:
           - click:
                identifier: us.mappings.wplus.close
      - if: 
          identifier:
            present:
              - identifier: us.mappings.wplus.mlp.backBtn
          then:
            - click:
                identifier: us.mappings.wplus.mlp.backBtn 
      - if: 
          identifier:
            present:
              - identifier: us.mappings.wplus.mlp.backBtn
          then:
            - click:
                identifier: us.mappings.wplus.mlp.backBtn
     

  - name: us.functions.wplus.validateStart30dayfreetrialplans
    platform: ios
    flow:
      - if: 
          condition: ${onGoingOffer}
          then:
            - log: "We are in offer period and current subscription is $49/year"
            - executeFunction: 
                 name: us.functions.wplus.cashback.validateOfferSignup  

          else:
            - verifyIdentifier:
                present:             
                  - identifier: us.mappings.wplus.annualTenurePlan
                  - identifier: us.mappings.wplus.monthlyTenurePlan
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.wplus.annualTenurePlan
                    contains: $98 per year
                    # $98 per year ($8.17 per month)
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.wplus.monthlyTenurePlan
                    contains: $12.95 per month
            - verifyIdentifier:
                present:             
                  - identifier: us.mappings.paymentMethod.addPayment.overlay.title
                  - identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
            
  - name: us.functions.wplus.cashback.validateOfferSignup
    platform: ios
    flow:
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.wplus.annualTenurePlan
            - identifier: us.mappings.wplus.monthlyTenurePlan
      - verifyIdentifier:
          value:
            - identifier: us.mappings.wplus.annualTenurePlan
              contains: $49 per 1st year
      - verifyIdentifier:
          value:
            - identifier: us.mappings.wplus.monthlyTenurePlan
              contains: $12.95 per month
      - verifyIdentifier:
          present:             
              - identifier: us.mappings.paymentMethod.addPayment.overlay.title
              - identifier: us.mappings.home.splashPageJoinWplusBtn
              - identifier: us.mappings.home.splashPageJoinWplusSecondaryBtn

  - name: us.functions.account.mlp.nonmemberToTrial
    platform: android
    flow:
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.wplus.mlp.claimWalmartPlus    
      - click:
          identifier: us.mappings.wplus.mlp.claimWalmartPlus
      - sleep: 
          duration : 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.page.technicalIssue
          then:
            - failTest:
                message: "ENV_FAILURE - {env} - Error while joining cashback offer"
  - name: us.functions.wplus.mlp.validateStart30dayfreetrialBtnSignup
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mapppings.wplus.home.membershipSignup.button
          then:
            - verifyIdentifier:
                present: 
                - identifier: us.mapppings.wplus.home.membershipSignup.button
            - click:
                identifier: us.mapppings.wplus.home.membershipSignup.button 
      - sleep: 
          duration : 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.membershipBottomsheetClose
          then:
            - verifyIdentifier:
                present: 
                - identifier: us.mappings.wlus.membershipBottomsheetClose
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose

  - name: us.functions.home.wplus.clickJoinW+
    platform: android
    flow:
     - try:
          flow:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.wplus.homepage.JoinWplusBanner
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
                
            - verifyIdentifier:
                  present: 
                      - identifier: us.mappings.wplus.homepage.JoinWplusBanner
            - click:
                 identifier: us.mappings.wplus.homepage.JoinWplusBanner 

          catch:
            flow:
                - log: Evergreen banner with regular W+ signup text not found, checking for any existing offers.
                - storeIn:
                    key: onGoingOffer
                    value: true
                #resetting scroll to top of the home page
                - executeFunction:
                    name: us.functions.utils.scrollIfNotVisible
                    params:
                      - name: identifier
                        string: us.mappings.wplus.welcomePage.departmentsAndSavingsHeader
                      - name: direction
                        string: up
                      - name: scrollPosition
                        string: center
                - executeFunction:
                    name: us.functions.home.wplus.clickJoinW+OfferPeriod

  - name: us.functions.wplus.closeChooseplansPage
    platform: android
    flow:
       - click:
            identifier: us.mappings.wplus.closeChooseplansicon
      
     
  - name: us.functions.wplus.cashback.validateOfferSignup
    platform: android
    flow:
      - verifyIdentifier:
           present: 
                - identifier: us.mapppings.wplus.home.start30DaysFreeTrail.button
      - click:
            identifier: us.mapppings.wplus.home.start30DaysFreeTrail.button 

      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.annualTenurePlanOfferPrice
            - identifier: us.mappings.wplus.monthlyTenurePlanPrice
            - identifier: us.mappings.wplus.change
    
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.search.rewards.clickStart30DayFreetrial
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.search.rewards.clickStart30DayFreetrial
            - identifier: us.mappings.search.rewards.skipOfferLink

  - name: us.functions.wplus.cashback.validateStart30dayfreetrialBtnSignup
    platform: android
    flow:
       - if: 
          condition: ${onGoingOffer}
          then:
            - log: "We are in offer period and current subscription is $49/year"
            - executeFunction:
               name: us.functions.wplus.cashback.validateOfferSignup

          else:
            - verifyIdentifier:
                present: 
                      - identifier: us.mapppings.wplus.home.start30DaysFreeTrail.button
            - click:
                  identifier: us.mapppings.wplus.home.start30DaysFreeTrail.button 
            - sleep: 
                duration : 5000  

            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.wplus.annualTenurePlanPrice
                  - identifier: us.mappings.wplus.monthlyTenurePlanPrice
                  - identifier: us.mappings.home.ChangePayment
          
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.search.rewards.clickStart30DayFreetrial
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
            - verifyIdentifier:
                present:             
                  - identifier: us.mappings.search.rewards.clickStart30DayFreetrial

  # for 49$/year offers
  - name: us.functions.home.wplus.clickJoinW+OfferPeriod
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.welcomePage.joinWalmartPlusOffer
            - name: direction
              string: down
            - name: scrollPosition
              string: center
          
      - verifyIdentifier:
            present: 
                - identifier: us.mappings.wplus.welcomePage.joinWalmartPlusOffer
      - click:
            identifier: us.mappings.wplus.welcomePage.joinWalmartPlusOffer 

 # This function is used to verify Wplus signup banner on item page. 
 # This can be used for regular $98/year price validations or for ongoing offers like 50% off 49$/year offers.
 # [mandatory] ${onGoingOffer} - true/false
  - name: us.functions.wplus.Signup
    platform: android
    flow:
     - if:
        condition: ${onGoingOffer}
        then:
           - executeFunction:
              name: us.functions.utils.scrollIfNotVisible
              params:
                - name: identifier
                  string: us.mappings.wplus.wplusSignUpWithOffer
                - name: direction
                  string: down  

           - verifyIdentifier:
                  present:
                    - identifier: us.mappings.wplus.wplusSignUpWithOffer
        else:
          - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.wplus.item_wplus_signup_text
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
          
          - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.itempage.wplusSignupCheckBox

  - name: us.functions.skinnybanner.bottomsheet.freetrial.signup
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.skinnyBanner.bottomSheet.container
            - identifier: us.mappings.skinnyBanner.bottomSheet.title
            - identifier: us.mappings.skinnyBanner.bottomSheet.annual.tenure
            - identifier: us.mappings.skinnyBanner.bottomSheet.monthly.tenure
            - identifier: us.mappings.skinnybanner.bottomSheet.payment.desc
            - identifier: us.mappings.skinnyBanner.bottomSheet.startTrial.cta  
      - if:
          condition: ${tenure} == 'monthly'
          then:
            - verifyIdentifier:
                present: 
                - identifier: us.mappings.skinnyBanner.bottomSheet.monthly.tenure  
                - identifier: us.mappings.skinnyBanner.bottomSheet.startTrial.cta         
            - log: Verifying Monthly trial Tenure Details
            - click: 
                identifier: us.mappings.skinnyBanner.bottomSheet.monthly.tenure
            - click: 
                identifier: us.mappings.skinnyBanner.bottomSheet.startTrial.cta
            - log: Start 30-day free trial CTA is clicked    
          else:
            - log: Verifying Annual trial tenure Details
            - verifyIdentifier:
                present: 
                - identifier: us.mappings.skinnyBanner.bottomSheet.annual.tenure
            - click: 
                identifier: us.mappings.skinnyBanner.bottomSheet.startTrial.cta
            - log: Start 30-day free trial CTA is clicked    
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.skinnybanner.bottomSheet.successMsg.container
      - verifyIdentifier:
          present:
            - identifier: us.mappings.skinnybanner.bottomSheet.successMsg.subHeading
      - log: Free Trial sign up is Succesful.                               

  - name: us.functions.skinnybanner.click.tryWalmartPlusBtn
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.browse.skinnyBanner
          then: 
            - verifyIdentifier:
                present:
                - identifier: us.mappings.browse.skinnyBanner.tryWalmartPlusBtn
            - click: 
                identifier: us.mappings.browse.skinnyBanner.tryWalmartPlusBtn
            - log: Try walmart+ link is clicked
            - sleep:
                duration: 3000
          else:
            - log: Skinny Banner is NOT displayed          

  - name: us.functions.wplus.validateWalmartRewardsFromNonCashbackStore
    platform: ios
    flow:    
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.benefitsTabWalmartRewards

  - name: us.functions.walmartplus.membership.verifyTyCasbackBanner
    platform: android
    flow:
      - scroll:
          untilIdentifier: us.mappings.wplus.TyCasbackBannerAdMessage
          direction: down
          position: center
      - sleep:
          duration: 8000
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.TryWplusCta
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.wplus.TryWplusCta
      - sleep:
          duration: 5000
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.search.rewards.verifySuccessBottomSheet
            - identifier: us.mappings.search.rewards.clickStart30DayFreetrial
      - click:
          identifier: us.mappings.search.rewards.clickStart30DayFreetrial
      - sleep:
          duration: 5000
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.welcomeToWplusText
      - click:
          identifier: us.mappings.wlus.membershipBottomsheetClose
          wait: 5000
      - executeFunction:
          name: us.functions.global.navigation.backNavigation

  - name: us.functions.wplus.validateWalmartRewardCenter.onAccountTab
    platform: android
    flow:
      - sleep:
          duration: 3000
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.wplus.seeAllWplusBenefitsButton.onAccountsTab
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.wplus.seeAllWplusBenefitsButton.onAccountsTab
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.viewRewardsCenterLink.onAccountsTab
      - log: "Able to see the SEE ALL Walmart+ Benefits Button on the ACCOUNT tab."
      - log: "Able to see the see View Rewards Center Link on the ACCOUNT tab."
      - click:
          identifier: us.mappings.wplus.seeAllWplusBenefitsButton.onAccountsTab

  - name: us.functions.wplus.validateWalmartRewardCenterFromHub
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wPlus.benifitsTabHeader
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.viewRewardsCenterButton.onBenefitsTab
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - log: "Scrolled down to see the View Rewards Center Button on Benefits tab"
      - click:
          identifier: us.mappings.wplus.viewRewardsCenterButton.onBenefitsTab
      - log: "Clicked on the View Rewards Center Button on Benefits tab"
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.WalmartRewardCenterTitle
            - identifier: us.mappings.wplus.WalmartRewardBalance
            - identifier: us.mappings.wplus.WalmartRewardEarning
      - log: "Verified the Rewards related tabs on the Your Rewards Page."

  - name: us.functions.wplus.cashbackBanner.thankYouPage   
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.cashbackBanner.thankYouPage.description
          position: center                                                                        
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cashbackBanner.thankYouPage.description
            - identifier: us.mappings.wplus.cashback.tyrWplusCta
      - click:
          identifier: us.mappings.wplus.cashback.tyrWplusCta
      - sleep:
          duration: 5000    

  - name: us.functions.wplus.cashbackBanner.startTrialMember
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.cashback.bottomSheet.container.text
          then:
            - log: Cashback bottomSheet/ splashScreen is displayed
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cashback.bottomSheet.container.text
                  - identifier: us.mappings.wplus.cashback.annual.membership.option
                  - identifier: us.mappings.wplus.cashback.monthly.membership.option
                  - identifier: us.mappings.wplus.cashback.bottomSheet.startTrial.cta
            - if:
                condition: ${Annual}
                then:
                  - log: Selecting Annual trail Plan.
                  - click:
                      identifier: us.mappings.wplus.cashback.annual.membership.option
            - if:
                condition: ${Monthly}
                then:
                  - log: Selecting Monthly trail Plan.
                  - click:
                      identifier: us.mappings.wplus.cashback.monthly.membership.option
            - click:
                identifier: us.mappings.wplus.cashback.bottomSheet.startTrial.cta
            - sleep:
                duration: 5000    
            - log: Start 30-day cashback free trial CTA is clicked.
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cashback.memberShip.enrollment.confirmationSheetDescription
                  - identifier: us.mappings.wplus.cashback.memberShip.learnMore.button
                  - identifier: us.mappings.wplus.cashback.memberShip.benefits.text
            - log: Cashback Enrollment Confirmation screen loaded
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose       
          else:
            - log: Cashback bottomSheet/ splashScreen is NOT displayed  

  - name: us.functions.walmartplus.membership.OrderConfirmationPage.verifyTyCasbackBanner
    platform: ios
    flow:
      - scroll:
          untilIdentifier: us.mappings.wplus.TyCasbackBannerAdMessage
          direction: down
          position: center
      - sleep:
          duration: 8000
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.TryWplusCta 

  - name: us.functions.walmartplus.membership.Odp.verifyCasbackBanner
    platform: ios
    flow:
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.wplus.Odp.cashBackBannerText
            - identifier: us.mappings.wplus.Odp.StartFreeTrialCta
      - click:
          identifier: us.mappings.wplus.Odp.StartFreeTrialCta

  - name: us.functions.wplus.verifyRewardCenterFromHubforExpiredMember
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wPlus.NbaCardHeader          
            - identifier: us.mappings.wPlus.benifitsTabHeader 
            - identifier: us.mappings.wplus.savingsTabMoneySavedImage
            - identifier: us.mappings.wplus.savingsTabHoursSavedImage 
            - identifier: us.mappings.wplus.WalmartRewardSectionViaHub
            - identifier: us.mappings.wplus.offerCenter
      - scroll:
          direction: down
          untilIdentifier: us.mappings.churnedExpired.ReactivateWplusButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.churnedExpired.ReactivateWplusButton
      - sleep:
          duration: 3000
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.WalmartRewardSectionViaHub
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.wplus.validateWalmartRewardCenterViaHub   

  - name: us.functions.wplus.verifyRewardCenterFromHubforExpiredMember
    platform: android
    flow:
      - verifyIdentifier:
          present:
           # - identifier: us.mappings.wplus.NbaCardHeading
           # - identifier: us.mappings.wplus.NbaCardHowWalmartCashWorks
            - identifier: us.mappings.wplus.savingsModuleMoney
            - identifier: us.mappings.wplus.savingsModuleTime
            - identifier: us.mappings.search.rewardsTitle
            - identifier: us.mappings.wplus.reactivationCard
            - identifier: us.mapppings.wplus.account.wPlusBenefitsButton
            - identifier: us.mapppings.wplus.saveAndEarn
            - identifier: us.mappings.wplus.viewRewardsCenterLink
      - click:
          identifier: us.mappings.wplus.viewRewardsCenterLink
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.WalmartRewardCenterTitle
            - identifier: us.mappings.wplus.WalmartRewardBalance
            - identifier: us.mappings.wplus.WalmartRewardEarning
      - log: "Verified the Rewards related tabs on the Your Rewards Page."            


  - name: us.functions.wplus.benefitsScreen.viewAllMemberBenefitsAndOffersTile
    platform: ios
    flow:
      - scroll:
          untilIdentifier: us.mappings.wplus.benefits.memberBenefitiOSOnlyTile
          direction: up
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefits.memberBenefitiOSOnlyTile.header
            - identifier: us.mappings.wplus.benefits.memberBenefitiOSOnlyTile.subtitileLabel
            - identifier: us.mappings.wplus.benefits.viewAllMemberBenefitsAndOffersSection
            - identifier: us.mappings.wplus.benefits.viewAllMemberBenefitsAndOffersLabel
            - identifier: us.mappings.wplus.benefits.viewAllMemberBenefitsAndOffersLink
      - log: "Verified View all member benefits and offers section displayed on Benefits screen header section"


  - name: us.functions.wplus.benefitsScreen.clickViewAllMemberBenefitsAndVerifyParamount
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.benefitsTabSelected
          then:
            - executeFunction:
                name: us.functions.wplus.account.NavigateToBenefitsTab
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.benefits.viewAllMemberBenefitsAndOffersLinkbtn
            - name: direction
              string: down
      - click:
          identifier: us.mappings.wplus.benefits.viewAllMemberBenefitsAndOffersLinkbtn
      - log: "Clicked on viewAllMemberBenefitsAndOffers Link"
      - sleep:
          duration: 30000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefits.webPageTitle
      - log: "Navigated to Mobile Web Page Succesfully"
      
      # - scroll:
      #     untilIdentifier: us.mappings.wplus.benefits.webPageGetParamount
      #     direction: down
      #     position: center
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.benefits.webPageGetParamount

      #- log: "Verified the Web Page Navigation with Get Paramount+ Tile"


  - name: us.functions.wplus.benefitsScreen.verifyExploreAllYourExcitingWplusBenefitsTile
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.benefits.viewAllBenefits.tile ##us.mappings.wplus.benefits.exploreAllYourExcitingWplusBenefitsSection Delete this once hub redesign is enabled 100%
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - log: "Verified Explore all your exciting W+ benefits section displayed on Benefits screen footer section"     
      - verifyIdentifier:
          present:
            - identifier: us.mappings.benefits.viewAllBenefits.tile
     

  - name: us.functions.wplus.account.verifyEarnedBadgesFromBenefitsPage
    platform: ios
    flow:
    # Delete this once Hub redesign is enabled 100%
    #   - verifyIdentifier:
    #       present:
    #         - identifier: us.mappings.wplus.savingsTab
    #   - click:
    #       identifier: us.mappings.wplus.savingsTab
    #      wait: 5000
    # #  - executeFunction:
    #       name: us.functions.utils.scrollIfNotVisible
    #       params:
    #         - name: identifier
    #           string: us.mappings.wplus.badges.verifyEarnedFreeDeliveryBadge
    #         - name: direction
    #           string: down
    #         - name: scrollPosition
    #           string: center 

      - scroll:
          untilIdentifier: us.mappings.wplus.badges.verifyEarnedFreeDeliveryBadge
          direction: down
          position: center
      - log: Validating the Earned FDFS badge
      - click:
          identifier: us.mappings.wplus.badges.verifyEarnedFreeDeliveryBadge
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.badges.verifyFDFSSuccessMessage
              contains: Way to go! You got your free delivery badge
      - click:
         identifier: us.mapping.wplus.badges.closeBottomSheetMessage 
      - log: Validating the Earned FSNM badge
      - click: 
          identifier: us.mappings.wplus.badges.verifyEarnedFreeShippingBadge
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.badges.verifyFSNMSuccessMessage
              contains: Way to go! You got your free shipping badge
      - click:
         identifier: us.mapping.wplus.badges.closeBottomSheetMessage
      
      # - log: Validating the Earned Reward badge
      # - click: 
      #     identifier: us.mappings.wplus.badges.verifyEarnedRewardsBadge
      # - verifyIdentifier:
      #     label:
      #       - identifier: us.mappings.wplus.badges.verifyRewardsSuccessMessage
      #         contains: Way to go! You got your Walmart Rewards badge
      # - click:
      #    identifier: us.mapping.wplus.badges.closeBottomSheetMessage

  - name: us.functions.wplus.account.verifyUnearnedBadgesFromBenefitsPage
    platform: ios
    flow:
      - log: Validating the unearned Fuel badge
      - click:
          identifier: us.mappings.wplus.badges.verifyFuelBadge
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.badges.verifyUnearnedFuelMessage
              contains: Get your fuel badge
      - click:
         identifier: us.mapping.wplus.badges.closeBottomSheetMessage
      - if:
          identifier:
            visible:
              - identifier: us.mappings.wplus.badges.verifyScanAndGoBadge
                value: true
          then:
            - log: Scan and Go badge visible
          else:
            - click: 
                identifier: us.mappings.wplus.badges.scrollBadgesCrousel  
      
      - log: Validating the unearned Scan and Go badge
      - click:
          identifier: us.mappings.wplus.badges.verifyScanAndGoBadge
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.badges.verifyUnearnedScanAndGoMessage
              contains: Get your scan & go badge
      - click:
         identifier: us.mapping.wplus.badges.closeBottomSheetMessage

  - name: us.functions.wplus.account.verifyEarnedBadgesFromBenefitsPage
    platform: android
    flow:
      # Remove this once benefits hub is enabled 100%
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.savingsTab
      # - click:
      #     identifier: us.mappings.wplus.savingsTab
      #     wait: 5000
      - scroll:
          untilIdentifier: us.mappings.wplus.badges.verifyEarnedFreeDeliveryBadge
          direction: down
          position: center
      - log: Validating the Earned FDFS badge
      - if: 
          identifier: 
            text:
              - identifier: us.mappings.wplus.badges.verifyEarnedFreeDeliveryBadge
                contains: Free delivery from store
          then:
            - click:
                identifier: us.mappings.wplus.badges.verifyEarnedFreeDeliveryBadge
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.badges.verifyBadgeEarnedSuccessMessage
              contains: Way to go! You got your free delivery badge
      - click:
         identifier: us.mapping.wplus.badges.closeBottomSheetMessage
      
        
      - log: Validating the Earned FSNM badge
      - if: 
          identifier: 
            text:
              - identifier: us.mappings.wplus.badges.verifyEarnedFreeShippingBadge
                contains: Free shipping no minimum
          then:
            - click:
                identifier: us.mappings.wplus.badges.verifyEarnedFreeShippingBadge
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.badges.verifyBadgeEarnedSuccessMessage
              contains: Way to go! You got your free shipping badge
      - click:
         identifier: us.mapping.wplus.badges.closeBottomSheetMessage
      
      #- log: Validating the Earned Reward badge
      # - if: 
      #     identifier: 
      #       text:
      #         - identifier: us.mappings.wplus.badges.verifyEarnedRewardsBadge
      #           contains: Walmart Rewards
      #     then:
      #       - click:
      #           identifier: us.mappings.wplus.badges.verifyEarnedRewardsBadge
      #       - verifyIdentifier:
      #            text:
      #             - identifier: us.mappings.wplus.badges.verifyBadgeEarnedSuccessMessage
      #               contains: Way to go! You got your Walmart Rewards badge
      #       - click:
      #           identifier: us.mapping.wplus.badges.closeBottomSheetMessage
      - click:
          identifier: us.mappings.wplus.badges.scrollBadgesCrousel

  - name: us.functions.wplus.account.verifyUnearnedBadgesFromBenefitsPage
    platform: android
    flow:
      - log: Validating the unearned Fuel badge
      - if: 
          identifier: 
            text:
              - identifier: us.mappings.wplus.badges.verifyFuelBadge
                contains: Try fuel discount
          then:
            - click:
                identifier: us.mappings.wplus.badges.verifyFuelBadge
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.badges.verifyUnearnedBadgeMessage
              contains: Get your fuel badge
      - click:
         identifier: us.mapping.wplus.badges.closeBottomSheetMessage
      
      - log: Validating the unearned Scan and Go badge
      - if: 
          identifier: 
            text:
              - identifier: us.mappings.wplus.badges.verifyScanAndGoBadge
                contains: Try scan & go
          then:
            - click:
                identifier: us.mappings.wplus.badges.verifyScanAndGoBadge
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.badges.verifyUnearnedBadgeMessage
              contains: Get your scan & go badge
      - click:
         identifier: us.mapping.wplus.badges.closeBottomSheetMessage
  
  - name: us.functions.wplus.verifyOptInDetails.reviewOrderScreen
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.wplus.handle.SubstitutionPreferencePopup  
      - scroll:
          untilIdentifier: us.mappings.wplus.reviewOrder.optIn.module
          direction: down
          position: center
      - log: "W+ optin module is displayed"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.reviewOrder.optIn.selectedPlan
            # - identifier: us.mappings.wplus.reviewOrder.optIn.freeTrialLabel
            - identifier: us.mappings.wplus.reviewOrder.optInPlanValue
            - identifier: us.mappings.wplus.reviewOrder.optIn.editLink
#            - identifier: us.mappings.wplus.reviewOrder.signUpCardDetails
            - identifier: us.mappings.wplus.reviewOrder.cardDetailsLink
            - identifier: us.mappings.wplussignup.reviewOrder.paymentDateLabel

  - name: us.functions.wplus.removetrial.reviewOrderScreen
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.wplus.reviewOrder.optIn.module
            - name: direction
              string: down 
      - log: "W+ optin module is displayed"
      - click:
          identifier: us.mappings.wplus.reviewOrder.optIn.editLink
      - click:
          identifier: us.mappings.wplus.reviewOrder.removetrialfromOrderCta

  - name: us.functions.wplus.removetrial.reviewOrderScreen
    platform: android
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.wplus.reviewOrder.editPlan
          position: center
      - click:
          identifier: us.mappings.wplus.reviewOrder.editPlan
      - sleep:
          duration: 1000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.reviewOrder.removetrialfromOrderCta
          position: center
      - click:
          identifier: us.mappings.wplus.reviewOrder.removetrialfromOrderCta

  - name: us.functions.wplus.removeAddress
    platform: android
    flow:
      - click:
          identifier: us.mappings.global.navigation.backNavigation
      - click:
          identifier: us.mappings.global.reviewOrder.leaveAnyway
      - click:
          identifier: us.mappings.global.navigation.backNavigation
      - click:
          identifier: us.mappings.tabBar.account
      - scroll:
          direction: down
          untilIdentifier: us.mappings.account.AddressMenu
          position: center
      - click:
          identifier: us.mappings.account.AddressMenu
      - click:
          identifier: us.mappings.global.account.addresses.removeAddress
      - click: 
          identifier: us.mappings.global.account.addresses.removeAddress.confirmAddressRemoval
      

  - name: us.functions.wplus.reviewOrderScreen.payPalvalidation
    platform: android
    flow:
      
      - click:
          identifier: us.mappings.wplus.reviewOrder.changeCardLink
      - scroll:
          direction: down
      - click:
          identifier: us.mappings.wplus.reviewOrder.payPalPaymentmethod

      - verifyIdentifier:
            present:
              - identifier: us.mappings.wplus.reviewOrder.paywithpayPaltext
              - identifier: us.mappings.wplus.reviewOrder.payPalusername

      - click:
          identifier:  us.mappings.wplus.reviewOrder.payPaliconclose

  - name: us.functions.wplus.reviewOrderScreen.payPalvalidation
    platform: ios
    flow:
      
      - click:
          identifier: us.mappings.wplus.reviewOrder.cardDetailsLink
      - scroll:
          direction: down
      - click:
          identifier: us.mappings.wallet.paypalButton

      - click:
          identifier: us.mappings.wallet.paypalConfirmButton  

      - if:
          identifier:
            present:
              - identifier: us.mappings.paypalWebView.acceptCookies
          then:
            - click:
                identifier: us.mappings.paypalWebView.acceptCookies
      - if:
          identifier:
            present:
              - identifier: us.mappings.paypal.popupContinueButton 
          then:
            - click:
                identifier: us.mappings.paypal.popupContinueButton 

      - verifyIdentifier: 
            present:
              - identifier: us.mappings.wplus.reviewOrder.paywithpayPaltext
              - identifier: us.mappings.paypalWebView.emailTextField
      - click:
          identifier:  us.mappings.wplus.reviewOrder.cancelpayPalpage

      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.reviewOrder.payPaliconclose 
          then:
            - click:
                identifier: us.mappings.wplus.reviewOrder.payPaliconclose 

            
  - name: us.functions.wplus.reviewOrder.verifyWplusOptInModule       
    platform: android
    flow:
      - log: Verify W+ opt In module details after opting in at checkout
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.reviewOrder.optInModule
          position: center
      - if:
          identifier:
            present: 
              - identifier: us.mappings.wplus.reviewOrder.optInModule
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.reviewOrder.planDetails
                  - identifier: us.mappings.wplus.reviewOrder.editPlan
                  - identifier: us.mappings.wplus.reviewOrder.signUp.cardDetails
                  - identifier: us.mappings.wplus.reviewOrder.changeCardLink
          
  - name: us.functions.wplus.validateCashoutOptionInRewardsCenterPage
    platform: ios
    flow:
      # Navigate to cash center
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: us.data.cashCenter.deeplink
      - sleep:
          duration: 5000
      # Scroll down to the cash out section
      - scroll:
          direction: down
          untilIdentifier: us.mappings.popularServices.pharmacy.pharmacyServices
      - click:
          identifier: us.mappings.wplus.rewardsCenter.cashoutOption
          wait: 5000

  - name: us.functions.wplus.validateCashoutOptionInRewardsCenterPage
    platform: android
    flow:
      # Navigate to cash center
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: us.data.cashCenter.deeplink
      - sleep:
          duration: 5000
      - scroll:
          direction: down
          position: center
          untilIdentifier: us.mappings.wplus.cashback.rewardCenter.verifyRewardCenterTool
      - click:
          identifier: us.mappings.wplus.rewardsCenter.cashoutOption
          wait: 5000

  - name: us.functions.wplus.verifyCashoutInStorePage
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.cashoutInStoreScreenHeader
            - identifier: us.mapppings.wplus.cashoutInStoreScreenSubHeader
            - identifier: us.mappings.wplus.cashoutMinimumBalanceText
            - identifier: us.mapppings.wplus.showCashOutBarCodeButton
      - click:
          identifier: us.mappings.wplus.cashoutAgreementCheckbox
          wait: 1000
      - click:
          identifier: us.mappings.wplus.cashoutBanksCheckbox
          wait: 1000
      - click:
          identifier: us.mapppings.wplus.showCashOutBarCodeButton
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPageInWalmart
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.barCodeImage
            - identifier: us.mapppings.wplus.barCodeReferenceNumber
            - identifier: us.mappings.wplus.barCodeExpiryDate

  - name: us.functions.wplus.verifyCashoutInStorePage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.cashoutInStoreScreenHeader
            - identifier: us.mapppings.wplus.cashoutInStoreScreenSubHeader
            - identifier: us.mappings.wplus.cashoutMinimumBalanceText
            - identifier: us.mapppings.wplus.showCashOutBarCodeButton
      - click:
          identifier: us.mappings.wplus.cashoutAgreementCheckbox
          wait: 1000
      - click:
          identifier: us.mappings.wplus.cashoutBanksCheckbox
          wait: 1000
      - click:
          identifier: us.mapppings.wplus.showCashOutBarCodeButton
          wait: 5000
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPageInWalmart
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.barCodeImage
            - identifier: us.mapppings.wplus.barCodeReferenceNumber
            - identifier: us.mappings.wplus.barCodeExpiryDate


  #Add new card, verify edit payment in main payment method, Verify change is present in w+ section and signup paypal for w+
  - name: us.functions.wplus.addNewCardWithPayPalPayment
    platform: ios
    flow:
      - sleep:
          duration: 2000
      - click:
          identifier: us.mappings.reviewOrder.addNewPayment
          wait: 2000
      - executeFunction:
          name: us.functions.checkout.newpaymentMethod.addCardDetails 
      - log: New Credit card added to cart   
      - sleep:  
          duration: 5000
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.capOne.changePaymentsButton     
      - log: Card Edit Payment is present in payment method section
      - verifyIdentifier:
          present: 
            - identifier: us.mapppings.wplus. Change
      - log: Paypal Change link is present in w+ section


  - name: us.functions.wplus.verifySplitPaymentOnReviewOrder
    platform: ios
    flow:
      - verifyIdentifier:
          label:   
            - identifier: us.mappings.wplus.verifyVisaCardForOrder
              contains: Visa
      - log: Visa is showing as Main (Wallet) Payment
      - verifyIdentifier:
          label:   
            - identifier: us.mappings.reviewOrder.walletPayment.payPalOtpion
              contains: Pay with Paypal
      - log: PayPal is showing as option for Main Payment
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.wplusPayment.payPalOtpion
      - log: Paypal is one payment method for WPlus Membership

#Add new card, verify edit payment in main payment method, Verify change is present in w+ section and signup paypal for w+
  - name: us.functions.wplus.addNewCardAndSignUpPayPal
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.paymentMethod.addPayment.overlay.cardNumberField
          position: center
      - executeFunction:
          name: us.functions.account.paymentMethod.addCardDetails
      - log: New Credit card added to cart   
      - sleep:  
          duration: 10000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.paymentMethod.changeLink  #Edit payment
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.reviewOrder.paymentMethod.changeLink    
      - log: Edit Payment is present in Cart payment section  
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.reviewOrder.changeCardLink
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.reviewOrder.changeCardLink
      - log: Change link is present in w+ section  
      - sleep:  
          duration: 5000
      - if:
          identifier:
            present:  
              - identifier: us.mappings.wplus.reviewOrder.changeCardLink            
          then:
            - click:
                identifier: us.mappings.wplus.reviewOrder.changeCardLink
          else:
            - log: "Change Payment link is not present in W+ section"
      - if:
          identifier:
            present: 
              - identifier: us.mappings.wallet.paypalButton 
          then:
            - click:
                identifier: us.mappings.wallet.paypalButton  
            - executeFunction:
                name: us.functions.paypal.logInPage       
            - click:
                identifier: us.mappings.amend.cc.confirmbutton
            - sleep: 
                duration: 3000
          else:
            - log: "Paypal payment is not present in W+ section"

  #verify split apyment on review order screen
  - name: us.functions.wplus.verifySplitPaymentOnReviewOrder
    platform: android
    flow:
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.wplus.verifyVisaCardForOrder
      - log: Visa is added as payment for Order
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.verifyPaypalForW+
      - log: Paypal is added as payment for W+


  - name: us.functions.wplus.savingsScreen.viewLimitedTimeOffer
    platform: ios
    flow:
      - scroll:
          untilIdentifier: us.mappings.wplus.viewLimitedTimeOfferTitle
          direction: down
          position: center
      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: us.mappings.wplus.viewLimitedTimeOfferTitle
      - log: "Verified LTO on Savings screen Under W+ Benifits section"

  - name: us.functions.wplus.savingsScreen.clickLTOfferAndValidateCode
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.viewLimitedTimeOfferSavingsTab
      - log: "Clicked on LOT offer"
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.savings.LTORedeemOfferCode
          then: 
            - verifyIdentifier:
                timeout: 40000
                present:
                  - identifier: us.mappings.wplus.savings.LTORedeemOffer
                  - identifier: us.mappings.wplus.savings.LTORedeemOfferCode
                  - identifier: us.mappings.wplus.savings.LTORedeemOfferCodeCTA
           # - click: Commeting out webpage validation
           #     identifier: us.mappings.wplus.savings.LTORedeemOfferCodeCTA
           # - log: "Navigated to Mobile Web Page Succesfully"
          else: 
            - verifyIdentifier:
                timeout: 40000
                present:
                  - identifier: us.mappings.wplus.savings.LTORedeemOfferCTA

  - name: us.functions.wplus.savingsScreen.viewLimitedTimeOffer
    platform: android
    flow:
      - scroll:
          untilIdentifier: us.mappings.wplus.viewLimitedTimeOfferSavingsTab
          direction: down
          position: center
      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: us.mappings.wplus.viewLimitedTimeOfferSavingsTab
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.limitedTimeSavingsTabOffers
      - log: "Verified LTO on Savings screen Under W+ Benifits section"

  - name: us.functions.wplus.savingsScreen.clickLTOfferAndValidateCode
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.viewLimitedTimeOfferSavingsTab
      - log: "Clicked on LOT offer"
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.savings.LTORedeemOfferCode
          then:    
            - verifyIdentifier:
                timeout: 40000
                present:
                  - identifier: us.mappings.wplus.savings.LTORedeemOfferCode
                  - identifier: us.mappings.wplus.savings.LTORedeemOfferCodeCTA
            - click:
                identifier: us.mappings.wplus.savings.LTORedeemOfferCodeCTA 
            - log: "Navigated to Mobile Web Page Succesfully"
            - goBack: true
          else: 
            - verifyIdentifier:
                timeout: 40000
                present:
                  - identifier: us.mappings.wplus.savings.LTORedeemOfferCTA          


  - name: us.functions.account.wplusVerify
    platform: android
    flow:
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.wplus.walmartPlusLogo
      - executeFunction:
          name: us.functions.global.navigation.backNavigation

  - name: us.functions.cart.wplus.reviewWpackagescreen
    platform: android
    flow:
      - verifyIdentifier:
          present:             
            - identifier: us.mappings.services.walmartPlusMembershipLogo
            - identifier: us.mappings.services.walmartPlusAnnualmembership
            - identifier: us.mappings.services.walmartPlusMonthlymembership
            - identifier: us.mappings.services.walmartPlusMemberconfirmPlanButton

      # Verify Annual Membership radio button selected
      - verifyIdentifier:
          selected:
            - identifier: us.mappings.services.walmartPlusMemberannualmembershipradiobutton
              value: true
      #Click I agree        
      - verifyIdentifier:
              present:
                - identifier: us.mappings.reviewOrder.splash.legalCheck          
      - click:
          identifier: us.mappings.reviewOrder.splash.legalCheck 
      #Click Confirm Plan        
      - verifyIdentifier:
              present:
                - identifier: us.mappings.services.walmartPlusMemberconfirmPlanButton            
      - click:
          identifier: us.mappings.services.walmartPlusMemberconfirmPlanButton       

  - name: us.functions.wplus.reviewOrder.verifyannualmembership
    platform: android
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.services.walmartPlusMembershipannualdetailsreview
      - verifyIdentifier:
                text:
                  - identifier: us.mappings.services.walmartPlusMembershipannualdetailsreview
                    contains :  Annual Plan      

  - name: us.functions.wplus.reviewOrder.bottomSheetValidation
    platform: android
    flow:
      - sleep:
          duration: 7000       
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.walmartMembershipSplashTitle
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.walmartPlusAnnualPlan
      - click:
          identifier: us.mappings.reviewOrder.walmartPlusAnnualPlan
      - log: Annual Plan is selected
      - sleep:
          duration: 2000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.splash.confirmBtn
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.splash.legalCheck
          then:
            - click:
                identifier: us.mappings.reviewOrder.splash.legalCheck           
      - click:
          identifier:  us.mappings.reviewOrder.splash.confirmBtn
      - sleep:
          duration: 2000
          
  - name: us.functions.wplus.checkout.validateEditLinkWplus
    platform: android
    flow:
      - scroll:
          untilIdentifier: us.mappings.checkout.walmartPlusLogo
          direction: down
          position: center
      - sleep:
          duration: 2000
      - click:
          identifier: us.mappings.wplus.reviewOrder.editPlan
      - sleep:
          duration: 2000
      - scroll:
          untilIdentifier: us.mappings.reviewOrder.splash.confirmBtn
          direction: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.splash.confirmBtn
            - identifier: us.mappings.checkout.walmartPlusRemovePlanCTA
      - sleep:
          duration: 5000                 
      - click:
          identifier: us.mappings.checkout.walmartPlusRemovePlanCTA
      - sleep:
          duration: 5000
      - scroll:
          untilIdentifier: us.mappings.reviewOrder.subTotalLabel
          direction: down
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.thresholdText

      - log: min order $6.99 badge is present          
 
  #Capture user savings details
  - name: us.functions.wplus.account.captureSavingsDetails 
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 4000
          present:
            - identifier: us.mappings.account.entryTileMoneySaved
            - identifier: us.mappings.account.entryTileTimeSaved

      - getString: 
          identifier: us.mappings.account.entryTileMoneySaved
          attribute: label
          storeIn: savedMoney
      - log: $savedMoney

      - getString: 
          identifier: us.mappings.account.entryTileTimeSaved
          attribute: label
          storeIn: savedTime 
      - log: $savedTime  
              

  # Navigate to updated variantB W+Plus benefits on cancel membership confirmation page on IOS
  - name: us.functions.wplus.cancelConfirmation.verifyVariantBCancelFreeTrialOrCancelWalmartPlusDetails
    platform: ios
    flow:
      - if:
          condition: ${membershipType} == 'extendedTrial'
          then:
            - verifyIdentifier:
                label:
                  - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusHeader
                    contains: Need more time to explore what W+ has to offer?
          else:
            - verifyIdentifier:
                label:
                  - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlusHeader
                    contains: dont miss out!
      -  scroll:
           direction: down
      - verifyIdentifier:
          label:
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlus.variantBHeaderFirstName
              contains: test
      - verifyIdentifier:
          label:
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlus.variantBBenefitsViewSavedAmount
              contains: Save up to $1,300
      - verifyIdentifier:
          label:
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlus.variantBBenefitsViewSavedHours
              contains: Save up to 90 hours
      - verifyIdentifier:
          label:
            - identifier: us.mapppings.wplus.cancelConfirmation.cancelFreeTrialOrCancelWalmartPlus.variantBDaysLeft
              contains: You have 0 days left until your next billing cycle                         
              
  # Opt-out W+ from cart screen
  - name: us.functions.wplus.cart.optOutWPlusMembership  
    platform: ios
    flow:
      - scroll:
          untilIdentifier: us.mappings.cart.wplusSignupBanner
          direction: up
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.wplusOptInText
      - click:
          identifier: us.mappings.cart.optInCheckbox

      - log: Verify if banner is updated back to sign-up message    
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.cart.wantToSkipDeliveryFeeswithW+logo
            - identifier: us.mappings.cart.wplusOptOutText

   # Validate if delivery and shipping fee are re-applied
  - name: us.functions.wplus.cart.optOutWPlusMembershipCharges
    platform: ios
    flow:
            - log: Opting out of wplus membership
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier: us.mappings.cart.wantToSkipDeliveryFeeswithW+logo
                  - identifier: us.mappings.cart.wplusOptOutText
            - log: Validate if delivery and shipping fee are re-applied      
            - executeFunction:
                name: us.functions.wplus.cart.charges-NonWplus-BelowOrderMinimum
            - getString: 
                identifier: us.mappings.cart.belowMinimumOrderText.leftLabel
                attribute: label
                storeIn: minOrderLeftLabel  
            - getString: 
                identifier: us.mappings.cart.belowMinimumOrderText.rightLabel
                attribute: label
                storeIn: minOrderRightLabel                  
            - log: $minOrderLeftLabel $minOrderRightLabel
         
  # Shortcut opt in on cart page
  - name: us.functions.wplus.cart.shortcutOptIn
    platform: android
    flow:
      - executeFunction:
          name: us.functions.wplus.cart.verifyShortcutOptOut
#      - executeFunction:
#          name: us.functions.wplus.cart.verifyBookSlotOptOut
#      - executeFunction:
#          name: us.functions.wplus.cart.clickShortcut
#      - executeFunction:
#          name: us.functions.wplus.cart.verifyShortcutOptIn
#      - executeFunction:
#          name: us.functions.wplus.cart.verifyBookSlotOptIn

  # Verify shortcut opt out text
  - name: us.functions.wplus.cart.verifyShortcutOptOut
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cart.shortcutBanner
          text:
            - identifier: us.mappings.wplus.cart.shortcutTitle
              contains: Save up to
          notPresent:
            - identifier: us.mappings.wplus.cart.shortcutSubtextOptIn
      - click:
          identifier: us.mappings.wplus.cart.shortcutTitle
          wait: 2000

  # Verify shortcut opt in text
  - name: us.functions.wplus.cart.verifyShortcutOptIn
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.cart.shortcutSubtextOptIn
              contains: You get 30 days free! Choose a plan at checkout.

  # Verify book slot opt out price
  - name: us.functions.wplus.cart.verifyBookSlotOptOut
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: us.mappings.wplus.cart.bookSlotPrice
              contains: $

  # Verify book slot opt in price
  - name: us.functions.wplus.cart.verifyBookSlotOptIn
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cart.bookSlotPriceOptIn
            - identifier: us.mappings.wplus.cart.bookSlotW+Logo

  # Click the shortcut checkbox
  - name: us.functions.wplus.cart.clickShortcut
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.cart.shortcutTitle
          wait: 2000

  # Shortcut opt in on cart page
  - name: us.functions.wplus.cart.shortcutOptIn
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.cart.scrollToTopOfCart
      - executeFunction:
          name: us.functions.wplus.cart.verifyShortcutOptOut
      - executeFunction:
          name: us.functions.wplus.cart.verifyBookSlotOptOut
      - executeFunction:
          name: us.functions.wplus.cart.clickShortcut
#      - executeFunction:
#          name: us.functions.wplus.cart.verifyShortcutOptIn
#      - executeFunction:
#          name: us.functions.wplus.cart.verifyBookSlotOptIn

  # Verify shortcut opt out text
  - name: us.functions.wplus.cart.verifyShortcutOptOut
    platform: ios
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.cart.shortcutTitle
              contains: save on 
          notPresent:
            - identifier: us.mappings.wplus.cart.shortcutSubtextOptIn

  # Verify shortcut opt in text
  - name: us.functions.wplus.cart.verifyShortcutOptIn
    platform: ios
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mappings.wplus.cart.shortcutSubtextOptIn
              contains: You get 30 days free! Choose a plan at checkout.
          present:
            - identifier: us.mappings.wplus.cart.shortcutTitle

  # Verify book slot opt out price
  - name: us.functions.wplus.cart.verifyBookSlotOptOut
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cart.bookSlotPrice

  # Verify book slot opt in price
  - name: us.functions.wplus.cart.verifyBookSlotOptIn
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cart.bookSlotPriceOptIn
            - identifier: us.mappings.wplus.cart.bookSlotW+Logo

  # Click the shortcut checkbox
  - name: us.functions.wplus.cart.clickShortcut
    platform: ios
    flow:
      - click:
          identifier: us.functions.wplus.cart.optInW+OnShortcut
          wait: 3000

  # Reserve a time
  - name:  us.functions.wplus.cart.selectBookSlot
    platform: ios
    flow:
      - click:
          identifier: us.mappings.gic.reserve.timeslot.slot1
          wait: 3000


  - name: us.functions.wplus.verifySelectedCard
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.wplus.savedCard
      - log: "Changed Card successfully"

  - name: us.functions.wplus.changeCardOnSplashScreen
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.change
          then:
            - click:
                identifier: us.mappings.wplus.change
            - sleep:
                duration: 1000

  - name: us.functions.wplus.changeCardOnSplashScreen
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.change
          then:
            - click:
                identifier: us.mappings.wplus.change
            - sleep:
                duration: 1000

  - name: us.functions.wplus.changeCard
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.change
          then:
            - click:
                identifier: us.mappings.wplus.change
            - sleep:
                duration: 1000
      - verifyIdentifier:
          timeout: 1000
          present:
            - identifier: us.mappings.wplus.changePayment
      - click:
          identifier: us.mappings.wplus.changePayment
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.changeCard
      - click:
          identifier: us.mappings.wplus.changeCard
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cardSelection
      - click:
          identifier: us.mappings.wplus.cardSelection
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.wplus.saveSelectedCard
      - click:
          identifier: us.mappings.wplus.saveSelectedCard
      - sleep:
          duration: 3000
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.wplus.cardNewSelection
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.wplus.close
      - sleep:
          duration: 3000
  
  - name: us.functions.wplus.addNewPaymentMethodOnSplashScreen
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.wplus.addNewPaymentMethodOnSplashScreen
      - click:
          identifier: us.mappings.wplus.addNewPaymentMethodOnSplashScreen

  - name: us.functions.wplus.addNewPaymentMethodOnSplashScreen
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.wplus.addNewPaymentMethodOnSplashScreen
      - click:
          identifier: us.mappings.wplus.addNewPaymentMethodOnSplashScreen

  - name:  us.functions.wplus.cardAdded
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cardAdded

  - name:  us.functions.wplus.newCardAdded
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cardNewSelection

  - name:  us.functions.wplus.cardAdded
    platform: android
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cardAdded

  - name:  us.functions.wplus.newCardAdded
    platform: android
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.cardNewSelection

  # Verify the clipping component on item carousel
  - name: us.functions.wplus.verifyClippingComponent
    platform: android
    flow:
      - try:
          flow:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.search.rewardsCheckBox
                position: center
            - verifyIdentifier:
                present:
                  - identifier: us.mapping.account.verifyAddButton
          catch:
            flow:
              - scroll:
                  direction: up
                  untilIdentifier: us.mappings.search.rewardsAddedItem
                  position: center
              - verifyIdentifier:
                  present:
                    - identifier: us.mapping.account.verifyAddButton

  # Verify the clipping component on item carousel
  - name: us.functions.wplus.verifyClippingComponent
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.search.rewardsClippingComponent
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.search.rewardsClippingComponent           

  - name: us.functions.wplus.nonMemberToTrialZeroAuth
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.signup.trywalmartplusforFree
          then:
            - log: "tryWalmartPlus button present as expected"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.mlp.walmartplusLogo
            - click:
                identifier: us.mappings.wplus.signup.trywalmartplusforFree
                wait: 10000
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Try Walmart Plus for free button not displayed as expected"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.signup.trywalmartplusforFree
      #       - identifier: us.mappings.wplus.mlp.walmartplusLogo
      # - click:
      #     identifier: us.mappings.wplus.signup.trywalmartplusforFree
      #     wait: 10000
      - verifyIdentifier:
          present:
            - identifier: us.mapppings.wplus.rxForLess.unlockRxForLessText
            - identifier: us.mappings.wplus.annualTenurePlan 
#            - identifier: us.mappings.wplus.monthlyTenurePlan (only annual tenure is display in that page no mnthly plan are displaying)
            - identifier: us.mappings.paymentMethod.addPayment.overlay.title
            - identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
      - verifyIdentifier: 
          timeout: 10000
          present: 
            - identifier: us.mappings.wplus.annualTenurePlan
      - if: 
          condition: ${tenure} == 'annual'
          then:
            - click: 
                identifier: us.mappings.wplus.annualTenurePlan
            - log: 'Annual Plan selected'
          else:
            - click: 
                identifier: us.mappings.wplus.monthlyTenurePlan
            - log: 'Monthly Plan selected' 

      - verifyIdentifier:
          present:
            - identifier: us.mappings.paymentMethod.addPayment.overlay.title

      - click:
          identifier: us.mappings.paymentMethod.addPayment.overlay.title
          wait: 8000

      - if:
          identifier:
            present:
              - identifier: us.mappings.paymentMethod.addPaymentButton
          then:
            - click:
                identifier: us.mappings.paymentMethod.addPaymentButton
      # - click:
      #     identifier: us.mappings.paymentMethod.addPayment.overlay.addCardButton
      #     wait: 8000
      - executeFunction:
          #name: us.functions.account.paymentMethod.addCardDetailsAndAddress
          name: us.functions.account.paymentMethod.addCardDetailsAndAddressZeroAuth
          params:
            - name: firstName
              string: us.data.flow005.payment.firstName
            - name: lastName
              string: us.data.flow005.payment.lastName
            - name: number
              string: us.data.flow005.payment.creditCard
            - name: expirationMonth
              string: us.data.flow005.payment.expirationMonth
            - name: expirationYear
              string: us.data.flow005.payment.expirationYear
            - name: cvv
              string: us.data.flow005.payment.cvv
            - name: streetAddress
              string: us.data.flow005.streetAddress
            - name: city
              string: us.data.flow005.city
            - name: state
              string: us.data.flow005.state
            - name: zipcode
              string: us.data.flow005.zipcode
            - name: phoneNumber
              string: us.data.flow005.phoneNumber

      - click:
          identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
          wait: 8000

      #Error Msg TBD
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.switchToOriginalApp.startShopping
          then:
            - click:
                identifier: us.mappings.wlus.switchToOriginalApp.startShopping
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.rxForLess.trialToPaidBottomSheet.walmartPlusLogoBlueLogo
            - identifier: us.mappings.wplus.membershipBottomsheetTitle
            - identifier: us.mappings.wplus.walmartPlusFreeBenefitUntil
            - identifier: us.mappings.wplus.startUsingwplusBenefitsButton
            - identifier: us.mappings.wplus.walmartPlusEnableNotificationsToggle 
            - identifier: us.mappings.wplus.walmartPlusMemberShipNotificationBannerMainLabel
            - identifier: us.mappings.wplus.walmartPlusMemberShipNotificationBannerSecondaryLabel
            - identifier: us.mappings.wlus.membershipBottomsheetClose
      - click:
          # identifier: us.mappings.wplus.signup.closeButton        
          identifier: us.mappings.wlus.membershipBottomsheetClose

  - name: us.functions.wplus.benefitsScreen.paramountTile
    platform: android
    flow:

      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.benefits.paramountTile.benefitImage
          position: center

      # - executeFunction:
      #     name: us.functions.utils.scrollIfNotVisible
      #     params:
      #       - name: identifier
      #         string: us.mappings.wplus.benefits.paramountTile.benefitImage
      #       - name: direction
      #         string: down
      #       - name: scrollPosition
      #         string: center 
      - if: 
          identifier:
            present:
              - identifier: us.mappings.wplus.benefits.paramountCollapsedView
          then:
            - click:
                identifier: us.mappings.wplus.benefits.paramountCollapsedView
        
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.benefits.paramountTile.header
            - identifier: us.mappings.wplus.benefits.paramountTile.subtitle            
            - identifier: us.mappings.wplus.benefits.paramountTile.GetParamountlink
            - identifier: us.mappings.wplus.benefits.paramountTile.Howstreamingworkslink
      - log: "Verified paramount tile details on Benefits screen"

  - name: us.functions.wplus.benefitsScreen.clickViewAllMemberBenefitsAndVerifyParamount
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.benefits.paramountTile.Howstreamingworkslink
      - log: "Clicked on How streaming works Link from paramount tile"
      - sleep:
          duration: 5000
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.benefits.paramountpage.paramountlogo
            - identifier: us.mappings.wplus.benefits.paramountTile.header
            - identifier: us.mappings.wplus.benefits.paramountTile.subtitle
      - sleep:
          duration: 5000            
      - click:
          identifier: us.mappings.wplus.savings.LTORedeemOfferCTA
      - log: "Clicked on GetParamount button from paramount page"  
      #Below Validation are commented because it navigates us to webpage and sometimes asks for robot verification. 
      # - sleep:
      #     duration: 10000
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.benefits.paramount.webPageTitle                                    
      - log: "Navigated to Mobile Web Page Succesfully"
      - log: "Verified the Web Page Navigation with Get Paramount+ Tile"

  - name: us.functions.wplus.validateManufacturerOffersInWalmartCashCentrePage
    platform: ios
    flow:
      - loop:
          begin: 0
          end: 4
          mode: increment
          storeIndex: i
          flow:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.rewardsCenter.manufacturerOffersHeader
                then:
                  - break: true
                else:
                  - scroll:
                      direction: down
      - log: "Validating that the manufacturer offers is seen in the Walmart Cash centre page"
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.rewardsCenter.manufacturerOffersHeader
          then:
            - log: "The manufacturer offer header is displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Manufacturer offer section should be shown but is not"
      - log: "Validating that expected elements are displayed"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.rewardsCenter.rewardsValue
            - identifier: us.mappings.wplus.rewardsCentre.offerName
            - identifier: us.mappings.wplus.rewardsCenter.offerImage
            - identifier: us.mappings.wplus.rewardsCenter.viewNowButton
      - log: "Validating that Add to cart button is not present"
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.item.addToCartButton

  - name: us.functions.wplus.validateOfferDetailsPage
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.rewardsCenter.offerImage
      - if:
          identifier: 
            present:
              - identifier: us.mappings.wplus.offerDetailsPage.pageHeader
          then:
            - log: "User is taken to the offer details page as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - User should be taken to the offer details page but is not"
      - log: "Validating the name, image and value of the offer in the offer details page"
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.wplus.offerDetailsPage.offerImage
            - identifier: us.mappings.wplus.offerDetailsPage.offerName
            - identifier: us.mappings.wplus.offerDetailsPage.offerValue
      # - log: "Validating that Add to cart button is not present"
      # - verifyIdentifier:
      #     notPresent:
      #       - identifier: us.mappings.item.addToCartButton
      - log: "Validating the offer details"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.offerDetailsPage.limitPerTransactionText
            - identifier: us.mappings.wplus.offerDetailsPage.readMoreButton
      - log: "Validating that the user is shown detailed message upon tapping Read more button"
      - click:
          identifier: us.mappings.wplus.offerDetailsPage.readMoreButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.offerDetailsPage.detailedText
          then:
            - log: "User sees the details of limit per transaction details as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Read more button is not working as expected"
      - log: "Validating that clipping the checkbox, clips checkbox for all items"
      - click:
          identifier: us.mappings.wplus.offerDetailsPage.getThisOfferCheckBox
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.offerDetailsPage.offerClaimedText
            - identifier: us.mappings.wplus.offerDetailsPage.offerClaimedSubtext

      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.item.addToCartButton
            #- identifier: us.mappings.wplus.offerDetailsPage.itemPrice

      # Commented Reason - Test Data In-consistent

      # - loop:
      #     begin: 0
      #     end: 15
      #     mode: increment
      #     storeIndex: i
      #     flow:
      #       - if:
      #           identifier:
      #             present:

      #               - identifier: us.mappings.wplus.offerDetailsPage.offersClaimedText1
      #               - identifier: us.mappings.wplus.offerDetailsPage.offersClaimedText3
      #           then:
      #             - break: true
      #           else:
      #             - scroll:
      #                 direction: down
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.offerDetailsPage.offersClaimedText1
      #       - identifier: us.mappings.wplus.offerDetailsPage.offersClaimedText2
      #       - identifier: us.mappings.wplus.offerDetailsPage.offersClaimedText3
      # - log: "All the offers are claimed as expected"

  - name: us.functions.wplus.validateManufacturerOffersInWalmartCashCentrePage
    platform: android
    flow:
      - loop:
          begin: 0
          end: 15
          mode: increment
          storeIndex: i
          flow:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.rewardsCenter.manufacturerOffersHeader
                then:
                  - break: true
                else:
                  - scroll:
                      direction: down
      - log: "Validating that the manufacturer offers is seen in the Walmart Cash centre page"
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.rewardsCenter.manufacturerOffersHeader
          then:
            - log: "The manufacturer offer header is displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Manufacturer offer section should be shown but is not"
      - log: "Validating that expected elements are displayed"
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.rewardsCenter.viewNowButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.rewardsCenter.rewardsValue
            - identifier: us.mappings.wplus.rewardsCentre.offerName
            - identifier: us.mappings.wplus.rewardsCenter.offerImage
            - identifier: us.mappings.wplus.rewardsCenter.viewNowButton
      - log: "Validating that Add to cart button is not present"
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.item.addToCartButton

  - name: us.functions.wplus.validateOfferDetailsPage
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.rewardsCenter.viewNowButton
      - if:
          identifier: 
            present:
              - identifier: us.mappings.wplus.offerDetailsPage.pageHeader
          then:
            - log: "User is taken to the offer details page as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - User should be taken to the offer details page but is not"
      - log: "Validating the name, image and value of the offer in the offer details page"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.offerDetailsPage.offerImage
            - identifier: us.mappings.wplus.offerDetailsPage.offerName
            - identifier: us.mappings.wplus.offerDetailsPage.offerValue
      - log: "Validating that Add to cart button is not present"
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.item.addToCartButton
      - log: "Validating the offer details"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.offerDetailsPage.limitPerTransactionText
            - identifier: us.mappings.wplus.offerDetailsPage.readMoreButton
      - log: "Validating that the user is shown detailed message upon tapping Read more button"
      - click:
          identifier: us.mappings.wplus.offerDetailsPage.readMoreButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.offerDetailsPage.detailedText
          then:
            - log: "User sees the details of limit per transaction details as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Read more button is not working as expected"
      - log: "Validating that clipping the checkbox, clips checkbox for all items"
      - click:
          identifier: us.mappings.wplus.offerDetailsPage.getThisOfferCheckBox
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.offerDetailsPage.offerClaimedText
            - identifier: us.mappings.wplus.offerDetailsPage.offerClaimedSubtext
      - loop:
          begin: 0
          end: 2
          mode: increment
          storeIndex: i
          flow:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.offerDetailsPage.componentOfferClaimedText
                then: 
                  - break: true
                else:
                  - scroll:
                      direction: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.offerDetailsPage.componentOfferClaimedText

      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.item.addToCartButtonOLC
            

  - name: us.functions.wplus.navigateToWalmartCashCentreScreen
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.myitems.accountpage
      - click:
          identifier: us.mappings.myitems.accountpage
      - click:
          identifier: us.mappings.wplus.walmartCashOption

  - name: us.functions.wplus.navigateToWalmartCashCenterScreenFromHomePage
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - click:  
          identifier: us.mappings.home.learnHowButton

  - name: us.functions.wplus.navigateToWalmartCashCenterScreenFromHomePage
    platform: android
    flow:
      - sleep:
          duration: 3000
      - click:  
          identifier: us.mappings.home.learnHowButton

  - name: us.functions.wplus.navigateToWalmartCashCentreScreen
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.walmartCashOption
      - click:
          identifier: us.mappings.wplus.walmartCashOption
          
  - name: us.functions.wplus.nonMemberClaimOffers
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.addPaypal.claimOffers
          then:
            - click:
                identifier: us.mappings.wplus.addPaypal.claimOffers
            - sleep:
                duration: 3000
          else:   
            - failTest:
                message: "ENV_FAILURE - ${env} - Claim Offer is not Available"

  - name: us.functions.wplus.nonMemberMonthly
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.addPaypal.monthly
          then:
            - click:
                identifier: us.mappings.wplus.addPaypal.monthly
            - click:
                identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
                wait: 6000
            
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.aquisition.legalCheckBox
                then:
                  - click:
                      identifier: us.mappings.wplus.aquisition.legalCheckBox
                  - sleep:
                      duration: 3000
                  - click:
                      identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
                      
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.welcome
            - log: "started trial from account with Paypal"

  - name: us.functions.wplus.nonMemberAnnual
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.addPaypal.annual
          then:
            - click:
                identifier: us.mappings.wplus.addPaypal.annual
            - click:
                identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
                wait: 6000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.welcome
            - log: "started trial from account with Paypal"


  - name: us.functions.wplus.cart.optOutWPlusMembership    
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.optInCheckbox
          then:
            - log: Wplus Banner Available
          else:            
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.cart.optInCheckbox
                  - name: direction
                    string: up             
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.cart.optInCheckbox 
                then:
                  - log: Wplus Banner Available
                else:   
                  - failTest:
                      message: "ENV_FAILURE - ${env} - Wplus Banner not Available"

      - log: Opting out of wplus membership
      - scroll:
          untilIdentifier: us.mappings.cart.optInCheckbox
          direction: up
          position: center   
      - click:
          identifier: us.mappings.cart.optInCheckbox
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.wplusOptOutText
      - log: opt out from cart successful 

  - name: us.functions.wplus.reviewOrder.editWalmartPlusPlans
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.reviewOrder.walmartPlusPlanTitle
            - name: direction
              string: down
            - name: scrollPosition
              string: center   
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.reviewOrder.walmartPlusPlanEditCta
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.checkout.walmartPlusLogo
            - identifier: us.mappings.reviewOrder.walmartPlusLogoText
      - click:
          identifier: us.mappings.reviewOrder.walmartPlusPlanEditCta
      - sleep:
          duration: 10000
      - executeFunction:
          name: us.functions.wplus.reviewOrder.splash.verifyWalmartPlusPlans


  - name: us.functions.wplus.cart.verifyTryWalmartPlusfromCartAndOptIn
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.cart.wantToSkipDeliveryFeeswithW+logo
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - try:
          flow:
            - verifyIdentifier:
                  timeout: 10000
                  present:
                    - identifier: us.mappings.cart.wplusOptInBannerHeader
          catch:
            flow:
              - executeFunction:
                  name: us.functions.utils.scrollIfNotVisible
                  params:
                    - name: identifier
                      string: us.mappings.cart.sc.noSlotBooked.reserveTime
                    - name: direction
                      string: up
              - click:
                  identifier: us.mappings.cart.sc.noSlotBooked.reserveTime
              - sleep:
                  duration: 3000
              - executeFunction:
                  name: us.functions.wplus.reserveSlot.optInOrOutWPlusMembership
                  params:
                    - name: wplusUser
                      string: optOut  
              - click:
                  identifier: us.mappings.global.closeButton
              - executeFunction:
                  name: us.functions.utils.scrollIfNotVisible
                  params:
                    - name: identifier
                      string: us.mappings.cart.wantToSkipDeliveryFeeswithW+logo
                    - name: direction
                      string: down
                    - name: scrollPosition
                      string: center                            
      - click:
          identifier: us.mappings.cart.optInCheckbox

      - sleep:
          duration: 10000

  - name: us.functions.wplus.cart.verifyTryWalmartPlusfromCartAndOptIn
    platform: android
    flow:
      - scroll:
          direction: down
          position: center
          untilIdentifier: us.mappings.cart.optInCheckbox
      - click:
          identifier: us.mappings.cart.optInCheckbox
      - sleep:
          duration: 10000

      

#Function to Check Delivery charge waved off in Cart Page
  - name: us.functions.wplus.cart.chargeWaiveOff-deliveryFromStoreCharges
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
          position: center
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
                  - identifier: us.mappings.wplus.cart.pos.deliveryCost
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - free Delivery from Store Message is NOT displayed"

  #Function to Check Delivery charge waved off in reviewOrder Page
  - name: us.functions.wplus.reviewOrder.chargeWaiveOff-deliveryFromStoreCharges
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
          position: center
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.cart.pos.freeDeliveryFromStoreText
                  - identifier: us.mappings.wplus.cart.pos.shippingCost
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - free Delivery from Store Message is NOT displayed"

# Add card from splash page
                  
  - name: us.functions.wplus.splashPage.addCard
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.splashpage.paymentMethod.addCard
          then:  
              - click:
                 identifier: us.mappings.wplus.splashpage.paymentMethod.addCard


  - name: us.functions.wplus.splashPage.addCard
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.splashpage.paymentMethod.addCard
          then:  
              - click:
                 identifier: us.mappings.wplus.splashpage.paymentMethod.addCard


# Non Member to Member Conversion - Welcome Botton Sheet Close Function
  - name: us.functions.wplus.WelcomeBottomSheetClose
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wlus.membershipBottomsheetClose
          then:  
              - click:
                 identifier: us.mappings.wlus.membershipBottomsheetClose
          else:
            - log: "Welcome to Walmart Screen not Displayed" 

  - name: us.functions.wplus.scrollDownToCashToOne
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - scroll:
          direction: down
          position: center
          untilIdentifier: us.mappings.popularServices.pharmacy.pharmacyServices

  - name: us.functions.wplus.verifyCashToOneSplash
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.walmartCash.walmartCashToOneSubtitle
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.walmartCash.transferWalmartCashToOneBottomSheetHeader
          then:
            - log: "The redeem Walmart cash to one bottomsheet is displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - User should see the bottomsheet but is not displayed"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.esignAgreementCheckBox
            - identifier: us.mappings.wplus.walmartCash.digitalCodeTermsCheckBox

  - name: us.functions.wplus.scrollDownToCashToOne
    platform: android
    flow:
      - sleep:
          duration: 3000
      - scroll:
          untilIdentifier: us.mappings.wplus.walmartCash.walmartCashToOneOptionHeader
          direction: down
          position: center

  - name: us.functions.wplus.verifyCashToOneSplash
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.walmartCash.walmartCashToOneOption
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.walmartCash.transferWalmartCashToOneBottomSheetHeader
          then:
            - log: "The redeem Walmart cash to one bottomsheet is displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - User should see the bottomsheet but is not displayed"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.esignAgreementCheckBox
            - identifier: us.mappings.wplus.walmartCash.digitalCodeTermsCheckBox

  - name: us.functions.wplus.transferWalmartCashToONE
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.walmartCash.esignAgreementCheckBox
      - click:
          identifier: us.mappings.wplus.walmartCash.digitalCodeTermsCheckBox
      - click:
          identifier: us.mappings.wplus.walmartCash.continueToRedeemButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.redeemWalmartCashBottomsheetHeader
            - identifier: us.mappings.wplus.walmartCash.redeemableAmountHeader
            - identifier: us.mappings.wplus.walmartCash.redemptionAmountTextField
            - identifier: us.mappings.wplus.walmartCash.redemptionTimeLimitText
            - identifier: us.mappings.wplus.walmartCash.redeemWalmartCashInfoIcon
            - identifier: us.mappings.wplus.walmartCash.confirmOneRedemptionButton
      - click:
          identifier: us.mappings.wplus.walmartCash.redemptionAmountTextField
      - click:
          identifier: us.mappings.wplus.walmartCash.keyPad.secondKey
      - click:
          identifier: us.mappings.wplus.walmartCash.keyPad.fifthKey
      - click:
          identifier: us.mappings.wplus.walmartCash.keyPad.zerothKey
      - click:
          identifier: us.mappings.wplus.walmartCash.keyPad.zerothKey
      # Comment the redeem steps out since the rewards will become $0 after several runs.
      # - click:
      #     identifier: us.mappings.wplus.walmartCash.confirmOneRedemptionButton
      # - sleep:
      #     duration: 3000
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.wplus.walmartCash.redemptionInitiationConfirmationText
      #       - identifier: us.mappings.wplus.walmartCash.redemptionIntimationMessage
      # - click:
      #     identifier: us.mappings.wplus.walmartCash.redemptioninitiationConfirmationDoneButton

  - name: us.functions.wplus.transferWalmartCashToONE
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.walmartCash.esignAgreementCheckBox
      - click:
          identifier: us.mappings.wplus.walmartCash.digitalCodeTermsCheckBox
      - click:
          identifier: us.mappings.wplus.walmartCash.continueToRedeemButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.redeemWalmartCashBottomsheetHeader
            - identifier: us.mappings.wplus.walmartCash.redeemableAmountHeader
            - identifier: us.mappings.wplus.walmartCash.redemptionAmountTextField
            - identifier: us.mappings.wplus.walmartCash.redemptionTimeLimitText
            - identifier: us.mappings.wplus.walmartCash.redeemWalmartCashInfoIcon
            - identifier: us.mappings.wplus.walmartCash.confirmOneRedemptionButton
      - enterText:
          identifier: us.mappings.wplus.walmartCash.redemptionAmountTextField
          string: 2500
          pressEnter: true
      - click:
          identifier: us.mappings.wplus.walmartCash.confirmOneRedemptionButton
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.redemptionInitiationConfirmationText
            - identifier: us.mappings.wplus.walmartCash.redemptionIntimationMessage
      - click:
          identifier: us.mappings.wplus.walmartCash.redemptioninitiationConfirmationDoneButton

  - name: us.functions.wplus.transferWalmartCashToOneExistingMember
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - loop:
          begin: 0
          end: 15
          mode: increment
          storeIndex: i
          flow:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.walmartCash.walmartCashToOneSubtitle
                then:
                  - log: "Walmart cash to ONE text present as expected"
                  - break: true
                else:
                  - scroll:
                      direction: down
      - click:
          identifier: us.mappings.wplus.walmartCash.walmartCashToOneSubtitle
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.walmartCash.transferWalmartCashToOneBottomSheetHeader
          then:
            - log: "The redeem Walmart to cash bottomsheet is displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - User should see the bottomsheet but is not displayed"
      - click:
          identifier: us.mappings.wplus.walmartCash.esignAgreementCheckBox
      - click:
          identifier: us.mappings.wplus.walmartCash.digitalCodeTermsCheckBox
      - click:
          identifier: us.mappings.wplus.walmartCash.continueToRedeemButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.redeemWalmartCashBottomsheetHeader
            - identifier: us.mappings.wplus.walmartCash.redeemableAmountHeader
            - identifier: us.mappings.wplus.walmartCash.redeemableAmountExplanatoryText
            - identifier: us.mappings.wplus.walmartCash.redemptionAmountTextField
            - identifier: us.mappings.wplus.walmartCash.redemptionTimeLimitText
            - identifier: us.mappings.wplus.walmartCash.redeemWalmartCashInfoIcon
      - enterText:
          identifier: us.mappings.wplus.walmartCash.redemptionAmountTextField
          string: 25
          pressEnter: true
      - click:
          identifier: us.mappings.wplus.walmartCash.confirmOneRedemptionButton
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.redemptionInitiationConfirmationText
      - click:
          identifier: us.mappings.wplus.walmartCash.redemptioninitiationConfirmationDoneButton

  - name: us.functions.wplus.transferWalmartCashToOneExistingMember
    platform: android
    flow:
      - sleep:
          duration: 3000
      - loop:
          begin: 0
          end: 15
          mode: increment
          storeIndex: i
          flow:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wplus.walmartCash.walmartCashToOneSubtitle
                then:
                  - log: "Walmart cash to ONE text present as expected"
                  - break: true
                else:
                  - scroll:
                      direction: down
      - click:
          identifier: us.mappings.wplus.walmartCash.walmartCashToOneSubtitle
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.walmartCash.transferWalmartCashToOneBottomSheetHeader
          then:
            - log: "The redeem Walmart to cash bottomsheet is displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - User should see the bottomsheet but is not displayed"
      - click:
          identifier: us.mappings.wplus.walmartCash.esignAgreementCheckBox
      - click:
          identifier: us.mappings.wplus.walmartCash.digitalCodeTermsCheckBox
      - click:
          identifier: us.mappings.wplus.walmartCash.continueToRedeemButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.redeemWalmartCashBottomsheetHeader
            - identifier: us.mappings.wplus.walmartCash.redeemableAmountHeader
            - identifier: us.mappings.wplus.walmartCash.redeemableAmountExplanatoryText
            - identifier: us.mappings.wplus.walmartCash.redemptionAmountTextField
            - identifier: us.mappings.wplus.walmartCash.redemptionTimeLimitText
            - identifier: us.mappings.wplus.walmartCash.redeemWalmartCashInfoIcon
      - enterText:
          identifier: us.mappings.wplus.walmartCash.redemptionAmountTextField
          string: 25
          pressEnter: true
      - click:
          identifier: us.mappings.wplus.walmartCash.confirmOneRedemptionButton
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.walmartCash.redemptionInitiationConfirmationText
      - click:
          identifier: us.mappings.wplus.walmartCash.redemptioninitiationConfirmationDoneButton

  - name: us.functions.reviewOrder.verifyAppeasementPromo
    platform: android
    flow:
      - scroll:
          untilIdentifier: us.mappings.reviewOrder.appeasementPromo.label
          direction: down
          position: center
      - if:
          identifier:
            present:
            - identifier: us.mappings.reviewOrder.appeasementPromo.viewDetailsLink
            - identifier: us.mappings.reviewOrder.appeasementPromo.pos  
          then:
            - log: "Appeasement promo is auto applied."
          else:
            - log: "Appeasement promo is NOT auto applied."

  - name: us.functions.reviewOrder.verifyAppeasementPromo
    platform: ios
    flow:
      - scroll:
          untilIdentifier: us.mappings.reviewOrder.appeasementPromo.label
          direction: down
          position: center
      - if:
          identifier:
            present:
            - identifier: us.mappings.reviewOrder.appeasementPromo.viewDetailsLink
            - identifier: us.mappings.reviewOrder.appeasementPromo.pos  
          then:
            - log: "Appeasement promo is auto applied."
          else:
            - log: "Appeasement promo is NOT auto applied."                                          

  - name: us.functions.wplus.verifyLegalScrollErrorMsg
    platform: ios
    flow:
      - verifyIdentifier:
         timeout: 10000
         present:
           - identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton

      - click:
          identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
      
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.signup.LegalScrollErrorMsg
          then:
              - log: "You must scroll to read the full disclaimer is Displayed"
          else:
           - failTest:
                message: "ENV_FAILURE - ${env} - scroll to read the full disclaimer Error Msg is not displayed"  


  - name: us.functions.wplus.validateLegalTermsAndConditions
    platform: ios
    flow:
      - scroll:
          untilIdentifier: us.mappings.wplus.signup.LegaltermsAndCondition
          direction: down
          position: center   
          scrollLimit: 1

      - verifyIdentifier:
            present: 
              - identifier: us.mappings.wplus.signup.LegaltermsAndCondition

      - click:
          identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton


  - name: us.functions.wplus.verifyLegalScrollErrorMsg
    platform: android
    flow:
      - verifyIdentifier:
         timeout: 10000
         present:
           - identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton

      - click:
          identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
      
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.signup.LegalScrollErrorMsg
          then:
              - log: "You must scroll to read the full disclaimer is Displayed"
          else:
           - failTest:
                message: "ENV_FAILURE - ${env} - scroll to read the full disclaimer Error Msg is not displayed"  


  - name: us.functions.wplus.validateLegalTermsAndConditions
    platform: android
    flow:
      - scroll:
          untilIdentifier: us.mappings.wplus.signup.LegaltermsAndCondition
          direction: down
          position: center   
          scrollLimit: 1

      - verifyIdentifier:
            present: 
              - identifier: us.mappings.wplus.signup.LegaltermsAndCondition

      - click:
          identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton

  # Enter card details and save
  - name: us.functions.wplus.newpaymentMethod.addCardDetails
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.addCardnumber
      - click:
          identifier: us.mappings.wplus.addCardnumber
          wait: 2000
      - click:
          identifier: us.mappings.paymentMethod.addPayment.overlay.cardNumberField
      - enterText:
          identifier: us.mappings.paymentMethod.addPayment.overlay.cardNumberField
          string: ${number}
      - click:
          identifier: us.mappings.wplus.addCard.firstName
      - enterText:
          identifier: us.mappings.wplus.addCard.firstName
          string: ${firstName}
          clearField: false
          clickFirst: false
      #      - click:
      #          identifier: us.mappings.default.keyboardDoneButton
      - click:
          identifier: us.mappings.wplus.addCard.lastName
      - enterText:
          identifier: us.mappings.wplus.addCard.lastName
          string: ${lastName}
          clearField: false
          clickFirst: false
      - click:
          identifier: us.mappings.wplus.exp
      - enterText:
          identifier: us.mappings.wplus.exp_m
          string: ${expirationMonth}
          clearField: false
          clickFirst: false
      - enterText:
          identifier: us.mappings.wplus.exp_y
          string: ${expirationYear}
          clearField: false
          clickFirst: false
      - click:
          identifier: Done
      - enterText:
          identifier: us.mappings.wplus.securityCodeField
          string: ${cvv}
      - click:
          identifier: us.mappings.wplus.phone
      - enterText:
          identifier: us.mappings.wplus.phone
          string: ${phoneNumber}
      - click:
          identifier: us.mappings.wplus.save

  - name: us.functions.wplus.nonMemberClaimOffers
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.addPaypal.claimOffers
          then:
            - click:
                identifier: us.mappings.wplus.addPaypal.claimOffers
                wait: 8000

  - name: us.functions.wplus.nonMemberAnnual
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.signup.selectPlan.annual
          then:
            - click:
                identifier: us.mappings.wplus.signup.selectPlan.annual
            - sleep:
                duration: 3000    
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.payPalText    
            - click:
                identifier: us.mappings.wplus.signup.trywalmartplusforFreeButton
                wait: 6000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.welcomeToWplusText
            - log: "started trial from account with Paypal"        

  - name: us.functions.wplus.verifyBelowMinimumOrderFeeExistsPickup
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.belowOrderMinimumLineItemPickup

  - name: us.functions.wplus.verifyBelowMinimumOrderFeeExistsPickup
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.cart.thresholdText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.thresholdText

  #Navigate to Android Benefits Tab
  - name: us.functions.wplus.account.NavigateToBenefitsTab
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: us.mappings.wplus.benefitsTab
      - click:
          identifier: us.mappings.wplus.benefitsTab
          wait: 3000

  #Validate Paramount Plus Video Streaming in Benefits Page
  - name: us.functions.wplus.BenefitsPage.validateParamountPlus
    platform: android
    flow:

      - verifyIdentifier:
          timeout: 2000
          present:
            - identifier: us.mappings.benefits.title

      - scroll:
          untilIdentifier: us.maappings.wplus.benefits.paramountVideoStreaming
          direction: down
          position: center

      - verifyIdentifier:
          present:
            - identifier: us.maappings.wplus.benefits.paramountVideoStreaming

      - if:
          identifier:
            present:
              - identifier: us.maappings.wplus.benefits.paramountVideoStreaming
          then:
              - log: "Paramount Plus Video Streaming Batch is Displayed"
          else:
           - failTest:
                message: "ENV_FAILURE - ${env} - scroll to Paramount Plus Video Streaming Batch is NOT Displayed" 

  # Upgrade Monthly Plan to Annual with Paramount Streaming
  - name: us.functions.wplus.upgradeParamountMembership
    platform: android
    flow:
      - if:
          identifier: 
            text:
                - identifier: us.mappings.wplus.membership.plan
                  contains: ${membership}
          then:
            - log: "Membership plan is already set to : ${membership}"
          else:
            - scroll:
                direction: up
                untilIdentifier: us.mappings.global.changeButton
            - click: 
                identifier: us.mappings.global.changeButton
            - if: 
                condition: ${membership} == 'Annual plan'
                then:
                  - click: 
                      identifier: us.mappings.wplus.annualTenurePlan
                  - log: 'Annual Plan selected'

                  - verifyIdentifier:
                      timeout: 20000
                      text:
                        - identifier: us.mappings.wplus.payment_start_disclaimer
                          contains: "SHOWTIME"
                else:
                  - click: 
                      identifier: us.mappings.wplus.monthlyTenurePlan
                  - log: 'Monthly Plan selected'         
            - click: 
                identifier: us.mappings.wplus.changePlanButton
            
            - sleep:
                duration: 2000

            - if:
                identifier:
                  present:
                    - identifier: us.mappings.wlus.membershipBottomsheetClose
                then:
                  - log: "Splash Screen Exist"
                  - click: 
                      identifier: us.mappings.wlus.membershipBottomsheetClose
                else:
                  - log: "Splash Screen Does NOT Exist"
                
          
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.wplus.membership.plan
                    contains: ${membership}

 #Function to Verify that Churned user has Rejoin link banner in Home Page and click on Rejoin Link
  - name: us.functions.account.home.clickReJoinwplusLink
    platform: ios
    flow:
      - scroll:
          direction: up
          scrollLimit: 1
          
      - scroll:
          direction: down
          untilIdentifier: us.mappings.home.wplus.RejoinWalmartPluslink
          position: center
      
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.wplus.RejoinWalmartPluslink
          then:
            - click:
                identifier: us.mappings.home.wplus.RejoinWalmartPluslink
            - log: Rejoin W+ Link is Displayed in Home Page
            - verifyIdentifier:
                timeout: 50000
                present:
                  - identifier: us.mappings.wplus.reactivate.clickPrimaryCtaButton
          else:
           - failTest:
                message: "ENV_FAILURE - ${env} - scroll to Rejoin W+ Link is NOT Displayed in Home Page"



  #Function to Verify that Churned user navigates to Reactivate Wplus MLP Screen after clicking on Rejoin link in Home Page Banner
  - name: us.functions.wplus.account.verifyBottomSheetPageDisplayed
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.reactivate.clickPrimaryCtaButton
          then:
            - log: Reactivate W+ Page is Displayed for Churned member
            - click:
                identifier: us.mappings.global.navigation.backNavigation
            - sleep:
                duration: 2000
          else:
           - failTest:
                message: "ENV_FAILURE - ${env} - Reactivate W+ MLP Page is NOT Displayed for Churned member"

  - name: us.functions.wplus.account.verifyReactivateWplusCTAlandingpage
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.reactivate.clickPrimaryCtaButton
          then:
            - log: Reactivate W+ Page is Displayed for Churned member
          else:
           - failTest:
                message: "ENV_FAILURE - ${env} - Reactivate W+ MLP Page is NOT Displayed for Churned member"

  # Function - As a Churned user Clicks Reactivate W+ link in Item Page 
  - name: us.functions.wplus.clickReactivateWplusItemPage
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 20000
          present:
            - identifier: us.mappings.wplus.signUpModulePage.signUpForWalmartLink
      - click:
          identifier: us.mappings.wplus.signUpModulePage.signUpForWalmartLink
      - verifyIdentifier:
           timeout: 30000
           present:
               - identifier: us.mappings.wplus.reactivate.clickPrimaryCtaButton

#Function to Verify that Churned user has Rejoin link banner in Home Page and click on Rejoin Link
  - name: us.functions.account.home.clickReJoinwplusLink
    platform: android
    flow:
      - scroll:
          direction: up
          scrollLimit: 1
          
      - scroll:
          direction: down
          untilIdentifier: us.mappings.home.wplus.RejoinWalmartPluslink
          position: center
      
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.wplus.RejoinWalmartPluslink
          then:
            - click:
                identifier: us.mappings.home.wplus.RejoinWalmartPluslink
            - log: Rejoin W+ Link is Displayed in Home Page
          else:
           - failTest:
                message: "ENV_FAILURE - ${env} - scroll to Rejoin W+ Link is NOT Displayed in Home Page"




 #Function to Verify that Churned user navigates to Bottom Sheet after clicking on Rejoin link in Home Page Banner
  - name: us.functions.wplus.account.verifyBottomSheetPageDisplayed
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mapppings.wplus.reactivateMembership.restartWalmartPlus
          then:
            - log: Reactivate W+ Page is Displayed for Churned member
            #Terminate the iOS App
            #- terminateApp: true
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: walmart://shop

          else:
            - log: Reactivate W+ Page is NOT Displayed for Churned member

  #Function to verify if either a banner or a tunnel for churned user to rejoin W+ exists on item page. 
  #Tunnel will be checked first, if not see the tunnel, it will search for the banner.
  - name: us.functions.wplus.item.verifyWPlusBannerOrTunnelDisplayed
    platform: android
    flow:  
      - sleep: 
          duration : 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.wplus.item_wplus_Tunnel
          position: center
      
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.item_wplus_Tunnel
          then:
           - log: Rejoin W+ tunnel is Displayed in Item Page
           
           - verifyIdentifier:
              present:
                  - identifier: us.mappings.home.wplus.RejoinWalmartPlusTunnelCheckbox

           #Check whether the checkbox has already been selected, if so, check for the secondary text directly.
           - if:
              identifier:
                checked:
                  - identifier: us.mappings.home.wplus.RejoinWalmartPlusTunnelCheckbox
                    value: true
              then:
                - log: Walmart Plus Tunnel Checkbox has already been checked.
              else:
                - click:
                    identifier: us.mappings.home.wplus.RejoinWalmartPlusTunnelCheckbox

          #Verify the existence of the secondary text that will appear after selecting the checkbox.
           - verifyIdentifier:
              present:
                  - identifier: us.mappings.home.wplus.RejoinWalmartPlusTunnelCheckbox_SecondaryText

          #Tunnel Checkbox will always been unselected after finishing the test.
           - click:
              identifier: us.mappings.home.wplus.RejoinWalmartPlusTunnelCheckbox

          #If the Tunnel cannot be found on the item page, check for the Rejoin W+ banner and perform the verification.
          else:
            - sleep:
                duration: 5000
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.wplus.item_wplus_CTA
                  - name: direction
                    string: up
                  - name: scrollPosition
                    string: center
            - try:
                flow:
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.wplus.item_wplus_CTA
                catch:
                  flow:
                    - failTest:
                        message: "ENV_FAILURE - ${env} - Wplus signup section banner is not present in Item page"   
            - click:
                identifier: us.mappings.wplus.item_wplus_CTA
                wait: 8000      
          #Verify the landing Page
            - executeFunction:
                name: us.functions.wplus.account.verifyReactivateWplusCTAlandingpage    

  #Function to Verify that Churned user navigates to Reactivate Wplus MLP Screen after clicking on Rejoin link in Home Page Banner
  - name: us.functions.wplus.account.verifyReactivateWplusCTAlandingpage
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.assist.membership.signUpBtn
          then:
            - log: Reactivate Walmart+ MLP Page is Displayed for Churned member
          else:
           - failTest:
                message: "ENV_FAILURE - ${env} - Reactivate Walmart+ MLP Page is NOT Displayed for Churned member"

  - name: us.functions.wplus.account.reactivateWplusFromBenefitsPage
    platform: android
    flow:
       - executeFunction:
            name: us.functions.utils.scrollIfNotVisible
            params:
              - name: identifier
                string: us.mappings.wplus.churnedExpired.reactivateWplusButton
              - name: direction
                string: down
       - click:
            identifier: us.mappings.wplus.churnedExpired.reactivateWplusButton

  - name: us.functions.wplus.validatePersonalisedIOBModule
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.account.wplusModuleHeader
            - identifier: us.mappings.wplus.account.fsnmTask
            #- identifier: us.mappings.wplus.account.paramount
            #- identifier: us.mappings.wplus.account.lto

  - name: us.functions.wplus.validateECModule
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.account.wplusModuleLimitedTimePromoSubHeading
            - identifier: us.mappings.wplus.account.wplusModuleGetTheApp
            - identifier: us.mappings.wplus.account.wplusModuleHaveItShipped
            - identifier: us.mappings.wplus.account.wplusModuleAtHomeEntertainment

  - name: us.functions.wplus.validateECOrIOBModule
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - if:
          identifier:
            timeout: 30000
            present: 
              - identifier: us.mappings.wplus.account.wplusModuleLimitedTimePromoSubHeading
          then: 
            - executeFunction:
                name: us.functions.wplus.validateECModule
            - executeFunction:
                name: us.functions.wplus.validateBenefitsCTA
            - executeFunction:
                name: us.functions.wplus.validateGetTheAppOption
            - executeFunction:
                name: us.functions.wplus.validateHaveItShipped
            - executeFunction:
                name: us.functions.wplus.validateSetUpHomeEntertainment

          else:
            - executeFunction:
                name: us.functions.wplus.validatePersonalisedIOBModule
            - executeFunction:
                name: us.functions.wplus.validateBenefitsCTA
            # - Below Validation are commented because it navigates us to webpage and sometimes asks for robot verification. 
            # - executeFunction:
            #     name: us.functions.wplus.validateParamountOption
            - executeFunction:
                name: us.functions.wplus.validateFSNMOption

  - name: us.functions.wplus.validateBenefitsCTA
    platform: android
    flow:
      - click:
          identifier: us.mappings.wPlus.account.wPlusSeeAllBenefitsButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.benefits.title
          then:
            - log: "User is navigated to the benefits page"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - User was not navigated to the benefits page as expected"
      - goBack: true

  - name: us.functions.wplus.validateFSNMOption
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.account.fsnmTask

       # closing any seasonal offer banners
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.dealsBottomSheet
          then:
            - click:
                 identifier: us.mappings.wplus.dealsBottomSheet

      - if:
          identifier:
            present:
              - identifier: us.mappings.browse.skinnyBanner.heading              
          then:
            # - verifyIdentifier:
            #     text:
            #       - identifier: us.mappings.browse.skinnyBanner.heading
            #         contains: savings
            - log: "User is navigated as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - The user is not navigated to the expected screen"

  - name: us.functions.wplus.validateLtoOption
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.account.lto
      - if:
          identifier:
            present:
              - identifier: us.mappings.benefits.LTO.listPageTitle
          then:
            - log: "User is navigated as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - The user is not navigated to the expected screen"
      - goBack: true

  - name: us.functions.wplus.validateParamountOption
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.account.paramount
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.benefitsTabParamountTab
          then:
            - log: "User is navigated tp Paramount Page as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - The user is not navigated to the expected screen"
      - goBack: true
  
  - name: us.functions.wplus.validateGetTheAppOption
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.account.wplusModuleGetTheApp
      
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.downloadTheAppButton
      - click:
          identifier: us.mappings.ibottaRewards.walmartCash.infoSheet.closeButton
     
  - name: us.functions.wplus.validateHaveItShipped
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.account.wplusModuleHaveItShipped
      
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.startShoppingButton

      - click:
          identifier: us.mappings.ibottaRewards.walmartCash.infoSheet.closeButton
    
  - name: us.functions.wplus.validateSetUpHomeEntertainment
    platform: android
    flow:
      - click:
          identifier: us.mappings.wplus.account.wplusModuleAtHomeEntertainment
      
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.getStartedButton
            
      - click:
          identifier: us.mappings.ibottaRewards.walmartCash.infoSheet.closeButton

  - name: us.functions.wplus.validatePersonalisedIOBModule
    platform: ios
    flow:
      - click:
          identifier: us.mappings.tabBar.account
          wait: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.account.wplusModuleHeader
            - identifier: us.mappings.wplus.account.fsnmTask
            #- identifier: us.mappings.wplus.account.lto #Will revert once ECModule shows up LOT.
            #- identifier: us.mappings.wplus.account.paramount

  - name: us.functions.wplus.validateECModule
    platform: ios
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.account.wplusModuleLimitedTimePromoSubHeading
            - identifier: us.mappings.wplus.account.wplusModuleGetTheApp
            - identifier: us.mappings.wplus.account.wplusModuleHaveItShipped
            - identifier: us.mappings.wplus.account.wplusModuleAtHomeEntertainment

  - name: us.functions.wplus.validateECOrIOBModule
    platform: ios
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - if:
          identifier:
            timeout: 30000
            present: 
              - identifier: us.mappings.wplus.account.wplusModuleLimitedTimePromoSubHeading
          then:
            - executeFunction:
                name: us.functions.wplus.validateECModule
            - executeFunction:
                name: us.functions.wplus.validateBenefitsCTA
            - executeFunction:
                name: us.functions.wplus.validateGetTheAppOption
            - executeFunction:
                name: us.functions.wplus.validateHaveItShipped
            - executeFunction:
                name: us.functions.wplus.validateSetUpHomeEntertainment

          else:
            - executeFunction:
                name: us.functions.wplus.validatePersonalisedIOBModule
            - executeFunction:
                name: us.functions.wplus.validateBenefitsCTA
            # - Below Validation are commented because it navigates us to webpage and sometimes asks for robot verification. 
            # - executeFunction:
            #     name: us.functions.wplus.validateParamountOption
            # - executeFunction:
            #     name: us.functions.wplus.validateLtoOption
            - executeFunction:
                name: us.functions.wplus.validateFSNMOption
            

  - name: us.functions.wplus.validateGetTheAppOption
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.account.wplusModuleGetTheApp
      
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.downloadTheAppButton
      - click:
          identifier: us.mapping.wplus.badges.closeBottomSheetMessage
     
  - name: us.functions.wplus.validateHaveItShipped
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.account.wplusModuleHaveItShipped
      
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.startShoppingButton

      - click:
          identifier: us.mapping.wplus.badges.closeBottomSheetMessage
    
  - name: us.functions.wplus.validateSetUpHomeEntertainment
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.account.wplusModuleAtHomeEntertainment
      
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.wplus.getStartedButton
            
      - click:
          identifier: us.mapping.wplus.badges.closeBottomSheetMessage

  - name: us.functions.wplus.validateParamountOption
    platform: ios
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.wplus.account.paramount
      - sleep:
          duration: 6000
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.benefitsTabParamountTab
          then:
            - log: "User is navigated as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - The user is not navigated to the expected screen"
      - executeFunction:
          name: us.functions.utils.navigateBackToAppFromSafari

  - name: us.functions.wplus.validateLtoOption
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.account.lto
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.benefits.LTO.listPageTitle
          then:
            - log: "User is navigated as expected"
            - executeFunction:
                name: us.functions.utils.navigateBackToAppFromSafari
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - The user is not navigated to the expected screen"

  - name: us.functions.wplus.validateFSNMOption
    platform: ios
    flow:
      - click:
          identifier: us.mappings.wplus.account.fsnmTask
      - sleep:
          duration: 5000

      # closing any seasonal offer banners
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.dealsBottomSheet
          then:
            - click:
                 identifier: us.mappings.wplus.dealsBottomSheet
      - if:
          identifier:
            present:
              - identifier: us.mappings.browse.skinnyBanner.subHeading
          then:
            - log: "User is navigated as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - The user is not navigated to the expected screen"
      
  - name: us.functions.wplus.validateBenefitsCTA
    platform: ios
    flow:
      - scroll:
          direction: down
          position: center
          untilIdentifier: us.mappings.wplus.account.seeAllBenefitsButton
      - click:
          identifier: us.mappings.wplus.account.seeAllBenefitsButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.benefits.title
          then:
            - log: "User is navigated as expected"
          else:
            - failTest:

                message: "ENV_FAILURE - ${env} - The user is not navigated to the expected screen"
      - goBack: true

# Function to verify the phone with OTP
  - name: us.functions.wplus.phoneVerificationPage
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.VerificationcodeScreen
          then:
            - executeFunction:
                name: us.functions.utils.astro.fetchPasscode.latestPhoneOTP
            - log: "The OTP generated is: "
            - log: ${otpFromPhone}
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.wplus.OTPFromPhone
            - enterText:
                identifier: us.mappings.wplus.OTPFromPhone
                string: $otpFromPhone  
            - log: "Entered OTP from Phone"
            - click:
                wait: 3000
                identifier: us.mappings.wplus.VerifyNumberButton
            - log: "Click on Verify Number button"
          else:
                - log: "Enter Verification code page is NOT displayed"


# Function to verify the phone with OTP
  - name: us.functions.wplus.phoneVerificationPage
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.verifyphoneScreen
          then:
          - if:
              identifier:
                present:
                  - identifier: us.mappings.wplus.VerificationcodeScreen
              then:
                - executeFunction:
                    name: us.functions.utils.astro.fetchPasscode.latestOTP
                - log: "The OTP generated is: "
                - log: ${otpFromPhone}
                - verifyIdentifier:
                    present:
                    - identifier: us.mappings.wplus.OTPFromPhone
                - enterText:
                    identifier: us.mappings.wplus.OTPFromPhone
                    string: $otpFromPhone
                - log: "Entered OTP from Phone"
                - click:
                    wait: 3000
                    identifier: us.mappings.wplus.VerifyNumberButton
                - log: "Click on Verify Number button"
              else:
                - log: "Enter Verification code page is NOT displayed"
          else:
            - log: "ENV_FAILURE - ${env} - Phone verification Page is NOT Displayed"

# Upgrade membership to annual
  - name: us.functions.wplus.manageMembership.upgradeToAnnual
    platform: android
    flow:
      # Click the upgrade to annual button
      - click:
          wait: 2000
          identifier: us.mappings.wplus.manageMembership.upgradePlanBtn
      - click:
          identifier: us.mappings.wplus.annualTenurePlan
      - sleep:
         duration: 3000          
      - log: 'Annual Plan selected'
      - scroll:
          direction: down
      - if:
          identifier:
            present:
              - identifier: us.mappings.wplus.splashPage.IagreeTermsAndConditionCheckBox
          then:
            - click: 
                identifier: us.mappings.wplus.splashPage.IagreeTermsAndConditionCheckBox 
      - click:
          identifier: us.mappings.wplus.changePlanButton
          wait: 3000
      - sleep:
         duration: 8000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.bottomsheetMessageContainer
      - click:
          wait: 2000
          identifier: us.mappings.wplus.bottomsheetMessageCloseAlert

  - name: us.functions.wplus.itemPage.checkingWalmartSavingsEnableCheckbox
    platform: ios
    flow:
      - sleep:
          duration: 2000
      - if:
          identifier:
            present:
                - identifier: us.mappings.wplus.enableWalmartSavingsCheckbox
          then:
              - click:     
                  identifier: us.mappings.wplus.enableWalmartSavingsCheckbox
      - sleep:
          duration: 4000

  - name: us.functions.wplus.reactivateWalmartPlusmembership
    platform: ios 
    flow:
      - if: 
          identifier:
            present:
              - identifier: us.mappings.cart.reactivateWalmartPlus
          then: 
            - click:
                identifier: WPlusCartSignupView.OptInCheckbox  
      - sleep:
         duration: 3000
    
  - name: us.functions.wplus.reviewOrderPage.goBackTorevieworderpageFromChangepaymentPage
    platform: ios
    flow:
      - sleep:
          duration: 2000
      - if:
          identifier:
            present:
                - identifier: us.mappings.reviewOrder.paymentMethod.changePaymentpageTitle
          then:
              - click:     
                  identifier: //XCUIElementTypeButton[@name="Back"]
      - sleep:
          duration: 3000

  - name: us.functions.wplus.nonmember.PhoneRecycleFailedError.BottomSheet
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.title
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.subtitleLabel
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.activateButton
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.noThanksButton
            - identifier: us.mappings.wlus.membershipBottomsheetClose  
      - click:
          identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.activateButton  

  - name: us.functions.wplus.nonmember.PhoneRecycleFailedError.BottomSheet
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.title
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.subtitleLabel
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.activateButton
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.noThanksButton
            - identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.buttonClose 
      - click:
          identifier: us.mapping.wplus.PhoneRecycleFailedError.BottomSheet.activateButton 

  - name: us.functions.cart.GuidedDeliveryInhome.validations
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.seeTimes
          then:
              # Slot page loading from home
            - click:
                identifier: us.mappings.home.seeTimes
            - sleep:
                duration: 5000
            - if:
                identifier:
                  present:  
                    - identifier: us.mappings.error.retryButton                  
                then:                        
                  - click:
                      identifier: us.mappings.error.retryButton  
      - executeFunction:
          name: us.functions.selectDayForSlotDisplay
          params:
            - name: slotDay
              string: tomorrow
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.inhome.tipfree
      # - if:
      #     identifier:
      #       present:
      #         - identifier:  us.mappings.wplus.inhome.deliveryTime.9to1
      #     then:
      #       - log: 9 to 1 pm slot available
          #   - verifyIdentifier:
          #       present:
          #         - identifier: us.mappings.wplus.inhome.deliveryTime.9to1
          #   - click:
          #       identifier: us.mappings.wplus.inhome.deliveryTime.9to1
          #       wait: 3000
          # else:
          #   - verifyIdentifier:
          #       present:
          #         - identifier: us.mappings.wplus.inhome.deliveryTime.2to6
          #   - click:
          #       identifier: us.mappings.wplus.inhome.deliveryTime.2to6
          #       wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reserveSlot.continueButton
      - click:
          identifier: us.mappings.reserveSlot.continueButton
          wait: 10000 