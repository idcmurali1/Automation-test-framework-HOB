functions:

  - name: us.functions.iBottaSignUp.verifyJoinW+CTAInItemPage
    platform: android
    flow:
      - sleep:
          duration: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.item.joinWalmartPlusCTA
      - sleep:
          duration: 3000
      - if:
          identifier:
            present:
              - identifier: us.mappings.item.joinWalmartPlusCTA
          then:
            - log: "Join W+ CTA present as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Join W+ CTA should be available but is not"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.item.joinWalmartPlusCTA

  - name: us.functions.iBottaSignUp.verifySignUpBottomPage
    platform: android
    flow:
      - sleep:
          duration: 5000 
      - click:
          identifier: us.mappings.item.joinWalmartPlusCTA
      - if:
          identifier:
            present:
              - identifier: us.mappings.iBottaSignUp.bottomSheetHeader
          then:
            - log: "Sign Up bottom page is displayed as expected"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.iBottaSignUp.membershipTenureView
                  - identifier: us.mappings.wplus.payment_method_description
                  - identifier: us.mappings.wplus.paymentmethod.addCardButton
                  - identifier: us.mappings.search.rewards.clickStart30DayFreetrial
            - click:
                identifier: us.mappings.wplus.paymentmethod.addCardButton
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Bottom sheet is not proper"

  - name: us.functions.iBottaSignUp.verifyUserIsTakenToItemPageAfterSigningUp
    platform: android
    flow:
      - executeFunction:
          name: us.functions.account.paymentMethod.addCardDetailsAndAddress
          params:
            - name: firstName
              string: us.data.flow005.payment.firstName
            - name: lastName
              string: us.data.flow005.payment.lastName
            - name: number
              string: us.data.flow005.payment.creditCard
            - name: expiration
              string: us.data.flow005.payment.expiration
            - name: cvv
              string: us.data.flow005.payment.cvv
            - name: streetAddress
              string: us.data.flow005.streetAddress
            - name: city
              string: us.data.flow005.city
            - name: state
              string: us.data.flow005.state
            - name: zipcode
              string: us.data.flow005.zipcode
            - name: phoneNumber
              string: us.data.flow005.phoneNumber
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.search.rewards.clickStart30DayFreetrial
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.odp.closeInstallationDetail
      - if:
          identifier:
            present:
              - identifier: us.mappings.search.rewards.clipOnRewardCheckbox
          then:
            - log: "User is taken back to the item page"
            - click:
                identifier: us.mappings.search.rewards.clipOnRewardCheckbox
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - User is not taken back to the item page."
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.search.rewards.clipOnRewardCheckbox









