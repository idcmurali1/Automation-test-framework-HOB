functions:

###################################################### iOS ################################

  #Global Back navigation for ios
  - name: us.functions.global.navigation.backNavigation
    platform: ios
    flow:   
      - sleep:
          duration: 3000 
      - click:
          identifier: us.mappings.global.navigation.backNavigation
          wait: 3000

  #Global Back navigation for ios from Cart to Shop
  - name: us.functions.global.navigation.backNavigationToShop
    platform: ios
    flow:
      - click:
          identifier: us.mappings.global.navigation.backNavigationToShop
          wait: 3000

  #Utility to navigate within buttomm tabs
  # [mandatory] ${tabName}  - Shop / My Items / Search / Services / Account
  - name: us.functions.global.navigation.toTab
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.global.bottomBar.tabLink
            - name: direction
              string: up
      - click:
          identifier: us.mappings.global.bottomBar.tabLink

  #Open deep link for ios
  - name: us.functions.global.navigation.goToDeepLink
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Transactions
      - verifyValue:
          identifier: $deepLinkUrl
          contains: 'walmart://'
      - openLink: ${deepLinkUrl}
      - executeFunction:
          name: us.functions.global.navigation.openDeepLink


  # Intended only to be used by us.functions.global.navigation.goToDeepLink
  - name: us.functions.global.navigation.openDeepLink
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                timeout: 0
                present:
                  - identifier: Open in “Walmart”? || ¿Abrir esta página en “Walmart”?
            - click:
                identifier: Open || Abrir
          catch:
            flow:
              - log: Deeplink pop up not displayed

  - name: us.functions.global.navigation.accountToHome
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Onboarding
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.shop
      - sleep:
          duration: 2000
      - click:
          identifier: us.mappings.tabBar.shop
          #doubleClick: true
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed
      - executeFunction:
         name: us.functions.home.closeWplusBottomSheetBannerIfDisplayed
      - executeFunction:
         name: us.functions.home.closeWplusBottomSheetNewBannerIfDisplayed

  - name: us.functions.global.navigation.addressestoAccount
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier:  us.mappings.global.navigation.toAccount
      - click:
          identifier:  us.mappings.global.navigation.toAccount
          doubleClick: true
    

  - name: us.functions.global.navigation.accountToOrderHistory
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.yourOrdersButton
      - click:
          identifier: us.mappings.account.yourOrdersButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderHistory.title

  - name: us.functions.global.navigation.homeToOrderHistory
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Transactions
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.searchBar              
      - click:
          identifier: us.mappings.tabBar.account
          wait: 3000
      - executeFunction:
          name: us.functions.global.navigation.accountToOrderHistory
                
  - name: us.functions.global.navigation.toCartFromNavBar
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Transactions
      - verifyIdentifier:
          present:
            - identifier: us.mappings.navBar.cartIcon
      - click:
          identifier: us.mappings.navBar.cartIcon
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.cart.navBarTitle
          catch:
            flow:
              - executeFunction:
                  name: us.functions.utils.handleTechnicalErrorPageInCart

  - name: us.functions.global.navigation.handleCartPageRefreshError
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.refreshError
          then: 
            - sleep:
                duration: 2000
            - click: 
                identifier: us.mappings.cart.refreshError
                coordinates: 75%,50%   
            - click: 
                identifier: us.mappings.global.navigation.backNavigation
            - click:
                identifier: us.mappings.navBar.cartIcon
            - sleep:
                duration: 2000


  - name: us.functions.global.navigation.toRewardCenterFromHome
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.shop
      - click:
          identifier: us.mappings.tabBar.shop
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.tabBar.account     
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myItems.mainHeader
            - name: direction
              string: down
            - name: scrollPosition
              string: center          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.mainHeader
      - click:
          identifier: us.mappings.myItems.mainHeader 
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myitems.rewardscenter.accountpage
      - sleep:
          duration: 5000        
      - click:
          identifier: us.mappings.myitems.rewardscenter.accountpage

  - name: us.functions.global.navigation.toRewardCenterFromHome
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.shop
      - click:
          identifier: us.mappings.tabBar.shop
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.tabBar.account     
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.accountspage.rewardscenter.link
            - name: direction
              string: down
            - name: scrollPosition
              string: center          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.accountspage.rewardscenter.link
      - click:
          identifier: us.mappings.accountspage.rewardscenter.link
      - sleep:
          duration: 5000

  - name: us.functions.global.navigation.goToHomeFromTabBar
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.shop
      - click:
          identifier: us.mappings.tabBar.shop
      - executeFunction:
          name: us.functions.home.closeWplusBottomSheetBannerIfDisplayed
      
  
  - name: us.functions.global.navigation.goToServicesFromTabBar
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Pre-transactions

      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.services
      - click:
          identifier: us.mappings.tabBar.services
      - executeFunction:
          name: us.functions.services.handleJoinOnePopup
  
  - name: us.functions.global.navigation.goToServicesFromTabBar
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Pre-transactions
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.services
      - click:
          identifier: us.mappings.tabBar.services
      - executeFunction:
          name: us.functions.services.handleJoinOnePopup


  - name: us.functions.services.handleJoinOnePopup
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                timeout: 5000
                present:
                  - identifier: us.mappings.services.joinOnePopup
            - click:
                identifier: us.mappings.global.closeButton
            - sleep:
                duration: 2000
          catch:
            flow:
              - log: No Join one popup displayed


  - name: us.functions.services.handleJoinOnePopup
    platform: android
    flow:
      - if:
          identifier:
            timeout: 40000
            present:
              - identifier: us.mappings.services.joinOnePopup
          then:
            - click:
                identifier: us.mappings.services.closeButton
                wait: 5000


  - name: us.functions.global.navigation.goToMyItemsFromTabBar
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.myItems
      - click:
          identifier: us.mappings.tabBar.myItems

  - name: us.functions.global.navigation.goToSearchFromTabBar
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.search
      - click:
          identifier: us.mappings.tabBar.search

  - name: us.functions.global.navigation.goToWalletPage
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://wallet
      - log: Navigated to Wallet using deeplink
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.account.manageAccount.walletOption
      # - click:
      #     identifier: us.mappings.account.manageAccount.walletOption
      #     wait: 3000
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.accounts.wallet.title

  - name: us.functions.global.navigation.goToAccountFromWallet
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.global.navigation.backNavigation
            - click:
                identifier: us.mappings.global.navigation.backNavigation
                wait: 2000
          catch:
            flow:
              - verifyIdentifier:
                  present:
                    - identifier: us.mappings.global.navigation.toAccount
              - click:
                  identifier: us.mappings.global.navigation.toAccount
                  wait: 2000
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.account.manageAccount.walletOption


  - name: us.functions.global.navigation.goToHomeFromItemDetails
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.item.closeItemDetailsPage
      - click:
          identifier: us.mappings.item.closeItemDetailsPage
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.shop
      - click:
          identifier: us.mappings.tabBar.shop

  - name: us.functions.global.navigation.goToSignInFromHome
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.signInButton
      - click:
          identifier: us.mappings.home.signInButton
  
  - name: us.functions.global.navigation.goToAccountFromTabBar
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.tabBar.account


  - name: us.functions.global.navigation.accountToDeliveryAddress
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.manageAccount.deliveryAddressesOption
      - click:
          identifier: us.mappings.account.manageAccount.deliveryAddressesOption
  
  # Work around for EBT payment pop up. To be removed for next App version
  - name: us.functions.global.navigation.featurePopUpRemoval
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - if:
          identifier:
            present:
              - identifier: //XCUIElementTypeStaticText[@name="OptOutViewController.optOutTitleLabel"]
          then:
            - click:
                identifier: //XCUIElementTypeButton[@name="OptOutViewController.closeButton"]

  - name: us.functions.global.navigation.goToItemPageFromSearchResult
    platform: ios
    flow:
      - click:
          identifier: us.mappings.search.searchShelf.productTile
          wait: 2000
 
  - name: us.functions.global.navigaToFeedback
    platform: ios
    flow:
      - if:
          condition: ${cartPage} == true
          then:
            - if: 
                identifier:
                  present:
                    - identifier: us.mappings.cart.smartNudgeView
                then:
                  - click: 
                      identifier: us.mappings.cart.smartNudgeViewClose
            - storeIn:
                key: cartPage
                value: false
     
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.home.feedback.givefeedback.button
          then:
            - loop:
                begin: 1
                end: 5
                storeIndex: i
                mode: increment
                flow:
                  - if:
                      identifier:
                        notPresent:
                          - identifier: us.mappings.home.feedback.givefeedback.button
                      then:
                          - if:
                              condition: ${homePage}
                              then:
                                - scroll:
                                    direction: up
                                    scrollLimit: 1
                          - scroll:
                              direction: down
                              untilIdentifier: us.mappings.home.feedback.givefeedback.button
                      else:
                      - break: true
            - storeIn:
                key: homePage
                value: false
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.feedback.givefeedback.button
      - log: Feedback button reached!

  - name: us.functions.global.itempage.navigaToFeedback
    platform: ios
    flow:  
      - scroll:
          direction: down
          untilIdentifier: us.mappings.home.feedback.givefeedback.label
          position: left
          wait: 2000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.home.feedback.givefeedback.label
            - name: direction
              string: down
            - name: scrollPosition
              string: center
            - name: limit
              string: 15
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.feedback.givefeedback.button

  - name: us.functions.global.submitFeeback
    platform: ios
    flow:
      - click:
          identifier: us.mappings.home.feedback.givefeedback.button
      - sleep:
          duration: 3000
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.feedback.givefeedback.button
          then:
            - click:
                identifier:  us.mappings.home.feedback.givefeedback.button            
      - verifyIdentifier:
          present:
            - identifier: us.mappings.feedbackHeader
            - identifier: us.mappings.home.feedback.surveyHeaderTxt
      - click:
          identifier: us.mappings.feedback.starRatings
          wait: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.feedbackReason
      - click:
          identifier: us.mappings.feedbackReason
          wait: 2000
      - click: 
          identifier: us.mappings.feedbackCommentsTextButton
          wait: 2000
      - enterText:
          identifier: us.mappings.feedbackCommentsTextButton
          string: ${feedbackText}
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.feedbackSubmitButton
          wait: 2000
      # - log: feedback submitted successfully
      

  - name: us.functions.global.verifyFeedbackThankYouPage
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.feedback.thankYouTitle
            - identifier: us.mappings.feedback.thankYouSubText
            - identifier: us.mappings.home.feedback.doneButton
      - click:
          identifier: us.mappings.home.feedback.doneButton
          wait: 2000

############################### ANDROID ####################################

  #Global Back navigation for Android
  - name: us.functions.global.navigation.backNavigation
    platform: android
    flow:
      - goBack: true   #This is TBD as Android is not MVP or available yet for mappings and or IDs

  #Open deep link for android
  - name: us.functions.global.navigation.goToDeepLink
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - verifyValue:
          identifier: $deepLinkUrl
          contains: 'walmart://'
      - openLink: ${deepLinkUrl}

  #Utility to navigate within buttom display tabs
  # [mandatory] ${tabName}  - Shop / My Items / Search / Services / Account
  - name: us.functions.global.navigation.toTab
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.global.bottomBar.tabLink
            - name: direction
              string: up
      - click:
          identifier: us.mappings.global.bottomBar.tabLink

  - name: us.functions.global.navigation.accountToHome
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Pre-transactions

      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.account.purchaseHistoryButton
          then:
              - scroll:
                  direction: up
                  untilIdentifier: us.mappings.account.purchaseHistoryButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.purchaseHistoryButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.tabBar.shop
          then:
            - click:
                identifier: us.mappings.tabBar.shop
          else:
    # scroling down and up for tab bar to be visible
            - scroll:
                direction: down
            - scroll:
                direction: up
            - click:
                identifier: us.mappings.tabBar.shop
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed  

  - name: us.functions.global.navigation.goToHome
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.shop

  - name: us.functions.global.navigation.accountToOrderHistory
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions      
      - sleep:
          duration: 2000
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.account.purchaseHistoryButton
      - click:
          identifier: us.mappings.account.purchaseHistoryRightArrow
          wait: 3000
      #- verifyIdentifier:
          #present:
            #- identifier: us.mappings.home.forYouTitle

  - name: us.functions.global.navigation.backNavigationFrompurchasehistory
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.navigation.backNavigationFrompurchasehistory
      - click:
          identifier: us.mappings.navigation.backNavigationFrompurchasehistory
          wait: 8000
          
  - name: us.functions.global.navigation.toCartFromNavBar
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Transactions

      - sleep:
          duration: 3000

      - verifyIdentifier:
          present:
            - identifier: us.mappings.navBar.cartIcon
      - click:
          identifier: us.mappings.navBar.cartIcon
      - executeFunction:
          name: us.functions.cart.itemMultiSellerUpdatePopUp          
      - executeFunction:
          name: us.functions.cart.storeChangePopUp 
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.startShoppingButton
          then:
            - log: "cart Page loaded"
          else:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.cart.unavailableAlert.oosheader
                then:
                  - log: "cart page loaded "
                else:
                  - if:
                      condition: ${skipValidation} == false
                      then:
                        - executeFunction:
                            name: us.functions.utils.handleTechnicalErrorPageInCart
                        - scroll:
                            direction: up
                            untilIdentifier: us.mappings.cart.navBarTitle
                            scrollLimit: 8
                        - verifyIdentifier:
                            present:
                              - identifier: us.mappings.cart.navBarTitle
                        - log: "cart page loaded"
            # - executeFunction:
            #     name: us.functions.utils.waitForLoadingImageToDisappear

  - name: us.functions.global.navigation.goToHomeFromTabBar
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.shop
      - click:
          identifier: us.mappings.tabBar.shop
          wait: 8000

  - name: us.functions.global.navigation.goToMyItemsFromTabBar
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
            - identifier: us.mappings.tabBar.myItems
          then:
            - scroll:
                direction: up
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.myItems
      - click:
          identifier: us.mappings.tabBar.myItems

  - name: us.functions.global.navigation.goToSearchFromTabBar
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.search
      - click:
          identifier: us.mappings.tabBar.search
  
  #Navigate to home from item details
  - name: us.functions.global.navigation.goToHomeFromItemDetails
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.item.closeButton
      - click:
          identifier: us.mappings.item.closeButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.shop
      - click:
          identifier: us.mappings.tabBar.shop   
  #Navigate to Account Tab
  - name: us.functions.global.navigation.goToAccountFromTabBar
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.tabBar.account
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.item.backButton
          then:
            - click:
                identifier: us.mappings.wlus.membershipBottomsheetClose
           
  - name: us.functions.global.navigation.homeToOrderHistory
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.searchBarSelected
      - if:
          identifier:
            present:
              - identifier: us.mappings.homePage.personalizationScreen.allowButton
          then:
            - click:
                identifier: us.mappings.homePage.personalizationScreen.allowButton
      - click:
          identifier: us.mappings.tabBar.account
      - executeFunction:
          name: us.functions.global.navigation.accountToOrderHistory

  - name: us.functions.global.navigation.goToWalletPage
    platform: android
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://wallet
      # - scroll:
      #     direction: up
      #     untilIdentifier: us.mappings.accounts.wallet
      # - click:
      #     identifier: us.mappings.accounts.wallet
      #     wait: 3000
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.accounts.wallet.title

  - name: us.functions.global.navigation.goToAccountFromWallet
    platform: android
    flow:
      - click:
          identifier: us.mappings.global.navigation.backNavigation
          wait: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.accounts.wallet

  - name: us.functions.global.navigation.goToReserveaSlotFromCart
    platform: android
    flow:
      - click:
          identifier: us.mappings.cart.reserveTime
          wait: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reserveSlot.title

  - name: us.functions.global.navigation.goToItemPageFromSearchResult
    platform: android
    flow:
      - click:
          identifier: us.mappings.myItems.itemTile.productImage
          wait: 200

  - name: us.functions.global.navigation.goToSignInFromHome
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.signInButton
      - click:
          identifier: us.mappings.home.signInButton

  - name: us.functions.global.navigateTofeedback
    platform: android
    flow:
      - if:
          condition: ${ServicesPage} == true
          then:
              - executeFunction:
                 name: us.functions.services.handleJoinOnePopup
              - storeIn:
                  key: ServicesPage
                  value: false
             #Scroll not working , Using drag here 
      - loop:
              begin: 1
              end: 4
              mode: increment
              flow:
                - if:
                   identifier:
                                    present: 
                                      - identifier: us.mappings.global.feedbackButton
                   then:
                                  - log: Feedback button reached
                                  - break: true
                   else:
                       - drag:
                                      from:
                                        x: 50%
                                        y: 55%
                                      to:
                                        x: 50%
                                        y: 50%      
      # - executeFunction:
      #     name: us.functions.utils.scrollIfNotVisible
      #     params:
      #       - name: identifier
      #         string: us.mappings.global.feedbackButton
      #       - name: direction
      #         string: down   
      #       - name: scrollLimit
      #         string: 15
      - log: Scroll Finished!
      - if: 
          identifier:
            present: 
              - identifier: us.mappings.global.feedbackButton
          then:
              - log: Feedback button reached
          else:
              - log: need more scroll for feedback button to be visible
              - scroll:
                  direction: down
                  untilIdentifier: us.mappings.global.feedbackButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.global.feedbackButton
      - click:
          identifier: us.mappings.global.feedbackButton

      - if:
          identifier:
            present:
              - identifier: us.mappings.global.feedbackButton
          then:
              - click:
                 identifier: us.mappings.global.feedbackButton

      - verifyIdentifier:
          text:
            - identifier: us.mappings.feedback.surveyHeaderTxt
              contains: Your feedback matters! Help us improve the Walmart app

  - name: us.functions.global.submitFeedback
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.feedback.starRatings 
      - click:
          identifier: us.mappings.feedback.starRatings
      - enterText:
          identifier: us.mappings.home.feedback.inlineFeedbackTxt
          string: ${feedbackReason} 
      # - hideKeyboard: true     
      - click:
          identifier: us.mappings.home.feedback.shareFeedbackButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.feedback.thankYouTitle    
            - identifier: us.mappings.feedback.thankYouSubText       
      - click:
          identifier:  us.mappings.home.feedback.doneButton 
      - log: Tested ${feedbackReason}

  - name: us.functions.global.navigation.goToAddressesGroupFromAccount
    platform: android
    flow:
      - scroll:          
          direction: down       
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.addressList
      - click:
          identifier: us.mappings.account.addressList 

  - name: us.functions.global.navigation.goToListTabFromMyitem
    platform: android
    flow:
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.listsTab
      - click:
          wait: 5000
          identifier: us.mappings.myItems.listsTab

  - name: us.functions.global.navigation.goToListTabFromMyitem
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.listsTab
      - click:
          wait: 5000
          identifier: us.mappings.myItems.listsTab

  - name: us.functions.global.navigation.toSubTab
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.global.accountPage.subTabLink
            - name: direction
              string: down
      - click:
          identifier: us.mappings.global.accountPage.subTabLink

  - name: us.functions.global.navigation.toSubTab
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.global.accountPage.subTabLink
            - name: direction
              string: down
      - click:
          identifier: us.mappings.global.accountPage.subTabLink

  - name: us.functions.global.navigateToSubscriptionPage
    platform: ios
    flow:
      - click: 
          identifier: us.mappings.account.accountButton                                                                
          wait: 1000 
      - scroll:
          untilIdentifier: us.mappings.account.subscriptionsAndPlans
          direction: down
          position: center
      - click: 
          identifier: us.mappings.account.subscriptionsAndPlans
          wait: 1000
      - click: 
          identifier: us.mappings.subscription.itemsubs 

  - name: us.functions.global.navigation.goToAddressesGroupFromAccount
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.AddressMenu
            - name: direction
              string: down
            - name: scrollPosition
              string: center    
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.account.AddressMenu
      - click:
          identifier: us.mappings.account.AddressMenu

  - name: us.functions.global.navigation.goToNewAddressScreenFromAddressGroup
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.addressGroupingAddAdressButtton
      - click:
          identifier: us.mappings.account.addressGroupingAddAdressButtton

  - name: us.functions.global.navigation.goToNewAddressScreenFromAddressGroup
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.addressGroupingAddAdressButtton
      - click:
          identifier: us.mappings.account.addressGroupingAddAdressButtton

  - name: us.functions.global.navigation.addressestoAccount
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier:  us.mappings.tabBar.account
      - click:
          identifier:  us.mappings.tabBar.account
          # doubleClick: true

  - name: us.functions.global.navigation.quantumMetric.getSessionDetails
    platform: ios
    flow:
#      - log: 'Quantum-results-${env}-${APP_PLATFORM}.json'
#      - executeNode:
#          file: us/e2e-tests/helpers/removeFile.js
#          args:
#            - value: 'Quantum-results-${env}-${APP_PLATFORM}.json'
      - sleep:
          duration: 20000
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://debugPanel #walmart://debugPanel/quantumMetricSession
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: Quantum Metric Session
            - name: direction
              string: down
      - click:
          identifier: Quantum Metric Session
      - if:
          identifier:
            present:
              - identifier: us.mappings.global.quantumSession.link
          then:
            - log: 'The QuantumMetric Session, Text present'
            - getString:
                identifier: us.mappings.global.quantumSession.link
                attribute: name
                storeIn: quantumMetricSession
            - log: 'The ------ QUANTUM METRIC SESSION Value -------- is: ${quantumMetricSession}'
            - click:
                identifier: us.mappings.global.quantumSession.link
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.global.quantumSession.copyButton
            - click:
                identifier: us.mappings.global.quantumSession.copyButton
          else:
            - log: '!!-------- The QuantumMetric Session, Text NOT present --------!!'
      - createFile:
          file: ./Quantum-results-${env}-${APP_PLATFORM}.json
          string: '{ "quantumSessionURL": "$quantumMetricSession" }'

  - name: us.functions.global.navigation.quantumMetric.getSessionDetails
    platform: android
    flow:
#      - log: 'Quantum-results-${env}-${APP_PLATFORM}.json'
#      - executeNode:
#          file: us/e2e-tests/helpers/removeFile.js
#          args:
#            - value: 'Quantum-results-${env}-${APP_PLATFORM}.json'
      - sleep:
          duration: 20000
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://debugPanel/product-metric
      - if:
          identifier:
            present:
              - identifier: us.mappings.global.quantumSessionReplayUrl.link
          then:
            - log: 'The QuantumMetric Session Replay URL present'
            - click:
                identifier: us.mappings.global.quantumSessionReplayUrl.link
            - getClipboard:
#                contentType: PLAINTEXT
                storeIn: quantumMetricSessionReplayUrl
            - log: 'The ------ QUANTUM METRIC SESSION Replay URL Value -------- is: ${quantumMetricSessionReplayUrl}'
          else:
            - log: '!!-------- The QuantumMetric Session Replay URL, Text NOT present --------!!'
      - if:
          identifier:
            present:
              - identifier: us.mappings.global.quantumSessionCookie.link
          then:
            - log: 'The QuantumMetric Session Cookie present'
            - click:
                identifier: us.mappings.global.quantumSessionCookie.link
            - getClipboard:
#                contentType: PLAINTEXT
                storeIn: quantumMetricSessionCookie
            - log: 'The ------ QUANTUM METRIC SESSION Cookie Value -------- is: ${quantumMetricSessionCookie}'
          else:
            - log: '!!-------- The QuantumMetric Session Cookie, Text NOT present --------!!'
      - createFile:
          file: ./Quantum-results-${env}-${APP_PLATFORM}.json
          string: '{ "quantumSessionURL": "$quantumMetricSessionReplayUrl", "quantumSessionCookie": "$quantumMetricSessionCookie" }'

# Verify subscription badge in search page
  - name: us.functions.search.subscriptionBadge
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.item.ilcFulfilmentLabel
            - name: direction
              string: down    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.search.subscribeBadge

  - name: us.functions.global.navigation.accountToPurchaseHistory
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.purchaseHistory.viewAllOrders
      - click:
          identifier: us.mappings.account.purchaseHistory.viewAllOrders
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderHistory.title            

  - name: us.functions.global.navigation.accountToHomeDeeplink
    platform: android
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://home
      - sleep:
          duration: 4000
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed  


  - name: us.functions.global.navigation.accountToHomeDeeplink
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://home
      - sleep:
          duration: 4000
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed  