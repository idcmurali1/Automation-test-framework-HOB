functions:
  # Verify in My Items, main header and first item, for iOS
  - name: us.functions.myItems.verifyPage
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.searchBarSelected
            # - identifier: us.mappings.myItems.mainHeader
            - identifier: us.mappings.myItems.removeItems
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.firstItem

  - name: us.functions.myItems.removeItemFromList
    platform: ios
    flow:
      - scroll:
          direction: down
          scrollLimit: 1
      - click:
          identifier: us.mappings.tabBar.myItems
      - click:
          identifier: us.mappings.myItems.listsTab
          wait: 2000
      - click:
          # identifier: us.mappings.myItems.itemListView 
          coordinates: 180, 350 
      - sleep:
          duration: 2000
      - click:
          identifier: us.mappings.myItems.itemListItemRemove   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.itemListItemRemovePopUp 
      - click:
          identifier: us.mappings.myItems.itemListItemPopUpRemoveButton
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.itemVeriftyListIsEmpty                    
      - click:
          identifier: us.mappings.tabBar.search
      - sleep:
          duration: 5000
      - executeFunction:
          name: us.functions.search.clickOnFirstItem

  - name: us.functions.myItems.verifyGuestMyItem 
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.signInButton
            - identifier: us.mappings.myItems.messageLabel
            - identifier: us.mappings.home.searchBarSelected

            # - identifier: us.mappings.myItems.mainHeader

  #Verify item details page for digital delivery items
  - name: us.functions.myItems.digitalDelivery.verifyItemDetails
    platform: ios
    flow:
      - scroll:
          direction: up
          scrollLimit: 3
      - scroll:
          direction: down
          untilIdentifier: us.mappings.reviewOrder.digitalDelivery.cardTitle
          position: center
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
          - identifier: us.mappings.cartMigration.cartHeaderMessageView
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.cartMigration.cartHeaderMessageView
          wait: 5000
      - if:
          condition: ${prepaidTopUp} == 'top-up'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidItemText
                label:
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidItemText
                    contains: 'Cost:'
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidItemText
                    contains: 'Phone number'
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidItemText
                    contains: ${prepaidMessage}
      - if:
          condition: ${3pGiftCard} == '3pGift'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardText
                label:
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardText
                    contains: 'Cost:'
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardText
                    contains: 'Email address'
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardText
                    contains: ${emailAddress}
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardText
                    contains: ${3pGiftCardMessage}
      - log: Finished validating ReviewOrder digitalDelivery ItemDetails page
      - click:
          identifier: us.mappings.myItems.digitalDelivery.doneButton
          wait: 10000

  #Signin from MyItemPage
  - name: us.functions.myItems.clickSignInButton
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.myItems.mainHeader
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.signInButton
            - click:
                identifier: us.mappings.myItems.signInButton
                wait: 5000
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.signInButton
            - click:
                identifier: us.mappings.myItems.signInButton
                wait: 5000

  #Verify MyItem Page for Newuser
  - name: us.functions.myItems.verifyNewUserMyItem 
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.searchBarSelected
            - identifier: us.mappings.myItems.messageLabel
            # - identifier: us.mappings.myItems.mainHeader 
          label:
            - identifier: us.mappings.myItems.messageLabel
              equals: Everyday items you've bought will show here for quick and easy reordering

  - name: us.functions.myItems.navigation.goToMyItemsFromTabBar
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.home.feedback.givefeedback.button
      - scroll:
          direction: up
          untilIdentifier: us.mappings.tabBar.myItems  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.myItems
      - click:
          identifier: us.mappings.tabBar.myItems

  - name: us.functions.myItems.checkout.reviewOrder.verifyCard
    platform: ios
    flow:
      - if :
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.pickupPersonText
          then:
            - verifyIdentifier:
                timeout: 50000
                present:         
                  - identifier: us.mappings.reviewOrder.curbsidepickup.cardTitle
                  - identifier: us.mappings.reviewOrder.scheduledDelivery.slotDetails
                  - identifier: us.mappings.reviewOrder.pickupPersonText
                  - identifier: us.mappings.reviewOrder.pickupPersonName
                  - identifier: us.mappings.reviewOrder.editPickupPersonLink
                  - identifier: us.mappings.reviewOrder.mobileContactText
                  - identifier: us.mappings.reviewOrder.getTextInfo
          else: 
            - verifyIdentifier:
                timeout: 50000
                present: 
                  - identifier: us.mappings.reviewOrder.fcDelivery.cardTitle

  - name: us.functions.myItems.clickOnFirstItem
    platform: ios
    flow:
      - sleep:
          duration: 10000
      - click:
          identifier: us.mappings.myItems.sortBy
          wait: 1000
      - if:
          identifier:
            present:
              - identifier: us.mappings.myItems.sortByOptions
          then:
            - click:
                identifier: us.mappings.myItems.sortByOptions
      - click:
          identifier: us.mappings.myItems.sortByFrequentlyBought
      - click:
          identifier: us.mappings.myItems.sortBy.confirmButton  
      - sleep:
          duration: 5000                  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.firstItem
      - click:
          identifier: us.mappings.myItems.firstItem
      - sleep:
          duration: 5000
      # - if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.item.closeItemDetailsPage
      #     then:    
      #       - verifyIdentifier:
      #           timeout: 20000
      #           present:
      #             - identifier: us.mappings.item.addToCartButton    

# Function to delete Existing list in my items page
  - name: us.functions.myItems.deleteExistingList
    platform: ios
    flow:
      - sleep:
          duration: 5000    
      - executeFunction:
          name: us.functions.global.navigation.accountToHome
      - executeFunction:
          name: us.functions.global.navigation.goToMyItemsFromTabBar
      - verifyIdentifier:
          present:
              - identifier: us.mappings.myItems.listsTab
      - click:
          wait: 5000
          identifier: us.mappings.myItems.listsTab
      - sleep:
          duration: 10000    
      - loop:
            begin: 0
            end: 3
            storeIndex: loop
            mode: increment
            flow:
              - log: $loop         
              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.myItems.nonPrimaryList
                  then:
                    - verifyIdentifier:
                        present:
                          - identifier: us.mappings.myItems.nonPrimaryList
                    - click:
                        identifier: us.mappings.myItems.nonPrimaryList
                        wait: 5000
                    - verifyIdentifier:
                        present:
                            - identifier: us.mappings.myItems.settingButton
                    - click:
                        wait: 5000      
                        identifier: us.mappings.myItems.settingButton
                    - click:
                        identifier: us.mappings.myItems.deleteListSettings
                    - click:
                        identifier: us.mappings.myItems.deleteListConfirm
                    - sleep:
                        duration: 10000
                    - verifyIdentifier:
                        present:
                          - identifier: us.mappings.myItems.deleteListAckMsg
                  else:
                    - log: "There is no other list apart from primary"        

  - name: us.functions.myItems.deleteExistingList
    platform: android
    flow:
      - sleep:
          duration: 10000    
      - loop:
            begin: 0
            end: 3
            storeIndex: loop
            mode: increment
            flow:
              - log: $loop
              - sleep:
                  duration: 10000          
              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.myItems.nonPrimaryList
                  then:
                    - verifyIdentifier:
                        present:
                          - identifier: us.mappings.myItems.nonPrimaryList
                    - click:
                        identifier: us.mappings.myItems.nonPrimaryList
                        wait: 5000
                    - verifyIdentifier:
                        present:
                            - identifier: us.mappings.myItems.settingButton
                    - click:
                        wait: 5000      
                        identifier: us.mappings.myItems.settingButton
                    - click:
                        identifier: us.mappings.myItems.deleteListSettings
                    - click:
                        identifier: us.mappings.myItems.deleteListConfirm
                  else:
                    - log: "There is no other list apart from primary"
#  Create a new list in my items page
  - name: us.functions.myItems.createNewList
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - executeFunction:
          name: us.functions.global.navigation.goToMyItemsFromTabBar
      - verifyIdentifier:
          present:
              - identifier: us.mappings.myItems.listsTab
      - click:
          wait: 5000
          identifier: us.mappings.myItems.listsTab
      - click:
          identifier: us.mappings.myItems.createListBtn
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.enterListName
      - sleep:
          duration: 3000
      - enterText:
          identifier: us.mappings.myItems.enterListName
          string: "TestList"
      - click:
           identifier: Return 
      - hideKeyboard: true
      - sleep:
          duration : 5000 
      - click:
          identifier: us.mapping.myItems.newListCreateBtn
      - sleep:
          duration : 3000           
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.verifyNewSList

  - name: us.functions.myItems.createNewList
    platform: android
    flow:
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.myItems.createListBtn
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.enterListName
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.myItems.enterListName
      - enterText:
          identifier: us.mappings.myItems.enterListName
          string: "ListTest"
      - sleep:
          duration : 3000 
      - click:
          identifier: us.mapping.myItems.newListCreateBtn
      - sleep:
          duration : 3000           
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.verifyNewSList

#  Search and add a item to list
  - name: us.functions.myItems.addToListandCart
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - executeFunction:
          name: us.functions.global.navigation.accountToHome          
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: us.data.prod.gic.sharedItem6
      - verifyIdentifier:
          present:
            - identifier: us.mappings.search.firstItem
      - click:
          identifier: us.mappings.search.firstItem
      - sleep:
          duration: 5000
      - verifyIdentifier:
          timeout: 100000
          present:
            - identifier: us.mappings.itemPage.itemName
      - executeFunction:
          name: us.functions.search.handleAccLdPopUp
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.itemPage.wplus.addToListOption
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.itemPage.wplus.addToListOption
      - click:
          identifier:  us.mappings.itemPage.wplus.addToListOption
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.secondaryListRadio
      - click:
          identifier: us.mappings.myItems.secondaryListRadio
      - click:
          identifier: us.mappings.accounts.wallet.saveButton
      - executeFunction:
          name: us.functions.item.closeItemPage  
      - executeFunction:
          name: us.functions.global.navigation.goToMyItemsFromTabBar
      - executeFunction:
          name: us.functions.myItems.addAnItemToList
          params:
            - name: searchTerm
              string: table    
      - sleep:
          duration: 5000                               
      - click:
          identifier: us.mappings.myItems.addToCartList   
      - sleep:
          duration: 3000             
      - verifyIdentifier:
          present:
            - identifier: us.mappings.navBar.cartIconWithCount
      - click:
          identifier: us.mappings.myItems.saveRewardsBackBtn 

  - name: us.functions.myItems.addItemToList
    platform: android
    flow:          
      - sleep:
          duration: 5000          
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
              - name: identifier
                string: us.mappings.itemPage.addToListOption
              - name: direction 
                string: down    
      - click:
          identifier:  us.mappings.itemPage.addToListOption
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.secondaryListRadio
      - click:
          identifier: us.mappings.myItems.secondaryListRadio
      - click:
          identifier: us.mappings.myItems.wallet.saveButton
    # added sleep for list page to close 
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.item.closeItemPage    
      - sleep:
          duration: 2000                     

  - name: us.functions.myItems.addItemToCart
    platform: android
    flow:          
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.myItems.nonPrimaryList
      - sleep:
          duration: 3000          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.newListItemAdded  # Verifying item added in new list
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.verifyNewSList
      - click:
          identifier: us.mappings.myItems.addToCartList
          wait: 3000
      - sleep:
          duration: 3000             
      - verifyIdentifier:
          present:
            - identifier: us.mappings.navBar.cartIconWithCount
      - click:
          identifier: us.mappings.myItems.saveRewardsBackBtn                     
            
#add registry
  - name: us.functions.myItems.Addregistry
    platform: ios
    flow:
      - if :
          identifier:
            present:
              - identifier: us.mappings.myitems.addregistrylink
          then:
              - if:
                  condition: ${scroll}
                  then:
                    - executeFunction:
                        name: us.functions.utils.scrollIfNotVisible
                        params:
                          - name: identifier
                            string: us.mappings.myitems.addregistrylink
                          - name: direction
                            string: up
                    - verifyIdentifier:
                        present: 
                          - identifier: us.mappings.myitems.addregistrylink
          else:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.myitems.addregistrylink
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - click:
          identifier: us.mappings.myitems.addregistrylink
      - if:
          identifier:
            timeout: 50000
            present:
              - identifier: us.mappings.myitems.CreateNewRegistryLink   
          then:
            - click:
                identifier: us.mappings.myitems.CreateNewRegistryLink
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myitems.CreateNewRegistryWedding
            - identifier: us.mappings.myitems.CreateNewRegistryBaby 
            # - identifier: us.mappings.myitems.CreateNewRegistryEvent
            - identifier: us.mappings.myitems.CreateNewRegistryForGoods
      - click:
          identifier: us.mappings.myitems.CreateNewRegistryBaby
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.myitems.CreateRegistryTitle
            - identifier: us.mappings.myitems.CreateRegistry.TrackerView 
            - identifier: us.mappings.myitems.CreateRegistry.CongratulationTitle
            - identifier: us.mappings.myitems.CreateRegistry.FirstName
            - identifier: us.mappings.myitems.CreateRegistry.LastName
      - enterText:
          identifier: us.mappings.myitems.CreateRegistry.FirstName
          string: Anai
      - enterText:
          identifier: us.mappings.myitems.CreateRegistry.LastName
          string: Irshu
      - click:
          identifier: Done  
      - scroll:
          direction: down
      - if :
          identifier:
            present:
              - identifier: us.mappings.myitems.CreateRegistry.registryName
          then:
            - enterText:
                identifier: us.mappings.myitems.CreateRegistry.registryName
                string: $RegistryName
            - click:
                identifier: Done
      - click:
          identifier: us.mappings.myitems.CreateRegistry.ContinueButton
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myitems.CreateRegistry.DateTitle 
            - identifier: us.mappings.myitems.CreateRegistry.DateInput
      - click:
          identifier: us.mappings.myitems.CreateRegistry.DateInput
      - click:
          identifier: us.mappings.myitems.CreateRegistry.SelectDate
          wait: 2000
      - click:
          identifier: us.mappings.myitems.CreateRegistry.ContinueButton
          doubleClick: true
          wait: 1000
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myitems.CreateRegistry.ChooseAddress
      - click:
          identifier: us.mappings.myitems.CreateRegistry.ChooseAddress
      - getString:
          identifier: us.mappings.myitems.CreateRegistry.customerAddress
          attribute: label
          storeIn: registryAddress     
      - log: $registryAddress            
      - click:
          identifier: us.mappings.myitems.CreateRegistry.ContinueButton
      - click:
          identifier: us.mappings.myitems.CreateRegistry.CTAbutton
      - goBack: true
      - sleep:
          duration: 10000
      - if :
          identifier:
            present:
              - identifier: us.mappings.item.closeScreen
          then:
            - click:
                identifier: us.mappings.item.closeScreen

#verify Registry
  - name: us.functions.myItems.VerifyRegistry
    platform: ios
    flow:        
      - executeFunction:
          name: us.functions.global.navigation.goToAccountFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.VerifyRegistry.Myitems
            - name: direction
              string: down
      - click:
          identifier: us.mappings.account.VerifyRegistry.Myitems
      - click:
          identifier: us.mappings.account.Registry
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.FindRegistryCTA
            - identifier: us.mappings.account.createRegistryCTA 
            - identifier: us.mappings.account.BabyRegistry
      - click:
          identifier: us.mappings.account.registryDetails
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.registryName
      - executeFunction:
          name: us.functions.global.navigation.accountToHome
      - sleep:
          duration: 5000
#delete registry
  - name: us.functions.myItems.deleteRegistry
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToAccountFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.VerifyRegistry.Myitems
            - name: direction
              string: down
      - click:
          identifier: us.mappings.account.VerifyRegistry.Myitems
      - click:
          identifier: us.mappings.account.Registry
      - click:
          identifier: us.mappings.account.registryDetails
      - click:
          identifier: us.mappings.account.deleteRegistry.settings
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.account.deleteRegistry.goTowebsite
      - sleep:
          duration: 5000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.deleteRegistry.DeleteRegistryLink
            - name: direction
              string: down
      - scroll:
          direction: down
      - click:
          identifier: us.mappings.account.deleteRegistry.DeleteRegistryLink
      - click:
          identifier: us.mappings.account.deleteRegistry.confirmDeleteRegistry
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.deleteRegistry.alert
      - sleep:
          duration: 5000

  - name: us.functions.myItems.verifySavedRewardsPage
    platform: ios
    flow:
      - click:
          identifier: us.mappings.tabBar.shop
      - executeFunction:        
          name: us.functions.global.navigation.goToMyItemsFromTabBar 
      - click:
          identifier: us.mappings.myItems.listAndFavouritesTab            
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:        
            - identifier:  us.mappings.myItems.saveRewardsPage
      - click:
          identifier: us.mappings.myItems.saveRewardsPage
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:        
            - identifier: us.mappings.myitems.yourRewardItemsLists

  - name: us.functions.myItems.verifyRegistryAddToCart
    platform: ios
    flow:   
      - sleep:
          duration: 5000     
      - executeFunction:
          name: us.functions.global.navigation.goToAccountFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.Registry
            - name: direction
              string: down
            - name: scrollPosition
              string:  center
      - click:
          identifier: us.mappings.account.Registry
      - if:
          identifier:
            present:
              - identifier: us.mappings.account.goToRegistryButton
          then:
            - click:
                identifier: us.mappings.account.goToRegistryButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.FindRegistryCTA
            - identifier: us.mappings.account.createRegistryCTA 
            - identifier: us.mappings.account.BabyRegistry
      - click:
          identifier: us.mappings.account.registryDetails
      - click:
          identifier: us.mappings.account.registryDetailsProductTileView
      - verifyIdentifier:
          timeout: 120000
          present:
            - identifier: us.mappings.itemPage.itemName
      - executeFunction:
          name: us.functions.item.addItemToCart 

    
################################################## Android ######################################################

  # Verify in My Items, main header and first item, for Android
  - name: us.functions.myItems.verifyPage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.searchBar
            # - identifier: us.mappings.myItems.mainHeader
            # - identifier: us.mappings.myItems.removeItems
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.firstItem

  - name: us.functions.myItems.verifySavedRewardsPage
    platform: android
    flow:
      - executeFunction:        
          name: us.functions.global.navigation.goToMyItemsFromTabBar 
      - click:
          identifier: us.mappings.myItems.listAndFavorites            
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:        
            - identifier:  us.mappings.savedrewardspage.yoursavedrewards.text
      - click:
          identifier: us.mappings.savedrewardspage.yoursavedrewards.text
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:        
            - identifier: us.mappings.savedrewardspage.yoursavedrewards.text
            - identifier: us.mappings.savedrewardspage.listsItemDetails

  - name: us.functions.myItems.verifyGuestMyItem 
    platform: android
    flow:    
      - verifyIdentifier:
          present:        
            - identifier: us.mappings.myItems.signInButton
            - identifier: us.mappings.myItems.messageLabel
            - identifier: us.mappings.myItems.mainHeader   

  #Verify item details page for digital delivery items
  - name: us.functions.myItems.digitalDelivery.verifyItemDetails
    platform: android
    flow:
      - scroll:
          direction: up
          scrollLimit: 3
      - scroll:
          direction: down
          untilIdentifier: us.mappings.myItems.digitalDelivery.mixedDelivery.itemDetailsLink
          position: center
      - click:
          identifier: us.mappings.myItems.digitalDelivery.mixedDelivery.itemDetailsLink
          wait: 5000
      - scroll:
          direction: up
          untilIdentifier: us.mappings.myItems.digitalDelivery.itemDetailsText
      - verifyIdentifier:
          present: 
          - identifier: us.mappings.myItems.digitalDelivery.itemDetailsText
      - executeFunction:
          name: us.functions.myItems.digitalDelivery.storeIndexes
      - if:
          condition: ${prepaidTopUp} == 'top-up'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidItemText
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidPhoneNumber
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidPhoneNumberLabel
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidItemPrice
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidMessage
                text:
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidPhoneNumberLabel
                    contains: Phone number
                  - identifier: us.mappings.myItems.digitalDelivery.prepaidMessage
                    contains: us.data.flow018.myItems.prepaidItem.message
      - if:
          condition: ${3pGiftCard} == '3pGift'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardText
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardPrice
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardEmailLabel
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardEmail
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardMessage
                text:
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardEmailLabel
                    contains: Email address
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardEmail
                    contains: ${emailAddress}
                  - identifier: us.mappings.myItems.digitalDelivery.3pGiftCardMessage
                    contains: us.data.flow018.myItems.3pGiftCard.message
      - log: Finished validating ReviewOrder digitalDelivery ItemDetails page
      - click:
          identifier: us.mappings.myItems.digitalDelivery.doneButton
          wait: 10000

  #Store digital delivery item indexes
  - name: us.functions.myItems.digitalDelivery.storeIndexes
    platform: android
    flow:
      - getString:
          identifier: us.mappings.myItems.digitalDelivery.firstItemText
          attribute: text
          storeIn: itemDescription
      - if:
          condition: ${itemDescription} == 'Phone number'
          then:
            - storeIn:
                key: prepaidIndex
                value: 1
            - storeIn:
                key: 3pGiftIndex
                value: 2
          else:
            - storeIn:
                key: prepaidIndex
                value: 2
            - storeIn:
                key: 3pGiftIndex
                value: 1

  #Signin from MyItemPage
  - name: us.functions.myItems.clickSignInButton
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.myItems.mainHeader
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.signInButton
            - click:
                identifier: us.mappings.myItems.signInButton
                wait: 5000
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.signInButton
            - click:
                identifier: us.mappings.myItems.signInButton
                wait: 5000

  #Verify MyItem Page for Newuser
  - name: us.functions.myItems.verifyNewUserMyItem 
    platform: android
    flow:
      - sleep:
          duration : 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.messageLabel
            - identifier: us.mappings.myItems.searchBar
            # - identifier: us.mappings.myItems.mainHeader 
          text:
            - identifier: us.mappings.myItems.messageLabel
              equals: Everyday items you've bought will show here for quick and easy reordering
            # - identifier: us.mappings.myItems.mainHeader
            #   contains: My items

  - name: us.functions.myItems.removeItemFromList
    platform: android
    flow:
      - scroll:
          direction: up
          scrollLimit: 1
      - click:
          identifier: us.mappings.tabBar.myItems
      - click:
          identifier: us.mappings.myItems.listsTab
      - click:
          identifier: us.mappings.myItems.itemListView 
      - click:
          identifier: us.mappings.myItems.itemListItemRemove   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.itemListItemRemovePopUp 
      - click:
          identifier: us.mappings.myItems.itemListItemRemove
      - if :
          identifier:
            present:
              - identifier: us.mappings.error.dismissButton
          then:
            - click:
                identifier: us.mappings.backButton
            - sleep:
                duration: 2000
            - click:
                identifier: us.mappings.myItems.itemListView 
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.itemVeriftyListIsEmpty                    
      - click:
          identifier: us.mappings.backButton
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.tabBar.search
      - executeFunction:
          name: us.functions.search.clickOnFirstItem

  - name: us.functions.myItems.navigation.goToMyItemsFromTabBar
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.home.feedback.givefeedback.button
      - scroll:
          direction: up
          untilIdentifier: us.mappings.tabBar.myItems  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tabBar.myItems
      - click:
          identifier: us.mappings.tabBar.myItems

  - name: us.functions.myItems.cart.verify
    platform: android
    flow:
      - executeFunction:
          name: us.functions.cart.scrollToTopOfCart
      - if :
          identifier:
            present:
              - identifier: us.mappings.cart.pickup.cardTitle
          then:
            - executeFunction:
                name: us.functions.cart.scrollToTopOfCart
            - verifyIdentifier:
                timeout: 50000
                present:
                  - identifier: us.mappings.cart.navBarTitle
                  - identifier: us.mappings.cart.reserveTime
          else:
            - executeFunction:
                name: us.functions.cart.fcDelivery.verifyCard
  
  - name: us.functions.myItems.checkout.reviewOrder.verifyCard
    platform: android
    flow:
      - if :
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.pickupPersonText
          then:
            - verifyIdentifier:
                timeout: 50000
                present:         
                  - identifier: us.mappings.reviewOrder.curbsidepickup.cardTitle
                  - identifier: us.mappings.reviewOrder.pickupPersonText
          else: 
            - verifyIdentifier:
                timeout: 50000
                present: 
                  - identifier: us.mappings.reviewOrder.cardTitle

  #android add registry 
  - name: us.functions.myItems.Addregistry
    platform: android
    flow:
      - if :
          identifier:
            present:
              - identifier: us.mappings.myitems.addregistryTitle
          then:
              - verifyIdentifier:
                  present: 
                    - identifier: us.mappings.myitems.addregistryTitle
          else:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.myitems.addregistrylink
                  - name: direction
                    string: down
            - click:
                identifier: us.mappings.myitems.addregistrylink          
            - sleep:
               duration: 1000
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier: us.mappings.myitems.addregistryTitle

      # Selecting 'Create new registery' link
      - if :
          identifier:
            present:
              - identifier: us.mappings.myitems.CreateNewRegistryLink
          then:
              - click: 
                  identifier: us.mappings.myitems.CreateNewRegistryLink
      - sleep:
          duration: 4000 
      - if:
          identifier:
            present:
              - identifier: us.mappings.myitems.CreateNewRegistryBaby         
          then:            
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myitems.addregistryTitle              
                  - identifier: us.mappings.myitems.CreateNewRegistryWedding
                  - identifier: us.mappings.myitems.CreateNewRegistryBaby 
                  - identifier: us.mappings.myitems.CreateNewRegistryEvent
                  - identifier: us.mappings.myitems.CreateNewRegistryForGoods
            - click:
                identifier: us.mappings.myitems.CreateNewRegistryBaby
            - sleep:
                duration: 4000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myitems.CreateRegistryTitle
                  - identifier: us.mappings.myitems.CreateRegistry.TrackerView 
                  # - identifier: us.mappings.myitems.CreateRegistry.FirstStatus
                  - identifier: us.mappings.myitems.CreateRegistry.CongratulationTitle
                  - identifier: us.mappings.myitems.CreateRegistry.FirstName
                  - identifier: us.mappings.myitems.CreateRegistry.LastName
            - enterText:
                identifier: us.mappings.myitems.CreateRegistry.FirstName
                string: Anai
            - enterText:
                identifier: us.mappings.myitems.CreateRegistry.LastName
                string: Irshu
            - hideKeyboard: true
            - scroll:
                direction: down
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.myitems.CreateRegistry.registryName
                then:
                  - enterText:
                      identifier: us.mappings.myitems.CreateRegistry.registryName
                      string: $RegistryName
            - hideKeyboard: true
            - click:
                identifier: us.mappings.myitems.CreateRegistry.ContinueButton
            - sleep:
                duration: 3000
            - verifyIdentifier:
                present:
                  # - identifier: us.mappings.myitems.CreateRegistry.SecondStatus
                  - identifier: us.mappings.myitems.CreateRegistry.DateTitle 
                  - identifier: us.mappings.myitems.CreateRegistry.DateInput
            - click:
                identifier: us.mappings.myitems.CreateRegistry.DateInput
            - click:
                identifier: us.mappings.marketplace.bluetoothTurnOn
            - click:
                identifier: us.mappings.myitems.CreateRegistry.ContinueButton
                doubleClick: true
            - sleep:
                duration: 3000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myitems.CreateRegistry.WhereToShip
                  # - identifier: us.mappings.myitems.CreateRegistry.ThirdStatus 
                  - identifier: us.mappings.myitems.CreateRegistry.ChooseAddress
            - click:
                identifier: us.mappings.myitems.CreateRegistry.ChooseAddress
            - getString:
                identifier: us.mappings.myitems.CreateRegistry.customerAddress
                attribute: text
                storeIn: Address     
            - executeNode:
                file: us/e2e-tests/helpers/splitVariantString.js
                args:
                  - value: ${Address}
                  - value: ','
                getResponse:
                  storeIn: registryAddress
            - log: $registryAddress
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.myitems.CreateRegistry.ContinueButton
                  - name: direction
                    string: down        
            - click:
                identifier: us.mappings.myitems.CreateRegistry.ContinueButton
            - click:
                identifier: us.mappings.myitems.CreateRegistry.CTAbutton
            - click:
                identifier: us.mappings.item.closeButton
            - sleep:
                duration: 3000
            - if :
                identifier:
                  present:
                    - identifier: us.mappings.item.closeButton
                then:
                  - click:
                      identifier: us.mappings.item.closeButton

#verify registry 
  - name: us.functions.myItems.VerifyRegistry
    platform: android
    flow: 
      - scroll:
          direction: down
      - scroll:
          direction: up         
      - executeFunction:
          name: us.functions.global.navigation.goToAccountFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.Registry
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - click:
          identifier: us.mappings.account.Registry
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.FindRegistryCTA
            - identifier: us.mappings.account.createRegistryCTA 
            - identifier: us.mappings.account.BabyRegistry
      - click:
          identifier: us.mappings.account.registryDetails
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.registryName
            # - identifier: us.mappings.account.departmentTitle 
            - identifier: us.mappings.account.registryDetailsProductTileView
      #Verify Share Registry link
      - click:
          identifier: us.mappings.myItems.shareThisRegistry
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.copyCta
            # - identifier: us.mappings.myItems.nearbyCta 
            - identifier: us.mappings.myItems.shareThisRegistryDescription    
      - goBack: true            
      # - click:
      #     identifier: us.mappings.backButton
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://home
      - sleep:
          duration: 5000
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed     

#verify registry AddToCart 
  - name: us.functions.myItems.verifyRegistryAddToCart
    platform: android
    flow: 
      - scroll:
          direction: down
      - scroll:
          direction: up         
      - executeFunction:
          name: us.functions.global.navigation.goToAccountFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.Registry
            - name: direction
              string: down
      - click:
          identifier: us.mappings.account.Registry
      - verifyIdentifier:
          present:
            - identifier: us.mappings.account.FindRegistryCTA
            - identifier: us.mappings.account.createRegistryCTA 
            - identifier: us.mappings.account.BabyRegistry
      - click:
          identifier: us.mappings.account.registryDetails
      - click:
          identifier: us.mappings.account.registryDetailsProductTileView
      - executeFunction:
          name: us.functions.item.addItemToCart
          
  - name: us.functions.myItems.sponsored.carousel1
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.viewSubstitutionPopUpCloseButton
          then:
            - click:
                identifier: us.mappings.reviewOrder.viewSubstitutionPopUpCloseButton
                coordinates: 50%, 50%
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myitems.sponsored.productyoumaylikeSection
            - name: direction
              string: down
            - name: scrollPosition
              string: center
            - name: limit
              string: 15 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myitems.sponsored.label
      - verifyIdentifier:
          present:
              - identifier: us.mappings.item.sponsored.ATCbutton  
      - click:
          identifier: us.mappings.item.sponsored.ATCbutton
      # - sleep:
      #     duration: 5000  
      # - click:
      #     identifier: us.mappings.item.sponsored.ATCbutton                     
      # - click:
      #     identifier: us.mappings.item.sponsored.ATCbutton.increment 
      # - sleep:
      #     duration: 5000  
      # - click:        #commented due to dynamic ATC button
      #     identifier: us.mappings.item.sponsored.ATCbutton          
      # - click:
      #     identifier: us.mappings.item.sponsored.ATCbutton.decrement 
      - click:
          identifier: us.mappings.item.sponsored.clickonitem 
      # - sleep:
      #     duration: 5000
      - verifyIdentifier:
          timeout: 60000
          present:
              # - identifier: us.mappings.item.sponsored.item.brandName
              - identifier: us.mappings.item.sponsored.item.title
      - executeFunction:
          name: us.functions.item.closeItemPage

  - name: us.functions.myItems.sponsored.carousel1
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myitems.sponsored.productyoumaylikeText
            - name: direction
              string: down
            - name: scrollPosition
              string: center 
      - if :
          identifier:
            notPresent:
              - identifier: us.mappings.myitems.sponsored.label
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.myitems.sponsored.label
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center                 
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myitems.sponsored.label
      - verifyIdentifier:
          present:
              - identifier: us.mappings.myitems.sponsored.productGrid 
              - identifier: us.mappings.myItems.atc.quantityAdded 
              - identifier: us.mappings.item.sponsored.flag               
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.item.sponsored.ratings
            - name: direction
              string: down
            - name: scrollPosition
              string: center                          
      - verifyIdentifier:
          present:
              - identifier: us.mappings.item.sponsored.ratings
      - click:
          identifier: us.mappings.myItems.atc.quantityAdded   
      # - click:
      #     identifier: us.mappings.item.sponsored.ATCbutton.increment 
      # - click:
      #     identifier: us.mappings.item.ad.SponsoredAd.ATCbutton.decrement

     # Verify Item stepper
      - executeFunction:
          name: us.functions.itemPage.verifyStepper  
                
      - click:
          identifier: us.mappings.myitems.sponsored.productGrid 
      - verifyIdentifier:
          present:
              - identifier: us.mappings.item.sponsored.item.brandName
              - identifier: us.mappings.item.sponsored.item.title
      - executeFunction:
          name: us.functions.item.closeItemPage

  - name: us.functions.myItems.deleteRegistry
    platform: android
    flow: 
      - executeFunction:
          name: us.functions.account.navigateToRegisteryView
      - loop:
         begin: 0
         end: 5
         storeIndex: i
         flow:
           - log: $i
           - if:
               identifier:
                 present: 
                   - identifier: us.mappings.account.registryDetails
               then:
                 - log: Registry is not empty, removing Registry
                 - click:
                     identifier: us.mappings.account.registryDetails
                     wait: 3000
                 - click:
                     identifier: us.mappings.myItems.deleteRegistry.settings
                 - executeFunction:
                     name: us.functions.utils.scrollIfNotVisible
                     params:
                       - name: identifier
                         string: us.mappings.account.deleteRegistry
                       - name: direction
                         string: down
                 - click:
                     identifier: us.mappings.account.deleteRegistry
                 - click:
                     identifier: us.mappings.account.ConfirmdeleteRegistry
                 - verifyIdentifier:
                    present:
                      - identifier: us.mappings.myItems.deleteRegistry.deleteRegistrySuccessmessage
               else:
                    - log: No Registries to Remove 
                    - break: true
      
  - name: us.functions.myItems.signin.addItemRegistry
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myitems.addregistrylink
            - name: direction
              string: down
      - click:
          identifier: us.mappings.myitems.addregistrylink
      - executeFunction:
          name: us.functions.global.authentication.signInAccount
      - sleep:
          duration: 5000

  - name: us.functions.myItems.verify.itemAddedtoRegistry
    platform: android
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToAccountFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.Registry
            - name: direction
              string: down
      - click:
          identifier: us.mappings.account.Registry
      - click:
          identifier: us.mappings.account.registryDetails
      - click:
          identifier: us.mappings.account.registryDetailsProductTileView
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myitems.verifyregistry.productname
            - name: direction
              string: down

  - name: us.functions.myItems.addAnItemToList
    platform: android
    flow: 
      - click:
          identifier: us.mappings.myItems.verifyNewSList
      - executeFunction: 
          name: us.functions.myItems.listShareOption
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.addAnItemToListSearchText
      - click:
          identifier: us.mappings.myItems.addAnItemToListSearchText
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.addAnItemToListSearchText
      - click:
          identifier: us.mappings.myItems.addAnItemToListSearchText
      - sleep:
          duration: 2000
      - enterText:
          identifier: us.mappings.myItems.addAnItemToListSearchText
          string: ${searchTerm}
      - sleep:
          duration: 2000
      - click:
          identifier: us.mappings.myItems.clickOnFirstResult
      - sleep:
          duration: 2000
      - goBack: true
      - click:
          identifier: us.mappings.myItems.findItem
      - scroll:
          direction: down
          untilIdentifier: us.mappings.myItems.scrollUntilAddToList
          position: center
          withinIdentifier: us.mappings.myItems.listsShopSimilarContainer
      - click:
          identifier: us.mappings.myItems.scrollUntilAddToList

  - name: us.functions.myItems.listShareOption
    platform: android
    flow:  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.listShare
      - click:
          identifier: us.mappings.myItems.listShare
      - sleep:
          duration: 2000
      - goBack: true

  - name: us.functions.myItems.addAnItemToList
    platform: ios
    flow: 
      - click:
          identifier: us.mappings.myItems.verifyNewSList
      - sleep:
          duration: 2000
      - executeFunction:
          name: us.functions.myItems.listShareOption
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.addAnItemToListSearchText
      - click:
          identifier: us.mappings.myItems.addAnItemToListSearchText
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.addAnItemToListSearchText
      - click:
          identifier: us.mappings.myItems.addAnItemToListSearchText
      - sleep:
          duration: 2000
      - enterText:
          identifier: us.mappings.myItems.addAnItemToListSearchText
          string: ${searchTerm}
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.myItems.clickOnFirstResult
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.myItems.findItemCancel
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.myItems.findItem
      - sleep:
          duration: 3000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.myItems.scrollUntilAddToList
      - click:
          identifier: us.mappings.myItems.scrollUntilAddToList

  - name: us.functions.myItems.listShareOption
    platform: ios
    flow:  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.listShare
      - click:
          identifier: us.mappings.myItems.listShare
      - sleep:
          duration: 2000
      - click:
          identifier: us.mappings.global.closeButton

  - name: us.functions.myItems.signin.addItemRegistry
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myitems.addregistrylink
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - click:
          identifier: us.mappings.myitems.addregistrylink
          # doubleClick: true
      - executeFunction:
          name: us.functions.global.authentication.signInAccount
      - sleep:
          duration: 5000
      - if:
          condition: ${existingRegistry}
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myitems.addregistryTitle
            - click:
                identifier: us.mappings.myitems.addregistry.saveButton
            - sleep:
                duration: 5000
            - try:
                flow:
                  - verifyIdentifier:
                      notPresent:
                        - identifier: us.mappings.myitems.addregistryTitle
                catch:
                  flow:
                    - failTest:
                        message: "ENV_FAILURE - ${env} - Item could not be saved to registry"            

  - name: us.functions.myItems.verify.itemAddedtoRegistry
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToAccountFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.account.VerifyRegistry.Myitems
            - name: direction
              string: down
      - click:
          identifier: us.mappings.account.VerifyRegistry.Myitems
      - click:
          identifier: us.mappings.account.Registry
      - click:
          identifier: us.mappings.account.registryDetails
      - click:
          identifier: us.mappings.account.registryDetailsProductTileView
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myitems.verifyregistry.productname
      - click:
          identifier: us.mappings.item.closeButton

  - name: us.functions.myItems.reorder.verifySubscriptionBanner
    platform: android
    flow:
      - if :
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.subscriptionBanner
          then:
            - log: Subscription banner is displayed on MyItems Reorder page
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.reorder.subscriptionBannerTitle
                  - identifier: us.mappings.myItems.reorder.subscriptionBannerCTA
                  - identifier: us.mappings.myItems.reorder.subscriptionBanner.closeBtn
          else:
            - failTest:
               message: "ENV_FAILURE - ${env} - Subscription banner is not displayed on MyItems- Reorder page"


  - name: us.functions.myItems.reorder.selectSubscriptionBannerCTA
    platform: android
    flow:
      - click : 
          identifier: us.mappings.myItems.reorder.subscriptionBannerCTA  
      - sleep:
          duration: 5000
      - log: Verifying tooltip with close on subscription eligible items listing page
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myitems.reorder.subscriptionItemsListing.tooltip.text 
            - identifier: us.mappings.myitems.reorder.subscriptionItemsListing.tooltip.close  

  - name: us.functions.myItems.reorder.selectSubscriptionItem
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.myItems.reorder.subscriptionItem  

      - log: Select subscription eligible item subscribe CTA      
      - click:
          identifier:  us.mappings.myItems.reorder.subscriptionItem
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionPanelHeader
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
            - identifier: us.mappings.myItems.reorder.subscriptionFREQ
      - log: Enrollment panel is displayed                                        

  - name: us.functions.myItems.reorder.verifySubscriptionBanner
    platform: ios
    flow:
      - if :
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.subscriptionBanner
          then:
            - log: Subscription banner is displayed on MyItems Reorder page
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.reorder.subscriptionBannerTitle
                  - identifier: us.mappings.myItems.reorder.subscriptionBannerCTA
                  - identifier: us.mappings.myItems.reorder.subscriptionBanner.closeBtn
          else:
            - failTest:
               message: "ENV_FAILURE - ${env} - Subscription banner is not displayed on MyItems- Reorder page"


  - name: us.functions.myItems.reorder.selectSubscriptionBannerCTA
    platform: ios
    flow:
      - log: Navigating to subscription eligible items listing page by selecting subscription banner CTA
      - click : 
          identifier: us.mappings.myItems.reorder.subscriptionBannerCTA  
          wait: 5000
      # - log: Verifying tooltip with close on subscription eligible items listing page
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.myitems.reorder.subscriptionItemsListing.tooltip.text 
      #       - identifier: us.mappings.myitems.reorder.subscriptionItemsListing.tooltip.close  
      # - log: Tooltip id displayed

  - name: us.functions.myItems.reorder.selectSubscriptionItem
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.myItems.reorder.subscriptionItem      

      - log: Select subscription eligible item subscribe CTA      
      - click:
          identifier: us.mappings.myItems.reorder.subscriptionItem
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionPanelHeader
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
            - identifier: us.mappings.myItems.reorder.subscriptionFREQ
      - log: Enrollment panel is displayed

  - name: us.functions.myItems.reorder.verifyStepper
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
          label:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
              contains: 1 in cart
      - log: Default QTY '1' is displayed.  
      - log: Verifying if stepper value can be increased.    
      - click: 
          identifier: us.mappings.myItems.reorder.subscriptionStepper                         
      - click: 
          identifier: us.mappings.myItems.reorder.subscription.stepper.incrementBtn
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
          label:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
              contains: 2 in cart          
      - log: Stepper value is increased and QTY = 2
      - log: Verifying if stepper value can be decreased.
      # - if:
      #     identifier:
      #       present:
      #         - identifier: us.mappings.myItems.subscription.count
      #     then:
      #       - click:
      #           identifier: us.mappings.myItems.subscription.count     
      - click: 
          identifier: us.mappings.myItems.reorder.subscriptionStepper          
      - click: 
          identifier: us.mappings.myItems.reorder.subscription.stepper.decrementBtn
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
          label:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
              contains: 1 in cart          
      - log: Stepper value is decreased and QTY = 1      

  - name: us.functions.myItems.reorder.verifyFREQ 
    platform: ios
    flow:
      - log: Verifying if FREQ can be changed
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionFREQ3Weeks         
      - click: 
          identifier: us.mappings.myItems.reorder.subscriptionFREQ3Weeks  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionFREQ4Weeks    
      - click: 
          identifier: us.mappings.myItems.reorder.subscriptionFREQ4Weeks              

  - name: us.functions.myItems.reorder.verifyStepper
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
          text:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
              contains: 1
      - log: Default QTY '1' is displayed.  
      - log: Verifying if stepper value can be increased.
      - click: 
          identifier: us.mappings.myItems.reorder.subscription.stepper.incrementBtn
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
          text:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
              contains: 2          
      - log: Stepper value is increased and QTY = 2
      - log: Verifying if stepper value can be decreased.
      - click: 
          identifier: us.mappings.myItems.reorder.subscription.stepper.decrementBtn
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
          text:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
              contains: 1          
      - log: Stepper value is decreased and QTY = 1      

  - name: us.functions.myItems.reorder.verifyFREQ 
    platform: android
    flow:
      - log: Verifying if FREQ can be changed
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionFREQ3Weeks      
      - click: 
          identifier: us.mappings.myItems.reorder.subscriptionFREQ3Weeks
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionFREQ4Weeks      
      - click: 
          identifier: us.mappings.myItems.reorder.subscriptionFREQ4Weeks 

  - name: us.functions.myItems.reorder.subscriptionPanel.addSubscriptionToCart
    platform: ios
    flow:
      - log: Adding Subscription item to cart.
      - click:
          identifier: us.mappings.myItems.reorder.subscriptionPanel.addSubscription     
      - sleep:
         duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.navBar.cartIconCount 
          label:
            - identifier: us.mappings.navBar.cartIconCount 
              contains: "1"         
      - log: Subscription item is added to cart and navBar cart count is displayed as 1         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionItem.stepperCount
          label:
            - identifier: us.mappings.myItems.reorder.subscriptionItem.stepperCount
              contains: "1"         
      - log: Subscribe CTA is no longer displayed and stepper count is displayed as 1     
      # - click:
      #     identifier: us.mappings.myItems.reorder.subscriptionItem.stepperCount   

  - name: us.functions.myItems.reorder.subscriptionPanel.addSubscriptionToCart
    platform: android
    flow:
      - log: Adding Subscription item to cart.
      - click:
          identifier: us.mappings.myItems.reorder.subscriptionPanel.addSubscription     
      - sleep:
         duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.navBar.cartIconEmpty 
          text:
            - identifier: us.mappings.navBar.cartIconEmpty 
              contains: "1"         
      - log: Subscription item is added to cart and navBar cart count is displayed as 1 

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myItems.reorder.subscriptionItem.stepperCount
            - name: direction
              string: down         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionItem.stepperCount
          text:
            - identifier: us.mappings.myItems.reorder.subscriptionItem.stepperCount
              contains: "1"         
      - log: Subscribe CTA is no longer displayed and stepper count is displayed as 1     
      - click:
          identifier: us.mappings.myItems.reorder.subscriptionItem.stepperCount                        

  - name: us.functions.myItems.addOTPItemToCart 
    platform: ios
    flow:
      - log: Adding OTP item to cart.     
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: us.data.otp.item  
      - executeFunction:
          name: us.functions.item.addItemToCart        

  - name: us.functions.myItems.addOTPItemToCart 
    platform: android
    flow:
      - log: Adding OTP item to cart.     
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: us.data.otp.item  
      - executeFunction:
          name: us.functions.item.addItemToCart                              

  - name: us.functions.myItems.deleteRegistryItems
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToMyItemsFromTabBar
      - click:
          identifier: us.mappings.myitems.registry
      - click:
          identifier: us.mappings.myitems.registryName
      - loop:
            begin: 0
            end: 3
            storeIndex: loop
            mode: increment
            flow:
              - log: $loop         
              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.myitems.registry.removeItemButton
                  then:
                    - scroll:
                        direction: down
                        untilIdentifier: us.mappings.myitems.registry.removeItemButton
                    - click:
                        identifier: us.mappings.myitems.registry.removeItemButton
                        wait: 5000
                    - click:
                        identifier: us.mappings.myItems.itemListItemRemove
                  else:
                    - break: true        

  - name: us.functions.myItems.reorder.verifyBulkEnrollmentBanner
    platform: ios
    flow:
      - if :
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollmentBanner
          then:
            - log: Subscription banner is displayed on MyItems Reorder page
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.reorder.bulkEnrollmentBannerTitle
                  - identifier: us.mappings.myItems.reorder.bulkEnrollmentBannerCTA
                  - identifier: us.mappings.myItems.reorder.bulkEnrollmentBanner.closeBtn
          else:
            - failTest:
               message: "ENV_FAILURE - ${env} - Bulk Enrollment banner is not displayed on MyItems- Reorder page"


  - name: us.functions.myItems.reorder.selectBulkEnrollmentBannerCTA
    platform: ios
    flow:
      - log: Navigating to bottom sheet listing all eligible items by selecting Bulk Enrollment banner CTA
      - click : 
          identifier: us.mappings.myItems.reorder.bulkEnrollmentBannerCTA 
          wait: 8000
      - if:
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollmentBanner.ad
          then:
            - click : 
                identifier: us.mappings.global.closeButton
      - sleep:
         duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheetTitle
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.addSubscriptionToCart
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.closeButton 
      - log: Eligible items listing bottom sheet is displayed

  - name: us.functions.myItems.reorder.bulkEnrollment.addToCart
    platform: ios
    flow:
      - log : Adding to cart
      - click:
          identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.addSubscriptionToCart
          wait: 3000

  - name: us.functions.myItems.reorder.bulkEnrollment.addToCart
    platform: android
    flow:
      - log : Adding to cart
      - click:
          identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.productCheckbox      
      - click:
          identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.addSubscriptionToCart
          wait: 3000


  - name: us.functions.myItems.reorder.bulkEnrollment.addSubscriptionsToCart
    platform: ios
    flow:      
      - if :
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.deselectAll
          then:
            - log: Deselecting all subscriptions  
            - click:
                 identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.deselectAll
                 wait: 3000
      - getString:
          identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.subscriptionItemTitle
          attribute: label
          storeIn: selectedItemLabel   
      - log: Selected subscription item is - $selectedItemLabel            
      - if :
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.subscriptionItem.checkBox 
          then:
            - log: Selecting subscription item
            - click:
                 identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.subscriptionItem.checkBox 
                 wait: 3000
          else:
            - failTest:
               message: "ENV_FAILURE - ${env} - Subscription item is not avaliable"
      - log: Add selected subscription to cart
      - click : 
          identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.addSubscriptionToCart 
          wait: 8000
        # GoTo cart
      - executeFunction: 
            name: us.functions.global.navigation.toCartFromNavBar 
      - log: Verifying if selected subscription is added to cart
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.subscriptionItemInCart

  - name: us.functions.myItems.reorder.bulkEnrollment.verifySubscriptionPresent      
    platform: ios    
    flow:
            - if:
                identifier:
                  present:
                  - identifier: us.mappings.myItems.reorder.bulkEnrollment.subscriptionItemInCart 
                then:
                  - failTest:
                      message: "ENV_FAILURE - ${env} - Items lying in CART is displayed on bottom sheet."
                else:        
                  - executeFunction:
                      name: us.functions.utils.scrollIfNotVisible
                      params:
                        - name: identifier
                          string: us.mappings.myItems.reorder.bulkEnrollment.subscriptionItemInCart 
                        - name: direction
                          string: down         
            - if:
                identifier:
                  present:
                  - identifier: us.mappings.myItems.reorder.bulkEnrollment.subscriptionItemInCart 
                then:
                  - failTest:
                      message: "ENV_FAILURE - ${env} - Items lying in CART is displayed on bottom sheet."   
             

  - name: us.functions.myItems.reorder.verifyBulkEnrollmentBanner
    platform: android
    flow:
      - if :
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollmentBanner
          then:
            - log: Subscription banner is displayed on MyItems Reorder page
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.reorder.bulkEnrollmentBannerTitle
                  - identifier: us.mappings.myItems.reorder.bulkEnrollmentBannerCTA
                  - identifier: us.mappings.myItems.reorder.bulkEnrollmentBanner.closeBtn
          else:
            - failTest:
               message: "ENV_FAILURE - ${env} - Bulk Enrollment banner is not displayed on MyItems- Reorder page"

  - name: us.functions.myItems.reorder.selectBulkEnrollmentBannerCTA
    platform: android
    flow:
      - log: Navigating to bottom sheet listing all eligible items by selecting Bulk Enrollment banner CTA
      - click : 
          identifier: us.mappings.myItems.reorder.bulkEnrollmentBannerCTA 
          wait: 8000
      - if:
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollmentBanner.ad
          then:
            - click : 
                identifier: us.mappings.global.closeButton
      - sleep:
         duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheetTitle
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.addSubscriptionToCart
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.closeButton 
      - log: Eligible items listing bottom sheet is displayed


  - name: us.functions.myItems.reorder.bulkEnrollment.addSubscriptionsToCart
    platform: android
    flow:      
      - if :
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.deselectAll
          then:
            - log: Deselecting all subscriptions  
            - click:
                 identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.deselectAll
                 wait: 3000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.subscriptionItemTitle
            - name: direction
              string: up                   
      - getString:
          identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.subscriptionItemTitle
          attribute: text
          storeIn: selectedItemLabel     
      - log: Selected subscription item is - $selectedItemLabel
      - if :
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.subscriptionItem.checkBox 
          then:
            - log: Selecting subscription item
            - click:
                 identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.subscriptionItem.checkBox 
                 wait: 3000
          else:
            - failTest:
               message: "ENV_FAILURE - ${env} - Subscription item is not avaliable"
      - log: Add selected subscription to cart
      - click : 
          identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.addSubscriptionToCart 
          wait: 8000
        # GoTo cart
      - executeFunction: 
            name: us.functions.global.navigation.toCartFromNavBar 
      - log: Verifying if selected subscription is added to cart
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myItems.reorder.bulkEnrollment.cart.subscriptionItemInCart
            - name: direction
              string: down         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.cart.subscriptionItemInCart

  - name: us.functions.myItems.reorder.bulkEnrollment.verifySubscriptionPresent      
    platform: android
    flow:
            - if:
                identifier:
                  present:
                  - identifier: us.mappings.myItems.reorder.bulkEnrollment.subscriptionItemInCart 
                then:
                  - failTest:
                      message: "ENV_FAILURE - ${env} - Items lying in CART is displayed on bottom sheet."
                else:        
                  - executeFunction:
                      name: us.functions.utils.scrollIfNotVisible
                      params:
                        - name: identifier
                          string: us.mappings.myItems.reorder.bulkEnrollment.subscriptionItemInCart 
                        - name: direction
                          string: down         
            - if:
                identifier:
                  present:
                  - identifier: us.mappings.myItems.reorder.bulkEnrollment.subscriptionItemInCart 
                then:
                  - failTest:
                      message: "ENV_FAILURE - ${env} - Items lying in CART is displayed on bottom sheet."                  

  - name: us.functions.myItems.reorder.bulkEnrollmentPanel.verifyStepper
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkSubscriptionItemStepper
          text:
            - identifier: us.mappings.myItems.reorder.bulkSubscriptionItemStepper
              contains: 0
      - log: Default QTY '0' is displayed.  
      - sleep:
          duration: 1000
      - log: Verifying if stepper value can be increased.
      - click: 
          identifier: us.mappings.myItems.reorder.bulkSubscriptionItemStepper.incrementBtn         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
          text:
            - identifier: us.mappings.myItems.reorder.subscriptionStepper
              greaterThan: 0
      - log: Stepper value is increased and QTY = 1
      - sleep:
          duration: 1000      
      - log: Verifying if stepper value can be decreased.
      - click: 
          identifier: us.mappings.myItems.reorder.bulkSubscriptionItemStepper.decrementBtn
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkSubscriptionItemStepper
          text:
            - identifier: us.mappings.myItems.reorder.bulkSubscriptionItemStepper
              contains: 0         
      - log: Stepper value is decreased and QTY = 0   

  - name: us.functions.myItems.reorder.bulkEnrollmentPanel.verifyFREQ 
    platform: android
    flow:
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.myItems.reorder.bulkEnrollment.2WeeksFreq 
      # - log: Default Freq 2 weeks is displayed  
      # - sleep:
      #     duration: 1000         
      - log: Verifying if FREQ can be changed  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.freqDropdown     
      - click: 
          identifier: us.mappings.myItems.reorder.bulkEnrollment.freqDropdown         
      - sleep:
          duration: 1000           
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.2WeeksFreq       
      - click: 
          identifier: us.mappings.myItems.reorder.bulkEnrollment.2WeeksFreq 
      - log: Modified FREQ to 2 weeks                 
      - sleep:
          duration: 1000   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.freqDropdown     
      - click: 
          identifier: us.mappings.myItems.reorder.bulkEnrollment.freqDropdown         
      - sleep:
          duration: 1000                  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.6WeeksFreq       
      - click: 
          identifier: us.mappings.myItems.reorder.bulkEnrollment.6WeeksFreq                 
      - log: Modified FREQ to 6 weeks   

  - name: us.functions.myItems.reorder.bulkEnrollmentPanel.verifyStepper
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.qtyInCart
          label:
            - identifier: us.mappings.myItems.qtyInCart 
              contains: 0
      - log: Default QTY '0' is displayed.  
      - sleep:
          duration: 1000
      - log: Verifying if stepper value can be increased.
      - click: 
          identifier: us.mappings.item.Quantityincrement
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.qtyInCart
          label:
            - identifier: us.mappings.myItems.qtyInCart
              contains: 1       
      - log: Stepper value is increased and QTY = 1
      - sleep:
          duration: 1000      
      - log: Verifying if stepper value can be decreased.
      - click: 
          identifier: us.mappings.bulkitem.atc.decrementStepper
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.qtyInCart
          label:
            - identifier: us.mappings.myItems.qtyInCart
              contains: 0       
      - log: Stepper value is decreased and QTY = 0   

      - click: 
          identifier: us.mappings.item.Quantityincrement

  - name: us.functions.myItems.reorder.bulkEnrollmentPanel.verifyFREQ 
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.freqDropdown   
      - log: Freq dropdown is displayed         
      - log: Verifying if FREQ can be changed  
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.myItems.reorder.bulkEnrollment.freqDropdown     
      - click: 
          identifier: us.mappings.myItems.reorder.bulkEnrollment.freqDropdown         
          wait: 2000         
             
      - executeFunction:
          name: us.functions.myItems.reorder.bulkEnrollmentPanel.selectFREQ 
          params:
            - name: FREQ
              string: Every 3 weeks         
      - log: Modified FREQ to 3 weeks     

      - executeFunction:
          name: us.functions.myItems.reorder.bulkEnrollmentPanel.selectFREQ 
          params:
            - name: FREQ
              string: Every 6 weeks         
      - log: Modified FREQ to 6 weeks   

      - verifyIdentifier:
          present:
            - identifier: us.mappings.myItems.reorder.bulkEnrollment.freqPicker.cancelBtn       
      - click:
          identifier: Done    
          wait: 2000  

  - name: us.functions.myItems.reorder.bulkEnrollmentPanel.selectFREQ 
    platform: ios
    flow:          
      - enterText:
          identifier: us.mappings.myItems.reorder.bulkEnrollment.freqPicker
          string: ${FREQ}

  - name: us.functions.manageSubscription.selectFREQ
    platform: ios
    flow:
      - enterText:
          identifier: us.mappings.manageSubscription.freqPicker
          string: ${FREQ}
      - click:
          identifier: us.mappings.myitems.CreateRegistry.DoneButton
          wait: 2000
  
  # Verify Fresh and Frozen snapshot banner content and CTA
  - name: us.functions.myItems.reorder.freshAndFrozenSnapshotBanner
    platform: ios
    flow:
      - click : 
          identifier: us.mappings.myItems.reorder.bulkEnrollmentBannerCTA 
      - if:
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollment.freshAndFrozen.snapshotBanner
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.reorder.bulkEnrollment.freshAndFrozen.snapshotBannerContent
                  - identifier: us.mappings.myItems.reorder.bulkEnrollment.freshAndFrozen.snapshotBannerButton
            - click: 
                identifier: us.mappings.myItems.reorder.bulkEnrollment.freshAndFrozen.snapshotBannerButton
            - log: Fresh and Frozen banner validation is successful!
          else: 
            - log: Fresh and Frozen banner is not appearing - Bulk Enrollment bottom sheet appeared with eligible items 
            - verifyIdentifier:
                   present:
                        - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheetTitle
                        - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.addSubscriptionToCart
                        - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.closeButton 
  
      
   # Verify Fresh and Frozen snapshot banner content and CTA
  - name: us.functions.myItems.reorder.freshAndFrozenSnapshotBanner
    platform: android
    flow:
      - click : 
          identifier: us.mappings.myItems.reorder.bulkEnrollmentBannerCTA 
      - if:
          identifier:
            present:
              - identifier: us.mappings.myItems.reorder.bulkEnrollment.freshAndFrozen.snapshotBanner
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.myItems.reorder.bulkEnrollment.freshAndFrozen.snapshotBannerContent
                  - identifier: us.mappings.myItems.reorder.bulkEnrollment.freshAndFrozen.snapshotBannerButton
            - click: 
                identifier: us.mappings.myItems.reorder.bulkEnrollment.freshAndFrozen.snapshotBannerButton
            - log: Fresh and Frozen banner validation is successful!
          else: 
            - log: Fresh and Frozen banner is not appearing - Bulk Enrollment bottom sheet appeared with eligible items 
            - verifyIdentifier:
                   present:
                        - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheetTitle
                        - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.addSubscriptionToCart
                        - identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.closeButton 

     # FnF item bulk enrollment 
  - name: us.functions.myItems.reorder.bulkEnrollment.FnFItem
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.FnFItem
            - name: direction
              string: down          
      - click: 
           identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.FnFItem 

     # FnF item bulk enrollment 
  - name: us.functions.myItems.reorder.bulkEnrollment.FnFItem
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.FnFItem
            - name: direction
              string: down          
      - click: 
           identifier: us.mappings.myItems.reorder.bulkEnrollment.bottomSheet.FnFItem            