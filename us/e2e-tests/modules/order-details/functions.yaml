
functions:

  - name: us.functions.orderDetails.ost.pickup.verifyOrderStatus
    platform: ios
    flow:
      - storeIn:
          key: fulfillmentStatus
          value: true
      - executeFunction:
          name: us.function.resetOrderStatus
          params:
            - name: orderStatus   
              string: ${orderStatus}    
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.progressBar
              equals: ${orderStatus}
      - if:
          condition: ${fulfillmentType} != 'MP_PICKUP'
          then:  
             - try:
                flow:     
                  - verifyIdentifier:
                      value:
                        - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                          contains: ${fulfillmentType}
                catch:
                  flow:
                    - storeIn:
                        key: fulfillmentStatus
                        value: false
             - if:
                 condition: ${fulfillmentStatus} == false
                 then:
                    - getString:
                        identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                        attribute: value
                        storeIn: actualFulfillmentType
                    - failTest:
                        message: "DATA_FAILURE - ${env} - Expected fulfillment type was ${fulfillmentType} but order created for ${actualFulfillmentType}"
      - if:
          condition: ${fulfillmentType} == 'MP_PICKUP'
          then:
             - verifyIdentifier:
                 present:
                   - identifier: us.mappings.orderDetails.mppickupStore


  - name: us.functions.orderDetails.ost.scheduledDelivery.verifyOrderStatus
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
              equals: ${fulfillmentType}
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.progressBar
              equals: ${orderStatus}

  - name: us.functions.orderDetails.ost.scheduledExpressDelivery.verifyOrderStatus
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.expressSlotCopy
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
              equals: ${fulfillmentType}
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.progressBar
              equals: ${orderStatus}

  - name: us.functions.orderDetails.ost.fcDelivery.verifyOrderStatus
    platform: ios
    flow:
      - if:
          condition: ${fulfillmentType} == 'Shipping' || ${fulfillmentType} == 'Env√≠o'
          then:
            - storeIn:
                key: fulfillmentType
                value: us.data.fulfillment.delivery
      - if:
          condition: ${flag} != 'skip'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackOrderButton
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.orderDetails.progressBar
                    equals: ${orderStatus}
      - if:
          condition: ${altFulfillmentType} != null
          then:
            - try:
                flow:
                  - verifyIdentifier:
                      value:
                        - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                          contains: ${fulfillmentType}
                catch:
                  flow:
                    - verifyIdentifier:
                        value:
                          - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                            contains: ${altFulfillmentType}
          else:
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                    contains: ${fulfillmentType}

      - storeIn:
          key: altFulfillmentType
          value: 'null'

  - name: us.functions.orderDetails.verifyTrackShipmentDetails
    platform: ios
    flow: 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.trackShipmentButton
      - click:
          identifier: us.mappings.orderDetails.trackShipment.trackShipmentButton
      - loop:
          begin: 0
          end: 3
          flow:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.orderDetails.trackShipment.trackingErrorButton
                then:
                  - click:
                      identifier: us.mappings.popup.okButton
                      wait: 3000
                  - click:
                      identifier: us.mappings.orderDetails.trackShipment.trackShipmentButton
                else:
                  - break: true
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.trackShipment.trackingErrorButton
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} -  Tracking error!"                        
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.title   
            - identifier: us.mappings.orderDetails.trackShipment.progressBar
            - identifier: us.mappings.orderDetails.trackShipment.deliveryAddress
            - identifier: us.mappings.orderDetails.trackShipment.fulfilmentStatus.shipped
      - click:
          identifier: us.mappings.subs.orderPickedUpSubsOrderDetailPage.viewButton
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.helpCenterOrGetHelpButton
      - if:
          condition: ${fulfillmentStatus} == 'Shipped'
          then: 
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackShipment.arrivesByText
                  - identifier: us.mappings.orderDetails.trackShipment.shippedStatusDetails
      - if:
          condition: ${fulfillmentStatus} == 'Delivered'
          then: 
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackShipment.shipmentDeliveredText
                  - identifier: us.mappings.orderDetails.trackShipment.fulfilmentStatus.delivered
                  - identifier: us.mappings.orderDetails.trackShipment.deliveredStatusDetails
      # - click: 
      #     identifier: us.mappings.orderHistory.backButton

  - name: us.functions.orderDetails.verifyLotDetails
    platform: ios
    flow: 
      - click:
          identifier: us.mappings.orderDetails.trackOrderStatusButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderdetails.trackOrder.mapView 
            - identifier: us.mappings.orderdetails.trackorder.mapView.orderstatus.onTheWay
            - identifier: us.mappings.orderdetails.trackOrder.estimatedArrivalText
            - identifier: us.mappings.orderdetails.trackorder.mapView.contactDriverButton
            - identifier: us.mappings.orderdetails.trackorder.mapView.trackingProgressBar
      - click: 
          identifier: us.mappings.orderdetails.trackorder.mapView.closeButton
    
  - name: us.functions.orderDetails.ost.mixedOrder.verifyOrderStatus
    platform: ios
    flow:
      - executeFunction:
          name: us.function.resetOrderStatus
          params:
            - name: orderStatus   
              string: ${orderStatus}
      - try:
          flow:
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.orderDetails.fulfillmentTypeLabelMixedOrder # Include param index with this
                    contains: ${fulfillmentType}
          catch:
            flow:
              - verifyIdentifier:
                  value:
                    - identifier: us.mappings.orderDetails.fulfillmentTypeLabelMixedOrder # Include param index with this
                      contains: ${altFulfillmentType}
      - if:
          condition: ${fulfillmentType} != 'Digital delivery' && ${orderStatus} != 'Pending'
          then:
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.orderDetails.progressBarMixedOrder # Include param index with this
                    contains: ${orderStatus}
      - storeIn:
          key: altFulfillmentType
          value: 'null'

  - name: us.functions.orderDetails.validateSubscriptionEnabled
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.subscriptionEnabledIcon
            - name: direction
              string: down
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.subscriptionEnabledIcon
          then:
            - log: "subscription is applied successfully"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - The subscription icon should be shown but is not"

  - name: us.functions.orderDetails.verifyOrderStatusMsgAndTrackerDetails
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.statusMsgLabel
            - identifier: us.mappings.orderDetails.progressBar
          label:
            - identifier: us.mappings.orderDetails.statusMsgLabel
              contains: ${message}
          value:
            - identifier: us.mappings.orderDetails.progressBar
              contains: ${orderStatus}
      - if:
          condition: ${orderStatus} == 'On the way'
          then:
            # - verifyIdentifier:
            #     present:
            #       - identifier: us.mappings.orderDetails.trackOrderStatusButton
            # - click:
            #     identifier: us.mappings.orderDetails.trackOrderStatusButton
            # - click:
            #     wait: 3000
            #     identifier: Ok
            # - verifyIdentifier:
            #     present:
            #       - identifier: us.mappings.orderdetails.trackOrder.mapView
            # - click:
            #     identifier: us.mappings.orderdetails.trackorder.mapView.closeButton
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackOrderStatusButton
      - if:
          condition: ${orderStatus} == 'Delivered'
          then:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.orderDetails.trackOrderStatusButton
                present:
                  # - identifier: us.mappings.orderDetails.returnEligibilityText
                  - identifier: us.mappings.orderDetails.deliveryProofImage
                  - identifier: us.mappings.orderDetails.deliveryProofDescription

  - name: us.functions.orderDetails.goToHomeScreen
    platform: ios
    flow:
      - click:
          identifier: us.mappings.orderDetails.backButton
      - click:
          identifier: us.mappings.orderHistory.backButton
      - click:
          identifier: us.mappings.tabBar.shop
  
  - name: us.functions.orderDetails.navigateBack
    platform: ios
    flow:
      - click:
          identifier: us.mappings.orderDetails.backButton

#Petrx Amends - Added by Murali Krish
  - name: us.functions.orderDetails.PetrxAmends
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://orders/$orderNo
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.petrxAmendsReviewButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.petrxprescreptionUpdates
            - identifier: us.mappings.orderDetails.petrxfulfillmentTypeLabel
            - identifier: us.mappings.orderDetails.petrxAmendsReviewButton
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.orderDetails.petrxfulfillmentTypeLabel
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.orderDetails.petrxAmendsReviewButton
      - click:
          identifier: us.mappings.orderDetails.petrxAmendsReviewButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.petrxUpdatesApproveButton
            - identifier: us.mappings.orderDetails.petrxUpdatesDeclineButton
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.orderDetails.petrxUpdatesDeclineButton
      - if:
          condition: ${rejectPetrx} == true
          then:      
            - click:
                identifier: us.mappings.orderDetails.petrxUpdatesDeclineButton
      - if:
          condition: ${acceptPetrx} == true
          then:      
            - click:
                identifier: us.mappings.orderDetails.petrxUpdatesApproveButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.petrxUpdatesConfirmButton
      - click:
          identifier: us.mappings.orderDetails.petrxUpdatesConfirmButton
      - storeIn:
          key: rejectPetrx
          value: false
      - storeIn:
          key: acceptPetrx
          value: false

 #Petrx user accepts amends 
  - name: us.functions.orderDetails.PetrxOrderAfterAmendsAccept
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://orders/$orderNo
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.myitems.CreateRegistry.TrackerView
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.petrxAcceptAmendQty 
      - log: Accept amend Petrx item successful

#Petrx user rejects amends - Added by Murali Krish
  - name: us.functions.orderDetails.PetrxOrderAfterAmendsReject
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://orders/$orderNo
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.petrxOrderSuccessfullyAmended
            - identifier: us.mappings.orderDetails.petrxOrderSuccessfullyCancelled
            # - identifier: us.mappings.orderDetails.ViewDetailspetrxOrderSuccessfullyCancelled
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.orderDetails.petrxOrderSuccessfullyCancelled
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.orderDetails.ViewDetailspetrxOrderSuccessfullyCancelled
      # - click:
      #     identifier: us.mappings.orderDetails.ViewDetailspetrxOrderSuccessfullyCancelled
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.orderDetails.ViewDetailspetrxCancellationTitle
      # - click:
      #     identifier: us.mappings.orderDetails.ViewDetailspetrxClickOK


  - name: us.functions.orderDetails.navigateToYourOrdersScreen
    platform: ios
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - executeFunction:
          name: us.functions.global.authentication.signInAccount
      - click:
          identifier: us.mappings.account.yourOrdersButton

  - name: us.functions.orderDetails.verifyOrdersPresentScheduledPickUp
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.yourOrders.scheduledPickup
          then:
            - log: "Scheduled pick up order present"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected Scheduled Pick up order but not found"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.yourOrders.scheduledPickup

  - name: us.functions.orderDetails.verifyOrdersPresentScheduledDelivery
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.yourOrders.scheduledDeliveryOrder
          then:
            - log: "Scheduled Delivery Order Present"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected Scheduled Delivery Order But Not Found"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.yourOrders.scheduledDeliveryOrder

  - name: us.functions.orderDetails.verifyOrdersPresentUnScheduledPickUp
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.yourOrders.unscheduledPickup
          then:
            - log: "Unscheduled Pick Up Order Present"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected Unscheduled Pick Up Order But Not Found"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.yourOrders.unscheduledPickup

  - name: us.functions.orderDetails.verifyOrderReadyForPickUp
    platform: ios
    flow:
      - if:
          identifier: 
            present:
              - identifier: us.mappings.yourOrders.readyForPickupStatus
          then:
            - log: "Order status id Ready For Pick Up"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected the status to be Ready For Pick Up but actual status is not"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.yourOrders.timelineTracker

  - name: us.functions.orderDetails.fcDelivery.tapTrackOrderButton
    platform: ios
    flow:
      - click:
          identifier: us.mappings.orderDetails.trackOrderButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.trackShipment.screenTitle
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.trackShipment.shippingStatus            
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.shippingStatus  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.helpCenterButton           
      - click:
          identifier: us.mappings.orderDetails.trackShipment.backNavigation

  - name: us.functions.orderDetails.clickChargeHistoryPage
    platform: ios
    flow:
       - storeIn:
          key: executionStage
          value: Post-transactions
       # Storing Credit card details 
       - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.ledger.creditCard.infoString
            - name: direction
              string: down
       - getString:
          identifier: us.mappings.ledger.creditCard.infoString
          attribute: label
          storeIn: creditCardInfo
       - log: Credt card used is ${creditCardInfo}
       - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.chargeHistoryButton.name
            - name: direction
              string: down
       - verifyIdentifier:
            present:
               - identifier: us.mappings.orderDetails.chargeHistoryButton.name
       - verifyIdentifier:
            label:
              - identifier: us.mappings.orderDetails.chargeHistorytile.textMessage
                contains: Your transaction activity for this order
       - click:
            identifier: us.mappings.orderDetails.chargeHistoryButton.name
      
  
  - name: us.functions.orderDetails.verifyChargeHistoryPage
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ledger.header.chargeHistory
      - if:
          condition: ${orderStatus} == 'order placed'
          then:
              - click:
                  identifier: us.mappings.orderDetails.ledger.creditCardCarousel
              - verifyIdentifier: 
                  present:
                    - identifier: us.mappings.ledger.temporaryHold.string
                    - identifier: us.mappings.ledger.temporaryHold.contextHelp.icon
              - click:
                  identifier: us.mappings.ledger.temporaryHold.contextHelp.icon
              - verifyIdentifier:
                  label:
                    - identifier: us.mappings.ledger.temporaryHold.inline.helpText
                      contains: Your bank should remove the temporary hold on your card within 10 business days after receiving your order.
              - click:
                  identifier: us.mappings.ledger.temporaryHold.inlineText.close
              - verifyIdentifier:
                  present:
                    - identifier: us.mappings.ledger.tempoHold.string

  - name: us.functions.orderDetails.clickChargeHistoryPage
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.ledger.creditCard.infoString
            - name: direction
              string: down
      - getString:
          identifier: us.mappings.ledger.creditCard.infoString
          attribute: text
          storeIn: creditCardInfo
      - log: Credt card used is ${creditCardInfo}
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.chargeHistoryButton.name
            - name: direction
              string: down
      - verifyIdentifier:
            present:
              - identifier: us.mappings.orderDetails.chargeHistoryButton.name
      - verifyIdentifier:
            text:
              - identifier: us.mappings.orderDetails.chargeHistorytile.textMessage
                contains: Your transaction activity for this order
      - click:
            identifier: us.mappings.orderDetails.chargeHistoryButton.name
       
  - name: us.functions.orderDetails.verifyChargeHistoryPage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ledger.header.chargeHistory
      - if:
          condition: ${orderStatus} == 'order placed'
          then:
              - click:
                  identifier: us.mappings.orderDetails.ledger.creditCardCarousel
              - verifyIdentifier: 
                  present:
                    - identifier: us.mappings.ledger.temporaryHold.string
                    - identifier: us.mappings.ledger.temporaryHold.contextHelp.icon
              - click:
                  identifier: us.mappings.ledger.temporaryHold.contextHelp.icon
              - verifyIdentifier:
                  text:
                    - identifier: us.mappings.ledger.temporaryHold.inline.helpText
                      contains: Your bank should remove the temporary hold on your card within 10 business days after receiving your order.
              - click:
                  identifier: us.mappings.ledger.temporaryHold.inlineText.close
              - verifyIdentifier:
                  present:
                    - identifier: us.mappings.ledger.tempoHold.string


  - name: us.functions.verifyThresholdFeesOnOrderDetails
    platform: ios
    flow:
      - scroll:
          direction: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText
  
  - name: us.functions.verifyBagFeeOnOrderDetails
    platform: ios
    flow:
      - scroll:
          direction: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.bagFees

  - name: us.functions.verifyNoThresholdFeesOnOrderDetails
    platform: ios
    flow:
      - scroll:
          direction: down
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText

    ########### market place #################

  - name: us.functions.orderDetails.ost.marketplace.verifySellerType
    platform: ios
    flow:
      # - if:
      #     identifier:
      #       present:
      #         - identifier:  us.mappings.orderDetails.marketplace.button.contactSeller
      #     then:
      #       - verifyIdentifier:
      #           present:
      #             - identifier:  us.mappings.orderDetails.marketplace.button.contactSeller
      #     else:
      #       - scroll:
      #           direction: down
      #           position: center
      #           untilIdentifier:  us.mappings.orderDetails.marketplace.button.contactSeller
      #       - verifyIdentifier:
      #           present:
      #             - identifier:  us.mappings.orderDetails.marketplace.button.contactSeller

      - if: 
          condition: ${contactseller} == true
          then:
            - if: 
                identifier:
                  present: 
                  - identifier: us.mappings.orderDetails.sellerTitle  
                then:
                  - click:
                      identifier:  us.mappings.orderDetails.sellerTitle

                  - sleep:
                      duration: 5000
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.orderDetails.marketplace.button.contactSeller
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.orderDetails.sellerPage.close
                  - click:
                      identifier:  us.mappings.orderDetails.sellerPage.close


      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.marketplace.sellerInfo
            
      - if: 
          condition: ${sellerType} == 'pro-seller'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.marketplace.text.3P_ProSeller
          else:
              - if:
                  condition: ${sellerType} == '3p'
                  then:
                    - verifyIdentifier:
                        present:
                          - identifier: us.mappings.orderDetails.marketplace.text.3P
                  else:
                      - if:
                          condition: ${sellerType} == 'pro-seller-wfs'
                          then:
                            - verifyIdentifier:
                                present:
                                  - identifier: us.mappings.orderDetails.marketplace.text.3P_ProSeller_WFS
                          else:
                              - if:
                                  condition: ${sellerType} == '3p-wfs'
                                  then:
                                    - verifyIdentifier:
                                        present:
                                          - identifier: us.mappings.orderDetails.marketplace.text.3P_WFS

  - name: us.functions.orderDetails.writeAReviewToItemFromReviewScreenODP
    platform: android
    flow:  
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.writeAReview.reviewScreenHeader
              contains: Write a review
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.reviewThisItemCTA 
            - identifier: us.mappings.orderDetails.writeAReview.reviewSellerCTA 
      - click:
            identifier: us.mappings.orderDetails.writeAReview.reviewThisItemCTA             
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.writeAReview.reviewScreenHeader
              contains: Write a review  
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.ratingBar
            - identifier: us.mappings.orderDetails.writeAReview.closeButton  
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.rateItemOnRatingBar
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.ratingsSelected
      - log: Successfully given ratings to this item. Clicking on continue
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.continueButton
          wait: 2000
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.editOverallRatingButton
            - identifier: us.mappings.orderDetails.writeAReview.previousButton
            - identifier: us.mappings.orderDetails.writeAReview.overallRatingHeading
            - identifier: us.mappings.orderDetails.writeAReview.continueButton
      - if:
          identifier: 
            present:
              - identifier: us.mappings.orderDetails.writeAReview.rateQuality
          then:
            - click: 
                identifier: us.mappings.orderDetails.writeAReview.rateQuality
            - log: Rated item Quality. Now recommend this item and review.. 
      - if:
          identifier: 
            present:
              - identifier: us.mappings.orderDetails.writeAReview.rateFeatures
          then:
            - click: 
                identifier: us.mappings.orderDetails.writeAReview.rateFeatures
            - log: Rated item Feature. Now recommend this item and review.. 
            - scroll:
                direction: down
      - if:
          identifier: 
            present:
              - identifier: us.mappings.orderDetails.writeAReview.ratePerformance
          then:
            - click: 
                identifier: us.mappings.orderDetails.writeAReview.ratePerformance
            - log: Rated item Performance. Now recommend this item and review.. 
      - if:
          identifier: 
            present:
              - identifier: us.mappings.orderDetails.writeAReview.yesRecommendThisItem
          then:
            - click:         
                identifier: us.mappings.orderDetails.writeAReview.yesRecommendThisItem
            - click: 
                identifier: us.mappings.orderDetails.writeAReview.continueButton  
                wait: 2000

      # Review Title not shown Existing issue: INC45040370
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.yourReviewHeading
            # - identifier: us.mappings.orderDetails.writeAReview.titleYourReviewHeading
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.writeYourReview
      - log: Entering review for the item
      - enterText:
          identifier: us.mappings.orderDetails.writeAReview.writeYourReview
          string: ${yourReview}                  

      # Review Title not shown Existing issue: INC45040370
      # - click: 
      #     identifier: us.mappings.orderDetails.writeAReview.titleYourReview
      # - log: Entering title of review for the item
      # - enterText:
      #     identifier: us.mappings.orderDetails.writeAReview.titleYourReview
      #     string: ${titleYourReview} 
      # - goBack: true 
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.continueButton
      - sleep: 
          duration: 8000
      - if:
          identifier: 
            present:
              - identifier: us.mappings.orderDetails.writeAReview.continueButton
          then:
            - click: 
                identifier: us.mappings.orderDetails.writeAReview.continueButton
      - log: Successfully submitted review of item!
      - sleep: 
          duration: 3000
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.thankYouTitle
            # - identifier: us.mappings.orderDetails.writeAReview.gotItButton 
            - identifier: us.mappings.orderDetails.writeAReview.reviewTheSellerButton
            - identifier: us.mappings.feedback.skipButton
      - click: 
          identifier: us.mappings.feedback.skipButton #us.mappings.orderDetails.writeAReview.gotItButton
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.thankYouTitle
            - identifier: us.mappings.orderDetails.writeAReview.reviewSellerGotItButton  
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.reviewSellerGotItButton  
      - sleep: 
          duration: 3000


  - name: us.functions.orderDetails.reviewSellerFromODP
    platform: android
    flow:  
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.reviewSellerOnlyCTA
            - name: direction
              string: down
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.reviewSellerOnlyCTA
      - click: 
          identifier: us.mappings.orderDetails.reviewSellerOnlyCTA
          wait: 2000
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.ratingBar
            - identifier: us.mappings.orderDetails.writeAReview.reviewYourSellerHeading
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.rateSeller
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.reviewYourSeller
      - log: Entering review for the Seller
      - enterText:
          identifier: us.mappings.orderDetails.writeAReview.reviewYourSeller
          string: ${yourReviewforSeller}  
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.continueButton
          wait: 3000
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.writeAReview.thankYouTitle
            - identifier: us.mappings.orderDetails.writeAReview.reviewSellerGotItButton  
      - click: 
          identifier: us.mappings.orderDetails.writeAReview.reviewSellerGotItButton  
          wait: 3000
      - log: Successfully submitted review for the Seller!

  - name: us.functions.orderDetails.verifyReviewItemOrSellerFor3PItem
    platform: android
    flow:   
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.contactSellerCTA
            - name: direction
              string: down
      #Condition when only review seller option is present instead of review seller & item 
      - if:
          identifier: 
            present:
              - identifier: us.mappings.orderDetails.reviewSellerOnlyCTA 
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Only review seller option is available, expected to review both Item & Seller for 3P items."
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderDetails.contactSellerCTA
      - verifyIdentifier:
          text:
            - identifier: us.mappings.item.reviewItemOrSellerCTA
              contains: Review item or seller
      - click:
            identifier: us.mappings.item.reviewItemOrSellerCTA
            wait: 2000
      - executeFunction:
          name: us.functions.orderDetails.writeAReviewToItemFromReviewScreenODP
      - scroll:
          direction: up
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderHistory.orderNumber
      - log: User in on ODP now
      - executeFunction:
          name: us.functions.orderDetails.reviewSellerFromODP
      - scroll:
          direction: up
      - verifyIdentifier: 
          present:
            - identifier: us.mappings.orderHistory.orderNumber
      - log: User in on ODP now
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.item.reviewItemOrSellerCTA
            - name: direction
              string: down
      - verifyIdentifier:
          text:
            - identifier: us.mappings.item.reviewItemOrSellerCTA
              contains: Item and seller reviewed
      - log: Both Item & Seller got reviewed successfully!

  - name: us.functions.orderDetails.verifyReviewItemOrSellerFor3PItem
    platform: iOS
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.itemImage
          position: center
          wait: 3000
      #expand item details
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.item.reviewItemOrSellerCTA
          then:
            - click:
                identifier: us.mappings.orderDetails.itemImage
      #Condition when only review seller option is present instead of review seller & item
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.reviewSellerOnlyCTA
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Only review seller option is available, expected to review both Item & Seller for 3P items."
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.contactSellerCTA
      - verifyIdentifier:
          label:
            - identifier: us.mappings.item.reviewItemOrSellerCTA
              contains: Review item or seller
      - click:
          identifier: us.mappings.item.reviewItemOrSellerCTA
          wait: 2000
      - executeFunction:
          name: us.functions.orderDetails.writeAReviewToItemFromReviewScreenODP
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.itemDetails
      - log: User in on ODP now
      - executeFunction:
          name: us.functions.orderDetails.reviewSellerFromODP
      #expand item details
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.writeAReview.itemAndSellerReviewed
          then:
            - click:
                identifier: us.mappings.orderDetails.itemImage
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.itemDetails
            - identifier: us.mappings.orderDetails.writeAReview.itemAndSellerReviewed
      - log: User in on ODP now. Both Item & Seller got reviewed successfully!


  - name: us.functions.orderDetails.writeAReviewToItemFromReviewScreenODP
    platform: iOS
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mappings.orderDetails.writeAReview.reviewScreenHeader
              contains: Write a review
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.reviewThisItemCTA
            - identifier: us.mappings.orderDetails.writeAReview.reviewSellerCTA
      - click:
            identifier: us.mappings.orderDetails.writeAReview.reviewThisItemCTA
            wait: 3000
      - verifyIdentifier:
          label:
            - identifier: us.mappings.orderDetails.writeAReview.reviewScreenHeader
              contains: Write a review
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.ratingBar
            - identifier: us.mappings.orderDetails.writeAReview.closeButton
      - click:
          identifier: us.mappings.orderDetails.writeAReview.rateItemOnRatingBar
          wait: 3000
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.writeAReview.rateItemOnRatingBar
              equals: 1
      - log: Successfully given ratings to this item.
      - click:
          identifier: us.mappings.orderDetails.writeAReview.continueButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.writeAReview.skipButton
          then:
            - click:
                identifier: us.mappings.orderDetails.writeAReview.skipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.nicknameHeading
            - identifier: us.mappings.orderDetails.writeAReview.addATitleHeading
            - identifier: us.mappings.orderDetails.writeAReview.detailsHeading
      #rate overall product and provide details
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.overallRating
            - identifier: us.mappings.orderDetails.writeAReview.detailsHeading
      - click:
           identifier: us.mappings.orderDetails.writeAReview.overallRatingSelected
      - click:
          identifier: us.mappings.orderDetails.writeAReview.detailsPlease
      - log: Entering details of the item
      - enterText:
          identifier: us.mappings.orderDetails.writeAReview.detailsPlease
          string: ${addDetails}
      - click:
          identifier: Done
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.writeAReview.addATitle
            - name: direction
              string: down
      - click:
          identifier: us.mappings.orderDetails.writeAReview.addATitle
      - log: Entering title of review for the item
      - enterText:
          identifier: us.mappings.orderDetails.writeAReview.addATitle
          string: ${addATitle}
      - click:
          identifier: Done
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.writeAReview.nicknameRadioButton
            - name: direction
              string: down
      - log: Selecting nickname for the item
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.writeAReview.nicknameRadioButton
          then:
            - click:
                identifier: us.mappings.orderDetails.writeAReview.nicknameRadioButton
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.orderDetails.writeAReview.nicknameRadioButton
                    equals: 1 
      # - click:
      #     identifier: Done
      - click:
          identifier: us.mappings.orderDetails.writeAReview.continueButton
          wait: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.thankYouTitle
            - identifier: us.mappings.orderDetails.writeAReview.reviewYourSellerHeading
            - identifier: us.mappings.orderDetails.writeAReview.closeButton
      - click:
          identifier: us.mappings.orderDetails.writeAReview.closeButton
      - sleep:
          duration: 3000
      - log: Successfully reviewd item!!!


  - name: us.functions.orderDetails.reviewSellerFromODP
    platform: iOS
    flow:
      - if:
          identifier:
            notPresent:
              - identifier:  us.mappings.item.reviewItemOrSellerCTA
          then:
            - click:
                identifier: us.mappings.orderDetails.writeAReview.itemDetails
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.contactSellerCTA
      - verifyIdentifier:
          label:
            - identifier: us.mappings.item.reviewItemOrSellerCTA
              contains: Review seller
      - click:
            identifier: us.mappings.item.reviewItemOrSellerCTA
            wait: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.ratingBar
            - identifier: us.mappings.orderDetails.writeAReview.reviewYourSellerHeading
      - click:
          identifier: us.mappings.orderDetails.writeAReview.rateSeller
      - click:
          identifier: us.mappings.orderDetails.writeAReview.reviewYourSeller
      - log: Entering review for the Seller
      - enterText:
          identifier: us.mappings.orderDetails.writeAReview.reviewYourSeller
          string: ${yourReviewforSeller}
      - click:
          identifier: Done
      - click:
          identifier: us.mappings.orderDetails.writeAReview.submitSellerReview
          wait: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.writeAReview.thankYouTitle
            - identifier: us.mappings.orderDetails.writeAReview.reviewSellerGotItButton
      - click:
          identifier: us.mappings.orderDetails.writeAReview.reviewSellerGotItButton
          wait: 3000
      - log: Successfully submitted review for the Seller!

  - name: us.functions.orderDetails.expandItemDetails
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.returns.orderDetails.itemsContainer.expandableButton
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.returns.orderDetails.itemsContainer.expandableButton
                  - name: direction
                    string: down
            - click:
                identifier: us.mappings.returns.orderDetails.itemsContainer.expandableButton
            - loop:
                begin: 0
                end: 5
                storeIndex: i
                mode: increment
                flow:
                  - if:
                      identifier:
                        present:
                          - identifier: us.mappings.returns.orderDetails.itemsContainer.expandableButton
                      then:
                        - scroll:
                            direction: down
                            untilIdentifier: us.mappings.returns.orderDetails.itemsContainer.expandableButton
                        - click:
                            identifier: us.mappings.returns.orderDetails.itemsContainer.expandableButton
                      else:
                        - log: All item sections expanded
                        - scroll:
                            direction: down
                            untilIdentifier: us.mappings.orderDetails.barcode
                            scrollLimit: 6
                        - storeIn:
                            key: prerequisiteScrollRequired
                            value: true
                        - break: true
          else:
            - log: Item sections already expanded
            - storeIn:
                key: prerequisiteScrollRequired
                value: false

  - name:  us.functions.orderDetails.verifySavedSubs
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.amend.editItem.editOrderButton
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.cancellation.editItemScreenTitle
      - verifyIdentifier:
          label:
            - identifier: us.mappings.amend.editItem.bestMatchText
              contains: Best match

      - scroll:
          direction: down

      # - verifyIdentifier:
      #     label:
      #       - identifier: us.mappings.amend.editItem.subsItemName
      #         contains: ${itemtitle}

      - click:
          identifier: us.mappings.amend.editItem.editButtonOfSecondItem

      - verifyIdentifier:
          selected:
            - identifier: us.mappings.amend.editItem.replaceWithRadioButton
              value: true
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.amend.editItem.bestMatchRadioButton
      - click:
          identifier: us.mappings.amend.editItem.selectButton
      - scroll:
          direction: up
      - click:
          identifier: us.mappings.amend.editItem.editButtonOfFirstItem
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.subsPreference.searchItemButton
            - name: direction
              string: left
            - name: identifierScope
              string: us.mappings.subsPreference.itemSubstitutionCarouselViewCollectionView
      - verifyIdentifier:
          present:
              - identifier: us.mappings.subsPreference.searchItemButton
      - click:
          identifier: us.mappings.subsPreference.searchItemButton
      - click:
          identifier: us.mappings.subsPreference.searchBarSelected
      - enterText:
          identifier: us.mappings.subsPreference.searchBarSelected
          string: ${searchTerm}
          # pressEnter: true
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.subsPreference.searchBarDropDown
          then:
            - click:
                identifier: us.mappings.subsPreference.searchBarDropDown
                wait: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.subsPreference.hidekeyboard
          then:
            - click:
                identifier: us.mappings.subsPreference.hidekeyboard
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.subsPreference.firstItem
          then:
  # searching again as item is not available
            - click:
                identifier: us.mappings.subsPreference.searchBarSelected
            - enterText:
                identifier: us.mappings.subsPreference.searchBarSelected
                string: ${searchTerm}
                clearField: true
            - sleep:
                duration: 5000
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.subsPreference.searchBarDropDown
                then:
                  - click:
                      identifier: us.mappings.subsPreference.searchBarDropDown
                      wait: 5000
      - click:
          identifier: us.mappings.subsPreference.firstItem    
      - click:
          identifier: us.mappings.amend.editItem.selectItemButton
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.amend.editItem.updateOrder

  - name: us.functions.orderDetails.verifyWalmartCashPendingAndSubscriptionText
    platform: ios
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mappings.orderDetails.WalmartCashPendingText
              contains: Walmart Cash pending      
            - identifier: us.mappings.orderDetails.SubscriptionBannerText
              contains: Subscribed to auto-delivery
          
  - name: us.functions.orderDetails.verifyWalmartCashPendingAndSubscriptionText
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.WalmartCashPendingText
          wait: 3000
          scrollLimit: 2
          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.WalmartCashPendingText
            - identifier: us.mappings.orderDetails.SubscriptionBannerText
          

  - name:  us.functions.orderDetails.validateUpdationOfSubsInODP
    platform: ios
    flow:
      - sleep:
          duration: 10000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.amend.editItem.secondItemReplaceText

      - verifyIdentifier:
          present:
            - identifier: us.mappings.amend.editItem.firstItemReplaceText

      - verifyIdentifier:
          label:
            - identifier: us.mappings.amend.editItem.secondItemReplaceText
              contains: Best match

  - name: us.functions.orderDetails.AssociateDiscount  #Joel Added 2/17/22
    platform: ios
    flow:      
      - scroll:
          direction: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.buynow.orderDetails.associateDiscount.label
      - log: Associate Discount is present


  - name: us.functions.orderDetails.verifyPickInstructions
    platform: ios
    flow:
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.orderDetails.pickupInstructionsText
      - click:
          identifier: us.mappings.orderDetails.pickupInstructionsText

      - verifyIdentifier:
          label:
            - identifier: us.mappings.orderDetails.pickUpInstructions.contentContainer
              contains: Please bring your government-issued ID

  - name: us.functions.orderDetails.verifyDeliveryInstructions
    platform: ios
    flow:
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.deliveryInstructionsText
      - click: 
          identifier: us.mappings.orderDetails.deliveryInstructionsText      
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.deliveryInstructionsLabel
              contains: Leave the grocery before my door

  - name: us.functions.orderDetails.verifyPOSTotal
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.totalText
  
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.taxValue
      
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.belowOrderMinFeeValue
      
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.subtotalValue
   
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.totalValue

  - name: us.functions.orderDetails.verifybarcode
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.barcode
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.barcode
          then:
            - log: "Bar code present as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected a bar code but couldn't find"
  
      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.orderDetails.barcode


  - name: us.functions.orderDetails.editAndVerifySubsitutions
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.editYourItemsLabel
  
      - click:
          identifier: us.mappings.orderDetails.editOrderButton
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.cancellation.editItemScreenTitle

      - verifyIdentifier:
          present: 
            - identifier: us.mappings.amend.orderdetails.allowSubstititionText
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.amend.orderdetails.allowSubstititioncheckbox
      - click:
          identifier: us.mappings.amend.orderdetails.allowSubstititioncheckbox
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.cancellation.editItem.saveButton
      - click:
          identifier: us.mappings.cancellation.editItem.saveButton
  
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.amend.orderdetails.editAndSaveSubstitutions
      - click:
          identifier: us.mappings.amend.orderdetails.editAndSaveSubstitutions

      - click:
          identifier: us.mappings.cancellation.errorMessageCTA

      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.orderNumberText

  - name: us.functions.orderDetails.editSingleOrderAndVerifySubsitutions
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.editYourItemsLabel
  
      - click:
          identifier: us.mappings.orderDetails.singleEditOrderButton
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.cancellation.editItemScreenTitle

      - verifyIdentifier:
          present: 
            - identifier: us.mappings.amend.orderdetails.allowSubstititionText
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.amend.orderdetails.allowSubstititioncheckbox
      - click:
          identifier: us.mappings.amend.orderdetails.allowSubstititioncheckbox
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.cancellation.editItem.saveButton
      - click:
          identifier: us.mappings.cancellation.editItem.saveButton
  
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.amend.orderdetails.editAndSaveSubstitutions
      - click:
          identifier: us.mappings.amend.orderdetails.editAndSaveSubstitutions

      - click:
          identifier: us.mappings.cancellation.errorMessageCTA

      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.orderNumberText
        
  - name: us.functions.orderDetails.trackOrder.mapView
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.trackOrderStatusButton
      - click: 
          identifier: us.mappings.orderDetails.trackOrderStatusButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderdetails.trackOrder.mapView
          then:
            - log: "Map view displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Map view not displayed as expected"

      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.orderdetails.trackOrder.mapView

      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.orderdetails.trackorder.mapView.orderstatus.onTheWay
      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.orderdetails.trackorder.mapView.contactDriverButton

  - name: us.functions.orderdetails.verifypromodiscount_SCItem
    platform: ios
    flow:
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.promocode.discountViewtext
              contains: ${promocode}

  - name: us.functions.orderdetails.verifyRewardEarnedAfterOrderCancellation
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.canceledStatus
          then:
            - verifyIdentifier:
                notPresent: 
                  - identifier: us.mappings.orderDetails.RewardAppliedTag

  - name: us.functions.orderdetails.verifypromodiscount_FCItem
    platform: ios
    flow:
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.promocode.discountViewtext
              contains: ${promocode}
      - if:
          condition: ${multipleItems} == true
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.promocode.discountViewtextSecondItem
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.orderDetails.promocode.discountViewtextSecondItem
                    contains: ${promocode} promo code
            - log: Verified Promocode applied for both items

  - name: us.functions.orderdetails.verifypromocodeDiscountPOS
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.subtotalText
          position: center
      - if:
          condition: ${InhomeDevicePromoCodeText} == true
          then:
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.orderDetails.promocode.discountViewtext
                    contains: INHOMEDEVICE
            - log: Inhome promo code verified
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.promocode.discountViewtext
          then:
            - log: "Promo discount displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected to see the promo discount but not found"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.orderDetails.promocode.discountViewtext

  # Verifying Pretipping in order details page
  - name: us.functions.orderDetails.verifyStoreDeliveryTip.PoOutForDeliveryStatus
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderdetails.storeDeliveryTipHeader
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderdetails.storeDeliveryTipHeader
            - identifier: us.mappings.orderdetails.yourTipLabel
            

  # Verify and  navigate to edit tip screen
  - name: us.functions.orderDetails.verifyAndChangeEditTip.OnTheWayStatus
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderdeatils.editTipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderdeatils.editTipButton
      - click:
          identifier: us.mappings.orderdeatils.editTipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editTipAmount
      - click:
          identifier: us.mappings.orderDetails.editTipAmount
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tipping.confirmButton
      - click:
          identifier: us.mappings.tipping.confirmButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editedTipAmount
            - identifier: us.mappings.orderDetails.editedTipAmount1
      - executeFunction:
          name: us.functions.tippingAndFeedback.enterCustomTipAmount

  - name: us.functions.tippingAndFeedback.navigateToFeedbackAndTippingScreenFromOdp
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.ost.RateDriverButton
      - click:
          identifier: us.mappings.home.ost.RateDriverButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tipping.feedbackAndTippingScreenHeader
            - identifier: us.mappings.tipping.confirmButton          

  - name: us.functions.orderDetails.verifyGiftDetails
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.gifting.orderdetails.giftDetailsExpandButton
            - name: direction
              string: down
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.gifting.orderdetails.giftDetailsTitle
      - click:
          identifier: us.mappings.gifting.orderdetails.giftDetailsExpandButton
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.gifting.orderdetails.getReceiptButton
      - click:
          identifier: us.mappings.gifting.orderdetails.getReceiptButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.gifting.orderdetails.getGiftReceiptTitle
          then:
            - log: "Gift details displayed correctly"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Gift details not displayed as expected"
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.gifting.orderdetails.getGiftReturnLink
            - identifier: us.mappings.gifting.orderdetails.copyLinkButton
            - identifier: us.mappings.gifting.orderdetails.downloaddPdfButton

      - click:
          identifier: us.mappings.global.closeButton

    #verify no reward earned after cancel the order
  - name: us.functions.orderdetails.verifyNorewardEarned
    platform: ios
    flow:
      - sleep:
          duration: 7000    
      - scroll:
          direction: up 
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.RewardAppliedTag  
          then:
            - log: "Rewards applied tag not shown as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Rewards Applied tag should not be visible"                                                   
      # - verifyIdentifier:
      #     notPresent: 
      #        - identifier: us.mappings.orderDetails.RewardAppliedTag

  - name: us.function.orderDetails.addToCart
    platform: ios
    flow:
      - sleep:
          duration: 10000  
   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.itemImage  

      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.reorderButton
      - click:
          identifier: us.mappings.orderDetails.reorderButton
      - sleep:
          duration: 3000      
      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.unavailableItem.titleNavigationBar
          then:
            - click:
                identifier: us.mappings.cart.missingAnything.closeButton    
      - if:
          condition: ${fulfillmentText}  ==  'Shipping'
          then:
            - executeFunction:
                name: us.functions.cart.switchBetweenPickUpAndShipping
                params:
                  - name: fulfillmentType
                    string: shipping   
            - executeFunction:
                name: us.functions.cart.continueToCheckoutOrNewOrder            
      - if:
          condition: ${fulfillmentText}  ==  'Pickup'
          then:
            - executeFunction:
                name: us.functions.cart.switchBetweenPickUpAndShipping
                params:
                  - name: fulfillmentType
                    string: pickup
            - executeFunction:
                name: us.functions.selectBookingSlot
                params:
                  - name: tab
                    string: pickup
                  - name: slotDay
                    string: tomorrow
                  - name: page
                    string: cart
            - executeFunction:
                name: us.functions.cart.continueToCheckout
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.reviewOrder.navBarTitle
                then:
                  - log: Checkout page already loaded, skipping slot selection
      - if:
          condition: ${fulfillmentText}  ==  'Delivery'
          then:
            - executeFunction:
                name: us.functions.cart.switchBetweenPickUpAndShipping
                params:
                  - name: fulfillmentType
                    string: pickup
            - executeFunction:
                name: us.functions.selectBookingSlot
                params:
                  - name: tab
                    string: delivery      
                  - name: page
                    string: cart
                  - name: slotDay
                    string: tomorrow
            - executeFunction:
                name: us.functions.cart.continueToCheckout
      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.missingAnything.headerText
          then:
            - click:
                identifier: us.mappings.cart.missingAnything.ContinueButton
      - sleep:
          duration: 2000
          
  - name:  us.functions.orderDetails.verifySubsOptionNotShowed
    platform: ios
    flow:
      - sleep:
          duration: 10000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.amend.paymentMethodText
      - verifyIdentifier:
          present:  
             - identifier: us.mappings.amend.editItem.ItemReplacementText
      # - scroll:
      #     direction: up
      #     untilIdentifier: us.mappings.orderDetails.editOrderButton
      - click:
          identifier: us.mappings.orderDetails.editOrderButton
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.cancellation.editItemScreenTitle



  - name:  us.functions.orderDetails.amend.EditItem.verifySubsToggleSwichAndSubsOptions
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.amend.EditItem.subsToggleButton
          then:
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.orderDetails.amend.EditItem.subsToggleButton
                    equals: 0
          else:
              - verifyIdentifier:
                   value:
                    - identifier: us.mappings.orderDetails.amend.EditItem.subsCheckBox
                      equals: 1
      - verifyIdentifier:
          notPresent: 
             - identifier: us.mappings.amend.orderDetails.subsPreferencesOfFirstItem 
             - identifier: us.mappings.amend.orderDetails.subsPreferencesOfSecondItem

  - name: us.functions.orderDetails.amend.EditItem.verifySubsToggleSwichAndUpdateOrder
    platform: ios
    flow:
      # - verifyIdentifier:
      #     present: 
      #        - identifier: us.mappings.orderDetails.amend.EditItem.subsCheckBox
      # - click:
      #     identifier: us.mappings.orderDetails.amend.EditItem.subsCheckBox
      # - click:
      #     identifier: us.mappings.global.editButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.subspreference.expandFirstIfUnavailable
          then:
            - click:
                identifier: us.mappings.reviewOrder.subspreference.expandFirstIfUnavailable
      - scroll:
          direction: left
          untilIdentifier: us.mappings.subs.searchItems.button
          scrollLimit: 20
      - click:
          identifier: us.mappings.subs.searchItems.button
      - log: "The Substitution Search button is now visible and clicked!!!"
      - enterText:
          identifier: us.mappings.subs.searchBar
          string: ${subSearchTerm}
          pressEnter: true
      - log: "Searched the subs items and selected the first item in the results"  
      - if:
          identifier:
            present:
              - identifier: us.mappings.subs.keypadSearchBtn
          then:
            - click:
                identifier: us.mappings.subs.keypadSearchBtn
      - click:
          identifier: us.mappings.subs.searchResultItem.1stIndex
      - verifyIdentifier:
          present:
            - identifier: us.mappings.subs.subs.saveButton
      - click:
          identifier: us.mappings.subs.subs.saveButton
          wait: 10000
      - log: "Clicked on the Save Button to update the substitution item."
      - verifyIdentifier:
          present:
            - identifier: us.mappings.subs.daysLeftToEditOrder.text
            - identifier: us.mappings.subs.replaceIfUnavailable.text.onUpdateOrderPage
            # - identifier: us.mappings.subs.editButton.onUpdateOrder
            - identifier: us.mappings.subs.replaceItem.onUpdateOrderPage
            - identifier: us.mappings.subs.updateOrderButton
      - scroll:
          direction: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.subs.allowSubs.text.onUpdateOrderPage 
            - identifier: us.mappings.subs.allowSubs.toggleSwitch            
      - log: "Verified all the asserts on Update Order Page."
      - click:
          identifier: us.mappings.subs.updateOrderButton
          wait: 10000
      - log: "Clicked Update Order button."
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.subs.totalText.onOrderDetailPage
          then:
            - log: "The Temporary Hold amount field is not visible, Scrolling down."
            - scroll:
                direction: down
                untilIdentifier: us.mappings.subs.totalText.onOrderDetailPage
      - verifyIdentifier:
          present:
            - identifier: us.mappings.subs.temporaryHold.fieldOnOrderDetailPage
      - log: "The Temporary Hold amount field is Visible on the Order Detail Page!!!"
     

  - name:  us.functions.orderDetails.scheduledDelivery.verifyDeliveryAddressAndDeliveryInstrutions
    platform: ios
    flow:
      - sleep:
          duration: 7000
      - verifyIdentifier:
          timeout: 15000
          present:
            - identifier: us.mappings.orderDetails.addressViewNameLabel
            - identifier: us.mappings.orderDetails.addressViewAddressLabel
            - identifier: us.mappings.orderDetails.delievryInstructionsTitle
            - identifier: us.mappings.orderDetails.delievryInstructionsText
           
  - name:  us.functions.orderDetails.scheduleDelivery.verifyEditTipAndEditedTipIsDisplayed
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.editTipButton
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.editTipButton
      - click:
          identifier: us.mappings.orderDetails.editTipButton
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.tipping.confirmButton
      - click:
          identifier: us.mappings.orderDetails.editTipAmount
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.tipping.confirmButton
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.editedTipAmount

  - name:  us.functions.orderDetails.scheduleDelivery.lot.verifyLot
    platform: ios
    flow:
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.trackOrder
      - click:
          identifier: us.mappings.orderDetails.trackOrder
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.lot.map
            - identifier: us.mappings.orderDetails.lot.ostStatus
            - identifier: us.mappings.orderDetails.lot.contactDriver
      - click:
          identifier: us.mappings.orderDetails.lot.lotCloseButton
      - verifyIdentifier:
          notPresent: 
            - identifier: us.mappings.orderDetails.lot.map

  - name:  us.functions.orderDetails.unscheduledDelivery.amendAddress
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.navBarTitle
            - name: direction
              string: up      
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mappings.orderDetails.editDeliveryAddress
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress

      #Add address with delivery instructions from the account page    
      - executeFunction:
          name: us.functions.deliveryAddress.addAddress
          params:
            - name: firstName
              string: test
            - name: lastName
              string: user
            - name: streetAddress
              string: us.data.deliveryaddress.streetAddress
            - name: city
              string: us.data.deliveryaddress.city
            - name: state
              string: us.data.deliveryaddress.state
            - name: zipcode
              string: us.data.deliveryaddress.zipcode
            - name: phoneNumber
              string: us.data.deliveryaddress.phoneNumber

      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessageLabel
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddedAddress
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessageLabel
              equals: ${amendAddressAlertMessage}
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddedAddress
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.reviewChanges
          then:
            - click:
                identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - sleep:
          duration: 10000
       
      - executeFunction:
          name: us.functions.amend.selectNewSlotandSave

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.reviewChanges
          then:
            - click:
                identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges

      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.confirmPayment
          then:    
            - executeFunction:
                name: us.functions.amend.creditCard.InCart
                params:
                  - name: cvv
                    string: "111"
      - sleep:
          duration: 5000
      
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.cc.amendMessage
          then:
            - sleep:
                duration: 5000
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: walmart://orders/$orderNo
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.editDeliveryAddress
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Amended address not reflected in ODP"

  - name:  us.functions.orderDetails.fcDelivery.amendAddress
    platform: ios
    flow:    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editDeliveryAddress
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessage
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddedAddress
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessage
              equals: ${amendAddressAlertMessage}
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress.selectAmendAddress
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.reviewChanges
          then:
            - click:
                identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - sleep:
          duration: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.confirmPayment
          then:    
            - executeFunction:
                name: us.functions.amend.creditCard.InCart
                params:
                  - name: cvv
                    string: "111"
      - scroll:
          direction: up
      - sleep:
          duration: 5000     
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.cc.amendMessage
          then:
            - sleep:
                duration: 5000
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: walmart://orders/$orderNo
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.editDeliveryAddress
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Amended address not reflected in ODP"

  - name: us.functions.orderDetails.scheduleInstallation
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mapping.odp.scheduleInstallation
      - click:
          identifier: us.mapping.odp.scheduleInstallation
      - executeFunction:
          name: us.functions.cart.scheduleInstallation
          params:
            - name: slotIndex
              string: 3
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.accRescheduleVerifyText 
      - sleep:
          duration: 10000                          
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://orders/$orderNo   
      - scroll:
         direction: up             
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.accCancelAppointmentCTA 
            
  - name: us.functions.oderDetails.verifyInstallationInstructionAndDetail
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.odp.verifyInstallationInstruction           
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.verifyInstallationInstruction
      - click:
          identifier: us.mappings.odp.verifyInstallationInstruction  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.verifyPickupInstruction         
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.verifyInstallationDetail
      - click:
          identifier: us.mappings.odp.verifyInstallationDetail
      - if:
          identifier:
            present:
              - identifier: us.mappings.odp.verifyInstallationDetailTitle
          then:
            - log: "Installation details title displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected the title but not displayed"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.odp.verifyInstallationDetailTitle
      - click:
          identifier: us.mappings.odp.closeInstallationDetail          

  # Function to scroll for displaying required fulfillment section on screen
  # [mandatory] ${fulfillmentType} - pickup/shipping ..
  - name: us.functions.orderDetails.scrollToSection
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.fulfillmentType
          then:
            - failTest:
                message: "FAILURE - ${env} - ${fulfillmentType} fulfillment type not displayed in ODP"        
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.orderNumberText
            - name: direction
              string: up
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.fulfillmentType
            - name: direction
              string: down
            - name: scrollPosition
              string: center

  #FUNCTION for Drone Delivery ODP screen (Placeholder) - order is shipped
  - name: us.functions.orderDetails.verifyDroneCardDetails
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.orderDetails.droneDelivery.header
            - identifier: us.mappings.orderDetails.arrivesTodayBy.timeText
            - identifier: us.mappings.orderDetails.droneText.clearanceRequest
            - identifier: us.mappings.orderDetails.pos.droneDeliveryPrice
            - identifier: us.mappings.orderDetails.trackOrderButton
      - click:
          identifier: us.mappings.orderDetails.trackOrderButton
          wait: 3000
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderText.header
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderText.estimatedArrival
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderDetails.header
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderId
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.viewLink
      - click:
          identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.closeButton
          wait: 3000

  # Verify Drone Order ODP and Live Order Tracking - order is delivered
  - name: us.functions.orderDetails.deliveredStatus.verifyDroneOrder
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 40000      
          present:
            - identifier: us.mappings.orderDetails.trackOrderButton
      - click:
          identifier: us.mappings.orderDetails.trackOrderButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.trackShipment.shippingStatus            
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.shippingStatus          
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderText.header
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderText.estimatedArrival
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderDetails.header
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderId
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.viewLink
      - click:
          identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.closeButton
          wait: 3000                                            
                        
##################################### ANDROID ############################################

  # Function to scroll for displaying required fulfillment section on screen
  # [mandatory] ${fulfillmentType} - pickup/shipping ..
  # [optional]  ${nonTrackerBased} - true/false [scroll till status tracker of appropriate fulfillment if set to false]
  - name: us.functions.orderDetails.scrollToSection
    platform: android
    flow:          
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.orderNumber
            - name: direction
              string: up
      - if:
          condition: ${nonTrackerBased}
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.orderDetails.fulfillmentItemStatus
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
          else:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.orderDetails.fulfillmentItemTracker
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.fulfillmentType
          then:
            - failTest:
                message: "FAILURE - ${env} - ${fulfillmentType} fulfillment type not displayed in ODP"
      - storeIn:
          key: identifier
          value: 'null'

  #FUNCTION for Drone Delivery ODP screen
  - name: us.functions.odp.verifyDroneCardDetails
    platform: android
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.orderDetails.droneDelivery.header
            - identifier: us.mappings.orderDetails.arrivesTodayBy.timeText
            - identifier: us.mappings.orderDetails.droneText.clearanceRequest
            - identifier: us.mappings.orderDetails.pos.droneDeliveryPrice
            - identifier: us.mappings.orderDetails.trackOrder.buttonCta
      - click:
          identifier: us.mappings.orderDetails.trackOrder.buttonCta
          wait: 3000
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderText.header
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderText.estimatedArrival
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderDetails.header
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderId
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.viewLink
      - click:
          identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.closeButton
          wait: 3000

  #FUNCTION for Drone Delivery ODP screen
  - name: us.functions.odp.deliveredStatus.verifyDroneOrder
    platform: android
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.orderDetails.trackOrderButton
      - click:
          identifier: us.mappings.orderDetails.trackOrderButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.trackShipment.shippingStatus            
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.shippingStatus          
      - verifyIdentifier:
          timeout: 40000
          present:
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderText.header
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderText.estimatedArrival
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderDetails.header
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.orderId
            - identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.viewLink
      - click:
          identifier: us.mappings.orderDetails.trackOrder.mapView.bottomSheet.closeButton
          wait: 3000          

  - name: us.functions.orderDetails.ost.pickup.verifyOrderStatus
    platform: android
    flow:
      - executeFunction:
          name: us.function.resetOrderStatus
          params:
            - name: orderStatus
              string: ${orderStatus}    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.progressBar
      - if:
          condition: ${fulfillmentType} != 'MP_PICKUP'
          then:         
             - verifyIdentifier:
                 text:
                   - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                     contains: ${fulfillmentType}
      - if:
          condition: ${fulfillmentType} == 'MP_PICKUP'
          then:
             - verifyIdentifier:
                 present:
                   - identifier: us.mappings.orderDetails.mppickupStore

  - name: us.functions.orderDetails.ost.scheduledDelivery.verifyOrderStatus
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
              equals: ${fulfillmentType}
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.progressBarMixedFulfiillment


  - name:  us.functions.orderDetails.verifySavedSubs
    platform: android
    flow:
      - sleep:
          duration: 10000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.amend.editItem.secondItemName
      # - verifyIdentifier:
      #     text:
      #       - identifier: us.mappings.amend.editItem.firstItemReplaceText
      #         contains: Best match
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.amend.editItem.secondItemReplaceText

  
      - click:
          identifier: us.mappings.orderDetails.editOrderButton
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.cancellation.editItemScreenTitle
      # - verifyIdentifier:
      #     text:
      #       - identifier: us.mappings.amend.editItem.bestMatchText
      #         contains: Best match

      - scroll:
          direction: down

      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.amend.editItem.bestMatchText


      - click:
          identifier: us.mappings.amend.editItem.editButtonOfFirstItem
      - sleep:
          duration: 5000
      - scroll:
          direction: up
          untilIdentifier: us.mappings.amend.editItem.bestMatchRadioButton
      - click:
          identifier: us.mappings.amend.editItem.bestMatchRadioButton
      - scroll:
          direction: down
      - click:
          identifier: us.mappings.amend.editItem.selectButton
      - scroll:
          direction: down
      - click:
          identifier: us.mappings.amend.editItem.editButtonOfSecondItem
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.subsPreference.searchItemButton
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.subsPreference.searchItemButton
                  - name: direction
                    string: left
                  - name: identifierScope
                    string: us.mappings.subsPreference.itemSubstitutionCarouselViewCollectionView
      - click:
          identifier: us.mappings.subsPreference.searchItemButton
      - click:
          identifier: us.mappings.subsPreference.searchBarSelected
      - enterText:
          identifier: us.mappings.subsPreference.searchBarSelected
          string: ${searchTerm}
          pressEnter: true
      - sleep:
          duration: 10000
      - click:
          identifier: us.mappings.subsPreference.firstItem
      - click:
          identifier: us.mappings.amend.editItem.selectItemButton
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.amend.editItem.saveButton

  - name:  us.functions.orderDetails.validateUpdationOfSubsInODP
    platform: android
    flow:
      - sleep:
          duration: 20000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.amend.editItem.secondItemName
      - verifyIdentifier:
          present:
            - identifier: us.mappings.amend.editItem.firstItemReplaceText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.amend.editItem.secondItemReplaceText

      # - verifyIdentifier:
      #     text:
      #       - identifier: us.mappings.amend.editItem.secondItemReplaceText
      #         contains: Best match

  - name:  us.functions.orderDetails.verifySubsOptionNotShowed
    platform: android
    flow:
      - sleep:
          duration: 10000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.amend.editItem.secondItemName
      - click:
          identifier: us.mappings.orderDetails.editOrderButton
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.cancellation.editItemScreenTitle



  - name:  us.functions.orderDetails.amend.EditItem.verifySubsToggleSwichAndSubsOptions
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.amend.EditItem.subsToggleButton
          then:
            - verifyIdentifier:
                checked:
                  - identifier: us.mappings.orderDetails.amend.EditItem.subsToggleButton
                    value: false    
          else:
            - verifyIdentifier:
                checked:
                  - identifier: us.mappings.returns.returnMethod.scPickup.CheckListCheckBox
                    value: true                  
      - verifyIdentifier:
          notPresent: 
             - identifier: us.mappings.amend.orderDetails.subsPreferencesOfFirstItem 
             - identifier: us.mappings.amend.orderDetails.subsPreferencesOfSecondItem           

  - name: us.functions.orderDetails.ost.scheduledExpressDelivery.verifyOrderStatus
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.expressSlotCopy
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
              equals: ${fulfillmentType}
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.progressBar


  - name: us.functions.orderDetails.ost.fcDelivery.verifyOrderStatus
    platform: android
    flow:
      - if:
          condition: ${fulfillmentType} == 'Shipping' || ${fulfillmentType} == 'Env√≠o'
          then:
            - storeIn:
                key: fulfillmentType
                value: us.data.fulfillment.delivery
      - if:
          condition: ${flag} != 'skip'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackOrderButton
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.progressBar
      - if:
          condition: ${altFulfillmentType} != null
          then:
            - try:
                flow:
                  - verifyIdentifier:
                      text:
                        - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                          contains: ${fulfillmentType}
                catch:
                  flow:
                    - verifyIdentifier:
                        text:
                          - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                            contains: ${altFulfillmentType}
          else:
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.orderDetails.fulfillmentTypeLabel
                    contains: ${fulfillmentType}
      - storeIn:
          key: altFulfillmentType
          value: 'null'

  - name: us.functions.orderDetails.ost.mixedOrder.verifyOrderStatus
    platform: android
    flow:
      - executeFunction:
          name: us.function.resetOrderStatus
          params:
            - name: orderStatus
              string: ${orderStatus}
      - sleep:
          duration: 15000
      - if:
          condition: "${scroll}"
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.orderDetails.fulfillmentTypeLabelFCMixedOrder
                position: center
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.orderDetails.fulfillmentTypeLabelFCMixedOrder
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.progressBarMixedFulfiillment
            - executeFunction:
                name: us.functions.orderDetails.fulfillmentLabel
            - scroll:
                direction: up
                untilIdentifier: us.mappings.orderHistory.title
            - storeIn:
                key: scroll
                value: false
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.progressBarMixedFulfiillment        
            - executeFunction:
                name: us.functions.orderDetails.fulfillmentLabel  

  - name: us.functions.orderDetails.fulfillmentLabel
    platform: android
    flow:
      - if:
          condition: ${altFulfillmentType} != null
          then:
            - try:
                flow:
                  - verifyIdentifier:
                      text:
                        - identifier: us.mappings.orderDetails.fulfillmentTypeLabelMixedOrder # Include param index with this
                          contains: ${fulfillmentType}
                catch:
                  flow:
                    - verifyIdentifier:
                        text:
                          - identifier: us.mappings.orderDetails.fulfillmentTypeLabelMixedOrder # Include param index with this
                            contains: ${altFulfillmentType}
          else:
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.orderDetails.fulfillmentTypeLabelMixedOrder # Include param index with this
                    contains: ${fulfillmentType}
      - storeIn:
          key: altFulfillmentType
          value: 'null'        

  - name: us.functions.orderDetails.verifyOrderStatusMsgAndTrackerDetails
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.statusMsgLabel
            - identifier: us.mappings.orderDetails.progressBar
          text:
            - identifier: us.mappings.orderDetails.statusMsgLabel
              contains: ${message}
          contentDescription:
            - identifier: us.mappings.orderDetails.progressBar
              contains: ${orderStatus}
      - if:
          condition: ${orderStatus} == 'On the way'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackOrder
            - click:
                identifier: us.mappings.orderDetails.trackOrder
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderdetails.trackOrder.mapView
            - click:
                identifier: us.mappings.orderdetails.trackorder.mapView.closeButton
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackOrder
      - if:
          condition: ${orderStatus} == 'Delivered'
          then:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.orderDetails.trackOrder
                present:
                  - identifier: us.mappings.orderDetails.returnMessage
                  - identifier: us.mappings.orderDetails.deliveryProofImage
                  - identifier: us.mappings.orderDetails.deliveryProofDescription                   

  - name: us.functions.orderDetails.goToHomeScreen
    platform: android
    flow:
      - executeFunction:
          name: us.functions.global.navigation.backNavigation
      - executeFunction:
          name: us.functions.global.navigation.backNavigation
      - click:
          identifier: us.mappings.tabBar.shop

  - name: us.functions.orderDetails.navigateToYourOrdersScreen
    platform: android
    flow:
      - click:
          identifier: us.mappings.tabBar.account
      - executeFunction:
          name: us.functions.global.authentication.signInAccount
      - click:
          identifier: us.mappings.account.yourOrdersButton


  - name: us.functions.orderDetails.signInAgain
    platform: android
    flow:
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.global.authentication.emailField
          then:
            - executeFunction:
                name: us.functions.global.authentication.signInAccount

  - name: us.functions.orderDetails.navigateFromOrderDetailsToHomeAndBack
    platform: android
    flow:
      - executeFunction:
          name: us.functions.global.navigation.backNavigation
      - click:
          identifier: us.mappings.tabBar.shop
      - click:
          identifier: us.mappings.tabBar.account
      - click:
          identifier: us.mappings.account.purchaseHistoryButton
      - click:
          identifier: us.mappings.orderHistory.viewOrderDetailsForFirstOrder


  - name: us.functions.orderDetails.verifyOrdersPresentScheduledPickUp
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.yourOrders.scheduledPickup
          then:
            - log: "Scheduled pick up order present"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected Scheduled Pick up order but not found"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.yourOrders.scheduledPickup

  - name: us.functions.orderDetails.verifyOrdersPresentScheduledDelivery
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.yourOrders.scheduledDeliveryOrder
          then:
            - log: "Scheduled Delivery Order Present"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected Scheduled Delivery Order But Not Found"
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.yourOrders.scheduledDeliveryOrder

  - name: us.functions.verifyThresholdFeesOnOrderDetails
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.belowOrderMinFeeText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText
      - scroll:
          direction: up
          untilIdentifier: ${APP_PACKAGE:com.walmart.android.debug}:id/status_tracker

  - name: us.functions.verifyThresholdFeesOnOrderDetailsAndAssociateDiscount
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.belowOrderMinFeeText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.belowOrderMinFeeText
            - identifier: us.mappings.orderDetails.verifyAssociateDiscountPOSLabel
            - identifier: us.mappings.orderDetails.verifyAssociateDiscountPOSValue
      - scroll:
          direction: up
          untilIdentifier: ${APP_PACKAGE:com.walmart.android.debug}:id/status_tracker

  - name: us.functions.orderDetails.AssociateDiscount  #Joel Added 2/17/22
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.buynow.orderDetails.associateDiscount.label
      - verifyIdentifier:
          present:
            - identifier: us.mappings.buynow.orderDetails.associateDiscount.label
            # - identifier: us.mappings.orderDetails.verifyAssociateDiscountPOSValue
      - log: Associate Discount is present
      - scroll:
          direction: up
          untilIdentifier: ${APP_PACKAGE:com.walmart.android.debug}:id/status_tracker

  - name: us.functions.orderDetails.trackOrder.mapView
    platform: android
    flow:
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.trackOrder
      - click: 
          identifier: us.mappings.orderDetails.trackOrder
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderdetails.trackOrder.mapView
          then:
            - log: "Map view displayed as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Map view not displayed as expected"
      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.orderdetails.trackOrder.mapView

  - name: us.functions.orderDetails.fcDelivery.tapTrackOrderButton
    platform: android
    flow:
      - click:
          identifier: us.mappings.orderHistory.trackOrderButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.trackShipment.screenTitle
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.trackShipment.shippingStatus            
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.shippingStatus  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.helpCenterButton           
      - click:
          identifier: us.mappings.orderDetails.trackShipment.backNavigation

#Edit and verify Substitutions on Review Order screen
  - name: us.functions.orderDetails.editAndVerifySubsitutions
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.yourOrders.editItemsButton
  
      - click:
          identifier: us.mappings.yourOrders.editItemsButton

      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.cancellation.editItemScreenTitle

      - verifyIdentifier:
          present: 
            - identifier: us.mappings.amend.orderdetails.allowSubstititionText
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.amend.orderdetails.allowSubstititioncheckbox
      - click:
          identifier: us.mappings.amend.orderdetails.allowSubstititioncheckbox
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.cancellation.editItem.saveButton
      - click:
          identifier: us.mappings.cancellation.editItem.saveButton
  
      #- verifyIdentifier:
          #present: 
           # - identifier: us.mappings.amend.orderdetails.editAndSaveSubstitutions
      #- click:
          #identifier: us.mappings.amend.orderdetails.editAndSaveSubstitutions

      - click:
          identifier: us.mappings.cancellation.errorMessageCTA

      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.statusMsgLabel

#Verify pos total on Order detail page
  - name: us.functions.orderDetails.verifyPOSTotal
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.totalText
  
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.taxValue

      - verifyIdentifier:
          text: 
            - identifier: us.mappings.orderDetails.taxValue
              contains: ${tax}
      
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.belowOrderMinFeeValue

      - verifyIdentifier:
          text: 
            - identifier: us.mappings.orderDetails.belowOrderMinFeeValue
              contains: ${thresholdFee}
      
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.subtotalValue

      - verifyIdentifier:
          text: 
            - identifier: us.mappings.orderDetails.subtotalValue
              contains: ${subTotal}
              
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.totalValue

      - verifyIdentifier:
          text: 
            - identifier: us.mappings.orderDetails.totalValue
              contains: ${total}

  - name: us.functions.orderDetails.verifybarcode
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.barcode
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.barcode
          then:
            - log: "Bar code present as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected a bar code but couldn't find"
  
      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.orderDetails.barcode

  - name: us.functions.orderDetails.verifyPickInstructions
    platform: android
    flow:
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.pickupInstructionsText
      - click:
          identifier: us.mappings.orderDetails.expandPickupInstructionsText

      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.pickUpInstructions.contentContainer
              contains: Please bring your government-issued ID

  - name: us.functions.orderDetails.verifyDeliveryInstructions
    platform: android
    flow:
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.deliveryInstructionsText

      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.deliveryInstructionsLabel
              contains: We‚Äôll leave your order at the door

  - name: us.functions.orderDetails.verifyTrackShipmentDetails
    platform: android
    flow: 
      - click:
          identifier: us.mappings.orderDetails.trackShipment.trackShipmentButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.trackShipment.title   
            - identifier: us.mappings.orderDetails.trackShipment.progressBar
            - identifier: us.mappings.orderDetails.trackShipment.deliveryAddress
            - identifier: us.mappings.orderDetails.trackShipment.deliveryAddressText
      - if:
          condition: ${fulfillmentStatus} == 'Shipped'
          then: 
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackShipment.arrivesByText
                  - identifier: us.mappings.orderDetails.trackShipment.fulfilmentStatus.shipped
                  - identifier: us.mappings.orderDetails.trackShipment.shippedStatusDetails
      - if:
          condition: ${fulfillmentStatus} == 'Delivered'
          then: 
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.trackShipment.shipmentDeliveredText
                  - identifier: us.mappings.orderDetails.trackShipment.fulfilmentStatus.delivered
                  - identifier: us.mappings.orderDetails.trackShipment.deliveredStatusDetails
      - click: 
          identifier: us.mappings.global.navigation.backNavigation

  - name: us.functions.orderDetails.ost.marketplace.verifySellerType
    platform: android
    flow:
      - if: 
          condition: ${contactseller} == true
          then:
            - sleep:
                duration: 5000
            - scroll:
                direction: down
                untilIdentifier: us.mappings.orderDetails.sellerInfo
                position: center
            - if:  
                identifier:
                  present: 
                  - identifier: us.mappings.orderDetails.sellerTitle  
                then:
                  - click:
                      identifier:  us.mappings.orderDetails.sellerInfo
                      coordinates: 50%,50%
                  - log: Coordinates were clicked
                  - sleep:
                      duration: 5000

                  - if:
                      identifier:
                        notPresent:
                          - identifier: us.mappings.marketplace.contactSellerName
                      then:
                        - executeFunction:
                            name: us.functions.item.mp.clickSellerNameLinkUsingCoOrdinates
                        - sleep:
                            duration: 4000
                  - executeFunction:
                      name: us.functions.utils.scrollIfNotVisible
                      params:
                        - name: identifier
                          string: us.mappings.item.marketplace.contactSellerTitle
                        - name: direction
                          string: down
                        - name: scrollPosition
                          string: center                
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.item.marketplace.contactSellerTitle
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.reserveSlot.dismissPageButton
                  - click:
                      identifier:  us.mappings.reserveSlot.dismissPageButton                                              
      - if: 
          condition: ${sellerType} == 'pro-seller'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.marketplace.text.3P_ProSeller
          else:
              - if:
                  condition: ${sellerType} == '3p'
                  then:
                    - verifyIdentifier:
                        present:
                          - identifier: us.mappings.orderDetails.marketplace.text.3P
                  else:
                      - if:
                          condition: ${sellerType} == 'pro-seller-wfs'
                          then:
                            - verifyIdentifier:
                                present:
                                  - identifier: us.mappings.orderDetails.marketplace.text.3P_ProSeller_WFS
                                  - identifier: us.mappings.orderDetails.marketplace.text.3P_ProSeller
                          else:
                              - if:
                                  condition: ${sellerType} == '3p-wfs'
                                  then:
                                    - verifyIdentifier:
                                        present:
                                          - identifier: us.mappings.orderDetails.marketplace.text.3P_WFS

  - name: us.functions.orderDetails.verifyLotDetails
    platform: android
    flow: 
      - click:
          identifier: us.mappings.orderDetails.trackOrder
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderdetails.trackOrder.mapView 
           # - identifier: us.mappings.orderdetails.trackorder.mapView.orderstatus.onTheWay
           # - identifier: us.mappings.orderdetails.trackOrder.estimatedArrivalText
            - identifier: us.mappings.orderdetails.trackorder.mapView.contactDriverButton
            - identifier: us.mappings.orderdetails.trackorder.mapView.trackingProgressBar
      - click: 
          identifier: us.mappings.orderdetails.trackorder.mapView.closeButton

      - sleep:
          duration: 10000

  - name:  us.functions.orderDetails.unscheduledDelivery.amendAddress
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.navBarTitle
            - name: direction
              string: up      
      - verifyIdentifier:
          timeout: 15000
          present:
            - identifier: us.mappings.orderDetails.editDeliveryAddress
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress
          wait: 3000

      #Add address with delivery instructions from the account page    
      - executeFunction:
          name: us.functions.deliveryAddress.addAddress
          params:
            - name: firstName
              string: Test
            - name: lastName
              string: User
            - name: streetAddress
              string: us.data.deliveryaddress.streetAddress
            - name: city
              string: us.data.deliveryaddress.city
            - name: state
              string: us.data.deliveryaddress.state
            - name: zipcode
              string: us.data.deliveryaddress.zipcode
            - name: phoneNumber
              string: us.data.deliveryaddress.phoneNumber
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.reserveaTime
          then:
            - click:
                identifier: us.mappings.amend.reserveaTime.close
                wait: 2000
            - click:
                identifier: us.mappings.orderDetails.editDeliveryAddress
                wait: 3000

      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessage
              equals: ${amendAddressAlertMessage}
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessage
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddedAddress
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddedAddress
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - sleep:
          duration: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
          then:
            - click:
                identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.reserveaTime
          then:
            - executeFunction:
                name: us.functions.amend.selectNewSlotandSave
      - sleep:
          duration: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.confirmPayment
          then:    
            - executeFunction:
                name: us.functions.amend.creditCard.InCart
                params:
                  - name: cvv
                    string: "111"

      - scroll:
          direction: up
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.cc.amendMessage
          then:
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: walmart://orders/$orderNo
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.editDeliveryAddress
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Amended address not reflected in ODP"

  - name:  us.functions.orderDetails.fcDelivery.amendAddress
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.navBarTitle
            - name: direction
              string: up      
      - verifyIdentifier:
          timeout: 15000
          present:
            - identifier: us.mappings.orderDetails.editDeliveryAddress
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessage
              equals: ${amendAddressAlertMessage}
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessage
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddedAddress
            - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddedAddress
      - click:
          identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.confirmChanges
      - sleep:
          duration: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.editDeliveryAddress.reviewAddress.confirmChanges
          then:
            - click:
                identifier: us.mappings.orderDetails.editDeliveryAddress.reviewAddress.confirmChanges
      - sleep:
          duration: 10000
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.confirmPayment
          then:    
            - executeFunction:
                name: us.functions.amend.creditCard.InCart
                params:
                  - name: cvv
                    string: "111"
      - scroll:
          direction: up
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.cc.amendMessage
          then:
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: walmart://orders/$orderNo
      - sleep:
          duration: 5000
      - verifyIdentifier:
          notPresent: 
             - identifier: us.mappings.orderDetails.editDeliveryAddress

  - name: us.functions.orderdetails.verifypromodiscount_SCItem
    platform: android
    flow:
      - executeFunction:
          name: us.functions.orderDetails.scrollToSection
          params:
            - name: fulfillmentType
              string: us.data.orderStatus.fulfillmentPickup
            - name: altFulfillmentType
              string: us.data.fulfillment.pickup
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.promocode.discountViewtext
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.promocode.discountViewtext

      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.promocode.discountViewtext
              contains: ${promoCode} promo code

  - name: us.functions.orderdetails.verifypromodiscount_FCItem
    platform: android
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.orderDetails.orderNumber
      - executeFunction:
          name: us.functions.orderDetails.scrollToSection
          params:
            - name: fulfillmentType
              string: us.data.fulfillment.delivery
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.promocode.discountViewtext
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.promocode.discountViewtext

      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.promocode.discountViewtext
              contains: ${promoCode} promo code
      - if:
          condition: ${multipleItems} == true
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.orderDetails.promocode.discountViewtextSecondItem
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.promocode.discountViewtextSecondItem
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.orderDetails.promocode.discountViewtextSecondItem
                    contains: ${promoCode} promo code
            - log: Verified Promocode applied for both items

  - name: us.functions.orderdetails.verifypromocodeDiscountPOS
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.verifypromocodeDiscountPOSLabel
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifypromocodeDiscountPOSLabel
            - identifier: us.mappings.orderDetails.verifypromocodeDiscountPOSValue
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.verifypromocodeDiscountPOSLabel
              contains: ${promoCodeText}

  - name: us.functions.orderHistory.verifyPromoAppliedLabelOnOrderDetails
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.promoAppliedlabel
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.promoAppliedlabel

  - name: us.functions.orderDetails.verifyStoreDeliveryTip.PoOutForDeliveryStatus
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.scDelivery.poOutForDelivery.StoreDeliveryLabelVerification
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.scDelivery.poOutForDelivery.StoreDeliveryLabelVerification
            - identifier: us.mappings.orderDetails.scDelivery.poOutForDelivery.StoreDeliveryTipValueVerification

  - name: us.functions.orderDetails.verifyAndChangeEditTip.OnTheWayStatus
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.editTipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editTipButton
      - click:
          identifier: us.mappings.orderDetails.editTipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tipping.feedbackAndTippingScreenHeader

  - name: us.functions.orderDetails.validateSubscriptionEnabled
    platform: android
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.subscribedToAutoDeliveryText
            - name: direction
              string: down
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.subscribedToAutoDeliveryText
          then:
            - log: "subscription is applied successfully"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - The subscription icon should be shown but is not"

  - name: us.functions.orderDetails.verifyGiftDetails
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.gifting.orderdetails.giftDetailsExpandButton
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.gifting.orderdetails.giftDetailsTitle
      - click:
          identifier: us.mappings.gifting.orderdetails.giftDetailsExpandButton
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.gifting.orderdetails.giftDetailsSummary
      - scroll:
          direction: down
          untilIdentifier: us.mappings.gifting.orderdetails.getReceiptButton
      - click:
          identifier: us.mappings.gifting.orderdetails.getReceiptButton
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.gifting.orderdetails.getGiftReceiptTitle
            - identifier: us.mappings.gifting.orderdetails.getGiftReturnLink
            - identifier: us.mappings.gifting.orderdetails.copyLinkButton
            - identifier: us.mappings.gifting.orderdetails.downloaddPdfButton

  - name: us.functions.orderDetails.navigateBack
    platform: android
    flow:
      - click:
          identifier: us.mappings.global.navigateBackArrow
  
  - name: us.functions.orderdetails.verifyNorewardEarned
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.RewardAppliedTag
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.RewardAppliedTag  
          then:
            - log: "Rewards applied tag not shown as expected"
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Rewards Applied tag should not be visible"
      # - verifyIdentifier:
      #     notPresent: 
      #       - identifier: us.mappings.orderDetails.RewardAppliedTag

  - name: us.functions.orderdetails.verifyRewardEarnedAfterOrderCancellation
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.RewardAppliedTag
      - verifyIdentifier:
          notPresent: 
            - identifier: us.mappings.orderDetails.RewardAppliedTag

  - name:  us.function.orderDetails.addToCart
    platform: android
    flow:               
      - sleep:
          duration: 10000  
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.itemDescription   

      - verifyIdentifier:
          present:
            - identifier: us.mappings.return.refundReviewAndConfirmationScreen.returnItem   
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.reorderButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.reorderButton
      - click:
          identifier: us.mappings.orderDetails.reorderButton   
      - sleep:
          duration: 3000      
      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.unableToAddToCartError
          then:
            - click:
                identifier: us.mappings.global.closeButton  
      - if:
          condition: ${fulfillmentText}  ==  'Shipping'
          then:
            - executeFunction:
                name: us.functions.cart.switchBetweenPickUpAndShipping
                params:
                  - name: fulfillmentType
                    string: shipping   
            - executeFunction:
                name: us.functions.cart.continueToCheckoutOrNewOrder
            - sleep:
                duration: 3000            
      - if:
          condition: ${fulfillmentText}  ==  'Pickup'
          then:
            - executeFunction:
                name: us.functions.cart.switchBetweenPickUpAndShipping
                params:
                  - name: fulfillmentType
                    string: pickup
            - executeFunction:
                name: us.functions.selectBookingSlot
                params:
                  - name: tab
                    string: pickup            
                  - name: page
                    string: cart
                  - name: slotDay
                    string: tomorrow
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.cart.itemUpdatesTitle
                then:
                  - click:
                      identifier: us.mappings.cart.itemUpdatesContinueButton            
            - executeFunction:
                name: us.functions.cart.continueToCheckout
            - sleep:
                duration: 3000
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.cart.oosPageContinueToCheckout
                then:
                  - click:
                      identifier: us.mappings.cart.oosPageContinueToCheckout
                
      - if:
          condition: ${fulfillmentText}  ==  'Delivery'
          then:
            - executeFunction:
                name: us.functions.cart.switchBetweenPickUpAndShipping
                params:
                  - name: fulfillmentType
                    string: pickup
            - executeFunction:
                name: us.functions.selectBookingSlot
                params:
                  - name: tab
                    string: delivery      
                  - name: page
                    string: cart
                  - name: slotDay
                    string: tomorrow
            - executeFunction:
                name: us.functions.cart.continueToCheckout
            - sleep:
                duration: 3000
                
     #verify the button name change to see more after checked in the unscheduled order
  - name: us.function.orderDetails.verifyButtonNameChangeToSeeMore
    platform: android
    flow: 
      - scroll:
          direction: up
      - sleep:
          duration: 3000          
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.VerifySeemore
          then:
            - scroll:
                direction: down
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.VerifySeemore 
          else:  
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.VerifySeemore                 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.VerifySeemore                                

  - name: us.function.orderDetails.verifyGiftDetailsSection
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.gifting.reviewOrder.giftDetailsTitle     
      - verifyIdentifier:
           notPresent:
            - identifier: us.mappings.gifting.giftDetails.to
      - scroll:
          direction: up 
          untilIdentifier: us.mappings.orderConfirmation.orderNumber

  - name: us.function.orderDetails.verifyPaymentMethod
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.paymentMethodTitle
          position: center
          withinIdentifier: us.mappings.orderDetails.scrollView
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.orderDetails.giftCardDetails
            - identifier:  us.mappings.orderDetails.giftCardIcon

  - name: us.function.orderDetails.verifyGiftAddressDetailsSection     
    platform: android
    flow:
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.delivery.customerAddress
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.gifting.reviewOrder.giftDetailsTitle
            - name: direction
              string: down
            - name: scrollPosition
              string: center                        
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.gifting.giftDetails.to
                           
  - name: us.function.orderDetails.verifyButtonNameChangeToSeeMore
    platform: ios
    flow:   
      - scroll:
          direction: up    
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.VerifySeemore

  - name: us.function.orderDetails.verifyGiftDetailsSection
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.gifting.reviewOrder.giftDetailsTitle     
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.gifting.reviewOrder.toFieldGiftDetails

  - name: us.function.orderDetails.verifyGiftAddressDetailsSection
    platform: ios
    flow:
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.delivery.customerAddress
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.gifting.orderdetails.giftDetailsExpandButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center            
      - click:
          identifier: us.mappings.gifting.orderdetails.giftDetailsExpandButton
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.gifting.reviewOrder.toFieldGiftDetails


  - name: us.function.orderDetails.verifyPaymentMethod
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.paymentMethodTitle
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderdetails.payAtPickUpTitle
          then:
            - verifyIdentifier:
                present: 
                  - identifier:  us.mappings.orderdetails.payAtPickUpTitle 
          else:
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.orderDetails.cardNumber
                    contains: Ending in

  - name: us.functions.orderDetails.verifyPaymentDetails
    platform: android
    flow:
      - executeFunction:
          name: us.functions.orderDetails.verifybarcode  
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.taxLabel
            - identifier: us.mappings.orderDetails.taxValue
            - identifier: us.mappings.orderDetails.subtotalLabel
            - identifier: us.mappings.orderDetails.subtotalValue
            - identifier: us.mappings.orderDetails.totalText            
            - identifier: us.mappings.orderDetails.totalValue            

  - name: us.functions.orderDetails.verifyOdpForPickup
    platform: android
    flow:
      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.orderDetails.startReturnButton
      - executeFunction:
          name: us.functions.orderDetails.verifyOrdersPresentScheduledPickUp
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.itemsContainer.expandableButton
          then:
            - click:
                identifier: us.mappings.orderDetails.itemsContainer.expandableButton
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.addressViewTitleLabel
            - identifier: us.mappings.orderDetails.pickupPersonText
            - identifier: us.mappings.cancellation.TwoItemCancellationText
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.itemDescription 
            - name: direction
              string: down  
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.itemDescription   
            - identifier: us.mappings.return.refundReviewAndConfirmationScreen.returnItem 
      - scroll:
          direction: up
          untilIdentifier: us.mappings.return.refundReviewAndConfirmationScreen.returnItem             

  - name: us.functions.orderDetails.verifyPaymentDetails
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.totalText 
            - name: direction
              string: down    
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.tax 
            - identifier: us.mappings.orderDetails.subtotal
            - identifier: us.mappings.orderDetails.totalText                     
            - identifier: us.mappings.orderDetails.cardNumber

  - name: us.functions.orderdetails.verifyRewardEarned
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.rewardCentertext
          then:
            - click:
                identifier: us.mappings.orderDetails.detailItem 
                wait: 1000
        
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.rewardCentertext

    #verify no reward earned after returning  the order
  - name: us.functions.orderdetails.verifyNoRewardCenterLink
    platform: ios
    flow:
      - sleep:
          duration: 7000    
      - scroll:
          direction: up                                                        
      - verifyIdentifier:
          notPresent: 
             - identifier: us.mappings.orderDetails.rewardCentertext

  - name: us.functions.orderDetails.verifyOdpForPickup
    platform: ios
    flow:
      # - verifyIdentifier:
      #     present: 
      #       - identifier: us.mappings.orderDetails.startReturnButton
      - executeFunction:
          name: us.functions.orderDetails.verifyOrdersPresentScheduledPickUp                          
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.addressViewTitleLabel
            - identifier: us.mappings.orderDetails.pickupPersonText
            - identifier: us.mappings.orderDetails.itemImage            
      - executeFunction:
          name: us.functions.orderDetails.expandItemDetails
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.productImage 
            #- identifier: us.mappings.orderDetails.writeAReviewText

  - name: us.functions.orderHistory.verifyPromoAppliedLabelOnOrderDetails
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.promoAppliedlabel
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.promoAppliedlabel
            
  - name: us.functions.orderdetails.verifyRewardEarned
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.rewardCentertext
            - name: direction
              string: up            
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.rewardCentertext

    #verify no reward earned after returning  the order
  - name: us.functions.orderdetails.verifyNoRewardCenterLink
    platform: android
    flow:
      - sleep:
          duration: 7000    
      - scroll:
          direction: up                                                        
      - verifyIdentifier:
          notPresent: 
             - identifier: us.mappings.orderDetails.rewardCentertext

  - name:  us.functions.orderDetails.scheduledDelivery.verifyDeliveryAddressAndDeliveryInstrutions
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.deliveryAddress.label
            - identifier: us.mappings.orderDetails.deliveryAddress.name
            - identifier: us.mappings.orderDetails.deliveryAddress.address
            - identifier: us.mappings.orderDetails.deliveryInstructionsTitle
            - identifier: us.mappings.orderDetails.deliveryInstructions
            - identifier: us.mappings.orderDetails.deliveryInstructionsLabel

  - name:  us.functions.orderDetails.scheduleDelivery.verifyEditTipAndEditedTipIsDisplayed
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.editTipButton
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.editTipButton
      - click:
          identifier: us.mappings.orderDetails.editTipButton
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.tipping.confirmButton
      - click:
          identifier: us.mappings.tipping.tipAmount3
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.tipping.confirmButton
      - sleep:
          duration: 10000
      # - scroll:
      #     direction: down
      #     untilIdentifier: us.mappings.orderDetails.editTipButton
      # - verifyIdentifier:
      #     present: 
      #        - identifier: us.mappings.orderDetails.editTipButton

  - name:  us.functions.orderDetails.scheduleDelivery.lot.verifyLot
    platform: android
    flow:
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.trackOrder
      - click:
          identifier: us.mappings.orderDetails.trackOrder
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderdetails.trackorder.mapView.map
            - identifier: us.mappings.orderdetails.trackorder.mapView.ostStatus
            - identifier: us.mappings.orderdetails.trackorder.mapView.contactDriverButton
            - identifier: us.mappings.orderdetails.trackorder.mapView.trackingProgressBar
      - click:
          identifier: us.mappings.orderdetails.trackorder.mapView.closeButton
      - verifyIdentifier:
          notPresent: 
            - identifier: us.mappings.orderdetails.trackorder.mapView.map

  - name: us.functions.orderDetails.verifyPickInstructionsOnODP
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.pickupInstructionsButton
      - click:
          identifier: us.mappings.orderDetails.pickupInstructionsButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.pickUpInstructions.contentText

  - name: us.functions.orderDetails.verifyItemsODP
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.itemsButtonODP
      - sleep:
          duration: 2000
      - click:
          identifier: us.mappings.orderDetails.itemsButtonODP

  - name: us.functions.orderDetailPage.scheduleInstallation
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.getExpertInstallation
      - verifyIdentifier:
          present:
            - identifier: us.mapping.odp.scheduleInstallation
      - click:
          identifier: us.mapping.odp.scheduleInstallation
      - executeFunction:
          name: us.functions.cart.scheduleInstallation
          params:
            - name: slotIndex
              string: 1        
      - sleep:
          duration: 10000              
      # - verifyIdentifier:
      #     present:
      #       - identifier: us.mappings.odp.accRescheduleVerifyText
      # - sleep:
      #     duration: 60000
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://orders/$orderNo
      - scroll:
         direction: up
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.accCancelAppointmentCTA
            - identifier: us.mappings.odp.accRescheduleCTA

  - name: us.functions.oderDetailPage.verifyInstallationInstructionAndDetail
    platform: android
    flow:
      - sleep:
          duration: 5000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.odp.verifyInstallationInstruction
            - name: direction
              string: down
            - name: scrollPosition
              string: center                
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.verifyInstallationInstruction
      - click:
          identifier: us.mappings.odp.expandInstallationInstruction  
      - scroll:
          untilIdentifier: us.mappings.odp.verifyPickupInstruction 
          direction: down 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.verifyPickupInstruction           
      - click:
          identifier: us.mappings.odp.closePickupInsruction
      - sleep:
          duration: 5000
      - scroll:
          untilIdentifier: us.mappings.odp.verifyInstallationDetail
          direction: down 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.verifyInstallationDetail
      - click:
          identifier: us.mappings.odp.verifyInstallationDetail
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.verifyInstallationDetailTitle
      - click:
          identifier: us.mappings.odp.closeInstallationDetail

  - name: us.functions.oderDetailPage.verifySparkDonationAmountAndText
    platform: android
    flow:
      - sleep:
          duration: 5000
      - scroll:
          direction: up
          scrollLimit: 1
          wait: 2000    
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.totalText
            - name: direction
              string: down      
      - scroll:
          direction: down
          untilIdentifier: us.mappings.odp.donationLabel            
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.donationLabel
      - log : donation is applied

      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.orderDetails.totalValue
            - name: attribute
              string: text
            - name: delimeter
              string: '$'      

  - name: us.functions.orderDetails.verifyDSpaymentCard  
    platform: android
    flow:
      - sleep:
          duration: 4000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.dsPaymentCard 
            - name: direction
              string: down    
      - sleep:
          duration: 4000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.dsPaymentCard

  - name: us.functions.oderDetailPage.verifySparkDonationAmountAndText
    platform: ios
    flow:
      - sleep:
          duration: 5000
      # - scroll:
      #     direction: up
      #     scrollLimit: 1
      #     wait: 2000    
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.subtotalText #us.mappings.orderDetails.totalText
            - name: direction
              string: down      
      - scroll:
          direction: down
          untilIdentifier: us.mappings.odp.donationLabel            
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.donationLabel
      - log : donation is applied

      - executeFunction:
          name: us.functions.utils.fetchAmountDisplayed
          params:
            - name: identifier
              string: us.mappings.orderDetails.totalValue
            - name: attribute
              string: label
            - name: delimeter
              string: '$'
  
  - name: us.functions.purchaseHistory.orderDetails.assertOrderId
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.orderDetails.orderNumberText
      - getString:
          identifier: us.mappings.orderDetails.orderNumberText
          attribute: value
          extractNumbers: true
          storeIn: viewDetailsOrderId
      - log : ${viewDetailsOrderId}
      - if:
          condition: ${viewDetailsOrderId} == ${orderNo}
          then: 
            - log: 
                message: Verify Order successful

  - name: us.functions.purchaseHistory.orderDetails.assertOrderStatusTrack
    platform: ios
    flow:
      - verifyIdentifier:
          label:
            - identifier: us.mappings.orderHistory.orderDetails.orderStatusLabel
              equals: ${orderStatusLabel}
      - log:
          message: order status assertion is successful

  - name: us.functions.oderDetailPage.verifySkyBenefitCard
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.oderDetails.paymentMethodText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.oderDetails.benefitCardOtherText
      - log: Sky benefit card is present

  - name: us.functions.oderDetailPage.verifyNationsBenefitCard
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.oderDetails.paymentMethodText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.oderDetails.nationsBenefitcardImage
            - identifier: us.mappings.oderDetails.nationsBenefitcardText
      - log: Nations benefit card is present          

  - name: us.functions.oderDetailPage.verifyNationsBenefitCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.oderDetails.paymentMethodText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.oderDetails.nationsBenefitcardImage
            - identifier: us.mappings.oderDetails.nationsBenefitcardText
      - log: Nations benefit card is present            

  - name: us.functions.oderDetailPage.verifySkyBenefitCard
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.amend.paymentMethodText
      - verifyIdentifier:
          present:
            - identifier: us.mappings.oderDetails.benefitCardOtherText
      - log: Sky benefit card is present            

  - name: us.functions.purchaseHistory.orderDetails.assertOrderId
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.ost.seeMore.odp.orderNumber
      - getString:
          identifier: us.mappings.ost.seeMore.odp.orderNumber
          attribute: text
          extractNumbers: true
          storeIn: viewDetailsOrderId
      - log : ${viewDetailsOrderId}
      - if:
          condition: ${viewDetailsOrderId} == ${orderNo}
          then: 
            - log: 
                message: Verify Order successful            

  - name: us.functions.oderDetailPage.mpPickup.verifySellerDetail
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.itemsButtonODP 
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.itemsButtonODP
      - click:
          identifier: us.mappings.orderDetails.itemsButtonODP
      - click:
          identifier: us.mappings.orderDetails.productImage
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.item.SellerInfoBoxView
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.item.SellerInfoBoxView
      - click:
          identifier: us.mappings.item.SellerInfoBoxView
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.marketplace.sellerInfo     
      - if: 
          condition: ${sellerType} == 'pro-seller'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.marketplace.text.3P_ProSeller

      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.sellerPage.close
      - click:
          identifier: us.mappings.orderDetails.sellerPage.close

  - name: us.functions.oderDetailPage.curbsidePickup.liquorPickup.verifyEditAndAmendItem
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.fulfillmentType.curbsidePickup.liquorPickupInstructions
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.fulfillmentType.curbsidePickup.liquorPickupInstructions
      - click:
          identifier: us.mappings.orderDetails.editOrderButton
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.amend.editItem.saveButton
      - click:
          identifier: us.mappings.amend.item.quanity.incrementButton
      - click:
          identifier: us.mappings.amend.editItem.saveButton
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.fulfillmentType.curbsidePickup.liquorPickupInstructions

  - name: us.functions.oderDetailPage.gardenCenterCurbsidePickup.verifyEditItemNotPresent
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.fulfillmentType.gardenCenterCurbsidePickup.gardenCenterPickupInstructions
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.fulfillmentType.gardenCenterCurbsidePickup.gardenCenterPickupInstructions
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.orderDetails.editOrderButton

  - name: us.functions.oderDetailPage.curbsidePickup.groceryPickup.verifyEditItem
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.fulfillmentType.curbsidePickup.groceryPickupInstructions
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.fulfillmentType.curbsidePickup.groceryPickupInstructions
      - click:
          identifier: us.mappings.orderDetails.editOrderButton
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.amend.editItem.saveButton
      - click:
          identifier: us.mappings.orderDetails.backButton

  - name: us.functions.oderDetailPage.curbsidePickup.liquorPickup.verifyEditAndAmendItem
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.fulfillmentType.gardenCenterCurbsidePickup
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.fulfillmentType.gardenCenterCurbsidePickup
      - click:
          identifier: us.mappings.orderDetails.singleEditOrderButton
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.amend.editItem.updateOrder
      - click:
          identifier: us.mappings.amend.item.quanity.incrementButton
      - click:
          identifier: us.mappings.amend.editItem.updateOrder
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.fulfillmentType.curbsidePickup.liquorPickupInstructions

  - name: us.functions.oderDetailPage.gardenCenterCurbsidePickup.verifyEditItemNotPresent
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.fulfillmentType.curbsidePickup.groceryPickup
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.fulfillmentType.curbsidePickup.groceryPickup
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.orderDetails.singleEditOrderButton

  - name: us.functions.oderDetailPage.curbsidePickup.groceryPickup.verifyEditItem
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.paymentMethodTitle
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.paymentMethodTitle
      - click:
          identifier: us.mappings.orderDetails.singleEditOrderButton
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.amend.editItem.updateOrder

  - name: us.functions.oderDetailPage.paymentClarity
    platform: android
    flow:
      - if: 
          condition: ${paymentMethod} == 'Credit Card'
          then:           
            - if: 
                condition: ${orderStatus} == 'Delivered'
                then:
                  - scroll:
                      direction: down
                      untilIdentifier: us.mappings.orderDetails.paymentClarity.subText
                      position: center
                  - verifyIdentifier:
                      present: 
                        - identifier: us.mappings.orderDetails.paymentClarity.subText
                        - identifier: us.mappings.orderDetails.paymentClarity.forDeliveredState
                  - log: After the time of order delivery, charge amount and temporary hold subtext is shown       
                else:
                  - scroll:
                      direction: down
                      untilIdentifier: us.mappings.orderDetails.paymentMethodTitle
                      position: center
                  - verifyIdentifier:
                      notPresent: 
                        - identifier: us.mappings.orderDetails.paymentClarity.subText       
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount    
                  - log: Before the time of order delivery, charge amount is not shown
      - if: 
          condition: ${paymentMethod} == 'EBT Card'
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.orderDetails.totalText
            - verifyIdentifier:
                notPresent: 
                  - identifier: us.mappings.orderDetails.paymentClarity.subText 

            - if: 
                condition: ${orderStatus} == 'Delivered'
                then:
                  
                  - verifyIdentifier:
                      present: 
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount
                  
                  - log: After the time of order delivery, charge amount is shown       
                else:
                  - scroll:
                      direction: down
                      untilIdentifier: us.mappings.orderDetails.totalText
                  - verifyIdentifier:
                      notPresent: 
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount    
                  - log: Before the time of order delivery, charge amount is not shown

      - if: 
          condition: ${paymentMethod} == 'EBT and CC'
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.orderDetails.totalText
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center          
            - if: 
                condition: ${orderStatus} == 'Delivered'
                then:
                  - verifyIdentifier:
                      present: 
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmountEBT
                        - identifier: us.mappings.orderDetails.paymentClarity.subText
                        - identifier: us.mappings.orderDetails.paymentClarity.forDeliveredState 
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmountCC 
                  - log: After the time of order delivery, charge amount is shown  
                else:                  
                  - verifyIdentifier:
                      notPresent: 
                        - identifier: us.mappings.orderDetails.paymentClarity.subText         
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmountEBT   
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmountCC 
                  - log: Before the time of order delivery, charge amount is not shown

  - name: us.functions.oderDetailPage.paymentClarity
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.paymentMethodTitle
      - if: 
          condition: ${paymentMethod} == 'EBT Card'
          then:
            - verifyIdentifier:
                notPresent: 
                  - identifier: us.mappings.orderDetails.paymentClarity.subText
            - if: 
                condition: ${orderStatus} == 'Delivered'
                then:
                  - sleep:
                      duration: 3000      
                  - verifyIdentifier:
                      present: 
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount

                  - log: After the time of order delivery, charge amount is shown       
                else:
                  - verifyIdentifier:
                      notPresent:      
                        - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount    
                  - log: Before the time of order delivery, charge amount is not shown

          else: 
            - if: 
                condition: ${paymentMethod} == 'Credit Card'     
                then:    
                  - if: 
                      condition: ${orderStatus} == 'Delivered'
                      then:
                        - verifyIdentifier:
                            present: 
                              - identifier: us.mappings.orderDetails.paymentClarity.subText
                              - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount
                        - log: After the time of order delivery, charge amount and temporary hold subtext is shown
                      else:
                        - verifyIdentifier:
                            notPresent: 
                              - identifier: us.mappings.orderDetails.paymentClarity.subText       
                              - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount    
                        - log: Before the time of order delivery, charge amount is not shown 
                else:
                  - if: 
                      condition: ${paymentMethod} == 'EBT and CC'
                      then:
                        - executeFunction:
                            name: us.functions.utils.scrollIfNotVisible
                            params:
                              - name: identifier
                                string: us.mappings.orderDetails.totalText
                              - name: direction
                                string: down
                              - name: scrollPosition
                                string: center          
                        - if: 
                            condition: ${orderStatus} == 'Delivered'
                            then:
                              - verifyIdentifier:
                                  present: 
                                    - identifier: us.mappings.orderDetails.paymentClarity.chargeAmountCC
                                    - identifier: us.mappings.orderDetails.paymentClarity.subText
                                    - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount
                              - log: After the time of order delivery, charge amount is shown  
                            else:                  
                              - verifyIdentifier:
                                  notPresent: 
                                    - identifier: us.mappings.orderDetails.paymentClarity.subText         
                                    - identifier: us.mappings.orderDetails.paymentClarity.chargeAmountCC  
                                    - identifier: us.mappings.orderDetails.paymentClarity.chargeAmount 
                              - log: Before the time of order delivery, charge amount is not shown
  - name: us.functions.orderDetails.expandItemDetails
    platform: android
    flow:
      - loop:
          begin: 0
          end: 10
          storeIndex: i
          mode: increment
          flow:            
              - scroll:
                  direction: down
                  untilIdentifier: us.mappings.orderDetails.itemsContainer.expandableButton
                  scrollLimit: 1    
              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.orderDetails.itemsContainer.expandableButton
                  then:
                    - click:
                        identifier: us.mappings.orderDetails.itemsContainer.expandableButton
              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.orderDetails.barcode
                  then:
                    - log: "Reached end of the page"
                    - storeIn:
                        key: prerequisiteScrollRequired
                        value: true     
                    - break: true                   

  # Verify Order details screen upon customer choice when driver returned back the order to store. 
  - name: us.functions.orderDetails.verifycustomerchoiceondriverreturns
    platform: android
    flow:
    #Validating all the headers here displayed in Cancel Membership Screen.
    - verifyIdentifier: 
          present: 
            - identifier: us.mappings.orderDetails.customeroptionpickup # Convert to pick up 
            - identifier: us.mappings.orderDetails.customeroptioncancel  # cancel order 
            - identifier: us.mappings.orderDetails.customeroptionreschedule # Reschedule order  
    - if:
        condition: ${oderType} == 'expressOrder'     
        then:         
          - verifyIdentifier: 
               present: 
                - identifier: us.mappings.orderDetails.newDelayMessage 
          - getString:
               identifier: us.mappings.orderDetails.newDelayMessage
               attribute: text
               storeIn: newDelayMessage           
          - log: New delay message '${newDelayMessage}' is displayed 

    # Verify the order upon selecting reschedule when driver return backs the order to store. 
  - name: us.functions.orderDetails.verifyrescheduleorderupondriverreturn
    platform: android
    flow:
    - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.customeroptionreschedule  
    - click:
          identifier: us.mappings.orderDetails.customeroptionreschedule         
    - sleep:
          duration: 7000     
    - if:
        condition: ${oderType} == 'expressOrder'     
        then: 
          - verifyIdentifier:
              present:
                - identifier: us.mappings.reserveSlot.messageBanner  
          - getString:
              identifier: us.mappings.reserveSlot.messageBanner
              attribute: text
              storeIn: reserveSlotMessageBanner          
          - log: Reserve slot new message banner '${reserveSlotMessageBanner}' is displayed          
    - executeFunction:
          name: us.functions.selectDayForSlotDisplay
          params:
            - name: slotDay
              string: 'today' 
    - executeFunction:
          name: us.functions.selectTimeSlot  
          params:
            - name: slotIndex
              string: 2
            - name: timeSlot
              string: generic        
    - click:
          identifier: us.mappings.orderDetails.reschedulesave 
    - log: "Refreshing page required"         

  # Verify Order details screen upon customer choice when driver returned back the order to store. 
  - name: us.functions.orderDetails.verifycustomerchoiceondriverreturns
    platform: ios
    flow:
    #Validating all the headers here displayed in Cancel Membership Screen.
    - verifyIdentifier: 
          present: 
            - identifier: us.mappings.orderDetails.customeroptionpickup # Convert to pick up 
            - identifier: us.mappings.orderDetails.customeroptioncancel  # cancel order 
            - identifier: us.mappings.orderDetails.customeroptionreschedule # Reschedule order 
    - if:
        condition: ${oderType} == 'expressOrder'     
        then:         
          - verifyIdentifier: 
               present: 
                - identifier: us.mappings.orderDetails.newDelayMessage 
          - getString:
               identifier: us.mappings.orderDetails.newDelayMessage
               attribute: label
               storeIn: newDelayMessage        
          - log: New delay message '${newDelayMessage}' is displayed             

   # Verify the order upon selecting reschedule when driver return backs the order to store. 
  - name: us.functions.orderDetails.verifyrescheduleorderupondriverreturn
    platform: ios
    flow:
    - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.customeroptionreschedule  
    - click:
          identifier: us.mappings.orderDetails.customeroptionreschedule         
    - sleep:
          duration: 7000     
    - if:
        condition: ${oderType} == 'expressOrder'     
        then: 
          - verifyIdentifier:
              present:
                - identifier: us.mappings.reserveSlot.messageBanner  
          - getString:
              identifier: us.mappings.reserveSlot.messageBanner
              attribute: label
              storeIn: reserveSlotMessageBanner          
          - log: Reserve slot new message banner '${reserveSlotMessageBanner}' is displayed           
    - executeFunction:
          name: us.functions.selectDayForSlotDisplay
          params:
            - name: slotDay
              string: 'today' 
    - executeFunction:
          name: us.functions.selectTimeSlot  
          params:
            - name: slotIndex
              string: 2
            - name: timeSlot
              string: generic        
    - click:
          identifier: us.mappings.orderDetails.customersave 
     
    - log: "Refreshing page required"     

  - name: us.functions.oderDetailPage.getHelpReturns
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.getHelpCTA
      - click:
          identifier: us.mappings.orderDetails.getHelpCTA
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.whichDoYouNeedHelpWith          

      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.howCanWeHelp
      - click:
          identifier: us.mappings.orderDetails.trackMyReturnAndRefund
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.yourReturns


  - name: us.functions.orderDetails.getHelpReturns
    platform: android
    flow:             
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.getHelpCTA
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.orderDetails.whichDoYouNeedHelp
      - click:
          identifier: us.mappings.orderDetails.selectItem
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.howCanWeHelp
      - click:
          identifier: us.mappings.orderDetails.trackMyReturnAndRefund
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.yourReturns

  - name: us.functions.orderDetails.verifyReturnCards
    platform: ios
    flow:
      - verifyIdentifier:
          present:
             - identifier: us.mappings.orderDetails.ReturnMethod
             - identifier: us.mappings.orderDetails.ItemImage
             - identifier: us.mappings.orderDetails.itemQuantity
             - identifier: us.mappings.orderDetails.ReturnDetails
      - click:
          identifier: us.mappings.orderDetails.ReturnDetails
      - verifyIdentifier:
          present:
             - identifier: us.mappings.orderDetails.returnInstructionsCta
             - identifier: us.mappings.orderDetails.ItemImage
             - identifier: us.mappings.orderDetails.ItemDetails
             - identifier: us.mappings.orderDetails.payment
      - click:
          identifier: us.mappings.orderDetails.returnInstructionsCta
      - verifyIdentifier:
          present:
             - identifier: us.mappings.orderDetails.returnInstructionsText
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.returnByDate
          then:
            - log:
                message: Return is in progress          
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.statusTracker
                  - identifier: us.mappings.orderDetails.viewInstructionsOrBarcode
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.returnRecieved
          then:
            - log:
                message: Return completed     
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.statusTracker
                  - identifier: us.mappings.orderDetails.RefundIssuedDate
                  - identifier: us.mappings.orderDetails.paymentMethod

  - name: us.functions.orderDetails.verifyReturnCards
    platform: android
    flow:
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.ReturnMethod
             - identifier: us.mappings.orderDetails.ItemImage
             - identifier: us.mappings.orderDetails.itemQuantity 
             - identifier: us.mappings.orderDetails.ReturnDetails
      - click:
          identifier: us.mappings.orderDetails.ReturnDetails
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.returnInstructionsCta
             - identifier: us.mappings.orderDetails.ItemImage
             - identifier: us.mappings.orderDetails.ItemDetails
             - identifier: us.mappings.orderDetails.payment
      - click:
          identifier: us.mappings.orderDetails.returnInstructionsCta
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.orderDetails.returnInstructionsText
      - if: 
          identifier:
            present:
              - identifier: us.mappings.orderDetails.returnByDate
          then:
            - log:
                message: Return is in progress
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.statusTracker
                  - identifier: us.mappings.orderDetails.viewInstructionsOrBarcode
      - if: 
          identifier:
            present:
              - identifier: us.mappings.orderDetails.returnRecieved
          then:
            - log:
                message: Return completed
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.statusTracker
                  - identifier: us.mappings.orderDetails.RefundIssuedDate
                  - identifier: us.mappings.orderDetails.paymentMethod                  

  - name: us.functions.orderDetails.verifyReturnStatusTracker
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.returnRecievedByScheduledPickup
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.started
                  - identifier: us.mappings.orderDetails.pickedUp
                  - identifier: us.mappings.orderDetails.recieved
                  - identifier: us.mappings.orderDetails.refundSent
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.returnRecievedByEmail
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.started
                  - identifier: us.mappings.orderDetails.DroppedOff
                  - identifier: us.mappings.orderDetails.recieved
                  - identifier: us.mappings.orderDetails.refundSent

  - name: us.functions.orderDetails.verifyReturnStatusTracker
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.returnRecievedByScheduledPickup
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.started
                  - identifier: us.mappings.orderDetails.pickedUp
                  - identifier: us.mappings.orderDetails.recieved
                  - identifier: us.mappings.orderDetails.refundSent
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.returnRecievedByEmail
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.started
                  - identifier: us.mappings.orderDetails.DroppedOff
                  - identifier: us.mappings.orderDetails.recieved
                  - identifier: us.mappings.orderDetails.refundSent

  - name: us.functions.orderDetails.verifyAppeasementBanner
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.appeasement.banner
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.appeasement.Banner.viewdetailslink
            - click:
                identifier: us.mappings.orderDetails.appeasement.Banner.viewdetailslink
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Appeasement Banner is not found"

  - name: us.functions.orderDetails.verifyAppeasementBanner
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.appeasement.banner
          then:
            - verifyIdentifier:
                present:
                  - identifier: WalmartPlusBannerView.ctaButton
            - click:
                identifier: WalmartPlusBannerView.ctaButton
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Expected Scheduled Pick up order but not found"

  - name: us.functions.orderDetails.verifyAppeasementSplash
    platform: android
    flow:
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:     
                  - identifier: us.mappings.orderDetails.appeasement.ondemand.splash
                  - identifier: us.mapping.wplus.odp.closeBottomSheetMessage
                  - identifier: us.mappings.orderDetails.appeasement.ondemand.splash.cta
          then:
            - click:
                identifier: us.mapping.wplus.odp.closeBottomSheetMessage
            - log: "Closed splash screen"
    
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Appeasement splash is not found"

  - name: us.functions.orderDetails.verifyAppeasementSplash
    platform: ios
    flow:
      - if:
          identifier:
            present:     
                  - identifier: us.mappings.orderDetails.appeasement.ondemand.splash
                  - identifier: us.mapping.wplus.badges.closeBottomSheetMessage
                  - identifier: us.mappings.orderDetails.appeasement.ondemand.splash.cta
          then:
            - click:
                identifier: us.mapping.wplus.badges.closeBottomSheetMessage
            - log: "Closed splash screen"
    
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Appeasement onclick splash is not found"

  - name: us.functions.orderDetails.editDeliveryInstructionInHomeODP
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructions
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryDiscription
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructionsEdit
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructionsEdit
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editInHomeDeliveryInstructionTitle
            - identifier: us.mappings.orderDetails.verifyDoorstepTitle
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryKitchen     
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryKitchen
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryContinue
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.inHomeKeypadsCodeField
            - identifier: us.mappings.orderDetails.whereIsYourKeypadLocated
      - click: 
          identifier: us.mappings.orderDetails.inHomeKeypadsCodeField        
      - enterText:
          identifier: us.mappings.orderDetails.inHomeKeypadsCodeField
          string: ${keypadcode}
      - click: 
          identifier: us.mappings.default.keyboardDoneButton
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryContinue          
      - sleep:
          duration: 2000         
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.doYouHaveAnyPetsInYourHome
      - click:
          identifier: us.mappings.orderDetails.verifyYesButton
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryContinue
      - sleep:
          duration: 2000          
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryClear
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryHouse          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifyPropertyTypes
            - identifier: us.mappings.orderDetails.verifyGateOrCallboxCode
      - click:
          identifier: us.mappings.orderDetails.verifyGateOrCallboxCode           
      - enterText:
          identifier: us.mappings.orderDetails.verifyGateOrCallboxCode
          string: ${gatecodes}
      - click: 
          identifier: us.mappings.default.keyboardDoneButton
      - click:
          identifier: us.mappings.orderDetails.inhomeInstruction
      - enterText:
          identifier: us.mappings.orderDetails.inhomeInstruction
          string: ${Instructioninhome}
      - click: 
          identifier: us.mappings.default.keyboardDoneButton
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryContinue
      - sleep:
          duration: 3000          
      - scroll:
          direction: up
          scrollLimit: 2
      - log:
          message: inHome Instruction Updated From ODP          

  - name: us.functions.orderDetails.noEditInHomeInstruction
    platform: ios
    flow:
      - verifyIdentifier:
          visible:
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructionsEdit
              value: false
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructions
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryDiscription
      - log:
          message: Edit InHome Instruction not present      

  - name: us.functions.orderDetails.chargeHistoryForEbtAndCc
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.chargeHistoryCTA
      - click:
          identifier: us.mappings.orderDetails.chargeHistoryCTA
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ledger.header.chargeHistory
            - identifier: us.mappings.orderDetails.multiplePaymentText
            - identifier: us.mappings.orderDetails.ledger.creditCard.info
            - identifier: us.mappings.orderDetails.ledger.EbtCard.info
      - if:
          condition: ${orderstatus} == 'Placed'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.ledger.initialCharge.title
                  - identifier: us.mappings.orderDetails.ledger.initialCharge.SubText
                  - identifier: us.mappings.orderDetails.ledger.OrderCharge
            - click:
                identifier: us.mappings.orderDetails.ledger.creditCardCarousel
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.ledger.temporaryHold.string 
                  - identifier: us.mappings.ledger.temporaryHold.subText
                  - identifier: us.mappings.ledger.temporaryHold.contextHelp.icon 
                  - identifier: us.mappings.ledger.temporaryHold.contextHelp.clockIcon           

  - name: us.functions.oderDetailPage.cancelappointment
    platform: android
    flow:            
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.accRescheduleCTA
      - verifyIdentifier:
          present:
            - identifier: us.mappings.odp.accCancelAppointmentCTA
      - click:
          identifier: us.mappings.odp.accCancelAppointmentCTA
      - click:
          identifier: us.mappings.odp.cancel.option.radiobutton.wouldnotarriveintime
      - click:
          identifier: us.mappings.requestCancellation.confirmButton

  - name: us.functions.orderDetails.chargeHistoryForEbtAndCc
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.chargeHistoryCTA
          position: center
      - click:
          identifier: us.mappings.orderDetails.chargeHistoryCTA
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ledger.header.chargeHistory
            - identifier: us.mappings.orderDetails.multiplePaymentText
            - identifier: us.mappings.orderDetails.ledger.creditCard.info
            - identifier: us.mappings.orderDetails.ledger.EbtCard.info
      - if:
          condition: ${orderstatus} == 'Placed'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.ledger.initialCharge.title
                  - identifier: us.mappings.orderDetails.ledger.initialChargeAndTempHold.SubText
                  - identifier: us.mappings.orderDetails.ledger.OrderCharge
            - click:
                identifier: us.mappings.orderDetails.ledger.creditCardCarousel
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.ledger.temporaryHold.string 
                  - identifier: us.mappings.orderDetails.ledger.initialChargeAndTempHold.SubText
                  - identifier: us.mappings.ledger.temporaryHold.contextHelp.icon 

  - name: us.functions.orderDetails.editDeliveryInstructionInHomeODP
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructions
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryDiscription
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructionsEdit
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructionsEdit
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editInHomeDeliveryInstructionTitle
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryGarage
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryKitchen     
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryKitchen
      - click:
          identifier: us.mappings.capOne.paymentsOptionsContinueButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.editDeliveryInstructions.keypadsCode
            - identifier: us.mappings.orderDetails.whereIsYourKeypadLocated
      - click: 
          identifier: us.mappings.reviewOrder.editDeliveryInstructions.keypadsCode 
      - enterText:
          identifier: us.mappings.reviewOrder.editDeliveryInstructions.keypadsCode
          string: ${keypadcode}
          pressEnter: true
      - goBack: true
      - click:
          identifier: us.mappings.capOne.paymentsOptionsContinueButton
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.doYouHaveAnyPetsInYourHome
      - click:
          identifier: us.mappings.orderDetails.verifyYesButton
      - click:
          identifier: us.mappings.capOne.paymentsOptionsContinueButton
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.orderDetails.verifyInHomeDeliveryHouse       
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifyPropertyTypes
            - identifier: us.mappings.orderDetails.verifyGateOrCallboxCodeText
      - click:
          identifier: us.mappings.orderDetails.verifyGateOrCallboxCode           
      - enterText:
          identifier: us.mappings.orderDetails.verifyGateOrCallboxCode
          string: ${gatecodes}
          pressEnter: true
      - goBack: true
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.inhomeInstruction
            - name: direction
              string: down
      - verifyIdentifier:
           present:
            - identifier: us.mappings.orderDetails.inhomeInstruction  
      - click:
          identifier: us.mappings.orderDetails.inhomeInstruction
      - enterText:
          identifier: us.mappings.orderDetails.inhomeInstruction
          string: ${Instructioninhome}
          pressEnter: true
      - goBack: true
      - click:
          identifier: us.mappings.capOne.paymentsOptionsContinueButton
      - sleep:
          duration: 3000
      - scroll:
          direction: up
          scrollLimit: 2
      - log:
          message: inHome Instruction Updated From ODP

  - name: us.functions.orderDetails.noEditInHomeInstruction
    platform: android
    flow:
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructionsEdit
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryInstructions
            - identifier: us.mappings.orderDetails.verifyInHomeDeliveryDiscription
      - log:      
          message: Edit InHome Instruction not present

  - name: us.functions.orderDetails.verifyPaymentCards
    platform: android
    flow:
      - sleep:
          duration: 5000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.paymentMethodTitle
          position: center
      - if:
          condition: ${RefundCredit} == 'exists'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reviewOrder.cardSummaries.refundCard
      - if:
          condition: ${verifyGC} == 'exists'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.orderDetails.GCard.thumbnail

  - name: us.functions.orderDetails.verifyPaymentCardsDisplay
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.paymentMethodTitle
          position: center
      - try:
          flow:
            - if:
                condition: ${cardType} == 'refund'
                then:
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.reviewOrder.refundCard.cardSummaries
          catch:
            flow:
              - failTest:
                  message: "FAILURE - ${env} - Refund card is not the payment method for the created order, verification failed in Order detail page"            
        
  - name: us.functions.orderDetails.chargeHistoryPage.verifyOrderAdjustment
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - if:
          identifier:
            present:     
                  - identifier: us.mappings.ledger.orderAdjustement
          then:
              - verifyIdentifier: 
                  present:
                    - identifier: us.mappings.ledger.orderAdjustement
                    - identifier: us.mappings.ledger.orderAdjustement.inlineText
              - log: Refund/Order adjustment may take up to 10 days to process    
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Order adjustment is not found"             

  - name: us.functions.orderDetails.chargeHistoryPage.verifyOrderAdjustment
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - if:
          identifier:
            present:     
                  - identifier: us.mappings.ledger.orderAdjustement
          then:
              - verifyIdentifier: 
                  present:
                    - identifier: us.mappings.ledger.orderAdjustement
                    - identifier: us.mappings.ledger.orderAdjustement.inlineText
              - log: Refund/Order adjustment may take up to 10 days to process    
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Order adjustment is not found"               

  - name: us.functions.orderDetails.verifyScDeliveryOrderODP
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.amend.timeLeftForAmendBanner
            - identifier: us.mappings.orderDetails.delievryInstructionsSection
            - identifier: us.mappings.orderDetails.addressViewTitleLabel
            #- identifier: us.mappings.editSlot.changeSlotButton

  - name: us.functions.orderDetails.verifyAmendsBanner
    platform: ios
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.amend.timeLeftForAmendBanner
          scrollLimit: 2
      - verifyIdentifier:
          present:
            - identifier: us.mappings.amend.timeLeftForAmendBanner 
            - identifier: us.mappings.orderconfirmation.addItems

  - name: us.functions.orderDetails.verifyScDeliveryOrderODP
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - sleep:
          duration: 5000  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderConfirmation.amendsBanner
            - identifier: us.mappings.orderDetails.deliveryInstructionsTitle
            - identifier: us.mappings.orderDetails.deliveryAddress.label
            - identifier: us.mappings.editSlot.bookslotLink

  - name: us.functions.orderDetails.verifyAmendsBanner
    platform: android
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mappings.orderConfirmation.amendsBanner
          scrollLimit: 2
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderConfirmation.amendsBanner
            - identifier: us.mappings.orderconfirmation.addItems

  - name: us.functions.orderDetails.amend.EditItem.verifySubsToggleSwichAndUpdateOrder
    platform: android
    flow:
      - verifyIdentifier:
          present: 
             - identifier: us.mappings.subs.allowSubs.toggleSwitch
      - click:
          identifier: us.mappings.subs.allowSubs.toggleSwitch
      - verifyIdentifier:
          text:
            - identifier: us.mappings.reviewOrder.noSubsMessage   
              equals: No substitutions will be provided for this order.
      - click:
          identifier: us.mappings.subs.allowSubs.toggleSwitch
      - sleep:
          duration: 3000
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.subsExpandedGroup
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reviewOrder.subsPreference.replaceWithRadioButton
          else:
            - click:
                identifier: us.mappings.reviewOrder.subspreference.expandFirstIfUnavailable
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reviewOrder.subsPreference.replaceWithRadioButton
      # - click:
      #     identifier: us.mappings.reviewOrder.SubstitutionEditButton
      - click:
          identifier: us.mappings.reviewOrder.subsPreference.replaceWithRadioButton
      - scroll:
          direction: left
          untilIdentifier: us.mappings.subs.searchItems.button
          scrollLimit: 2                            
      - click:
          identifier: us.mappings.subs.searchItems.button
      - log: "The Substitution Search button is now visible and clicked!!!"
      - enterText:
          identifier: us.mappings.subs.searchBar
          string: ${subSearchTerm}
          pressEnter: true
      - log: "Searched the subs items and selected the first item in the results"
      - click:
          identifier: us.mappings.subs.searchResultItem.1stIndex
      - log: "Searched the subs items and selected the first item in the results"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.subs.subs.saveButton
      - click:
          identifier: us.mappings.subs.subs.saveButton
      - sleep:
          duration: 4000
      - log: "Clicked on the Save Button to update the substitution item."
      - scroll:
          direction: up
      - verifyIdentifier:
          present:
            - identifier: us.mappings.subs.daysLeftToEditOrder.text
            - identifier: us.mappings.subs.replaceIfUnavailable.text.onUpdateOrderPage
            - identifier: us.mappings.subs.allowSubs.text.onUpdateOrderPage
            # - identifier: us.mappings.subs.editButton.onUpdateOrder
            - identifier: us.mappings.subs.replaceItem.onUpdateOrderPage
            - identifier: us.mappings.subs.updateOrderButton
      - log: "Verified all the asserts on Update Order Page."
      - click:
          identifier: us.mappings.subs.updateOrderButton
          wait: 2000
      - log: "Clicked Update Order button."
      - sleep:
          duration: 20000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.totalText
            - name: direction
              string: down
            - name: scrollPosition
              string: center   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.totalText
      - log: "The Temporary Hold mount field is Visible on the Order Detail Page!!!"

  # Verify new message banner on ODP
  - name: us.functions.orderDetails.newMessageBanner 
    platform: android
    flow:
    - storeIn:
          key: executionStage
          value: Post-transactions
    - verifyIdentifier: 
          present: 
            - identifier: us.mappings.orderDetails.newBannerMsg   
    - getString:
          identifier: us.mappings.orderDetails.newBannerMsg 
          attribute: text
          storeIn: ODPMessageBanner          
    - log: New message banner '${ODPMessageBanner}' on ODP is displayed               

 # Verify new message banner on ODP
  - name: us.functions.orderDetails.verifyMessageBanner 
    platform: ios
    flow:
      - storeIn:
            key: executionStage
            value: Post-transactions
      - verifyIdentifier: 
            present: 
              - identifier: us.mappings.orderDetails.newBannerMsg  
      - getString:
            identifier: us.mappings.orderDetails.newBannerMsg 
            attribute: label
            storeIn: ODPMessageBanner          
      - log: New message banner '${ODPMessageBanner}' on ODP is displayed                                     

   # Validate CO delivery fee charges in ODP
  - name: us.functions.orderDetails.verifyCORetailDeliveryFeeChargedonODP
    platform: android
    flow :
      - scroll:
          direction: down
          position: center
          untilIdentifier: us.mappings.orderDetails.CORetailDelivery.feeLabel
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.CORetailDelivery.feeLabel
            - identifier: us.mappings.orderDetails.CORetailDelivery.feeButton
            - identifier: us.mappings.orderDetails.CORetailDelivery.feeValue
      - click:
          identifier: us.mappings.orderDetails.CORetailDelivery.feeButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet.Title
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet.subTitle
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet.COdeliveryFeeLabel
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet.COdeliveryFeeClarityLabel
            - identifier: us.mappings.global.closeButton
      - click:
          identifier: us.mappings.global.closeButton

 # Validate CO delivery fee charges in ODP
  - name: us.functions.orderDetails.verifyCORetailDeliveryFeeChargedonODP
    platform: ios
    flow :
      - scroll:
          direction: down
          position: center
          untilIdentifier: us.mappings.orderDetails.CORetailDelivery.feeLabel
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.CORetailDelivery.feeLabel
            - identifier: us.mappings.orderDetails.CORetailDelivery.feeButton
      - click:
          identifier: us.mappings.orderDetails.CORetailDelivery.feeButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet.Title
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet.subTitle
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet.COdeliveryFeeLabel
            - identifier: us.mappings.orderDetails.CORetailDelivery.bottomsheet.COdeliveryFeeClarityLabel
            - identifier: us.mappings.global.closeButton
      - click:
          identifier: us.mappings.global.closeButton

  #Validate Order with Curbside pick up with Cancelled Order
  - name: us.functions.orderDetails.ost.curbsidePickup.verifyOrderStatus
    platform: ios
    flow:
      - if:
          identifier:
            present:     
                  - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.deliveryFromStore
          then:
              - verifyIdentifier:
                  value:
                    - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.deliveryFromStore
                      equals: ${fulfillmentTypeDelivery}
              - verifyIdentifier:
                  value:
                    - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.cancelledToday
                      equals: ${fulfillmentTypeCancelled}
              - executeFunction:
                  name: us.functions.utils.scrollIfNotVisible
                  params:
                    - name: identifier
                      string: us.mappings.orderDetails.fulfillmentTypeLabel.curbsidePickup
                    - name: direction
                      string: down
              - log: Scroll to the curbside pickup section      
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.curbsidePickup
              equals: ${fulfillmentTypeCurbside}
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.progressBar
              equals: ${orderStatus}

  - name: us.functions.orderDetails.ost.curbsidePickup.verifyOrderStatus
    platform: android
    flow:
      - if:
          identifier:
            present:     
                  - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.deliveryFromStore
          then:
              - verifyIdentifier:
                  text:
                    - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.deliveryFromStore
                      equals: ${fulfillmentTypeDelivery}
              - verifyIdentifier:
                  text:
                    - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.cancelledToday
                      equals: ${fulfillmentTypeCancelled}
              - executeFunction:
                  name: us.functions.utils.scrollIfNotVisible
                  params:
                    - name: identifier
                      string: us.mappings.orderDetails.fulfillmentTypeLabel.curbsidePickup
                    - name: direction
                      string: down
                    - name: scrollPosition
                      string: center   
              - log: Scroll to the curbside pickup section
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.curbsidePickup
              equals: ${fulfillmentTypeCurbside}
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.progressBarMixedFulfiillment
          position: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.progressBarMixedFulfiillment

    # Edit pickup store from ODP
  - name: us.functions.orderDetails.editPickupStore 
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.navBarTitle
            - name: direction
              string: up       
      - verifyIdentifier:
          timeout: 15000
          present:
            - identifier: us.mappings.orderDetails.editStoreLocation
      - click:
          identifier: us.mappings.orderDetails.editStoreLocation
      - sleep:
          duration: 4000
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.editStoreLocation.alertMessage
              equals: ${editStoreAlertMessage}    
      - executeFunction:
          name: us.functions.reserveSlot.changeStore
          params:
            - name: store
              string: 32137
            - name: errorHandle
              string: true
      - sleep:
          duration: 10000
      - executeFunction:
          name: us.functions.amend.selectNewSlotandSave

      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.pickup.reviewChanges
          then:
            - verifyIdentifier: 
                present: 
                  - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessage
            - click:
                identifier:  us.mappings.amend.pickup.confirmChanges
      - sleep:
          duration: 10000              
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPopup    
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://orders/$orderNo 
      - verifyIdentifier:
          notPresent: 
             - identifier: us.mappings.orderDetails.editStoreLocation

  - name: us.functions.orderDetails.editPickupStore 
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.navBarTitle
            - name: direction
              string: up       
      - verifyIdentifier:
          timeout: 15000
          present:
            - identifier: us.mappings.orderDetails.editStoreLocation
      - click:
          identifier: us.mappings.orderDetails.editStoreLocation
      - sleep:
          duration: 4000
      - verifyIdentifier:
          value:
            - identifier: us.mappings.orderDetails.editStoreLocation.alertMessage
              equals: ${editStoreAlertMessage}          
      - executeFunction:
          name: us.functions.reserveSlot.changeStore
          params:
            - name: store
              string: 32137
            - name: errorHandle
              string: true
      - sleep:
          duration: 10000
      - executeFunction:
          name: us.functions.amend.selectNewSlotandSave

      - if:
          identifier:
            present:
              - identifier: us.mappings.amend.pickup.reviewChanges
          then:
            - verifyIdentifier: 
                present: 
                  - identifier: us.mappings.orderDetails.editDeliveryAddress.selectAddress.alertMessage
            - click:
                identifier:  us.mappings.amend.pickup.confirmChanges
      - sleep:
          duration: 10000              
      - executeFunction:
          name: us.functions.utils.handleTechnicalErrorPopup    
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://orders/$orderNo
      - verifyIdentifier:
          notPresent: 
             - identifier: us.mappings.orderDetails.editStoreLocation         

  # Verify Order details screen upon customer choice when driver returned back the order to store. 
  - name: us.functions.orderDetails.sparkshopper.verifycustomerchoiceondriverreturns
    platform: ios
    flow:
      - storeIn:
            key: executionStage
            value: Post-transactions
      - verifyIdentifier: 
            present: 
              - identifier: us.mappings.orderDetails.newDelayMessage   
      - getString:
            identifier: us.mappings.orderDetails.newDelayMessage
            attribute: label
            storeIn: delayMessage        
      - log: Delay message '${delayMessage}' is displayed              
      - verifyIdentifier: 
            present: 
              - identifier: us.mappings.orderDetails.viewMyOptionsButton 
      - click:
            identifier: us.mappings.orderDetails.viewMyOptionsButton
      - sleep:
            duration: 4000              
      #Validating all the headers here displayed on bottomsheet.
      - verifyIdentifier: 
            present: 
              - identifier: us.mappings.orderDetails.rescheduleDeliveryButton 
              - identifier: us.mappings.orderDetails.switchToPickupButton 
              - identifier: us.mappings.orderDetails.requestCancellationButton
                
   # Select Reschedule/CTP/Cancel CTA upon driver return backs the order to store. 
  - name: us.functions.orderDetails.sparkShopperDriverReturns.selectCTA
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - if:
          condition: ${option} == 'Reschedule'
          then:
            - click:
                identifier: us.mappings.orderDetails.rescheduleDeliveryButton
            - sleep:
               duration: 4000 
            - executeFunction:
                name: us.functions.selectDayForSlotDisplay
                params:
                  - name: slotDay
                    string: 'today' 
            - executeFunction:
                name: us.functions.selectTimeSlot  
                params:
                  - name: slotIndex
                    string: 2
                  - name: timeSlot
                    string: generic  
            - click:
                identifier: us.mappings.orderDetails.customersave                                       
      - if:
          condition: ${option} == 'Pickup'
          then:
            - click:
                identifier: us.mappings.orderDetails.switchToPickupButton  
            - sleep:
               duration: 4000 
            - executeFunction:
                name: us.functions.selectDayForSlotDisplay
                params:
                  - name: slotDay
                    string: 'today' 
            - executeFunction:
                name: us.functions.selectTimeSlot  
                params:
                  - name: slotIndex
                    string: 2
                  - name: timeSlot
                    string: generic  
            - click:
                identifier: us.mappings.orderDetails.customersave                
      - if:
          condition: ${option} == 'Cancel'
          then:
            - executeFunction:
               name: us.functions.cancel.order

  # Verify Order details screen upon customer choice when driver returned back the order to store. 
  - name: us.functions.orderDetails.sparkshopper.verifycustomerchoiceondriverreturns
    platform: android
    flow:
    - storeIn:
          key: executionStage
          value: Post-transactions
    - verifyIdentifier: 
          present: 
            - identifier: us.mappings.orderDetails.newDelayMessage   
    - getString:
          identifier: us.mappings.orderDetails.newDelayMessage
          attribute: text
          storeIn: delayMessage        
    - log: Delay message '${delayMessage}' is displayed              
    - verifyIdentifier: 
          present: 
            - identifier: us.mappings.orderDetails.viewMyOptionsButton 
    - click:
          identifier: us.mappings.orderDetails.viewMyOptionsButton
    - sleep:
          duration: 4000              
    #Validating all the headers here displayed on bottomsheet.
    - verifyIdentifier: 
          present: 
            - identifier: us.mappings.orderDetails.rescheduleDeliveryButton 
            - identifier: us.mappings.orderDetails.switchToPickupButton 
            - identifier: us.mappings.orderDetails.requestCancellationButton
                
   # Select Reschedule/CTP/Cancel CTA upon driver return backs the order to store. 
  - name: us.functions.orderDetails.sparkShopperDriverReturns.selectCTA
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - if:
          condition: ${option} == 'Reschedule'
          then:
            - click:
                identifier: us.mappings.orderDetails.rescheduleDeliveryButton
            - sleep:
               duration: 4000 
            - executeFunction:
                name: us.functions.selectDayForSlotDisplay
                params:
                  - name: slotDay
                    string: 'today' 
            - executeFunction:
                name: us.functions.selectTimeSlot  
                params:
                  - name: slotIndex
                    string: 2
                  - name: timeSlot
                    string: generic  
            - click:
                identifier: us.mappings.reserve.slot.button                                      
      - if:
          condition: ${option} == 'Pickup'
          then:
            - click:
                identifier: us.mappings.orderDetails.switchToPickupButton  
            - sleep:
               duration: 4000 
            - executeFunction:
                name: us.functions.selectDayForSlotDisplay
                params:
                  - name: slotDay
                    string: 'today' 
            - executeFunction:
                name: us.functions.selectTimeSlot  
                params:
                  - name: slotIndex
                    string: 2
                  - name: timeSlot
                    string: generic  
            - click:
                identifier: us.mappings.reservePickup.confirmPickupCTA               
      - if:
          condition: ${option} == 'Cancel'
          then:
            - executeFunction:
               name: us.functions.cancel.order                   

  - name: us.functions.orderDetails.verifyYourTipLabel
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.verifyDriverTip
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.verifyDriverTip
          then:
            - log: "Your tip label is displayed with correct tip amount"
          else:
          - failTest:
              message: "FAILURE - ${env} - Your tip label is NOT displayed with correct tip amount"

  - name: us.functions.purchaseOrderPage.VerifyDriverTip
    platform: ios
    flow:
      - scroll:
          direction: down
          scrollLimit: 3
          untilIdentifier: us.mappings.purchaseOrder.VerifyDriverTip
      - if:
          identifier:
            present:
            - identifier: us.mappings.purchaseOrder.VerifyDriverTip
          then:
            - log: "Driver tip amount is displayed correctly"
          else:
           - failTest:
                message: "FAILURE - ${env} - Driver tip amount is NOT displayed correctly"

  - name: us.functions.purchaseOrderPage.VerifyCustomDriverTip
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.purchaseOrder.VerifyCustomDriverTip
      - if:
          identifier:
            present:
            - identifier: us.mappings.purchaseOrder.VerifyCustomDriverTip
          then:
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.purchaseOrder.VerifyCustomDriverTip
                    contains: ${custTipAmount}
            - log: "Driver tip amount $${custTipAmount} is displayed correctly"
          else:
            - failTest:
                message: "FAILURE - ${env} - Driver tip amount is NOT displayed correctly"

  - name: us.functions.reviewOrderPage.VerifyDriverTip
    platform: ios
    flow:
      - if:
          identifier:
            present:
            - identifier: us.mappings.reviewOrderPage.VerifyDriverTip
          then:
            - verifyIdentifier:
                value:
                  - identifier: us.mappings.reviewOrderPage.VerifyDriverTip
                    contains: ${custTipAmount}
            - log: "Driver tip amount is displayed correctly"
          else:
            - failTest:
                message: "FAILURE - ${env} - Driver tip amount is NOT displayed correctly"

  # Verify and  navigate to edit tip screen
  - name: us.functions.orderDetails.editTip.OnTheWayStatus
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.driverTip.subTab.collapsed
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.orderDetails.driverTip.subTab.collapsed       
      - click:
          identifier: us.mappings.orderDetails.driverTip.subTab.collapsed
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderdeatils.editTipButton
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.orderdeatils.editTipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderdeatils.editTipButton
      - click:
          identifier: us.mappings.orderdeatils.editTipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderdetails.customtipButton
      - click:
          identifier: us.mappings.orderdetails.customtipButton
      - click:
          identifier: us.mappings.orderdetails.customtipButton
      - enterText:
          identifier: us.mappings.orderdetails.enterCustomTipamount
          string: ${custTipAmount}
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.default.keyboardDoneButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tipping.confirmButton
      - click:
          identifier: us.mappings.tipping.confirmButton
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.orderDetails.driverTip.subTab.collapsed
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.orderDetails.driverTip.subTab.collapsed
          else:
            - click:
                identifier: us.mappings.orderDetails.driverTip.subTab.collapsed
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifyDriverTip
      - log: "Your tip label is displayed"

# Verify if driver tip is displayed correctly in order details page
  - name: us.functions.purchaseOrderPage.VerifyCustomDriverTip
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
            - identifier: us.mappings.purchaseOrder.VerifyCustomDriverTip
          then:
            - scroll:
                direction: down
                untilIdentifier: us.mappings.purchaseOrder.VerifyCustomDriverTip
      - verifyIdentifier:
          text:
            - identifier: us.mappings.purchaseOrder.VerifyCustomDriverTip
              contains: ${custTipAmount}
      - log: "Driver tip amount $${custTipAmount} is displayed correctly"
#          else:
#            - failTest:
#                message: "FAILURE - ${env} - Driver tip amount is NOT displayed correctly"

 # Verify and  navigate to edit tip screen
  - name: us.functions.orderDetails.editTip.OnTheWayStatus
    platform: android
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.editTipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editTipButton
      - click:
          identifier: us.mappings.orderDetails.editTipButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderdetails.customtipButton
      - click:
          identifier: us.mappings.orderdetails.customtipButton
      # - sleep:
      #     duration: 2000
      # - click:
      #     identifier: us.mappings.orderdetails.customtipButton
      - enterText:
          identifier: us.mappings.orderdetails.enterCustomTipamount
          string: ${custTipAmount}
      - sleep:
          duration: 3000
      - click:
          identifier: us.mappings.default.keyboardDoneButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.tipping.confirmButton
      - click:
          identifier: us.mappings.tipping.confirmButton
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.verifyDriverTip
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.verifyDriverTip
      - verifyIdentifier:
          text:
            - identifier: us.mappings.orderDetails.verifyDriverTip
              contains: ${custTipAmount}
      - log: "Your tip label is displayed with correct tip amount $${custTipAmount}"



  #Edit Items and verify VP Substitutions on Order Details Screen
  - name: us.functions.orderDetails.editItems.VerifyVPSubsitutions
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.order.substitution.editItemsButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center
  
      - click:
          identifier: us.mappings.order.substitution.editItemsButton

      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.orderDetails.EditItems.title
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.firstItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.firstItem

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.secondItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.secondItem

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.thirdItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.thirdItem

    #verify VP Substitutions on Order Details Screen
  - name: us.functions.orderDetails.VerifyVPSubsitutions
    platform: android
    flow:
      
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.paymentMethodTitle
            - name: direction
              string: down
            - name: scrollPosition
              string: center
  
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.firstItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.firstItem

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.secondItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.secondItem

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.thirdItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.thirdItem


  #Edit Items and verify VP Substitutions on Order Details Screen
  - name: us.functions.orderDetails.editItems.VerifyVPSubsitutions
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.order.substitution.editItemsButton
  
      - click:
          identifier: us.mappings.order.substitution.editItemsButton

      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.orderDetails.EditItems.title
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.firstItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.firstItem

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.secondItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.secondItem

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.EditItems.checkbox
            - name: direction
              string: down
            - name: scrollPosition
              string: center

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.thirdItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.thirdItem

      - click:
          identifier: us.mappings.orderDetails.EditItems.backTo

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.EditItems.DontSaveBtn
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.EditItems.DontSaveBtn

    #verify VP Substitutions on Order Details Screen
  - name: us.functions.orderDetails.VerifyVPSubsitutions
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.paymentMethodTitle
            - name: direction
              string: down
            - name: scrollPosition
              string: center
     
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.firstItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.firstItem

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.secondItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.secondItem

      - if:
          identifier:
            present:
              - identifier: us.mappings.orderDetails.substitutionPreference.thirdItem
          then:
            - verifyIdentifier:
                present: 
                  - identifier: us.mappings.orderDetails.substitutionPreference.thirdItem
                  
  - name: us.functions.oderDetailPage.ACCExpressCheckin.getStarted
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.expressCheckin.titleLabel
            - identifier: us.mappings.orderdetails.expressCheckin.getStartedButton  
      - log: Express check-in option is displayed on ODP                 
      - click:
          identifier: us.mappings.orderdetails.expressCheckin.getStartedButton  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.backButton
            - identifier: us.mappings.ACCExpressCheckin.title 
            - identifier: us.mappings.ACCExpressCheckin.closeButton 
            - identifier: us.mappings.ACCExpressCheckin.getStartedFooterButton           
      - log: Express check-in welcome page is displayed            
      - click:
          identifier: us.mappings.odp.ACCExpressCheckin.getStartedFooterButton

  - name: us.functions.oderDetailPage.ACCExpressCheckin.selectVehicle
    platform: ios
    flow:
      - log: Select vehicle for tire installation   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.title
            - identifier: us.mappings.ACCExpressCheckin.selectVehicleText
            - identifier: us.mappings.ACCExpressCheckin.myVehicles
            - identifier: us.mappings.ACCExpressCheckin.firstVehicle
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.ACCExpressCheckin.continueButton           
      - click: 
          identifier: us.mappings.ACCExpressCheckin.firstVehicle
      - click: 
          identifier: us.mappings.ACCExpressCheckin.continueButton

  - name: us.functions.oderDetailPage.ACCExpressCheckin.lockingLugNuts
    platform: ios
    flow:
      - log: Select "No, I don't have locking lug nuts"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.title
            - identifier: us.mappings.ACCExpressCheckin.serviceOptionsText
            - identifier: us.mappings.ACCExpressCheckin.tiresHaveLockingLugNutsText
            - identifier: us.mappings.ACCExpressCheckin.lockingLugNuts.noButton
      - click: 
          identifier: us.mappings.ACCExpressCheckin.lockingLugNuts.noButton
      - click: 
          identifier: us.mappings.ACCExpressCheckin.continueButton                

  - name: us.functions.oderDetailPage.ACCExpressCheckin.serviceAgreement
    platform: ios
    flow:
      - log: Signing service agreement
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.title
            - identifier: us.mappings.ACCExpressCheckin.serviceagreementHeader

      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.ACCExpressCheckin.agreeAndSignButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center            
      - click: 
          identifier: us.mappings.ACCExpressCheckin.agreeAndSignButton
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.signatureRequiredtitle
            - identifier: us.mappings.ACCExpressCheckin.serviceagreementFullname
            - identifier: us.mappings.ACCExpressCheckin.serviceagreementSignAsCheckbox
            - identifier: us.mappings.ACC.agreeAndSignButton        
      # - click: 
      #     identifier: us.mappings.ACCExpressCheckin.serviceagreementFullname
      # - enterText:
      #     identifier: us.mappings.ACCExpressCheckin.serviceagreementFullname
      #     string: Test Glass
      - click: 
          identifier: us.mappings.ACCExpressCheckin.serviceagreementSignAsCheckbox
      - click: 
          identifier: us.mappings.ACC.agreeAndSignButton

  - name: us.functions.oderDetailPage.ACCExpressCheckin.reviewAndConfirm
    platform: ios
    flow:
      - log: Verify - Date & time of appointment, Location, Items purchased, "Auto service with express check-in‚Äù, Vehicle information, Service package selected
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.reviewtitle
            - identifier: us.mappings.ACCExpressCheckin.reviewAndConfirmHeader
            - identifier: us.mappings.ACCExpressCheckin.autoCareCenterAppointmentHeader
            - identifier: us.mappings.ACCExpressCheckin.dateAndTimeHeader
            - identifier: us.mappings.ACCExpressCheckin.locationHeader
            - identifier: us.mappings.ACCExpressCheckin.autoServiceWithExpressCheckin
            - identifier: us.mappings.ACCExpressCheckin.reviewDateNTime
            - identifier: us.mappings.ACCExpressCheckin.reviewSelectedVehicle
            - identifier: us.mappings.ACCExpressCheckin.contactInfo
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.ACCExpressCheckin.reviewCustomerServiceAgreement
            - name: direction
              string: down
            - name: scrollPosition
              string: center    
      - verifyIdentifier:
          present:                      
            - identifier: us.mappings.ACCExpressCheckin.reviewService   
            - identifier: us.mappings.ACCExpressCheckin.reviewServiveOptions
            - identifier: us.mappings.ACCExpressCheckin.reviewCustomerServiceAgreement
            - identifier: us.mappings.ACC.contactName
            - identifier: us.mappings.ACCExpressCheckin.reviewConfirmButton
                        
      - click: 
          identifier: us.mappings.ACCExpressCheckin.reviewConfirmButton
      - sleep:
         duration: 4000
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.ACCExpressCheckin.confirmationTitle
            - identifier: us.mappings.ACCExpressCheckin.appointmentConfirmationHeader
            - identifier: us.mappings.ACCExpressCheckin.nextSteps
            - identifier: us.mappings.ACCExpressCheckin.gotItButton 
            - identifier: us.mappings.ACCExpressCheckin.close         
      - click: 
          identifier: us.mappings.ACCExpressCheckin.close
      - sleep:
         duration: 10000          
          
  - name: us.functions.oderDetailPage.ACCExpressCheckin.confirmation
    platform: ios
    flow: 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.ODP.confirmation
            - identifier: us.mappings.orderDetails.ACCExpressCheckin.viewDetailsButton
      - log: ACC Express checkin confirmation is displayed on ODP 
      - click: 
          identifier: us.mappings.orderDetails.ACCExpressCheckin.viewDetailsButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.viewDetails.bottomSheetTitle
            - identifier: us.mappings.ACCExpressCheckin.viewDetails.bottomSheet.onTheDayOfAppointment
            - identifier: us.mappings.ACCExpressCheckin.viewDetails.bottomSheet.closeButton
      - log: ACC Express checkin instructions bottom sheet is displayed                        
      - click: 
          identifier: us.mappings.ACCExpressCheckin.viewDetails.bottomSheet.closeButton

  - name: us.functions.oderDetailPage.ACCExpressCheckin.getStarted
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.expressCheckin.titleLabel
            - identifier: us.mappings.orderdetails.expressCheckin.getStartedButton  
      - log: Express check-in option is displayed on ODP                 
      - click:
          identifier: us.mappings.orderdetails.expressCheckin.getStartedButton  
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.backButton
            - identifier: us.mappings.ACCExpressCheckin.title 
            - identifier: us.mappings.ACCExpressCheckin.closeButton 
            - identifier: us.mappings.ACCExpressCheckin.getStartedFooterButton           
      - log: Express check-in welcome page is displayed            
      - click:
          identifier: us.mappings.odp.ACCExpressCheckin.getStartedFooterButton
      - sleep:
         duration: 3000

  - name: us.functions.oderDetailPage.ACCExpressCheckin.selectVehicle
    platform: android
    flow:
      - log: Select vehicle for tire installation   
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.title
            - identifier: us.mappings.ACCExpressCheckin.selectVehicleText
            - identifier: us.mappings.ACCExpressCheckin.myVehicles
            - identifier: us.mappings.ACCExpressCheckin.firstVehicle
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.ACCExpressCheckin.continueButton           

      - click: 
          identifier: us.mappings.ACCExpressCheckin.firstVehicle
      - click: 
          identifier: us.mappings.ACCExpressCheckin.continueButton

  - name: us.functions.oderDetailPage.ACCExpressCheckin.lockingLugNuts
    platform: android
    flow:
      - log: Select "No, I don't have locking lug nuts"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.title
            - identifier: us.mappings.ACCExpressCheckin.serviceOptionsText
            - identifier: us.mappings.ACCExpressCheckin.tiresHaveLockingLugNutsText
            - identifier: us.mappings.ACCExpressCheckin.lockingLugNuts.noButton
      - click: 
          identifier: us.mappings.ACCExpressCheckin.lockingLugNuts.noButton
      - click: 
          identifier: us.mappings.ACCExpressCheckin.continueButton                

  - name: us.functions.oderDetailPage.ACCExpressCheckin.serviceAgreement
    platform: android
    flow:
      - log: Signing service agreement
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.title
            - identifier: us.mappings.ACCExpressCheckin.serviceagreementHeader
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.ACCExpressCheckin.agreeAndSignButton
            - name: direction
              string: down
            - name: scrollPosition
              string: center                
      - click: 
          identifier: us.mappings.ACCExpressCheckin.agreeAndSignButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.signatureRequiredtitle
            - identifier: us.mappings.ACCExpressCheckin.serviceagreementFullname
            - identifier: us.mappings.ACCExpressCheckin.serviceagreementSignAsCheckbox
            - identifier: us.mappings.ACC.agreeAndSignButton         
      # - click: 
      #     identifier: us.mappings.ACCExpressCheckin.serviceagreementFullname
      # - enterText:
      #     identifier: us.mappings.ACCExpressCheckin.serviceagreementFullname
      #     string: Test Glass
      - click: 
          identifier: us.mappings.ACCExpressCheckin.serviceagreementSignAsCheckbox  
      - click: 
          identifier: us.mappings.ACC.agreeAndSignButton
      - sleep:
         duration: 4000

  - name: us.functions.oderDetailPage.ACCExpressCheckin.reviewAndConfirm
    platform: android
    flow:
      - log: Verify - Date & time of appointment, Location, Items purchased, "Auto service with express check-in‚Äù, Vehicle information, Service package selected
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.reviewtitle
            - identifier: us.mappings.ACCExpressCheckin.reviewAndConfirmHeader
            - identifier: us.mappings.ACCExpressCheckin.autoCareCenterAppointmentHeader
            - identifier: us.mappings.ACCExpressCheckin.dateAndTimeHeader
            - identifier: us.mappings.ACCExpressCheckin.locationHeader
            - identifier: us.mappings.ACCExpressCheckin.autoServiceWithExpressCheckin
            - identifier: us.mappings.ACCExpressCheckin.reviewDateNTime
            - identifier: us.mappings.ACCExpressCheckin.reviewSelectedVehicle
            - identifier: us.mappings.ACCExpressCheckin.contactInfo
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.ACCExpressCheckin.reviewCustomerServiceAgreement
            - name: direction
              string: down
            - name: scrollPosition
              string: center    
      - verifyIdentifier:
          present: 
            - identifier: us.mappings.ACCExpressCheckin.reviewService   
            - identifier: us.mappings.ACCExpressCheckin.reviewServiveOptions
            - identifier: us.mappings.ACCExpressCheckin.reviewCustomerServiceAgreement
            - identifier: us.mappings.ACC.contactName
            - identifier: us.mappings.ACCExpressCheckin.reviewConfirmButton
                        
      - click: 
          identifier: us.mappings.ACCExpressCheckin.reviewConfirmButton
      - sleep:
         duration: 4000
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.ACCExpressCheckin.confirmationTitle
            - identifier: us.mappings.ACCExpressCheckin.appointmentConfirmationHeader
            - identifier: us.mappings.ACCExpressCheckin.nextSteps
            - identifier: us.mappings.ACCExpressCheckin.gotItButton 
            - identifier: us.mappings.ACCExpressCheckin.close         
      - click: 
          identifier: us.mappings.ACCExpressCheckin.gotItButton  
      - sleep:
         duration: 10000
          
  - name: us.functions.oderDetailPage.ACCExpressCheckin.confirmation
    platform: android
    flow: 
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.ODP.confirmation
            - identifier: us.mappings.orderDetails.ACCExpressCheckin.viewDetailsButton
      - log: ACC Express checkin confirmation is displayed on ODP 
      - click: 
          identifier: us.mappings.orderDetails.ACCExpressCheckin.viewDetailsButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.ACCExpressCheckin.viewDetails.bottomSheetTitle
            - identifier: us.mappings.ACCExpressCheckin.viewDetails.bottomSheet.onTheDayOfAppointment
            - identifier: us.mappings.ACCExpressCheckin.viewDetails.bottomSheet.closeButton
      - log: ACC Express checkin instructions bottom sheet is displayed                        
      - click: 
          identifier: us.mappings.ACCExpressCheckin.viewDetails.bottomSheet.closeButton         

  - name: us.functions.orderDetailPage.localMarketPlace.orderDetailsPageValidations
    platform: android
    flow:
      - if: 
          condition: ${fulfillment} == 'Delivery'
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.odp.driverTip
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center                
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.odp.driverTip
                  - identifier: us.mappings.odp.localMarketPlace.deliveryFromSeller
      - if: 
          condition: ${fulfillment} == 'Pickup'
          then:
            - verifyIdentifier:
                  present:
                      - identifier: us.mappings.odp.localMarketPlace.itemPickup

  - name: us.functions.orderDetailPage.localMarketPlace.orderDetailsPageValidations
    platform: ios
    flow:
      - if: 
          condition: ${fulfillment} == 'Delivery'
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.odp.driverTip
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center                
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.odp.driverTip
                  - identifier: us.mappings.odp.localMarketPlace.deliveryFromSeller
      - if: 
          condition: ${fulfillment} == 'Pickup'
          then:
            - verifyIdentifier:
                  present:
                      - identifier: us.mappings.odp.localMarketPlace.itemPickup

#CFS Incremental Auth
  - name: us.functions.orderDetails.incrementalAuth.verifyTemporaryHold
    platform: android
    flow:
      - sleep:
          duration: 3000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.temporaryHold.header
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mappings.orderDetails.temporaryHold.description
            - identifier: us.mappings.orderDetails.temporaryHold.infoIcon
      - click:
          identifier: us.mappings.orderDetails.temporaryHold.infoIcon
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mappings.orderDetails.temporaryHold.bottomSheet.title
            - identifier: us.mappings.orderDetails.temporaryHold.bottomSheet.description
            - identifier: us.mappings.orderDetails.temporaryHold.bottomSheet.gotIt

  - name: us.functions.orderDetails.incrementalAuth.verifyTemporaryHold
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.temporaryHold.header
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mappings.orderDetails.temporaryHold.description
            - identifier: us.mappings.orderDetails.temporaryHold.infoIcon
      - click:
          identifier: us.mappings.orderDetails.temporaryHold.infoIcon
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: us.mappings.orderDetails.temporaryHold.bottomSheet.title
            - identifier: us.mappings.orderDetails.temporaryHold.bottomSheet.description
            - identifier: us.mappings.orderDetails.temporaryHold.bottomSheet.gotIt

#RXPD Order Details Validations
  - name: us.functions.orderDetails.rxpd.item.validations
    platform: android
    flow:
      - sleep:
          duration: 3000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.rxpd.item.prescription.text
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.rxpd.item.prescription.text
            - identifier: us.mappings.orderDetails.rxpd.item.prescription.name
            - identifier: us.mappings.orderDetails.rxpd.item.patient.name
            - identifier: us.mappings.orderDetails.rxpd.item.price

  - name: us.functions.orderDetails.validate.SODBanner
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.rxpd.sodBanner
            - identifier: us.mappings.orderDetails.rxpd.sodBanner.title
            - identifier: us.mappings.orderDetails.rxpd.sodBanner.subText
            - identifier: us.mappings.orderDetails.rxpd.sodBanner.deliveryDescriptionHeader
            - identifier: us.mappings.orderDetails.rxpd.sodBanner.deliveryDescriptionMessage

#RXPD Order Details Validations
  - name: us.functions.orderDetails.rxpd.item.validations
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.rxpd.item.prescription.text
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.rxpd.item.prescription.text
            - identifier: us.mappings.orderDetails.rxpd.item.prescription.name
            - identifier: us.mappings.orderDetails.rxpd.item.patient.name
            - identifier: us.mappings.orderDetails.rxpd.item.price

  # Verify paypal payment method on ODP
  - name: us.function.orderDetails.verifyPaypalPaymentMethod
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.paymentMethodTitle
          position: center
          withinIdentifier: us.mappings.orderDetails.scrollView
      - verifyIdentifier:
          present: 
            - identifier:  us.mappings.orderDetails.paypalCardDetails
            - identifier:  us.mappings.orderDetails.paypalCardIcon

# Tipping with PayPal 
  - name: us.functions.orderdetails.changeTip
    platform: ios
    flow:
      - scroll:
          direction: down
          untilIdentifier: us.mappings.orderDetails.tippingModule
      - click:
          identifier: us.mappings.orderDetails.tippingModule
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.paypalPaymentMethod
            - identifier: us.mappings.orderDetails.tippingModule
            - identifier: us.mappings.orderDetails.editTip
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.SubTotal
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editTip 
      - click:
          identifier: us.mappings.orderDetails.editTip
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.editTipBottomSheet
      - click:
          identifier: us.mappings.orderDetails.editTipCustomTip
      - enterText:
          identifier: us.mappings.orderDetails.editTipCustomTipValue
          string: ${custTipAmount}
      - click:
          identifier: Done
      - click:
          identifier: us.mappings.orderDetails.confirmTip
      - sleep:
          duration: 5000
      - click:
          identifier: us.mappings.orderDetails.tippingModule
      - verifyIdentifier:
          label:
            - identifier: us.mappings.orderDetails.driverTipModule
              contains: ${custTipAmount}
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.orderDetails.driverTipInSubTotal
            - name: direction
              string: down
            - name: scrollPosition
              string: center  
      - verifyIdentifier:
          label:
            - identifier: us.mappings.orderDetails.driverTipInSubTotal
              contains: ${custTipAmount}
     
# Validate CSAT survey is displayed on ODP
  - name: us.functions.orderDetails.verifyCSATEntryPoint 
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.CSATSurveyTitle
            - identifier: us.mappings.orderDetails.CSATSurveySubtitle
            - identifier: us.mappings.orderDetails.CSATSurveyRating

# Validate CSAT survey is displayed on ODP
  - name: us.functions.orderDetails.submitFeedback
    platform: android
    flow:            
      - click:
          identifier: us.mappings.orderDetails.CSATSurveyRating.thirdStar
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.fulfillmentTypeLabel.curbsidePickup  
            - identifier: us.mappings.ost.seeMore.odp.orderStatusMessage  
            - identifier: us.mappings.global.feedback.title
            - identifier: us.mappings.orderDetails.CSATSurvey.questionTitle
            - identifier: us.mappings.orderDetails.CSATSurvey.addAnythingButton 
            - identifier: us.mappings.orderDetails.CSATSurveyRating.MissingItemOption    
            - identifier: us.mappings.orderDetails.CSATSurveyRating.OOSOption
            - identifier: us.mappings.orderDetails.CSATSurveyRating.poorSubstitutionOption
            - identifier: us.mappings.orderDetails.CSATSurveyRating.poorQualityOption
            - identifier: us.mappings.orderDetails.CSATSurveyRating.poorPackageOption  
      - click:
          identifier: us.mappings.orderDetails.CSATSurveyRating.MissingItemOption 
      - click:
          identifier: us.mappings.orderDetails.CSATSurveyRating.poorSubstitutionOption
      - click:
          identifier: us.mappings.orderDetails.CSATSurveyRating.poorQualityOption
      - click:
          identifier: us.mappings.orderDetails.CSATSurveyRating.poorPackageOption
      - click:
          identifier: us.mappings.orderDetails.CSATSurveyRating.submitButton

# Validate CSAT survey Thankyou page
  - name: us.functions.orderDetails.verifyCSATFeedbackThankyouPage
    platform: android
    flow:            
      - sleep:
          duration: 2000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.CSATFeedback.thankyouHeader 
            - identifier: us.mappings.orderDetails.CSATFeedback.thankyouSubtext
            - identifier: us.mappings.orderDetails.CSATSurveyContainer
            - identifier: us.mappings.orderDetails.CSATSurvey.selfServiceLabel
            - identifier: us.mappings.orderDetails.CSATSurvey.helpCenterLink
            - identifier: us.mappings.wlive.closeButton
            - identifier: us.mappings.orderDetails.CSATSurvey.gotItButton
      - click:
          identifier: us.mappings.orderDetails.CSATSurvey.gotItButton  
      - sleep:
          duration: 4000                 
      - if:
          identifier:
            notPresent:
            - identifier: us.mappings.orderDetails.CSATSurveyTitle
          then:
            - log: Successfully submitted CSAT feedback and the survey link is nolonger available on ODP.  

  - name: us.functions.orderDetails.validate.SODBanner
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Post-transactions
      - verifyIdentifier:
          present:
            - identifier: us.mappings.orderDetails.rxpd.sod.txt