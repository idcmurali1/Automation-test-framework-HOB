functions: 
  
####################################################### iOS ####################################################
  #GIC ONLY 

  #Validates all GIC module elements in unselected state.
  #GIC is now being collapsed by Onboarding function, now checking for collapsed initial state.
  - name: us.functions.homePage.verify.GICExpandedView.unselected
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - verifyIdentifier:
          timeout: 50000
          present:
            - identifier: us.mappings.home.gic.module.headerText.section.expanded
            - identifier: us.mappings.home.gic.module.headerBar
      - log: GIC header validated!            
      #Validate GIC intent icons        
      - verifyIdentifier:
          timeout: 50000        
          present:                                                        
            - identifier: us.mappings.home.gic.module.shippingIntent
            - identifier: us.mappings.home.gic.module.pickupIntent
            - identifier: us.mappings.home.gic.module.deliveryIntent
      - log: GIC Module intent selections validated!             
      #Validate GIC Store Info       
      - verifyIdentifier:
          timeout: 50000        
          present:
            - identifier: us.mappings.home.gic.module.addAddressViewIcon
            - identifier: us.mappings.home.gic.module.addAddressMessage.text.iD
            - identifier: us.mappings.home.gic.module.addAddressMessage.text        
      - verifyIdentifier:
          timeout: 50000        
          present:            
            - identifier: us.mappings.home.gic.module.parent.addAddressButton
      # - verifyValue:
      #     identifier: us.mappings.home.gic.module.unselectedIntent.bannerCheckmarks.section
      #     contains: Shipping
      # - verifyIdentifier:
      #     label:
      #       - identifier: us.mappings.home.gic.module.unselectedIntent.storeAddress
      #         contains: Pickup, available,
      # - verifyIdentifier:
      #     label:
      #       - identifier: us.mappings.home.gic.module.unselectedIntent.storeAddress
      #         contains: Curbside Pickup, available
      - log: GIC Module Store data validated!  

  - name: us.functions.gic.collapseIfExpanded
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                timeout: 0
                present:
                  - identifier: us.mappings.home.gic.expandedIcon
            - log: Collapsing GIC screen
            - click:
                identifier: us.mappings.home.gic.expandedIcon
          catch:
            flow:
              - log: GIC already collapsed

  - name: us.functions.gic.expandIfCollapsed
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Onboarding 
      - try:
          flow:
            - verifyIdentifier:
                timeout: 6000
                present:
                  - identifier: us.mappings.home.gic.collapsedIcon
            - click:
                identifier: us.mappings.home.gic.collapsedIcon
          catch:
            flow:
              - log: GIC already expanded

  #validates the GIC module is not present on screen.
  - name: us.functions.homePage.verify.GICExpandedView.notPresent
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 50000
          notPresent:
            - identifier: us.mappings.home.gic.module.headerText.section.expanded
            - identifier: us.mappings.home.gic.module.headerText
            - identifier: us.mappings.home.gic.module.bannerChevron
            - identifier: us.mappings.home.gic.module.headerBar
      - log: GIC header and module are not present on screen.

  #Sign in from GIC module for Guest User after tapping Pickup intent icon.
  - name: us.functions.homePage.gic.Module.signIn.fromPickupIntent
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Pickup
      - executeFunction:
          name: us.functions.global.authentication.signInAccount

  #Change the GIC selected intent from Delivery to Pickup by Reserving a curbside Pickup via Bookslot.
  - name: us.functions.homePage.gic.Module.deliveryIntent.changesTo.pickupIntent.fromBookslot.selection
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.changeFulfillment
          params:
            - name: option
              string: Delivery
      # - executeFunction:
      #     name: us.funtions.wplus.inHome.dss.popflow.storeSelect.delivery
      - verifyIdentifier:
          timeout: 100000
          present:
            - identifier: us.mappings.home.gic.module.deliveryIntent.selected.inGicHeader         
      - executeFunction:
          name: us.functions.selectBookingSlot 
          params:
            - name: page
              string: home
            - name: tab
              string: pickup    
            - name: slotDay
              string: dayAfter 
            - name: slotIndex
              string: 3                              
      - verifyIdentifier:
          timeout: 100000
          present:
            - identifier: us.mappings.home.gic.module.pickupIntent.selected.inGicHeader          
      - log: GIC intent set to Pickup from Bookslot pickup selection 

  #After GIC Intent Has been changed verify Cart Item fullfillment changes to expected value.
  - name: us.functions.homePage.gic.Module.verifySwitchingOfIntentsInGICAffectsCartIntent
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.global.navigation.toCartFromNavBar
      - getString:
          identifier: us.mappings.cart.scheduledDelivery.cardTitle
          attribute: value
          storeIn: intentType
      - log: ${intentType}    
      - if:
          condition: ${intentType} == 'Pickup' || ${intentType} == Pickup || ${intentType} == "Pickup or delivery from store" || ${intentType} == "Delivery from store" || ${intentType} == 'Sin costo Retiro'
          then:
            - log: GIC Intent matches Pickup
          else:
            - log: GIC Intent did not match Pickup
     # Verify selected store is displayed on Cart page
      - executeFunction:
          name: us.functions.cart.verify.pickupAddress
      - click:
          identifier: us.mappings.global.navigation.backNavigation
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - click:
          identifier: us.mappings.home.gic.module.shippingIntent
      #- click:
      #    identifier:  us.mappings.home.gic.expandedIcon
          wait: 3000
      - log: GIC Shipping Intent is now selected 
      - sleep:
          duration: 6000                                   
      - executeFunction:
          name: us.functions.global.navigation.toCartFromNavBar 
      - getString:
          identifier: us.mappings.cart.scheduledDelivery.cardTitle
          attribute: value
          storeIn: intentType2    
      - if:
          condition: ${intentType2} == 'Shipping' ||  ${intentType2} == 'shipping' || ${intentType2} == 'Sin costo Env√≠o'
          then:
            - log: GIC Intent matches Pickup
            - log: Expo variation A was detected!            
          else:
            - log: GIC Intent did not match Pickup
            - log: Expo variation B was detected!
            - click:
                identifier: us.mappings.global.navigation.backNavigation
            - executeFunction:
                name: us.functions.homePage.gic.Module.searchFor.sharedItems.gicShippingHeader
            - executeFunction:
                name: us.functions.item.addItemToCart
            - executeFunction:
                name: us.functions.global.navigation.toCartFromNavBar

            - if:
                identifier:
                  present:
                    - identifier: us.mappings.orderConfirmation.fcDelivery.cardTitle # us.mappings.cart.scheduledDelivery.cardTitle.shippingLabel
                then:
                  - log: GIC Intent now matches Shipping for Item Level Preservation, variation B
                else:
                  - scroll:
                      direction: down
                      untilIdentifier: us.mappings.orderConfirmation.fcDelivery.cardTitle # us.mappings.cart.scheduledDelivery.cardTitle.shippingLabel
                      position: center
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.orderConfirmation.fcDelivery.cardTitle # us.mappings.cart.scheduledDelivery.cardTitle.shippingLabel
                  - log: GIC Intent now matches Shipping for Item Level Preservation, variation B

  # Verify GIC header is present on Search and Identify Shared item for testcase
  - name: us.functions.homePage.gic.Module.searchFor.sharedItems.gicPickupHeader
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string:  us.data.prod.gic.sharedItem1
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.home.gic.module.pickupIntent.selected.inGicHeader
          then:
            - click:
                identifier: us.mappings.home.gic.collapsedIcon
            - log: GIC is now Expanded  
            - sleep:
                duration: 3000
            - click:
                identifier: us.mappings.wplus.globalIntentPickup
            - click:
                identifier: us.mappings.home.gic.expandedIcon
          else:
            - log: pickup indent is already selected  
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.pickupIntent.selected.inGicHeader
      - click:
          identifier: us.mappings.search.firstItem
          wait: 3000         
      - scroll: 
          direction: down
          untilIdentifier: us.mappings.item.switching.fulfillment.pickupText
          position: center
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.item.switching.fulfillment.pickupText
              - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
              - identifier: us.mappings.item.switching.fulfillment.shippingText
          then:
            - log: Cant find the expected fulfillment requirements
            - log: Deep link to a new Item.
            - click:
                identifier: us.mappings.item.closeItemDetailsPage
            - terminateApp: true
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: walmart://home
            - executeFunction:
                name: us.functions.search.searchItem
                params:
                  - name: searchTerm
                    string: us.data.prod.item.ios.sharedItem
            - click:
                identifier: us.mappings.search.firstItem
                wait: 3000                         
            - scroll: 
                direction: down
                untilIdentifier: us.mappings.item.switching.fulfillment.pickupText
                position: center                                    
            - verifyIdentifier:
                timeout: 5000
                present:
                  - identifier: us.mappings.item.switching.fulfillment.pickupText
                  - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
                  - identifier: us.mappings.item.switching.fulfillment.shippingText
            - log: fulfillment requirements are present with 2nd item.
            - log: 2nd Item is a shared item, now adding to cart!          
          else:
            - log: fulfillment requirements are present with 1st item.            
            - log: 1st Item is a shared item, now adding to cart!


  # Verify GIC header is present on Search and Identify Shared item for testcase
  - name: us.functions.homePage.gic.Module.searchFor.sharedItems.gicShippingHeader
    platform: ios
    flow:
      - executeFunction:
          name: unified.us.functions.search.searchItem
          params:
            - name: searchTerm
              string: us.data.prod.gic.sharedItem11
      - executeFunction:
            name: us.functions.gic.changeFulfillment
            params:
              - name: option
                string: Shipping              
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.shippingIntent.selected.inGicHeader
      - click:
          identifier: us.mappings.search.firstItem
          wait: 3000 
      - sleep:
          duration: 2000         
      - scroll: 
          direction: down
          untilIdentifier: us.mappings.item.switching.fulfillment.pickupText
          position: center
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.item.switching.fulfillment.pickupText
              - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
              - identifier: us.mappings.item.switching.fulfillment.shippingText
          then:
            - log: Cant find the expected fulfillment requirements
            - log: Deep link to a new Item.
            - click:
                identifier: us.mappings.item.closeItemDetailsPage
            - terminateApp: true
            - executeFunction:
                name: us.functions.global.navigation.goToDeepLink
                params:
                  - name: deepLinkUrl
                    string: walmart://home
            - executeFunction:
                name: us.functions.search.searchItem
                params:
                  - name: searchTerm
                    string: us.data.prod.gic.sharedItem10
            - click:
                identifier: us.mappings.search.firstItem
                wait: 3000                                      
            - scroll:
                direction: down
                untilIdentifier: us.mappings.item.switching.fulfillment.pickupText
                position: center            
            - verifyIdentifier:
                timeout: 5000
                present:
                  - identifier: us.mappings.item.switching.fulfillment.pickupText
                  - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
                  - identifier: us.mappings.item.switching.fulfillment.shippingText
            - log: fulfillment requirements are present with 2nd item.
            - log: 2nd Item is a shared item, now adding to cart!          
          else:
            - log: fulfillment requirements are present with 1st item.            
            - log: 1st Item is a shared item, now adding to cart!

  # Verify Review Order screen for GIC variation A or variation B
  - name: us.functions.homePage.gic.Module.verifyReviewOrder.variationA.orVariationB
    platform: ios
    flow: 
      # - executeFunction:
      #     name: us.functions.cart.scrollToTopOfCart
      - executeFunction:
          name: us.functions.selectBookingSlot
          params:
            - name: page
              string: cart
            - name: tab
              string: pickup
      - executeFunction:
          name: us.functions.cart.continueToCheckout
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.curbsidepickup.cardTitle
          then:
            - log: Review Order screen is GIC variation B and multi-fulfillment
            - executeFunction:
                name: us.functions.verifyCardDetailsNew
                params:
                  - name: reviewOrder
                    string: true
                  - name: listOfExpectedFulfilment
                    string: Pickup
          else:
            - log: Review Order screen is GIC variation A and Shipping only 
            - executeFunction:
                name: us.functions.checkout.reviewOrder.verifyCardDetails
                params:
                  - name: fulfillmentText
                    string: us.data.fulfillment.shipping

  - name: us.functions.wplus.homePage.verifyIntentEducationalMessages
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Shipping
      - try:
          flow:
            - verifyIdentifier:
                timeout: 0
                present:
                  - identifier: us.mappings.wplus.shippinIntentEducationalMessage
            - log: Shipping intent educational message displayed
          catch:
            flow:
              - failTest:
                  message: "ENV_FAILURE - ${env} - Shipping intent educational message is not displayed in GIC"

  - name: us.functions.wplus.verifySwitchingOfIntentsInGICAffectsCartIntent
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: horizon organic milk
      - executeFunction:
          name: us.functions.search.clickOnFirstItem
      - executeFunction:
          name: us.functions.search.addItemtoCart
      - executeFunction:
          name: us.functions.global.navigation.toCartFromNavBar
      - getString:
          identifier: us.mappings.cart.scheduledDelivery.cardTitle
          storeIn: intentType
      - sleep:
          duration: 3000
      - if:
          condition: ${intentType} == "Pickup or delivery from store" | ${intentType} == "Delivery from store"
          then:
            - click:
                identifier: us.mappings.global.navigation.backNavigation
            - click:
                identifier: us.mappings.home.gic.module.shippingIntent
            - click:
                identifier: us.mappings.wplus.gicBannerChevron
            - executeFunction:
                name: us.functions.global.navigation.toCartFromNavBar
            - getString:
                identifier: us.mappings.cart.scheduledDelivery.cardTitle
                storeIn: intentType2
            - if:
                condition: ${intentType2} == "Shipping to"
                then:
                  - log: Fulfilment type changed based on selected global intent
                else:
                  - log: Fulfilment type didn't change based on the selected global intent
          else:
            - if:
                condition: ${intentType} == "Shipping to"
                then:
                  - click:
                      identifier: us.mappings.global.navigation.backNavigation
                  - click:
                      identifier: us.mappings.home.gic.module.deliveryIntent
                  - click:
                      identifier: us.mappings.wplus.gicBannerChevron
                  - executeFunction:
                      name: us.functions.global.navigation.toCartFromNavBar
                  - getString:
                      identifier: us.mappings.cart.scheduledDelivery.cardTitle
                      storeIn: intentType2
                  - if:
                      condition: ${intentType2} == "Pickup or delivery from store" | ${intentType2} == "Delivery from store"
                      then:
                        - log: Fulfilment type changed based on selected global intent
                      else:
                        - log: Fulfilment type didn't change based on the selected global intent
                else:
                  - if:
                      condition: ${intentType} == "Pickup at Milpitas Supercenter"
                      then:
                        - click:
                            identifier: us.mappings.global.navigation.backNavigation
                        - click:
                            identifier: us.mappings.home.gic.module.shippingIntent
                        - click:
                            identifier: us.mappings.wplus.gicBannerChevron
                        - executeFunction:
                            name: us.functions.global.navigation.toCartFromNavBar
                        - getString:
                            identifier: us.mappings.cart.scheduledDelivery.cardTitle
                            storeIn: intentType2
                        - if:
                            condition: ${intentType2} == "Shipping to"
                            then:
                              - log: Fulfilment type changed based on selected global intent
                            else:
                              - log: Fulfilment type didn't change based on the selected global intent

  - name: us.functions.gic.changeFulfillment
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Pre-transactions
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
      - executeFunction:
          name: us.functions.gic.updateStore
      - executeFunction:
          name: us.functions.gic.collapseIfExpanded

  - name: us.functions.gic.setFulfillment
    platform: ios
    flow:
      - storeIn:
          key: executionStage
          value: Onboarding 
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.newModule.container
          then:
            - if:
                condition: ${option} == 'Shipping'
                then:
                  # - storeIn: # enable when GIC screen is available in all the screen
                  #     key: newGIC
                  #     value: true
                  - try:
                      flow:
                        - storeIn:
                            key: option
                            value: Pickup
                        - verifyIdentifier:
                            timeout: 0
                            label:
                              - identifier: us.mappings.home.gic.module.intentSelection
                                notContains: selected
                        - storeIn:
                            key: option
                            value: Delivery
                        - verifyIdentifier:
                            timeout: 0
                            label:
                              - identifier: us.mappings.home.gic.module.intentSelection
                                notContains: selected
                      catch:
                        flow:
                          - click:
                              identifier: us.mappings.home.gic.module.intentSelection
                          - log: ${option} intent selected   
                else:
                  - try:
                      flow:
                        - verifyIdentifier:
                            timeout: 0
                            label:
                              - identifier: us.mappings.home.gic.module.intentSelection
                                contains: selected
                        - log: ${option} intent already selected
                      catch:
                        flow:
                          - click:
                              identifier: us.mappings.home.gic.module.intentSelection
                          - log: ${option} intent selected
          else:
            - try:
                flow:
                  - verifyIdentifier:
                      timeout: 0
                      label:
                        - identifier: us.mappings.home.gic.module.intentSelection
                          contains: clear
                  - log: ${option} intent already selected
                catch:
                  flow:
                    - click:
                        identifier: us.mappings.home.gic.module.intentSelection
                    - log: ${option} intent selected
            - sleep:
                duration: 3000

  - name: us.functions.homePage.verify.updateZipCodeButton
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Pickup
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gicSelectStoreButton
      - log: Update Zipcode button on the GIC validated!

  - name: us.functions.homePage.verify.pickup.reserve.timeslots
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.reserve.pickuptime.text
            - identifier: us.mappings.gic.reserve.viewalltimes.text
            - identifier: us.mappings.gic.reserve.timeslots.container
      - log: Pickup reservation time slots on the GIC validated!

  - name: us.functions.homePage.verify.InHome.deliveryslots
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Delivery
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.add.address.button
          then:
            - log: Add Address button on the GIC validated!
          else:
            - failTest:
                message: "ENV_FAILURE - ${env} - Add address button not displayed on delivery intent"

  - name: us.functions.homePage.verify.inhome.reserve.timeslots
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.gic.reserve.inhome.slot1
          then:
            - log: in home slot1 is displayed
      - if:
          identifier:
            present:
              - identifier: us.mappings.gic.reserve.inhome.slot2
          then:
            - log: in home slot2 is displayed
          else:
            - failTest:
                message: "in home slots are not displayed"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.reserve.deliverytime.text
            - identifier: us.mappings.gic.reserve.viewalltimes.text
            - identifier: us.mappings.gic.reserve.timeslots.container
            - identifier: us.mappings.gic.reserve.todayorTomorrow.slot3
            - identifier: us.mappings.gic.reserve.todayorTomorrow.slot4
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.gic.reserve.todayorTomorrow.slot5 
            - name: direction
              string: left 
            - name: identifierScope
              string: us.mappings.gic.reserve.slotView
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.reserve.todayorTomorrow.slot5
      - log: Delivery reservation time slots on the GIC validated!

  - name: us.functions.gic.select.inhome.delivery.address
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - if:
          condition: ${shipAnotherCountry}
          then:
          
            - executeFunction:
                name: us.functions.gic.expandIfCollapsed
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.home.gic.module.shipAnotherCountry
            - click:
                identifier: us.mappings.home.gic.module.shipAnotherCountry
            - verifyIdentifier:
                present:
                  - identifier: us.maping.home.gic.module.addressTitle
            - click:
                identifier: us.mapping.gic.module.selectColumbiaCountry
            - click:
                identifier: us.mapping.gic.module.addShippingAddress
            - if:
                identifier:
                  present:
                    - identifier: us.mapping.gic.module.selectAddressHeaderPresent
                then:
                  - click:
                      identifier: us.mapping.gic.module.clickAddANewAddress
            - verifyIdentifier:
                present:
                  - identifier: us.mapping.gic.module.verifyAddAddressTitle
            

            - log: Add address sheet opened
          else:
            - executeFunction:
                name: us.functions.gic.expandIfCollapsed
            - click:
                identifier: us.mappings.home.gic.add.address.button
            - sleep:
                duration: 2000
            - click:
                identifier: us.mappings.gic.select.address.radiobutton
            - sleep:
                duration: 2000
            - click:
                identifier: us.mappings.gic.select.address.save.button
            - log: InHome Delivery Eligible address is selected on GIC!

  # Set a Delivery Store by Zipcode and assert the Delivery Store Card updates in GIC. (Author Joel Litvin)
  - name: us.functions.gicDss.select.deliveryStore.address.updatesStoreCard
    platform: ios
    flow:
      - log: Set a Delivery Store inside catchment for a user's Address and Delivery Store Card updates in GIC.
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed   
      - executeFunction:
          name: us.test.functions.utils.closeWplusPrompt.homeScreen
      - executeFunction:
          name: us.functions.gic.module.noIntent.selectStore.byZipcode
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed    
      - verifyIdentifier:
          present:          
            - identifier: us.mappings.home.gic.module.storeAddress.present
            - identifier: us.mappings.gicDss.storeName.present              
      - log: Confirmed ${DeliveryStoreName} has been selected and now displays in the Delivery Store Card in the GIC module!

  # Select a store from GIC module by tapping the Store card no intent selected. (Author Joel Litvin) 3/30
  - name: us.functions.gic.module.noIntent.selectStore.byZipcode
    platform: ios
    flow:
      - click:
          identifier: us.mappings.home.gic.module.unselectedIntent.storeAddresssection
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.gic.selectStore.headerText # us.mappings.home.gic.dss.storeAddressHeader
      - if:
          identifier:
            present:
              - identifier: us.mappings.gic.selectStore.headerText # us.mappings.home.gic.dss.storeAddressHeader
          then:             
            - log: Store Selector is present, proceed with Zip Code entry
            - enterText:
                identifier: us.mappings.reserveSlot.selectStore.zicodeTextfield 
                string: ${ZIP_CODE}
                pressEnter: true
          else:
            - log: Store Selector is not present, proceed with selection
            - verifyIdentifier:
                present:
                  - identifier: Select Store
            - log: Store Selector is present, proceed with Zip Code entry                 
            - enterText:
                identifier: us.mappings.reserveSlot.selectStore.zicodeTextfield 
                string: ${ZIP_CODE}
                pressEnter: true        
      - click:
          identifier: us.mappings.gic.selectStore.byZipcode
          wait: 3000
      - log: Clicked on Store name ${SelectedStoreByZip}           
      - click:
          identifier: us.mappings.gic.select.address.save.button
          wait: 3000

  # Set a new Delivery Store inside catchment for a user's Address and Pickup Store Card updates in GIC. (Author Joel Litvin)
  - name: us.functions.gicDss.select.deliveryStore.address.updatesStoreCard.forPickupIntent
    platform: ios
    flow:
      - log: Set a different Delivery Store inside catchment based on the users address and confirm Delivery Store is the same as Pickup Store in the GIC Module.      
      - executeFunction:
          name: us.functions.gic.module.intentSelected.storeCard.storeSelector
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - log: Final Stage Confirm New Store and Store Card when Delivery intent is selected                      
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.storeAddressSection
            - identifier: us.mappings.gic.selectedStoreAddress.PickupDeliveryIntent 
            - identifier: us.mappings.gic.selectedStoreName.PickupDeliveryIntent
      - click:
          identifier: us.mappings.home.gic.module.pickupIntent
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.selectedStoreAddress.PickupDeliveryIntent
            - identifier: us.mappings.gic.selectedStoreName.PickupDeliveryIntent              
      - log: Confirmed the Delivery Store is the same as Pickup Store in the GIC Module for new Store inside Catchment

    # Tap the Store card when intent is selected and select a store from the store selector prompt. (Author Joel Litvin) 3/30
  - name: us.functions.gic.module.intentSelected.storeCard.storeSelector
    platform: ios
    flow:
      - click:
          identifier: us.mappings.home.gic.module.deliveryIntent
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.module.storeAddressSection
      - verifyIdentifier:
          present:           
            - identifier: us.mappings.home.gic.module.storeAddress.present
            - identifier: us.mappings.gicDss.storeName.present
      - click:
          identifier: us.mappings.home.gic.module.storeAddressSection
      - if:
          identifier:
            present:
              - identifier: us.mappings.gic.select.address.selectYourStore.headerText # us.mappings.gic.select.address.selectYourStore.Id           
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.gic.select.address.storesDeliveringToYourAddress.headerText # us.mappings.gic.select.address.storesDeliveringToYourAddress.Id
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.gic.select.address.selectYourStore.headerText # us.mappings.gic.select.address.selectYourStore.Id
                    contains: Select your store
            - verifyIdentifier:
                label:
                  - identifier: us.mappings.gic.select.address.storesDeliveringToYourAddress.headerText  # us.mappings.gic.select.address.storesDeliveringToYourAddress.Id
                    contains: "Stores delivering to your address:"            
            - log: Store Selector is present, proceed with selection
          else:
            - log: Store Selector is not present, proceed with selection
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.gic.select.address.selectYourStore.headerText # us.mappings.gic.select.address.selectYourStore.Id                          
      - click:
          identifier: us.mappings.home.gic.module.newStoreAddress.selectStore
          wait: 3000
      - click:
          identifier: us.mappings.gic.select.address.saveMyStore.button
          wait: 3000

  # Function to choose a Delivery Address from within the Gic Module.
  - name: us.functions.gic.module.selectAdress.fromSelector  #Joel 4/3
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.test.functions.utils.gic.noDeliveryAddressPresent.addAddressCTA
      - click:
          identifier: us.mappings.home.gic.module.deliveryAddress.present
          wait: 3000
      - log: "Clicked on user's address: ${deliveryAddress}"  
      - if:
          identifier:
            present:
              - identifier: us.mappings.default.keyboardDoneButton  
          then:
            - click:
                identifier: us.mappings.default.keyboardDoneButton  
      - scroll:
          direction: down
          untilIdentifier: us.mappings.gic.select.address.save.button
      - click:
          identifier: us.mappings.gic.select.address.save.button
          wait: 3000
      - verifyIdentifier:
          timeout: 10000
          present:          
            - identifier: us.mappings.home.gic.module.deliveryAddressCard.present
      - log: "The User's Delivery Address: ${deliveryAddressCard} is now presented on the GIC delivery address card!"

  # Validate the Dss Bottom Sheet and Update to a new Store
  - name: us.functions.gic.module.dssBottomSheet.updateStore  #Joel 4/3
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.module.dssBottomSheet.validation     
      - click:
          identifier: us.mappings.gic.select.dss.UpdateMyStore.cta
          wait: 3000
      - sleep:
          duration: 10000
      - executeFunction:
          name: us.functions.gic.module.storeCardDetails.persist.forDeliveryAndPickup           

  # Validate the Dss Bottom Sheet and Update to a new Store
  - name: us.functions.gic.module.dssBottomSheet.selectStoreLink  #Joel 4/10
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.module.dssBottomSheet.validation     
      - click:
          identifier: us.mappings.home.gic.module.dssBottomSheet.selectDiffStoreLink
          wait: 3000
      - executeFunction:
          name: us.functions.gic.module.dssBottomSheet.selectStoreLinkPage.validation #Joel 4/10           
      - executeFunction:
          name: us.functions.gic.module.storeCardDetails.persist.forDeliveryAndPickup 

  # Validate the Dss Bottom Sheet and Update to a new Store
  - name: us.functions.gic.module.dssBottomSheet.selectStoreLinkPage.validation  #Joel 4/10
    platform: ios
    flow:
      - log: Validate the GIC DSS Select Your Store prompt!
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.headerText
            # - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.saveAsMyStore.cta
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.saveAsMyStore.ctaName
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.storeName
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.storeAddress
      - log: All Elements present in the Select Your Store prompt, select a new Delivery Store
      - click:
          identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.storeAddress
          wait: 5000
      - click:
          identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.saveAsMyStore.cta
          wait: 5000

  # Validate the GIC Module Store Card details and then select Pickup intent and valdiate Store Card Details remains the same.
  - name: us.functions.gic.module.storeCardDetails.persist.forDeliveryAndPickup  #Joel 4/4
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 35000
          present:
            - identifier: us.mappings.gic.selectedStoreAddress.PickupDeliveryIntent 
            - identifier: us.mappings.gic.selectedStoreName.PickupDeliveryIntent     
      - click:
          identifier: us.mappings.home.gic.module.pickupIntent
          wait: 5000
      - verifyIdentifier:
          timeout: 35000
          present:
            - identifier: us.mappings.gic.selectedStoreAddress.PickupDeliveryIntent
            - identifier: us.mappings.gic.selectedStoreName.PickupDeliveryIntent

  # Validate the DSS bottom sheet for any Store Selection
  - name: us.functions.gic.module.dssBottomSheet.validation  #Joel 4/4
    platform: ios
    flow:
      - click:
          identifier: us.mappings.home.gic.module.deliveryIntent
      - verifyIdentifier:
          timeout: 15000
          present: 
            - identifier: us.mappings.home.gic.module.dssBottomSheet.updateStoreheader      
            - identifier: us.mappings.home.gic.module.dssBottomSheet.deliveryUnavailbleText
            - identifier: us.mappings.home.gic.module.dssBottomSheet.storeAddress
            - identifier: us.mappings.home.gic.module.dssBottomSheet.storeName            
      - log: Header, delivery text and the store address on the DSS bottom sheet prompt are present!         
      - verifyIdentifier:
          timeout: 15000
          present:  
            - identifier: us.mappings.gic.select.dss.UpdateMyStore.cta
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectDiffStoreLink
      - log: All Elements present on DSS bottom sheet prompt!

  # Navigate to Drone Landing Page via GIC Shop-drone-ready picks
  - name: us.functions.gic.verify.navigateToDroneLanding
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.shopDroneReadyPicks.cta
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.home.gic.shopDroneReadyPicks.droneIcon
                  - identifier: us.mappings.home.gic.shopDroneReadyPicks.droneTitle
                  - identifier: us.mappings.home.gic.shopDroneReadyPicks.droneDescription
                  - identifier: us.mappings.home.gic.shopDroneReadyPicks.button
            - click:
                identifier: us.mappings.home.gic.shopDroneReadyPicks.button
            - log: Clicked Shop-drone-ready picks from GIC!      
              
  ####################################################### Android #################################################

  #validates all GIC module elements in unselected state.
  - name: us.functions.homePage.verify.GICExpandedView.unselected
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.home.gic.expandedIcon
          then:
            - log: GIC module is not in Expanded view, click chevron to expand
            - click:
                identifier: us.mappings.home.gic.collapseIcon
            - log: GIC is now Expanded  
          else:
            - log: GIC is already in Expanded view   
      #Validate GIC Header    
      - verifyIdentifier:
          timeout: 50000
          present:
            - identifier: us.mappings.home.gic.module.headerText.section
            - identifier: us.mappings.home.gic.module.headerText
            - identifier: us.mappings.home.gic.expandedIcon
            - identifier: us.mappings.home.gic.module.headerBar
      - log: GIC header validated!      
      #Validate GIC intent icons        
      - verifyIdentifier:
          timeout: 50000        
          present:                                                        
            - identifier: us.mappings.home.gic.module.shippingIntent
            - identifier: us.mappings.home.gic.module.pickupIntent
            - identifier: us.mappings.home.gic.module.deliveryIntent
      - log: GIC Module intent selections validated!               
      #Validate GIC Store Info       
      - verifyIdentifier:
          timeout: 50000        
          present:
            - identifier: us.mappings.home.gic.module.addAddressMessage.text
            - identifier: us.mappings.home.gic.module.postalCode.sanJose.ca.95122
            #- identifier: us.mappings.home.gic.module.unselectedIntent.bannerCheckmarks.shipping
            #- identifier: us.mappings.home.gic.module.unselectedIntent.bannerCheckmarks.delivery
      - verifyIdentifier:
          timeout: 50000        
          present:           
            - identifier: us.mappings.home.gic.module.parent.addAddressButton
            - identifier: us.mappings.home.gic.module.unselectedIntent.storeAddress.sanJose.superCenter
            - identifier: us.mappings.home.gic.module.unselectedIntent.storeAddress.sanJose.superCenter.address
            #- identifier: us.mappings.home.gic.module.unselectedIntent.bannerCheckmarks.pickup
            #- identifier: us.mappings.home.gic.module.unselectedIntent.bannerCheckmarks.curbsidePickup
      - log: GIC Module Store data validated!

  #validates the GIC module is not present on screen.
  - name: us.functions.homePage.verify.GICExpandedView.notPresent
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 50000
          notPresent:
            - identifier: us.mappings.home.gic.module.headerText.section
            - identifier: us.mappings.home.gic.module.headerText
            - identifier: us.mappings.home.gic.module.bannerChevron
            - identifier: us.mappings.home.gic.module.headerBar
      - log: GIC header and module are not present on screen.

  #Sign in from GIC module for Guest User after tapping Pickup intent icon.
  - name: us.functions.homePage.gic.Module.signIn.fromPickupIntent
    platform: android
    flow:
      - click:
          identifier: us.mappings.home.gic.module.pickupIntent
          wait: 3000
      - executeFunction:
          name: us.functions.global.authentication.signInAccount              

  #Change the GIC selected intent from Delivery to Pickup by Reserving a curbside Pickup via Bookslot.
  - name: us.functions.homePage.gic.Module.deliveryIntent.changesTo.pickupIntent.fromBookslot.selection
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.home.gic.module.deliveryIntent
          then:
            - log: GIC module is collapsed
            - click:
                identifier: us.mappings.home.gic.collapseIcon
                wait: 3000
            - log: GIC module is no longer collapsed                   
          else:
            - log: GIC module is not collapsed proceed      
      - click:
          identifier: us.mappings.home.gic.module.deliveryIntent
          wait: 3000
      - log: GIC intent set to Delivery 
      - executeFunction:
          name: unified.us.functions.gic.updateStore   
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.deliveryIntent.selected
      - click:
          identifier: us.mappings.home.gic.expandedIcon
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.deliveryIntent.selected.inGicHeader
      #WORKAROUND STEPS: due to CEPG-91201
      #The following Bookslot selection testcase steps are TBD until resolution of CEPG-91201
      - click:
          identifier: us.mappings.home.gic.collapseIcon
      - click:
          identifier: us.mappings.home.gic.module.pickupIntent
          wait: 3000
      - log: GIC intent set to Pickup      
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.pickupIntent.selected
      - click:
          identifier: us.mappings.home.gic.expandedIcon
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.pickupIntent.selected.inGicHeader
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.seeTimesOrChange.id
          then:
            - log: Confirm home screen Bookslot button.             
            - log: See times button needs to be reset
            - click:
                identifier: us.mappings.home.changeButton
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reserveSlot.curbsidePickup.changeStoreLink
            - click:
                identifier: us.mappings.reserveSlot.curbsidePickup.changeStoreLink
                wait: 3000
            - click: 
                identifier: ${storeOne}
                wait: 3000
            # - goBack: true

            # saving the store
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reserveSlot.selectStore.saveButton                      
            - click: 
                identifier: us.mappings.reserveSlot.selectStore.saveButton
                wait: 3000
            - sleep:
                duration: 6000                
            # clicking the reserve button        
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reserveSlot.selectStore.saveButton                      
            - click: 
                identifier: us.mappings.reserveSlot.selectStore.saveButton
                wait: 3000 
            - sleep:
                duration: 5000       
            # - click: 
            #     identifier: us.mappings.global.closeButton
            #     wait: 3000
            - scroll:
                timeout: 10000
                direction: up
                untilIdentifier: us.mappings.home.seeTimesOrChange.id
            - sleep:
                duration: 5000    
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier: us.mappings.home.seeTimesOrChange.id
            - click:                                  
                identifier: us.mappings.home.seeTimesOrChange.id
            - click:
                identifier: us.mappings.reserveSlot.curbsidePickup.changeStoreLink
                wait: 3000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.home.selectStoreTextField
            - scroll:
                timeout: 15000
                direction: down
                untilIdentifier: ${storeTwo}
            - click: 
                identifier: ${storeTwo}
                wait: 3000
            # - goBack: true
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier: us.mappings.reserveSlot.selectStore.saveButton          
            - click: 
                identifier: us.mappings.reserveSlot.selectStore.saveButton
                wait: 3000
            - sleep:
                duration: 10000    

            - goBack: true   
            # - click: 
            #     identifier: us.mappings.global.closeButton
                # wait: 10000
            - log: See times should now be reset          
          else:
            - log: See times button was present, no need to reset

      - if:
          identifier:
            present:
              - identifier: us.mappings.home.seeTimes
          then:
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier: us.mappings.home.seeTimes             
            - click:
                identifier: us.mappings.home.seeTimes
            - sleep:
                duration: 3000
          else:         
            - executeFunction:
                name: us.functions.gic.expandIfCollapsed                   
            - click:
                identifier: us.mappings.home.gic.seeTimes 
            - sleep:
                duration: 3000       
      - executeFunction:
          name: us.functions.reserveSlot.curbsidePickup.bookThirdDaySlot
      - verifyIdentifier:
          timeout: 100000
          present:
            - identifier: us.mappings.home.gic.module.pickupIntent.selected.inGicHeader          
      - log: GIC intent set to Pickup from Bookslot pickup selection

  #After GIC Intent Has been changed verify Cart Item fullfillment changes to expected value.
  - name: us.functions.homePage.gic.Module.verifySwitchingOfIntentsInGICAffectsCartIntent
    platform: android
    flow:
      - executeFunction:
          name: us.functions.global.navigation.toCartFromNavBar
      - scroll:
          direction: up
          untilIdentifier: us.mappings.orderConfirmation.scDelivery.cardTitle
      - sleep:
          duration: 3000
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.orderConfirmation.scDelivery.cardTitle
      - log: GIC Intent matches Pickup 
      - executeFunction:
          name: us.functions.cart.verify.pickupAddress
      - click:
          identifier: us.mappings.global.navigation.backNavigation
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      # - click:
      #     identifier: us.mappings.home.gic.collapseIcon # us.mappings.home.gic.module.bannerChevron #us.mappings.home.gic.collapsedIcon
      - click:
          identifier: us.mappings.home.gic.module.shippingIntent
      # - click:
      #     identifier: us.mappings.home.gic.expandedIcon #us.mappings.home.gic.module.bannerChevron #us.mappings.home.gic.expandedIcon
          wait: 3000
      - log: GIC Shipping Intent is now selected                                    
      - executeFunction:
          name: us.functions.global.navigation.toCartFromNavBar
      - scroll:
          direction: up
      - if:
          identifier:
            present:
              - identifier: us.mappings.orderConfirmation.scDelivery.cardTitle
          then:
              - log: GIC Intent matches Pickup
              - log: Expo variation B was detected!       
              # - verifyIdentifier:
              #     timeout: 10000
              #     present:
              #       - identifier: us.mappings.orderConfirmation.scDelivery.cardTitle
              - log: GIC Intent still matches Pickup and not Shipping due to variation B
              - click:
                  identifier: us.mappings.global.navigation.backNavigation
              - executeFunction:
                  name: us.functions.homePage.gic.Module.searchFor.sharedItems.gicShippingHeader
              - executeFunction:
                  name: us.functions.item.addItemToCart
              - executeFunction:
                  name: us.functions.global.navigation.toCartFromNavBar             
              - scroll:
                  direction: down
                  untilIdentifier: us.mappings.orderConfirmation.fcDelivery.cardTitle #us.mappings.cart.fcDelivery.title #us.mappings.cart.scheduledDelivery.cardTitle.shippingLabel
                  position: center
              - verifyIdentifier:
                  timeout: 15000        
                  present:
                    - identifier: us.mappings.orderConfirmation.fcDelivery.cardTitle # us.mappings.cart.fcDelivery.title #us.mappings.cart.scheduledDelivery.cardTitle.shippingLabel
              - log: GIC Intent now matches Shipping for Item Level Preservation, variation B      
          else:
              - log: Expo variation A was detected!
              - scroll:
                  direction: up
                  untilIdentifier: us.mappings.orderConfirmation.fcDelivery.cardTitle          
              - verifyIdentifier:
                  timeout: 10000
                  present:
                    - identifier: us.mappings.orderConfirmation.fcDelivery.cardTitle         

  # Verify GIC header is present on Search and Identify Shared item for testcase
  - name: us.functions.homePage.gic.Module.searchFor.sharedItems.gicPickupHeader
    platform: android
    flow:
      - executeFunction:
          name: us.functions.home.closeWPlusPromotionPopUpIfDisplayed      
      - executeFunction:
          name: us.functions.search.searchItem
          params: 
            - name: searchTerm
              string: us.data.prod.gic.sharedItem10
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.pickupIntent.selected.inGicHeader
      - scroll: 
          direction: down    
      - executeFunction:
          name: us.functions.search.clickOnFirstItem     
      - scroll: 
          direction: down
          untilIdentifier: us.mappings.item.switching.fulfillment.pickupText
          position: center
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.item.switching.fulfillment.pickupText
              - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
              - identifier: us.mappings.item.switching.fulfillment.shippingText
          then:
            - log: Cant find the expected fulfillment requirements
            - log: Deep link to a new Item.
            - click:
                identifier: us.mappings.item.closeButton #us.mappings.item.closeItemDetailsPage
            - executeFunction:
                name: us.functions.search.searchItem
                params:
                  - name: searchTerm
                    string: us.data.prod.gic.sharedItem11
            - executeFunction:
                name: us.functions.search.clickOnFirstItem    
            - sleep:
               duration: 3000
            - scroll: 
                direction: down
                untilIdentifier: us.mappings.item.switching.fulfillment.pickupText
                position: center                                    
            - verifyIdentifier:
                timeout: 5000
                present:
                  - identifier: us.mappings.item.switching.fulfillment.pickupText
                  - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
                  - identifier: us.mappings.item.switching.fulfillment.shippingText
            - log: fulfillment requirements are present with 2nd item.
            - log: 2nd Item is a shared item, now adding to cart!          
          else:
            - log: fulfillment requirements are present with 1st item.            
            - log: 1st Item is a shared item, now adding to cart!

  # Verify GIC header is present on Search and Identify Shared item for testcase
  - name: us.functions.homePage.gic.Module.searchFor.sharedItems.gicShippingHeader
    platform: android
    flow:
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: us.data.prod.gic.sharedItem8
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.shippingIntent.selected.inGicHeader
      - executeFunction:
          name: us.functions.search.clickOnFirstItem    
      - sleep:
         duration: 3000     
      - scroll: 
          direction: down
          untilIdentifier: us.mappings.item.switching.fulfillment.pickupText
          position: center
      - click:
          identifier: us.mappings.item.switching.fulfillment.shippingText         
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.item.switching.fulfillment.pickupText
              - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
              - identifier: us.mappings.item.switching.fulfillment.shippingText
          then:
            - log: Cant find the expected fulfillment requirements
            - log: Deep link to a new Item.
            - click:
                identifier: us.mappings.item.closeButton #us.mappings.item.closeItemDetailsPage
            - executeFunction:
                name: us.functions.search.searchItem
                params:
                  - name: searchTerm
                    string: us.data.prod.gic.sharedItem4
            - click:
                identifier: us.mappings.search.firstItem
                wait: 3000                                      
            - scroll:
                direction: down
                untilIdentifier: us.mappings.item.switching.fulfillment.pickupText
                position: center            
            - verifyIdentifier:
                timeout: 5000
                present:
                  - identifier: us.mappings.item.switching.fulfillment.pickupText
                  - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
                  - identifier: us.mappings.item.switching.fulfillment.shippingText
            - log: fulfillment requirements are present with 2nd item.
            - log: 2nd Item is a shared item, now adding to cart!          
          else:
            - log: fulfillment requirements are present with 1st item.            
            - log: 1st Item is a shared item, now adding to cart!

  # Verify Review Order screen for GIC variation A or variation B
  - name: us.functions.homePage.gic.Module.verifyReviewOrder.variationA.orVariationB
    platform: android
    flow:
      - executeFunction:
          name: us.functions.cart.continueToCheckout
      # - executeFunction:
      #     name: us.functions.checkout.reviewOrder.paymentsCloseTray
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.walmartPlusMembershipLogo
          then:
            - click:
               identifier: us.mappings.wlus.membershipBottomsheetClose           
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.curbsidepickup.cardTitle
          then:
            - log: Review Order screen is GIC variation B and multi-fulfillment
            - executeFunction:
                name: us.functions.checkout.reviewOrder.verifyCardDetails
                params:
                  - name: fulfillmentText
                    string: us.data.fulfillment.pickup
            - executeFunction:
                name: us.functions.checkout.reviewOrder.verifyCardDetails
                params:
                  - name: fulfillmentText
                    string: us.data.fulfillment.shipping

          else:
            - log: Review Order screen is GIC variation A and Shipping only 
            - executeFunction:
                name: us.functions.checkout.reviewOrder.fcDelivery.verifyCard

  #WMPLUS/GIC 
  - name: us.functions.wplus.homePage.verifyGICOnHomePage
    platform: ios
    flow:
      - sleep:
          duration: 10000
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.home.gic.expandedIcon
          then:
            - log: GIC module is not in Expanded view, click chevron to expand
            - click:
                identifier: us.mappings.home.gic.collapsedIcon
            - log: GIC is now Expanded  
          else:
            - log: GIC is already in Expanded view  
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.module.addAddressMessage.text.iD
          then:
            - verifyIdentifier:
                present:
                # - identifier: us.mappings.wplus.gicBannerImage
                 - identifier: us.mappings.home.gic.module.addAddressMessage.text.iD
                 - identifier: us.mappings.wplus.gicBannerPostalCode
                 - identifier: us.mappings.wplus.gicBannerChevron
          else:
            - verifyIdentifier:
                present:
                 - identifier: us.mappings.home.gic.module.unselectedIntent.addresssection 
                 - identifier: us.mappings.home.gic.module.unselectedIntent.storeAddresssection
                 
                       

      #- verifyIdentifier:
      #   present:
      #    - identifier: us.mappings.wplus.gicBannerImage
      #      - identifier: us.mappings.home.gic.module.addAddressMessage.text.iD
      #      - identifier: us.mappings.wplus.gicBannerPostalCod
      #      - identifier: us.mappings.wplus.gicBannerChevron


  - name: us.functions.wplus.homePage.verifyGICOnHomePage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.wplus.gicBannerImage
            - identifier: us.mappings.wplus.gicBannerHeader
            - identifier: us.mappings.wplus.gicBannerPostalCode
            - identifier: us.mappings.wplus.gicBannerChevron

  - name: us.functions.wplus.homePage.verifyIntentEducationalMessages
    platform: android
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Shipping
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.wplus.shippinIntentEducationalMessage
          then:
            - failTest:
                message: "ENV_FAILURE - ${env} - Shipping intent educational message is not displayed in GIC"

  - name: us.functions.wplus.search.verifySearchItemsAreShownBasedOnIntent
    platform: android
    flow:
      - executeFunction:
          name: us.functions.gic.changeFulfillment
          params:
            - name: option
              string: Shipping
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: dress
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.item.switching.fulfillment.shippingText
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://home
      - executeFunction:
          name: us.functions.gic.changeFulfillment
          params:
            - name: option
              string: Pickup
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: dress
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.item.switching.fulfillment.pickupText
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://home
      - executeFunction:
          name: us.functions.gic.changeFulfillment
          params:
            - name: option
              string: Delivery
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: dress
      - sleep:
          duration: 5000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.item.ad.SpCarouseladsFulfillmentInfo
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.item.ad.SpCarouseladsFulfillmentInfo

  - name: us.functions.wplus.verifyWplusFreeShippingFilterNotShownForOtherIntents
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.changeFulfillment
          params:
            - name: option
              string: Pickup
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: pen #114916831 #533496222 
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.wPlusFilter

  - name: us.functions.wplus.verifySwitchingOfIntentsInGICAffectsCartIntent
    platform: ios
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: horizon organic milk
      - executeFunction:
          name: us.functions.search.clickOnFirstItem
      - executeFunction:
          name: us.functions.search.addItemtoCart
      - executeFunction:
          name: us.functions.global.navigation.toCartFromNavBar
      - getString:
          identifier: us.mappings.cart.scheduledDelivery.cardTitle
          storeIn: intentType
      - sleep:
          duration: 3000
      - if:
          condition: ${intentType} == "Pickup or delivery from store" | ${intentType} == "Delivery from store"
          then:
            - click:
                identifier: us.mappings.global.navigation.backNavigation
            - click:
                identifier: us.mappings.home.gic.module.shippingIntent
            - click:
                identifier: us.mappings.wplus.gicBannerChevron
            - executeFunction:
                name: us.functions.global.navigation.toCartFromNavBar
            - getString:
                identifier: us.mappings.cart.scheduledDelivery.cardTitle
                storeIn: intentType2
            - if:
                condition: ${intentType2} == "Shipping to"
                then:
                  - log: Fulfilment type changed based on selected global intent
                else:
                  - log: Fulfilment type didn't change based on the selected global intent
          else:
            - if:
                condition: ${intentType} == "Shipping to"
                then:
                  - click:
                      identifier: us.mappings.global.navigation.backNavigation
                  - click:
                      identifier: us.mappings.home.gic.module.deliveryIntent
                  - click:
                      identifier: us.mappings.wplus.gicBannerChevron
                  - executeFunction:
                      name: us.functions.global.navigation.toCartFromNavBar
                  - getString:
                      identifier: us.mappings.cart.scheduledDelivery.cardTitle
                      storeIn: intentType2
                  - if:
                      condition: ${intentType2} == "Pickup or delivery from store" | ${intentType2} == "Delivery from store"
                      then:
                        - log: Fulfilment type changed based on selected global intent
                      else:
                        - log: Fulfilment type didn't change based on the selected global intent
                else:
                  - if:
                      condition: ${intentType} == "Pickup at Milpitas Supercenter"
                      then:
                        - click:
                            identifier: us.mappings.global.navigation.backNavigation
                        - click:
                            identifier: us.mappings.home.gic.module.shippingIntent
                        - click:
                            identifier: us.mappings.wplus.gicBannerChevron
                        - executeFunction:
                            name: us.functions.global.navigation.toCartFromNavBar
                        - getString:
                            identifier: us.mappings.cart.scheduledDelivery.cardTitle
                            storeIn: intentType2
                        - if:
                            condition: ${intentType2} == "Shipping to"
                            then:
                              - log: Fulfilment type changed based on selected global intent
                            else:
                              - log: Fulfilment type didn't change based on the selected global intent

  - name: us.functions.wplus.verifySwitchingOfIntentsInGICAffectsCartIntent
    platform: android
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.search.searchItem
          params:
            - name: searchTerm
              string: horizon organic milk
      - executeFunction:
          name: us.functions.search.clickOnFirstItem
      - executeFunction:
          name: us.functions.search.addItemtoCart
      - executeFunction:
          name: us.functions.global.navigation.toCartFromNavBar
      - getString:
          identifier: us.mappings.cart.scheduledDelivery.cardTitle
          storeIn: intentType
      - sleep:
          duration: 3000
      - if:
          condition: ${intentType} == "Pickup or delivery from store" | ${intentType} == "Delivery from store"
          then:
            - click:
                identifier: us.mappings.global.navigation.backNavigation
            - click:
                identifier: us.mappings.wplus.globalIntentShipping
            - click:
                identifier: us.mappings.wplus.gicBannerChevron
            - executeFunction:
                name: us.functions.global.navigation.toCartFromNavBar
            - getString:
                identifier: us.mappings.cart.scheduledDelivery.cardTitle
                storeIn: intentType2
            - if:
                condition: ${intentType2} == "Shipping to"
                then:
                  - log: Fulfilment type changed based on selected global intent
                else:
                  - log: Fulfilment type didn't change based on the selected global intent
          else:
            - if:
                condition: ${intentType} == "Shipping to"
                then:
                  - click:
                      identifier: us.mappings.global.navigation.backNavigation
                  - click:
                      identifier: us.mappings.wplus.globaIntentDelivery
                  - click:
                      identifier: us.mappings.wplus.gicBannerChevron
                  - executeFunction:
                      name: us.functions.global.navigation.toCartFromNavBar
                  - getString:
                      identifier: us.mappings.cart.scheduledDelivery.cardTitle
                      storeIn: intentType2
                  - if:
                      condition: ${intentType2} == "Pickup or delivery from store" | ${intentType2} == "Delivery from store"
                      then:
                        - log: Fulfilment type changed based on selected global intent
                      else:
                        - log: Fulfilment type didn't change based on the selected global intent
                else:
                  - if:
                      condition: ${intentType} == "Pickup at Milpitas Supercenter"
                      then:
                        - click:
                            identifier: us.mappings.global.navigation.backNavigation
                        - click:
                            identifier: us.mappings.wplus.globalIntentShipping
                        - click:
                            identifier: us.mappings.wplus.gicBannerChevron
                        - executeFunction:
                            name: us.functions.global.navigation.toCartFromNavBar
                        - getString:
                            identifier: us.mappings.cart.scheduledDelivery.cardTitle
                            storeIn: intentType2
                        - if:
                            condition: ${intentType2} == "Shipping to"
                            then:
                              - log: Fulfilment type changed based on selected global intent
                            else:
                              - log: Fulfilment type didn't change based on the selected global intent

  - name: us.functions.gic.changeFulfillment
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Pre-transactions
      - if:
          identifier:
            present:
              - identifier:  us.mappings.search.filterfacet.pillPickupAndShipping
          then:
             - executeFunction:
                name: us.functions.search.applyPickupOrShippingOrDeliveryFilter
          else: 
            - executeFunction:
                name: us.functions.gic.expandIfCollapsed
            - executeFunction:
                name: us.functions.gic.setFulfillment
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.updateStore
          then:
            - click:
                identifier: us.mappings.home.gic.updateStore        
      - executeFunction:
          name: us.functions.gic.collapseIfExpanded

  - name: us.functions.gic.setFulfillment
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Onboarding
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.newModule.container
          then:
            - storeIn:
                key: newGIC
                value: true
            - if:
                condition: ${option} == 'Shipping'
                then:
                  - try:
                      flow:
                        - storeIn:
                            key: option
                            value: Pickup
                        - verifyIdentifier:
                            timeout: 0
                            checked:
                              - identifier: us.mappings.wplus.globalIntentPickup
                                value: false
                        - storeIn:
                            key: option
                            value: Delivery
                        - verifyIdentifier:
                            timeout: 0
                            checked:
                              - identifier: us.mappings.wplus.globaIntentDelivery
                                value: false
                      catch:
                        flow:
                          - if:
                              condition: ${option} == 'Pickup'
                              then:
                                - click:
                                    identifier: us.mappings.wplus.globalIntentPickup
                              else:
                                - click:
                                    identifier: us.mappings.wplus.globaIntentDelivery
                else:
                    - if:
                        condition: ${option} == 'Pickup'
                        then:
                          - try:
                                flow:
                                    - verifyIdentifier:
                                        timeout: 0
                                        checked:
                                          - identifier: us.mappings.wplus.globalIntentPickup
                                            value: true
                                    - log: Pickup intent already selected
                                catch:
                                  flow:
                                    - click:
                                        identifier: us.mappings.wplus.globalIntentPickup
                        else:
                            - if:
                                condition: ${option} == 'Delivery'
                                then:
                                  - try:
                                        flow:
                                            - verifyIdentifier:
                                                timeout: 0
                                                checked:
                                                  - identifier: us.mappings.wplus.globaIntentDelivery
                                                    value: true
                                            - log: Delivery intent already selected
                                        catch:
                                          flow:
                                            - click:
                                                identifier: us.mappings.wplus.globaIntentDelivery
      # old GIC Screen
          else:
            - if:
                condition: ${option} == 'Shipping'
                then:
                  - try:
                        flow:
                            - verifyIdentifier:
                                contentDescription:
                                  - identifier: us.mappings.home.gic.module.shippingIntent
                                    contains: us.data.gicSelectedAttribute
                            - log: Shipping intent already selected
                        catch:
                          flow:
                            - click:
                                identifier: us.mappings.home.gic.module.shippingIntent
                else:
                    - if:
                        condition: ${option} == 'Pickup'
                        then:
                          - try:
                                flow:
                                    - verifyIdentifier:
                                        contentDescription:
                                          - identifier: us.mappings.wplus.globalIntentPickup
                                            contains: us.data.gicSelectedAttribute
                                    - log: Pickup intent already selected
                                catch:
                                  flow:
                                    - click:
                                        identifier: us.mappings.wplus.globalIntentPickup
                        else:
                            - if:
                                condition: ${option} == 'Delivery'
                                then:
                                  - try:
                                        flow:
                                            - verifyIdentifier:
                                                contentDescription:
                                                  - identifier: us.mappings.wplus.globaIntentDelivery
                                                    contains: us.data.gicSelectedAttribute
                                            - log: Delivery intent already selected
                                        catch:
                                          flow:
                                            - click:
                                                identifier: us.mappings.wplus.globaIntentDelivery

  - name: us.functions.gic.collapseIfExpanded
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.expandedIcon
          then:
            - click:
                identifier: us.mappings.home.gic.expandedIcon
          else:
            - log : gic is collapsed

  - name: us.functions.gic.expandIfCollapsed
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Onboarding
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.collapseIcon
          then:
            - click:
                identifier: us.mappings.home.gic.collapseIcon
          else:
            - log : gic is expanded

  - name: us.functions.nonwplus.homePage.verifyIntentEducationalMessages
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Delivery
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.globalDeliveryIntentEducationalMessage
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Shipping
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.shippinIntentEducationalMessage
      - executeFunction:
         name: us.functions.gic.collapseIfExpanded

  - name: us.functions.nonwplus.homePage.verifyIntentEducationalMessages
    platform: android
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Delivery
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.globalDeliveryIntentEducationalMessage
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Shipping
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.wplus.shippinIntentEducationalMessage
      - executeFunction:
         name: us.functions.gic.collapseIfExpanded

  - name: us.functions.homePage.verify.updateZipCodeButton
    platform: android
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Pickup
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gicSelectStoreButton
      - log: Update Zipcode button on the GIC validated!         

  - name: us.functions.homePage.verify.pickup.reserve.timeslots
    platform: android
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.reserve.pickuptime.text
            - identifier: us.mappings.gic.reserve.viewalltimes.text 
            - identifier: us.mappings.gic.reserve.timeslots.container
            - identifier: us.mappings.gic.reserve.timeslots.recycler
      - log: Pickup reservation time slots on the GIC validated!

  - name: us.functions.homePage.verify.InHome.deliveryslots
    platform: android
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Delivery
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.add.address.button
      - log: Add Address button on the GIC validated!

  - name: us.functions.homePage.verify.inhome.reserve.timeslots
    platform: android
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.reserve.deliverytime.text
            - identifier: us.mappings.gic.reserve.viewalltimes.text # us.mappings.gic.reserve.viewalltimes.link
            - identifier: us.mappings.gic.reserve.inhome.slot
            - identifier: us.mappings.gic.reserve.today.slot
      - if:
          identifier:
            present:
              - identifier: us.mappings.gic.reserve.express.slot
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.gic.reserve.express.slot
      - log: Delivery reservation time slots on the GIC validated!

  - name: us.functions.gic.select.inhome.delivery.address
    platform: android
    flow:
      - sleep:
          duration: 3000
      - if:
          condition: ${shipAnotherCountry}
          then:
            - executeFunction:
                name: us.functions.gic.expandIfCollapsed
            - verifyIdentifier:
                present:
                  - identifier: com.walmart.android.debug:id/gic_ship_to_other_country_container
            - click:
                identifier: com.walmart.android.debug:id/gic_ship_to_other_country_container
            - verifyIdentifier:
                present:
                  - identifier: com.walmart.android.debug:id/title
            - click:
                identifier: (//androidx.appcompat.widget.LinearLayoutCompat[@resource-id="com.walmart.android.debug:id/line_item"])[3]
            - click:
                identifier: com.walmart.android.debug:id/add_shipping_address_button
            - verifyIdentifier:
                present:
                  - identifier: com.walmart.android.debug:id/title
            - log: Add address sheet opened
          else:
              - if:
                  identifier:
                    notPresent:
                      - identifier: us.mappings.home.gic.add.address.button
                  then:
                    - log: GIC module is not in Expanded view, click chevron to expand
                    - click:
                        identifier: us.mappings.home.gic.collapsedIcon
                    - log: GIC is now Expanded
                  else:
                    - log: GIC is already in Expanded view and see the Add Address button!
              - click:
                  identifier: us.mappings.home.gic.add.address.button
              - sleep:
                  duration: 2000
              - click:
                  identifier: us.mappings.gic.select.address.radiobutton
              - sleep:
                  duration: 2000
              - click:
                  identifier: us.mappings.gic.select.address.save.button
              - sleep:
                  duration: 5000
              - log: InHome Delivery Eligible address is selected on GIC!
          
  # select dss update store in home page
  - name: us.funtions.wplus.inHome.dss.popflow.storeSelect.delivery
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.module.updatestore.deliveryIntent
          then:
            - click:
                identifier: us.mappings.home.gic.module.updatestore.deliveryIntent
                wait: 5000
          else:
            - log : GIC intent set to Delivery 

    #validate bookslot selection        
  - name: us.functions.home.validateDfsinfo.bookslot.selection
    platform: ios
    flow:
      - sleep:
          duration: 1000
      - if:
          identifier:
            notPresent:
            - identifier: us.mappings.validatedfsinfo.seetimes
          then:
              - executeFunction:
                  name: us.functions.gic.expandIfCollapsed
              - verifyIdentifier:
                  present:
                    - identifier: us.mappings.gic.reserve.viewalltimes.text
              - log: "View all times is displayed in GIC"
          else:
            - click:
                identifier: us.mappings.validatedfsinfo.seetimes
            - log: "See Times Option is displayed on Home page."
            -  click:
                identifier: us.mappings.reserve-slot.DeliveryfromstoreButton
            - log: "User is Selected to Delivery from store Option"
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.home.gic.module.selectdeliverystorefromlist
                  - identifier: us.mappings.reserve-slot.Deliveryfromstorechangebutton

# Select deliverystore from the list
  - name: us.functions.gic.dfsinfo.selectdeliverystore
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.module.selectdeliverystore
          then:
            - click: 
                identifier: us.mappings.home.gic.module.selectdeliverystore
      - click:
          identifier: us.mappings.home.gic.module.selectdeliverystorefromlist
      - click:
          identifier: us.mappings.gic.selectStore.save.button# us.mappings.home.selectStoreSaveButton
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Pickup             
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.dfs.deliveryaddress

# Select a pickup timeslot from GIC
  - name: us.functions.gic.selectPickupTime
    platform: ios
    flow:
      - executeFunction:
         name: us.functions.gic.expandIfCollapsed
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.reserve.timeslots.container
      - click:
          identifier: us.mappings.gic.reserve.timeslot.slot1      
      - log: "Selected the second timeslot"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.seeTimes

  # Verify pickup timeslot in the cart
  - name: us.functions.gic.verify.pickup.timeslot.inCart
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.inCart.fullfillmentDetail
            - identifier: us.mappings.gic.inCart.pickup.timeslot.view
      - log: Pickup reservation timeslot is validated in the cart!        

  # Verify gic header with bookslot and zipcode
  - name: us.functions.verify.deliveryIntent.selected.inGicHeader
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.module.deliveryIntent.selected.inGicHeader

  # # Set a Delivery Store by Zipcode and assert the Delivery Store Card updates in GIC. (Author Joel Litvin)
  - name: us.functions.gicDss.select.deliveryStore.address.updatesStoreCard
    platform: android
    flow:
      - log: Set a Delivery Store inside catchment for a user's Address and then Confirm the Delivery Store Card updates in GIC.
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.functions.gic.module.noIntent.selectStore.byZipcode
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed 
      - verifyIdentifier:
          present:          
            - identifier: us.mappings.home.gic.module.storeAddress.present
            - identifier: us.mappings.gicDss.storeName.present
      - log: Confirmed ${DeliveryStoreName} has been selected and now displays in the Delivery Store Card in the GIC module!

  # Select a store from GIC module by tapping the Store card no intent selected. (Author Joel Litvin) 3/30
  - name: us.functions.gic.module.noIntent.selectStore.byZipcode
    platform: android
    flow:
      - click:
          identifier: us.mappings.home.gic.module.unselectedIntent.storeAddress.card_bottom
          wait: 3000 
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.gic.selectStore.headerText
      - if:
          identifier:
            present:
              - identifier: us.mappings.gic.selectStore.headerText
          then:             
            - log: Store Selector is present, proceed with Zip Code entry
            - enterText:
                identifier: us.mappings.reserveSlot.selectStore.zicodeTextfield
                string: ${ZIP_CODE}
                pressEnter: true
          else:
            - log: Store Selector is not present, proceed with selection
            - verifyIdentifier:
                present:
                  - identifier: Select Store
            - log: Store Selector is present, proceed with Zip Code entry                 
            - enterText:
                identifier: us.mappings.reserveSlot.selectStore.zicodeTextfield 
                string: ${ZIP_CODE}
                pressEnter: true
      - click:
          identifier: us.mappings.gic.selectStore.byZipcode 
          wait: 6000
      - log: Clicked on Store name ${SelectedStoreByZip}  
      - click:
          identifier: us.mappings.gic.selectStore.save.button
          wait: 3000

  # Set a new Delivery Store inside catchment for a user's Address and Pickup Store Card updates in GIC.  (Author Joel Litvin)
  - name: us.functions.gicDss.select.deliveryStore.address.updatesStoreCard.forPickupIntent
    platform: android
    flow:
      - log: Set a different Delivery Store inside catchment based on the users address and confirm Delivery Store is the same as Pickup Store in the GIC Module.      
      - executeFunction:
          name: us.functions.gic.module.intentSelected.storeCard.storeSelector
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - log: Final Stage Confirm New Store and Store Card when Delivery intent is selected              
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.gic.selectedStoreAddress.PickupDeliveryIntent 
            - identifier: us.mappings.gic.selectedStoreName.PickupDeliveryIntent           
      - click:
          identifier: us.mappings.home.gic.module.pickupIntent          
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.selectedStoreAddress.PickupDeliveryIntent
            - identifier: us.mappings.gic.selectedStoreName.PickupDeliveryIntent
      - log: Confirmed the Delivery Store is the same as Pickup Store in the GIC Module for new Store inside Catchment

    # Tap the Store card when intent is selected and select a store from the store selector prompt. (Author Joel Litvin) 3/30
  - name: us.functions.gic.module.intentSelected.storeCard.storeSelector
    platform: android
    flow:
      - click:
          identifier: us.mappings.home.gic.module.deliveryIntent
      - verifyIdentifier:
          present:           
            - identifier: us.mappings.home.gic.module.storeAddress.present
            - identifier: us.mappings.gicDss.storeName.present 
      - click:
          identifier: us.mappings.home.gic.module.storeAddressSection.storeName   
      - if:
          identifier:
            present:
              - identifier: us.mappings.gic.select.address.selectYourStore.headerText         
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.gic.select.address.storesDeliveringToYourAddress.Id
                  - identifier: us.mappings.gic.select.address.storesDeliveringToYourAddress.headerText                                                
            - log: Store Selector is present, proceed with selection
          else:
            - log: Store Selector is not present, proceed with selection
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.gic.select.address.selectYourStore.headerText                        
      - click:
          identifier: us.mappings.home.gic.module.newStoreAddress.selectStore
          wait: 3000
      - click:
          identifier: us.mappings.gic.select.address.saveMyStore.button
          wait: 3000

  # Function to choose a Delivery Address from within the Gic Module.
  - name: us.functions.gic.module.selectAdress.fromSelector  #Author Joel 4/3
    platform: android
    flow:
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - executeFunction:
          name: us.test.functions.utils.gic.noDeliveryAddressPresent.addAddressCTA
      - if:
         identifier:
           present:
             - identifier: us.mappings.home.gic.module.deliveryAddress.present
         then:
           - click:
               identifier: us.mappings.home.gic.module.deliveryAddress.present
         else:
           - scroll: 
               direction: down
               untilIdentifier: us.mappings.home.gic.module.deliveryAddress.present
               position: center
               wait: 3000         
      - click:
          identifier: us.mappings.home.gic.module.deliveryAddress.present
          wait: 3000
      - log: "Clicked on user's address: ${deliveryAddress}"          
      - click:
          identifier: us.mappings.gic.select.address.save.button
          wait: 3000
      - verifyIdentifier:
          timeout: 11000
          present:          
            - identifier: us.mappings.home.gic.module.deliveryAddressCard.present
      - log: "The User's Delivery Address: ${deliveryAddressCard} is now presented on the GIC delivery address card!"

  # Validate the Dss Bottom Sheet and Update to a new Store
  - name: us.functions.gic.module.dssBottomSheet.updateStore  #Author Joel 4/4
    platform: android
    flow:
      - executeFunction:
          name: us.functions.gic.module.dssBottomSheet.validation     
      - click:
          identifier: us.mappings.gic.select.dss.UpdateMyStore.cta
          wait: 3000
      - executeFunction:
          name: us.functions.gic.module.storeCardDetails.persist.forDeliveryAndPickup

  # Validate the GIC Module Store Card details and then select Pickup intent and valdiate Store Card Details remains the same.
  - name: us.functions.gic.module.storeCardDetails.persist.forDeliveryAndPickup  #Author Joel 4/4
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.storeAddressSection.storeAddress
            - identifier: us.mappings.gic.selectedStoreAddress.PickupDeliveryIntent 
            - identifier: us.mappings.gic.selectedStoreName.PickupDeliveryIntent     
      - click:
          identifier: us.mappings.home.gic.module.pickupIntent
          wait: 5000
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.gic.selectedStoreAddress.PickupDeliveryIntent
            - identifier: us.mappings.gic.selectedStoreName.PickupDeliveryIntent  

  # Validate the DSS bottom sheet for any Store Selection
  - name: us.functions.gic.module.dssBottomSheet.validation  #Author Joel 4/4
    platform: android
    flow:
      - click:
          identifier: us.mappings.home.gic.module.pickupIntent
      - click:
          identifier: us.mappings.home.gic.module.deliveryIntent
          wait: 3000
      - verifyIdentifier:
          timeout: 15000
          present: 
            - identifier: us.mappings.home.gic.module.dssBottomSheet.updateStoreheader      
            - identifier: us.mappings.home.gic.module.dssBottomSheet.deliveryUnavailbleText
            - identifier: us.mappings.home.gic.module.dssBottomSheet.storeAddress
            - identifier: us.mappings.home.gic.module.dssBottomSheet.storeName            
      - log: Header, delivery text and the store address on the DSS bottom sheet prompt are present!         
      - verifyIdentifier:
          timeout: 15000
          present:  
            - identifier: us.mappings.gic.select.dss.UpdateMyStore.cta
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectDiffStoreLink
      - log: All Elements present on DSS bottom sheet prompt!

  # Validate the Dss Bottom Sheet and Update to a new Store
  - name: us.functions.gic.module.dssBottomSheet.selectStoreLink  #Author Joel 4/11
    platform: android
    flow:
      - executeFunction:
          name: us.functions.gic.module.dssBottomSheet.validation     
      - click:
          identifier: us.mappings.home.gic.module.dssBottomSheet.selectDiffStoreLink
          wait: 3000
      - executeFunction:
          name: us.functions.gic.module.dssBottomSheet.selectStoreLinkPage.validation          
      - executeFunction:
          name: us.functions.gic.module.storeCardDetails.persist.forDeliveryAndPickup       

  # Validate the Dss Bottom Sheet and Update to a new Store
  - name: us.functions.gic.module.dssBottomSheet.selectStoreLinkPage.validation  #Author Joel 4/11
    platform: android
    flow:
      - log: Validate the GIC DSS Select Your Store prompt!
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.headerText
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.subHeader
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.storeName
            - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.storeAddress
      - log: All Elements present in the Select Your Store prompt, select a new Delivery Store
      - click:
          identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.storeAddress
          wait: 5000
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.saveAsMyStore.cta        
          then:
            - log: Save my store button was present!           
            - click:
                identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.saveAsMyStore.cta
                wait: 5000                                                           
            - log: Save my store button was clicked!    
          else: 
            - scroll:
                direction: down
                untilIdentifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.saveAsMyStore.cta
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.saveAsMyStore.cta
            - log: Save my store button is now visible!   
            - click:
                identifier: us.mappings.home.gic.module.dssBottomSheet.selectYourStorePage.saveAsMyStore.cta
                wait: 5000
            - log: Save my store button was clicked!

  # Select User Address in home page via GIC
  - name: us.functions.gic.selectAddress
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Pre-transactions
      - click:
          identifier: us.mappings.home.gic.module.parent.addAddressButton
      - click:
          identifier: us.mappings.gic.select.address.radiobutton
      - click:
          wait: 2000
          identifier: us.mappings.gic.select.address.save.button

  # Validate bookslot selection        
  - name: us.functions.home.validateDfsinfo.bookslot.selection
    platform: android
    flow:
      - sleep:
          duration: 1000
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.dfs.deliveryaddress
            - identifier: us.mappings.home.gic.seeTimes


  # Verify gic header with bookslot and zipcode
  - name: us.functions.verify.deliveryIntent.selected.inGicHeader
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.module.deliveryIntent.selected.inGicHeader
  
# Select deliverystore from the list
  - name: us.functions.gic.dfsinfo.selectdeliverystore
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.module.storeAddressSection.storeName
          then:
            - click: 
                identifier: us.mappings.home.gic.module.storeAddressSection.storeName
      - click:
          identifier: us.mappings.home.gic.module.selectdeliverystorefromlist
      - click:
          identifier: us.mappings.gic.select.address.saveMyStore.button
      - executeFunction:
          name: us.functions.gic.setFulfillment
          params:
            - name: option
              string: Pickup             
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.module.deliveryIntent.selected.inGicHeader

  # Select a pickup timeslot from GIC
  - name: us.functions.gic.selectPickupTime
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.expandedIcon
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.home.gic.expandedIcon
          then:
            - log: GIC module is not in Expanded view, click chevron to expand
            - click:
                identifier: us.mappings.home.gic.collapsedIcon
            - log: GIC is now Expanded
          else:
            - log: GIC is already in Expanded view
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.reserve.timeslots.container
      - click:
          identifier: us.mappings.gic.reserve.timeslot.slot1
      - log: "Selected the second timeslot"
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.gic.seeTimes
  
  # Verify pickup timeslot in the cart
  - name: us.functions.gic.verify.pickup.timeslot.inCart
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.inCart.fullfillmentDetail
            - identifier: us.mappings.gic.inCart.pickup.timeslot.view
      - log: Pickup reservation timeslot is validated in the cart!

  # Verify slot in cart page
  - name: us.functions.gic.verify.cart.slot
    platform: android
    flow:
      - try:
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.cart.slot
            - verifyIdentifier:
                text:
                  - identifier: us.mappings.cart.slot
                    contains: Tomorrow
          catch:
            flow:
                - verifyIdentifier:
                    present:
                      - identifier: us.mappings.cart.slot
                - verifyIdentifier:
                    text:
                      - identifier: us.mappings.cart.slot
                        contains: Today
      - log: Reservation remains

  # Verify slot in cart page
  - name: us.functions.gic.verify.cart.slot
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.slot

      - verifyValue:
          identifier: us.mappings.cart.slot
          contains: "Tomorrow"
      - log: Reservation remains

  #Verify GIC for pickup, delivery options
  - name: us.functions.gic.verifyHotGicPickupAndDeliveryOptions
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - sleep:
          duration: 3000        
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.home.hot.gic.module.headerText.section.expanded
            - identifier: us.mappings.hot.gic.pickupOption
            - identifier: us.mappings.hot.gic.deliveryOption
            - identifier: us.mappings.hot.gic.fullDeliveryAddress
            - identifier: us.mappings.hot.gic.storeAddress
      - click:
          identifier: us.mappings.hot.gic.deliveryOption
          wait: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.hot.gic.deliveryAddress
            - identifier: us.mappings.hot.gic.shippingText
            - identifier: us.mappings.hot.gic.shippingTile
            - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
            # - identifier: us.mappings.hot.gic.wplusFreeOverThirtyFive
            - identifier: us.mappings.hot.gic.wplusNoOrderMinimumBenefit
            - identifier: us.mappings.home.gic.seeTimes
      - executeFunction:
         name: us.functions.gic.collapseIfExpanded

  #Verify GIC for pickup, delivery options
  - name: us.functions.gic.verifyHotGicPickupAndDeliveryOptions
    platform: android
    flow:
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - sleep:
          duration: 3000        
      - verifyIdentifier:
          present:
            # - identifier: us.mappings.home.gic.module.headerText.section
            - identifier: us.mappings.hot.gic.pickupOption
            - identifier: us.mappings.hot.gic.deliveryOption
            - identifier: us.mappings.hot.gic.fullDeliveryAddress
            - identifier: us.mappings.hot.gic.storeAddress
      - click:
          identifier: us.mappings.hot.gic.deliveryOption
          wait: 5000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.hot.gic.fullDeliveryAddress
            - identifier: us.mappings.hot.gic.shippingText
          #  - identifier: us.mappings.hot.gic.shippingTile
            - identifier: us.mappings.item.switching.fulfillment.deliverystoreText
          #  - identifier: us.mappings.hot.gic.wplusFreeOverThirtyFive
            - identifier: us.mappings.home.gic.seeTimes
      - executeFunction:
         name: us.functions.gic.collapseIfExpanded
         
  - name: us.functions.gic.deselectFulfillment
    platform: ios
    flow:
      - try:
          flow:
            - verifyIdentifier:
                timeout: 0
                label:
                  - identifier: us.mappings.home.gic.module.intentSelection
                    contains: clear
            - log: ${option} intent selected
            - click:
                identifier: us.mappings.home.gic.module.intentSelection
            - log: ${option} intent deselected    
          catch:
            flow:
              - log: ${option} intent already deselected
      - sleep:
          duration: 3000 

  - name: us.functions.gic.deselectFulfillment
    platform: android
    flow:
      - if:
          condition: ${option} == 'Shipping'
          then:
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.gic.Clear.shippingFulfillment  
                then:  
                    - log: Shipping intent selected
                    - click:
                        identifier: us.mappings.gic.Clear.shippingFulfillment
                    - log: Shipping intent deselected
                else:
                    - log: Shipping does not be intent selected
          else: 
              - if:
                  condition: ${option} == 'Pickup'
                  then:
                    - if:
                        identifier:
                          present:
                          - identifier: us.mappings.gic.Clear.pickupFulfillment 
                        then:
                        - log: Pickup intent selected
                        - click:
                            identifier: us.mappings.gic.Clear.pickupFulfillment
                        - log: Pickup intent deselected 
                        else:
                          - log: Pickup does not be intent selected
                  else:    
                      - if:
                          condition: ${option} == 'Delivery'
                          then:
                            - if:
                                identifier:
                                  present:
                                    - identifier: us.mappings.gic.Clear.deliveryFulfillment    
                                then:
                                - log: Delivery intent selected
                                - click:
                                    identifier: us.mappings.gic.Clear.deliveryFulfillment 
                                - log: Delivery intent deselected
                                else:
                                  - log: Delivery does not be intent selected

  - name: us.functions.gic.updateStore
    platform: android
    flow:
      - if:
          identifier:
              present:
                - identifier: us.mappings.home.gic.updateStore
          then:
            - click:
                identifier: us.mappings.home.gic.updateStore
                wait: 2000
   
  - name: us.functions.gic.updateStore
    platform: ios
    flow:
      - if:
          identifier:
              present:
                - identifier: us.mappings.home.gic.updateStore
          then:
            - click:
                identifier: us.mappings.gic.select.dss.UpdateMyStore.cta
                wait: 2000  
            - executeFunction:
                name: us.functions.gic.setFulfillment

  - name: us.functions.search.verifyExtraSavingsInSearchPage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.inHome.unSelectCheckbox
      - click:
          identifier: us.mappings.inHome.unSelectCheckbox
      - verifyIdentifier:
          present:
            - identifier: us.mappings.search.primaryPrice
            - identifier: us.mappings.search.strikeThroughPrice
            - identifier: us.mappings.search.savingsAppliedText

  - name: us.functions.search.verifyExtraSavingsInItemPage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.search.savingsAppliedText
            - identifier: us.mappings.item.productPrimaryPrice
            - identifier: us.mappings.search.wasPriceText
      - click:
          identifier: us.mappings.cart.payOverClosebtn

#EDC/A2H
  - name: us.functions.gic.select.a2HEDC.address
    platform: android
    flow:
      - if:
          identifier:
              present:
                - identifier: us.mappings.home.gic.module.parent.addAddressButton
          then:
            - click:
                identifier: us.mappings.home.gic.module.parent.addAddressButton
                wait: 2000
      - click:
          identifier: us.mappings.gic.select.edcCatchmentAddress.btn
          wait: 2000
      - click:
          identifier: us.mappings.gic.select.address.save.button

  - name: us.functions.gic.select.a2HEDC.address
    platform: ios
    flow:
      - if:
          identifier:
              present:
                - identifier: us.mappings.home.gic.module.parent.addAddressButton
          then:
            - click:
                identifier: us.mappings.home.gic.module.parent.addAddressButton
                wait: 2000      
      - click:
          identifier: us.mappings.gic.select.edcCatchmentAddress.btn
          wait: 2000
      - click:
          identifier: us.mappings.gic.select.address.save.button
          wait: 3000

#  Location accuracy iOS
  - name: us.functions.gic.locationAccuracy.verifyBanner.searchScreen
    platform: ios
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mapping.gic.locationAccuracy.banner.searchScreen
          position: center      
      - verifyIdentifier:
          present:
            - identifier: us.mapping.gic.locationAccuracy.banner.searchScreen
            - identifier: us.mapping.gic.locationAccuracy.closeBanner.searchScreen
      - log: Location Accuracy banner is present on home page

  - name: us.functions.gic.locationAccuracy.verifyBanner.itemScreen
    platform: ios
    flow:    
      - scroll:
          direction: down
          untilIdentifier: us.mapping.gic.locationAccuracy.banner.itemScreen
          position: center  
      - verifyIdentifier:
          present:
          - identifier: us.mapping.gic.locationAccuracy.banner.itemScreen
      - log: Location Accuracy banner is present on item details screen

  - name: us.functions.gic.locationAccuracy.verifyBanner.cartScreen
    platform: ios
    flow:    
      - verifyIdentifier:
          present:
          - identifier: us.mapping.gic.locationAccuracy.banner.cartScreen
      - log: Location Accuracy banner is present on cart screen     

  - name: us.functions.gic.locationAccuracy.verifyBanner.resrveTimeScreen
    platform: ios
    flow:
      - click:
          identifier: us.mapping.gic.changeFromPickupButton

      - verifyIdentifier:
          present:
            - identifier: us.mapping.gic.locationAccuracy.banner
            - identifier: us.mapping.gic.locationAccuracy.closeBanner
      - log: Location Accuracy banner is present on reserve timeslot screen

      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.reserveTime.close
          then:
              - click:
                  identifier: us.mappings.cart.reserveTime.close

#  Location accuracy Android
  - name: us.functions.gic.locationAccuracy.verifyBanner.searchScreen
    platform: android
    flow:
      - scroll:
          direction: up
          untilIdentifier: us.mapping.gic.locationAccuracy.banner.searchScreen
          position: center      
      - verifyIdentifier:
          present:
            - identifier: us.mapping.gic.locationAccuracy.banner.searchScreen
            - identifier: us.mapping.gic.locationAccuracy.closeBanner.searchScreen
      - log: Location Accuracy banner is present on home page

  - name: us.functions.gic.locationAccuracy.verifyBanner.itemScreen
    platform: android
    flow:    
      - scroll:
          direction: down
          untilIdentifier: us.mapping.gic.locationAccuracy.banner.itemScreen
          position: center  
      - verifyIdentifier:
          present:
           - identifier: us.mapping.gic.locationAccuracy.banner.itemScreen
      - log: Location Accuracy banner is present on item screen

  - name: us.functions.gic.locationAccuracy.verifyBanner.cartScreen
    platform: android
    flow:    
      - verifyIdentifier:
          present:
          - identifier: us.mapping.gic.locationAccuracy.banner.cartScreen
      - log: Location Accuracy banner is present on cart screen  

  - name: us.functions.gic.locationAccuracy.verifyBanner.resrveTimeScreen
    platform: android
    flow:
      - click:
          identifier: us.mapping.gic.changeFromPickupButton

      - verifyIdentifier:
          present:
            - identifier: us.mapping.gic.locationAccuracy.banner
            - identifier: us.mapping.gic.locationAccuracy.closeBanner
      - log: Location Accuracy banner is present on reserve timeslot screen

      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.reserveTime.close
          then:
              - click:
                  identifier: us.mappings.cart.reserveTime.close

  - name: us.functions.gic.module.switchBetweenAddresses
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.add.address.button 
          then:
            - click:
               identifier: us.mappings.home.gic.add.address.button
          else:
            - click:
               identifier: us.mappings.home.gic.module.currentAddress
      - click:
          identifier: us.mappings.home.gic.module.secondAddress
      - click:
          identifier: us.mappings.gic.select.address.save.button
          wait: 3000


  - name: us.functions.gic.module.switchBetweenAddresses
    platform: android
    flow:
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.add.address.button 
          then:
            - click:
               identifier: us.mappings.home.gic.add.address.button
          else:
            - click:
               identifier: us.mappings.home.gic.module.currentAddress

      - click:
          identifier: us.mappings.home.gic.module.unselectedAddress
          wait: 3000

      - scroll:
          direction: down
          untilIdentifier: us.mappings.gic.select.address.save.button
      - click:
          identifier: us.mappings.gic.select.address.save.button
          wait: 3000

  - name: us.functions.search.verifyExtraSavingsInSearchDealsPage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.inHome.unSelectCheckboxforExtraSavings

  - name: us.functions.item.verifyExtraSavingsInItemdealsPage
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.search.savingsAppliedTextForDealsPage
            - identifier: us.mappings.item.productPrimaryPriceForDEalsPage
            - identifier: us.mappings.search.wasPriceTextForDealsPage

   # GEP
  - name: us.functions.gic.module.gep.verifyCountrySwitchNudge
    platform: ios
    flow:
      - verifyIdentifier:
          present:
          - identifier: us.mappings.home.gic.gep.verifyCountrySwitchNudge.colombia
      - log: Device location is Colombia

      - verifyIdentifier:
          present:
          - identifier: us.mappings.home.gic.gep.verifyCountrySwitchNudge.shopWithinButton 
      - click:
          identifier: us.mappings.home.gic.gep.verifyCountrySwitchNudge.shopWithinButton 

  - name: us.functions.gic.module.gep.verifyCountrySwitchNudge
    platform: android
    flow:
      - verifyIdentifier:
          present:
          - identifier: us.mappings.home.gic.gep.verifyCountrySwitchNudge.colombia
      - log: Device location is Colombia

      - verifyIdentifier:
          present:
          - identifier: us.mappings.home.gic.gep.verifyCountrySwitchNudge.shopWithinButton 
      - click:
          identifier: us.mappings.home.gic.gep.verifyCountrySwitchNudge.shopWithinButton
          wait: 3000

  # Navigate to Drone Landing Page via GIC Shop-drone-ready picks
  - name: us.functions.gic.verify.navigateToDroneLanding
    platform: android
    flow:
      - executeFunction:
          name: us.functions.gic.expandIfCollapsed
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.gic.shopDroneReadyPicks.cta
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.home.gic.shopDroneReadyPicks.droneIcon
                  - identifier: us.mappings.home.gic.shopDroneReadyPicks.droneTitle
                  - identifier: us.mappings.home.gic.shopDroneReadyPicks.droneDescription
                  - identifier: us.mappings.home.gic.shopDroneReadyPicks.button
            - click:
                identifier: us.mappings.home.gic.shopDroneReadyPicks.button
            - log: Clicked Shop-drone-ready picks from GIC!
 
  # Verify Drone Capacity and Timer on GIC once an item is added to the cart
  - name: us.functions.gic.verify.droneCapacityAndTimer
    platform: android
    flow:
      - executeFunction:
          name: us.functions.gic.collapseIfExpanded
      - verifyIdentifier:
          timeout: 8000 
          present:
            - identifier: us.mappings.navBar.cartIconEmpty 
          text:
            - identifier: us.mappings.navBar.cartIconEmpty 
              contains: "1"         
      - log: Drone-delivery item is added to cart and navBar cart count is displayed as 1
      # Drone capacity and timer when GIC Collapsed 
      - verifyIdentifier:
          timeout: 8000
          present:
          - identifier: us.mappings.home.gic.collapsed.droneDeliveryIcon
          - identifier: us.mappings.home.gic.droneSlotReserved.capacityProgress
          - identifier: us.mappings.home.gic.droneSlotReserved.capacityHeader        
          - identifier: us.mappings.home.gic.droneSlotReserved.capacityInfo
          - identifier: us.mappings.home.gic.droneSlotReserved.timer

  # Verify Drone Capacity and Timer on GIC once an item is added to the cart
  - name: us.functions.gic.verify.droneCapacityAndTimer
    platform: ios
    flow:
      - executeFunction:
          name: us.functions.gic.collapseIfExpanded
      # - verifyIdentifier:
      #     timeout: 8000 
      #     present:
      #       - identifier: us.mappings.navBar.cartIconEmpty 
      #     text:
      #       - identifier: us.mappings.navBar.cartIconEmpty 
      #         contains: "1"         
      # - log: Drone-delivery item is added to cart and navBar cart count is displayed as 1
      # Drone capacity and timer when GIC Collapsed 
      - verifyIdentifier:
          present:
          - identifier: us.mappings.home.gic.collapsed.droneDeliveryIcon
          - identifier: us.mappings.home.gic.droneSlotReserved.capacityProgress
          - identifier: us.mappings.home.gic.droneSlotReserved.capacityHeader        
          - identifier: us.mappings.home.gic.droneSlotReserved.capacityInfo
      - verifyIdentifier:
          label: 
            - identifier: us.mappings.home.gic.droneSlotReserved.timer
              contains: Drone delivery Check out in