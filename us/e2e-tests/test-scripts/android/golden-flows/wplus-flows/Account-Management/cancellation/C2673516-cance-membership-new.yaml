general:
  platform: android
  tags: us-golden-flows-wplus, C2673516, p1-wplus-teflon-e2e
  testCaseId: C2673516
  inherit:
    filesRunAll:
      - us-errors-helpers.yaml
  metadata:
    - name: scenarioId
      string: "387"
      
scenarios:

    - name: Before
      before: true
      endTestOnFailure: true
      flow:
  # * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  
    - name: Main
      flow:
        - log: Start Main

        # Get timestamp
        - getTimestamp:
            asDate: false
            storeIn: timestamp

        # Navigate onboarding to home
        - executeFunction:
            name: us.functions.global.onboarding.navigateOnboardingToHome

        - executeFunction:
            name: us.functions.utils.handleTechnicalErrorPopup

        # Navigate to SignIn
        - executeFunction:
             name: us.functions.home.navigateHomeToSignIn

        # Signin with Existing Credentials
        - executeFunction:
            name: us.functions.global.authentication.signInAccount
            params:
              - name: email
                string: us.data.C2673516.email
              - name: password
                string: us.data.C2673516.password

        - executeFunction:
            name: us.functions.global.navigation.goToAccountFromTabBar

         # Navigate to Walmart+
        - executeFunction:
            name: us.functions.wplus.account.navigateToWalmartPlus 
     
         # Manage membership
        - executeFunction:
            name: us.functions.wplus.navigateToManageMembershipFromBenefitsPage

        - executeFunction:
            name: us.functions.wplus.managemembership.navigateToCancelFreeTrialMemberFromMemberShipPage
            
        - executeFunction:
            name: us.functions.wplus.navigateToCancelFeedbackFreeTrialOrCancelFeedbackWalmartPlusPageFromCancelConfirmationPage

      # Validate cancel Walmart plus functionality
        - executeFunction:
           name: us.functions.wplus.membership.verifyCancelMembershipNewdetailsforWalmartPlusMembers

      # performing After steps
        - storeIn:
           key: testStatus
           value: passed

    - name: After
      after: true
      useTestConfigErrors: false
      flow:
       - executeFunction:
          name: us.functions.utils.afterSteps