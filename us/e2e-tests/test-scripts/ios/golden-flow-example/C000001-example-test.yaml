general:
  platform: ios
  tags: example-test
  # testCaseId: C000001
  # inherit:
  #   filesRunAll:
  #     - default-helpers.yaml

scenarios:

  - name: C000001 Before
    before: true
    endTestOnFailure: true
    flow:

      # Wait for Cucumber
      # Astro - Clear cart and orders
      # - executeFunction:
      #     name: us.functions.utils.astro.clearCart
      #     params:
      #       - name: custEmail
      #         string: us.data.example.email
      - log: Before step

  - name: C000001 Example Test
    flow:

      - log: Start test

      # Navigate onboarding to home
      - executeFunction:
          name: us.functions.global.onboarding.navigateOnboardingToHome

      # Navigate home to sign in
      - executeFunction:
          name: us.functions.home.navigateHomeToSignIn

      # Sign in account
      # - executeFunction:
      #     name: us.functions.global.authentication.signInAccount
      #     params:
      #       - name: email
      #         string: us.data.example.email
      #       - name: password
      #         string: us.data.example.password

      # Get orderId from order history
      # - executeFunction:
      #     name: us.functions.account.order-details.getOrderId
      - storeIn:
          key: ORDER_ID
          value: 4872028552932 # Hardcoded until this support mappings

      # Wait for Cucumber
      # Astro - Get and set order status to delivered
      # - executeFunction:
      #     name: us.functions.utils.cucumber.getAndSetOrderStatus
      #     params:
      #       - name: orderNo
      #         string: ${ORDER_ID}
      #       - name: orderType
      #         string: STORE_UNSCHEDULED_PICKUP
      #       - name: status
      #         string: Customer Picked

      # Sign out account
      # - executeFunction:
      #     name: us.functions.account.signOutAccount

  - name: C000001 After
    after: true
    flow:
      - executeFunction:
          name: us.functions.utils.createFile
          params:
            - name: FILE_OUTPUT
              string: '{"status":"complete"}'