general:
  platform: ios
  tags: ${tag}
  inherit:
    filesRunAll:
      - us-errors-helpers.yaml

scenarios:

  - name: Before
    before: true
    endTestOnFailure: true
    flow:

# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
    #Started Main Flow
  - name: Main
    flow:

      - log: Start Main

      - storeIn:
          key: deepLinkUrls
          value: ${deepLink}

      - storeIn:
          key: id
          value: ${id}

      - storeIn:
          key: moduleId
          value: ${module}

      - storeIn:
          key: pageInfo
          value: ${pageInfo}

      # Navigate on-boarding to home
      - executeFunction:
          name: us.b2b.functions.global.onboarding.navigateOnboardingToHome

      - executeFunction:
          name: us.b2b.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: 'walmartb2b://home'

      - executeFunction:
          name: us.b2b.functions.browsePage.deepLinkValidations

  - name: After
    after: true
    useTestConfigErrors: false
    executeOnFailure: true
    flow:
      - executeFunction:
          name: us.b2b.functions.utils.sm-deep-link.afterSteps
