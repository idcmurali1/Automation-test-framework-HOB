functions:

  - name: us.b2b.functions.global.onboarding.navigateOnboardingToHome
    platform: ios
    flow:                                    
      - verifyIdentifier:
          timeout: 60000
          present:
            - identifier: us.b2b.mappings.global.onboarding.mainScreenText
      - log: 
          message: Welcome screen loaded
          color: CYAN_BOLD
      - click:
         identifier: us.b2b.mappings.global.onboarding.welcomeNextButton
      - log: Notifiction Prompt screen loaded                   
      - verifyIdentifier:
          present:
            - identifier: us.b2b.mappings.global.onboarding.notificationScreenText
      - click:
          identifier: us.b2b.mappings.global.onboarding.notNowButton
          wait: 2000
      - log: location screen loaded                   
      - verifyIdentifier:
          present:
            - identifier: us.b2b.mappings.global.onboarding.locationScreenText
            - identifier: us.b2b.mappings.global.onboarding.locationScreenBody
      - click:
          identifier: us.b2b.mappings.global.onboarding.enterZipCodeButton
      - verifyIdentifier:
          present:
            - identifier: us.b2b.mappings.global.onboarding.shareZipCodeScreenText
      - enterText:
          identifier: us.b2b.mappings.global.onboarding.enterZipCodeField
          string: 95122
      - click:
          identifier: us.b2b.mappings.global.onboarding.searchButton  
      - sleep:
          duration: 3000  
      - if:
          identifier:
            present:
              - identifier: us.b2b.mappings.page.technicalError
          then:
            - failTest:
                message: "ENV_FAILURE Onboarding failure error"
      - verifyIdentifier:
          present:
            - identifier: us.b2b.mappings.global.onboarding.personalizedScreen
            - identifier : us.b2b.mappings.global.onboarding.personalizedScreenBody
      - click :
          identifier: us.b2b.mappings.global.onboarding.continueButton
      - click: 
          identifier: us.b2b.mappings.global.onboarding.askAppNotToTrackButton
          wait: 2000 
      - verifyIdentifier:
          present:
            - identifier: us.b2b.mappings.global.onboarding.homePageLogo
      - log:
          message: "Onboarding Completed"
          color: CYAN_BOLD

  - name: us.b2b.functions.global.authentication.signInAccount
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.b2b.mappings.global.authentication.emailField
      - enterText:
          identifier: us.b2b.mappings.global.authentication.emailField
          string: ${email}
          clickFirst: true
      - click:
          identifier: us.b2b.mappings.global.authentication.signIn.continueButton
          wait: 2000              
      - if:
          identifier:
            present:
              - identifier: us.b2b.mappings.global.authentication.signIn.verificationPasswordRadioButton
          then:
            - click:
                identifier: us.b2b.mappings.global.authentication.signIn.verificationPasswordRadioButton
      - verifyIdentifier:
          present:
            - identifier: us.b2b.mappings.global.authentication.passwordField
      - enterText:
          identifier: us.b2b.mappings.global.authentication.passwordField
          string: ${password}
      - click:
          identifier: us.b2b.mappings.global.authentication.signInButton
          wait: 2000                                      
      - sleep:
          duration: 2000
      - if:
          identifier:
            present:
             - identifier: us.b2b.mappings.global.authentication.passwordKeyChainAlertDon'tAllowButton
          then:
            - click:
                identifier: us.b2b.mappings.global.authentication.passwordKeyChainAlertDon'tAllowButton
      - log:
          message: "Login Succesful"
          color: RED_BOLD

