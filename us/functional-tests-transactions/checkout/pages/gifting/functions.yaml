functions:
  # NOTE Moved these functions to this new file as part of refactoring, functionality to be updated with latest
  # during unified test automation. Update to support both platforms
  - name: us.functions.checkout.reviewOrder.validateGiftingModule
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gifting.reviewOrder.giftDetailModuleTitle
      - if:
          condition: ${isOrderGift} != null && ${isOrderGift} == true
          then:
            - if:
                condition: ${hasDetailsSaved} != null && ${hasDetailsSaved} == true
                then:
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.functional.checkout.reviewOrder.gifting.isAGiftOrderText
                        - identifier: us.mappings.gifting.reviewOrder.addGiftDetailsButton
                        - identifier: us.mappings.functional.checkout.reviewOrder.gifting.recipientName
                  - verifyIdentifier:
                      value:
                        - identifier: us.mappings.functional.checkout.reviewOrder.gifting.recipientLabel
                        - identifier: us.mappings.functional.checkout.reviewOrder.gifting.recipientEmail
                          contains: ${recipientEmail}
                  - verifyIdentifier:
                      value:
                        - identifier: us.mappings.functional.checkout.reviewOrder.gifting.giftMessageLabel
                        - identifier: us.mappings.functional.checkout.reviewOrder.gifting.giftMessage
                          contains: ${giftMessage}
                else:
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.functional.checkout.reviewOrder.gifting.unsavedGiftOrderText
                        - identifier: us.mappings.gifting.reviewOrder.addGiftDetailsButton
          else:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.functional.checkout.reviewOrder.gifting.isNotAGiftOrderText
                  - identifier: us.mappings.gifting.reviewOrder.addGiftDetailsButton

  - name: us.functions.checkout.reviewOrder.saveGiftingDetails
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gifting.reviewOrder.addGiftDetailsButton
      - click:
          identifier: us.mappings.gifting.reviewOrder.addGiftDetailsButton
      - enterText:
          identifier: us.mappings.functional.checkout.reviewOrder.giftingDetails.recipientEmailTextField
          string: ${recipientEmail}
      - enterText:
          identifier: us.mappings.functional.checkout.reviewOrder.giftingDetails.senderNameTextField
          string: ${senderName}
      - enterText:
          identifier: us.mappings.functional.checkout.reviewOrder.giftingDetails.giftMessageTextField
          string: ${giftMessage}
      - click:
          identifier: Done
      - click:
          identifier: us.mappings.gifting.giftDetails.continueButton

  - name: us.functions.checkout.reviewOrder.toggleGift
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gifting.reviewOrder.addGiftDetailsButton
      - click:
          identifier: us.mappings.gifting.reviewOrder.addGiftDetailsButton
      - if:
          condition: ${isGift} == true
          then:
            - storeIn:
                key: toggleValue
                value: 1
          else:
            - storeIn:
                key: toggleValue
                value: 0
      - try:
          flow:
            - verifyValue:
                identifier: us.mappings.reviewOrder.registryEditGiftOrderCheckbox
                equals: ${toggleValue}
          catch:
            flow:
              - click:
                  identifier: us.mappings.reviewOrder.registryEditGiftOrderCheckbox
      - click:
          identifier: us.mappings.gifting.giftDetails.continueButton

  - name: us.functions.checkout.reviewOrder.validateThankYouGiftingModule
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gifting.reviewOrder.giftDetailModuleTitle
            - identifier: us.mappings.functional.checkout.reviewOrder.thankyou.gifting.giftOrderBodyText
            - identifier: us.mappings.functional.checkout.reviewOrder.gifting.recipientLabel
            - identifier: us.mappings.functional.checkout.reviewOrder.gifting.senderLabel
            - identifier: us.mappings.functional.checkout.reviewOrder.gifting.giftMessageLabel
            - identifier: us.mappings.functional.checkout.reviewOrder.gifting.recipientName
          value:
            - identifier: us.mappings.functional.checkout.reviewOrder.gifting.recipientEmail
              contains: ${recipientEmail}
            - identifier: us.mappings.functional.checkout.reviewOrder.gifting.giftMessage
              contains: ${giftMessage}