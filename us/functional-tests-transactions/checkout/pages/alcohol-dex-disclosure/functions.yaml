functions:
  - name: us.functions.functional.checkout.reviewOrder.validateAlcoholDisclosure
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclaimerPolicyHeader
            - identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclosureInfoIcon
            - identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclosureCheckbox
            - identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclosureDescription
      - executeFunction:
          name: us.functions.functional.checkout.reviewOrder.validateAlcoholDisclosureInfoDialog

  - name: us.functions.functional.checkout.reviewOrder.validateAlcoholDisclosureInfoDialog
    flow:
      - click:
          identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclosureInfoIcon
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclosureInfoDialog
      - click:
          identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclosureInfoDialogCloseButton

  - name: us.functions.functional.checkout.reviewOrder.validateAlcoholDisclosureErrorMessageAppears
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.functional.checkout.reviewOrder.alcoholDisclaimerErrorAlertMessage
            - name: direction
              string: up
            - name: limit
              string: 10
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclaimerErrorAlertMessage

  - name: us.functions.functional.checkout.reviewOrder.selectAlcoholDisclosureCheckbox
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclosureCheckbox
      - click:
          identifier: us.mappings.functional.checkout.reviewOrder.alcoholDisclosureCheckbox

  - name: us.functions.functional.checkout.reviewOrder.dex.validateAgeConsentForm
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.checkout.reviewOrder.dexDisclosureFormTitle
            - identifier: us.mappings.functional.checkout.reviewOrder.dexDisclosureFormDescriptionLabel
            - identifier: us.mappings.functional.checkout.reviewOrder.dexDisclosureFormBodyLabel
            - identifier: us.mappings.functional.checkout.reviewOrder.dexDisclosureCheckbox
          notPresent:
            - identifier: us.mappings.functional.checkout.reviewOrder.dexDisclosureCheckboxSelected

  - name:  us.functions.functional.checkout.reviewOrder.dex.validateNoDeliveryOptionsDisplayed
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.deliveryInstructionsSections
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.functional.checkout.reviewOrder.deliveryInstructionsView.attendedDeliveryType
            - identifier: us.mappings.functional.checkout.reviewOrder.deliveryInstructionsView.unattendedDeliveryType

  - name: us.functions.functional.checkout.revieworder.toggleDexConsentFormOn
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.functional.checkout.reviewOrder.dexDisclosureCheckbox
          then:
            - try:
                flow:
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.functional.checkout.reviewOrder.dexDisclosureCheckboxSelected
                  - log : dex disclosure checkbox already selected
                catch:
                  flow:
                    - click:
                        identifier: us.mappings.functional.checkout.reviewOrder.dexDisclosureCheckbox

  - name: us.functions.functional.checkout.reviewOrder.dex.validateErrorMessage
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.functional.checkout.reviewOrder.dexDisclosureFormTitle
            - name: direction
              string: down
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.checkout.reviewOrder.dexDisclaimerErrorAlertMessage