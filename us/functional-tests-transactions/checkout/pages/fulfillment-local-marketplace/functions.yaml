functions:
  - name: us.functions.functional.checkout.reviewOrder.validateDeliveryFromLocalStoreFulfillmentCard
    flow:
      - storeIn:
          key: viewType
          value: MPDelivery
      - executeFunction:
          name: us.functions.functional.checkout.reviewOrder.fulfillment.validateCardImageAndTitle
      - executeFunction:
          name: us.functions.functional.checkout.reviewOrder.validatePromiseDate
      - executeFunction:
          name: us.functions.functional.checkout.reviewOrder.lmpFulfillment.validateItemDetails

  - name: us.functions.functional.checkout.reviewOrder.lmpFulfillment.validateItemDetails
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.checkout.reviewOrder.lmp.itemDetailsSection
            - identifier: us.mappings.functional.checkout.reviewOrder.itemDetailsSection.lmp.viewButton

      - if:
          condition: ${fulfillmentItemCount} > 1
          then:
            - storeIn:
                key: fulfillmentItemCount
                value: ${fulfillmentItemCount} items
          else:
            - storeIn:
                key: fulfillmentItemCount
                value: ${fulfillmentItemCount} item
      - executeFunction:
          name: us.functions.functional.utils.validateElementValue
          params:
            - name: identifierToVerify
              string: us.mappings.functional.checkout.reviewOrder.itemDetailsSection.lmp.itemCount
            - name: identifierValueToVerify
              string: ${fulfillmentItemCount}
            - name: toVerifyContent
              string: "false"