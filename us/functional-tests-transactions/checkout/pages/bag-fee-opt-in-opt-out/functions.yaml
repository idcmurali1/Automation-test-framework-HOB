functions:
  # NOTE Moved these functions to this new file as part of refactoring, functionality to be updated with latest
  # during unified test automation. Update to support both platforms
  - name: us.functions.functional.checkout.reviewOrder.verifyNoBagFeeInPosForSkipBags
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeText
            - identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeRadioButton
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.bagOptInViewTitle
          then:
            - click:
                identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeRadioButton
          else:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.reviewOrder.sustainabilityPledge
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
            - click:
                identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeRadioButton
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineLeft
            - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineRight

  - name: us.functions.functional.checkout.reviewOrder.verifyOptOutOrOptInBagFeeInPOS
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.bagOptInViewTitle
          then:
            - click:
                identifier: us.mappings.functional.checkout.reviewOrder.bagPreferenceEditButtonLink
                wait: 1000
            - verifyIdentifier:
                present:
                  - identifier: ${bagPreferenceTextIdentifier}
                  - identifier: ${bagPreferenceRadioButtonIdentifier}
            - executeFunction:
                name: us.functions.functional.checkout.reviewOrder.verifySavedBagPreferenceRadioButtonForAcceptandSkipBag
      - executeFunction:
          name: us.functions.functional.checkout.reviewOrder.verifyBagsDetailsForAcceptandSkipBag

  - name: us.functions.functional.checkout.reviewOrder.verifySavedBagPreferenceOfOptInandOptOut
    flow:
      - verifyIdentifier:
          value:
            - identifier: us.mappings.reviewOrder.bagOptInViewTitle
              contains: ${savedBagPreferenceTitle}
            - identifier: us.mappings.functional.checkout.reviewOrder.bagOptInViewSubTitle
              contains: ${savedBagPreferenceSubTitle}
          present:
            - identifier: us.mappings.functional.checkout.reviewOrder.bagPreferenceEditButtonLink
      - verifyIdentifier:
          notPresent:
            - identifier: us.mappings.reviewOrder.verifyCheckoutAcceptBagFeeText
            - identifier: us.mappings.reviewOrder.verifyCheckoutAcceptBagFeeRadioButton
            - identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeText
            - identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeRadioButton
      - executeFunction:
          name: us.functions.functional.checkout.reviewOrder.scrollDownToPOS
      - if:
          condition: ${savedBagPreferenceTitle} == 'I want my items in bags'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineLeft
                  - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineRight
          else:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineLeft
                  - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineRight

  - name: us.functions.functional.checkout.reviewOrder.verifySavedBagPreferenceRadioButtonForAcceptandSkipBag
    flow:
      - if:
          condition: ${savedBagPreferenceTitle} == 'I want my items in bags'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reviewOrder.verifyCheckoutAcceptBagFeeText
                  - identifier: us.mappings.reviewOrder.verifyCheckoutAcceptBagFeeRadioButton
                value:
                  - identifier: us.mappings.reviewOrder.verifyCheckoutAcceptBagFeeRadioButton
                    contains: 1
          else:
            - if:
                condition: ${savedBagPreferenceTitle} == 'Iâ€™ll bring my own reusable bags'
                then:
                  - verifyIdentifier:
                      present:
                        - identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeRadioButton
                        - identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeText
                      value:
                        - identifier: us.mappings.reviewOrder.verifyCheckoutSkipBagFeeRadioButton
                          contains: 1

  - name: us.functions.functional.checkout.reviewOrder.verifyBagsDetailsForAcceptandSkipBag
    flow:
      - verifyIdentifier:
          present:
            - identifier: ${bagPreferenceTextIdentifier}
            - identifier: ${bagPreferenceRadioButtonIdentifier}
      - if:
          identifier:
            present:
              - identifier: us.mappings.reviewOrder.bagOptInViewTitle
          then:
            - click:
                identifier: ${bagPreferenceRadioButtonIdentifier}
          else:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.reviewOrder.sustainabilityPledge
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
            - click:
                identifier: ${bagPreferenceRadioButtonIdentifier}
            - sleep:
                duration: 3000
      - executeFunction:
          name: us.functions.functional.checkout.reviewOrder.scrollDownToPOS
      - if:
          condition: ${bagPreferenceText} == 'I want my items in bags'
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineLeft
                  - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineRight
          else:
            - verifyIdentifier:
                notPresent:
                  - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineLeft
                  - identifier: us.mappings.reviewOrder.verifyCheckoutPosAcceptBagFeeTextLineRight
