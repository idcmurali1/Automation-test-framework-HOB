functions:

  - name: us.functions.functional.cart.selectFulfillmentTab
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.cart.navBarTitle
      - if:
          identifier:
            label:
              - identifier: us.mappings.functional.cart.fulfillmentSwitchingBanner.header
                contains: Collapsed
          then:
            - click:
                identifier: us.mappings.functional.cart.fulfillmentSwitchingBanner.header
      # Shipping
      - if:
          condition: ${fulfillmentTab} == 'Shipping' || ${fulfillmentTab} == 'shipping'
          then:
            - click:
                identifier: us.mappings.functional.cart.fulfillmentSwitching.shippingTab
            - sleep:
                duration: 3000
      # Pickup
      - if:
          condition: ${fulfillmentTab} == 'Pickup' || ${fulfillmentTab} == 'pickup'
          then:
            - click:
                identifier: us.mappings.functional.cart.fulfillmentSwitching.pickupTab
            - sleep:
                duration: 3000
            # Bottomsheet popup for 3p pickup
            - executeFunction:
                name: us.functions.functional.cart.closeMultiSellerItemsUpdate
      # Delivery
      - if:
          condition: ${fulfillmentTab} == 'Delivery' || ${fulfillmentTab} == 'delivery'
          then:
            - click:
                identifier: us.mappings.functional.cart.fulfillmentSwitching.deliveryTab
            - sleep:
                duration: 3000

  - name: us.functions.functional.cart.closeMultiSellerItemsUpdate
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.functional.cart.multiSellerItemsUpdate.title
          then:
            - click:
                identifier: us.mappings.functional.cart.multiSellerItemsUpdate.gotIt

  - name: us.functions.functional.cart.mpPickupPopUp
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.cart.mpPickupPopUpTitle
          then:
            - click:
                identifier: us.mappings.functional.cart.bottomsheet.gotItButton