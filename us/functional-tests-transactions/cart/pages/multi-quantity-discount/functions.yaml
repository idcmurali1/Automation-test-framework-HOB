functions:

  - name: us.functions.functional.cart.validateMQDFlow
    flow:
      - executeFunction:
          name: us.functions.functional.cart.validateMQDView

      - sleep:
          duration: 1000

      - click:
          identifier: us.mappings.functional.cart.MQD.icon

      - executeFunction:
          name: us.functions.functional.cart.validateMQDInfoIconView
          params:
            - name: mqdInfoDescription
              string: This offer is valid when placing a minimum of 2 qualifying units and up to 5 redemptions in total, unless otherwise noted. Offer is not transferable, may not be combined with other offers and is void where prohibited by law. Offer may be modified, cancelled or terminated at any time without notice. Customer is responsible for all applicable taxes. No cash value.

      - executeFunction:
          name: us.functions.functional.cart.validateAndUpdateQuantity
          params:
            - name: numberOfDifferentItems
              string: 1

      - sleep:
          duration: 1000

      - executeFunction:
          name: us.functions.functional.cart.validateSavingsAppliedSection
          params:
            - name: numberOfDifferentItems
              string: 1

      - sleep:
          duration: 1000

      - executeFunction:
          name: unified.us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.functional.cart.savingsValueText
            - name: direction
              string: down
            - name: scrollPosition
              string: center

      - executeFunction:
          name: us.functions.functional.cart.validateTotalPriceSection

  - name: us.functions.functional.cart.validateMQDView
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.cart.MQD.title
            - identifier: us.mappings.functional.cart.MQD.link
            - identifier: us.mappings.functional.cart.MQD.icon

  - name: us.functions.functional.cart.validateMQDInfoIconView
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.cart.MQDInfo.header
            - identifier: us.mappings.functional.closeImageView
            - identifier: us.mappings.functional.cart.MQDInfo.title
            - identifier: us.mappings.functional.cart.MQDInfo.description

      - click:
          identifier: us.mappings.functional.closeImageView

  - name: us.functions.functional.cart.validateAndUpdateQuantity
    flow:
      - arithmetic:
          expression: ${numberOfDifferentItems} + 1
          storeIn: endIndex
      - loop:
          begin: 1
          end: ${endIndex}
          mode: increment
          storeIndex: i
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.functional.cart.quantityText.decrease
                  - identifier: us.mappings.functional.cart.quantityText.initialQuantityValue
                  - identifier: us.mappings.functional.cart.quantityText.increase
      - loop:
          begin: 1
          end: ${mqdQuantityValue}
          mode: increment
          storeIndex: i
          flow:
              - click:
                  identifier: us.mappings.functional.cart.quantityText.increase
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.cart.quantityText.mqdQuantityValue

  - name: us.functions.functional.cart.validateSavingsAppliedSection
    flow:
      - arithmetic:
          expression: ${numberOfDifferentItems} + 1
          storeIn: endIndex
      - loop:
          begin: 1
          end: ${endIndex}
          mode: increment
          storeIndex: i
          flow:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.functional.cart.itemNewPrice
                  - identifier: us.mappings.functional.cart.itemOldPrice
                  - identifier: us.mappings.functional.cart.youSaveText
                  - identifier: us.mappings.functional.cart.savedPrice
                  - identifier: us.mappings.functional.cart.savingsAppliedText
                  - identifier: us.mappings.functional.cart.MQDInfo.icon

  - name: us.functions.functional.cart.validateTotalPriceSection
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.functional.cart.subtotalMqdQuantityValueItemsText
            - identifier: us.mappings.functional.cart.savingsText
            - identifier: us.mappings.functional.cart.savingsValueText