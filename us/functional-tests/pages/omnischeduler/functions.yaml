functions:
  - name: us.functions.omniScheduler.schedulingService.tireInstallationOption
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.acc.tireInstallationOption.pageTitle   
            - identifier: us.mappings.services.acc.scheduleService.serviceSelection.stepper
            - identifier: us.mappings.services.acc.tireInstallationOption.pageSubTitle  
            - identifier: us.mappings.services.acc.tireInstallationOption.yesNeedToBuyTiresOption
            - identifier: us.mappings.services.acc.tireInstallationOption.noIHaveTiresOption
      - if:
          condition: ${service} == 'TireInstallation'
          then:
          - click:
              identifier: us.mappings.services.acc.tireInstallationOption.yesNeedToBuyTiresOption
          else:
            - click:
                identifier: us.mappings.services.acc.tireInstallationOption.noIHaveTiresOption
      - click: 
                identifier: us.mappings.returns.continueButton
      - sleep:
              duration: 2000
    
  - name: us.functions.omniScheduler.schedulingService.reviewConfirmation
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.services.acc.scheduleServiceReview.pageTitle
            - identifier: us.mappings.services.acc.scheduleService.review.stepper
            - identifier: us.mappings.services.acc.scheduleService.vehicleDetails
            - identifier: us.mappings.services.acc.scheduleService.appointmentDetails
            - identifier: us.mappings.services.acc.scheduleService.dateAndTime
            - identifier: us.mappings.services.acc.scheduleService.location
            - identifier: us.mappings.services.acc.scheduleService.contactInformation

  - name: us.functions.omniScheduler.schedulingService.anchorItem
    platform: ios
    flow:
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.omnischeduler.anchorItem.pageTitle
            - identifier: us.mappings.omnischeduler.anchorItem.pageHeader
            - identifier: us.mappings.omnischeduler.anchorItem.pageSubHeader
      - click:
          identifier: us.mappings.omnischeduler.anchorItem.selectTire
      - click:
          identifier: us.mappings.returns.continueButton
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.omnischeduler.anchorItem.buyNowBottomSheetHeader
            - identifier: us.mappings.omnischeduler.anchorItem.buyNowPlaceOrderButton

  - name: us.functions.omniScheduler.schedulingService.anchorItem
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.omnischeduler.anchorItem.pageTitle
            - identifier: us.mappings.omnischeduler.anchorItem.pageHeader
            - identifier: us.mappings.omnischeduler.anchorItem.pageSubHeader
      - click:
          identifier: us.mappings.omnischeduler.anchorItem.selectTire
      - click:
          identifier: us.mappings.returns.continueButton
      - sleep:
          duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.omnischeduler.anchorItem.buyNowBottomSheetHeader
            - identifier: us.mappings.omnischeduler.anchorItem.buyNowPlaceOrderButton

  - name: us.functions.omniScheduler.schedulingService.reviewConfirmation
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 30000
          present:
            - identifier: us.mappings.services.acc.scheduleServiceReview.pageTitle
            - identifier: us.mappings.services.acc.scheduleService.review.stepper
            - identifier: us.mappings.services.acc.scheduleService.vehicleDetails
            - identifier: us.mappings.services.acc.scheduleService.appointmentDetails
            - identifier: us.mappings.services.acc.scheduleService.dateAndTime
            - identifier: us.mappings.services.acc.scheduleService.location
            - identifier: us.mappings.services.acc.scheduleService.contactInformation

  - name: us.functions.omniScheduler.acc.scheduleAutoService
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.acc.scheduler.schedulerScreenTitle
          then:
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.services.acc.scheduler.schedulerScreenTitle
            - sleep:
                duration: 7000
            - executeFunction:
                name: us.functions.slotDataSetUp
            - sleep:
                duration: 3000
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.reviewOrder.accNearByStore
                then:
                  - log: There are no upcoming appointments available at store.
                  - click:
                      identifier: us.mappings.reserveSlot.pickup.changeStoreLink
                  - sleep:
                      duration: 3000
                  # Validate and enter store number in input field
                  - executeFunction:
                      name: us.function.services.acc.selectStoreTextField
                      params:
                        - name: storeId
                          string: 94539
                  - sleep:
                      duration: 7000
                  - executeFunction:
                      name: us.function.services.acc.storeSelectorAccessPointsRecyclerView
                  - click:
                      identifier: us.mappings.reserveSlot.selectStore.saveButton
                  - sleep:
                      duration: 3000
            - if:
                identifier:
                  notPresent:
                    - identifier: us.mappings.reserveSlot.timeSlot
                then:
                  - executeFunction:
                      name: us.functions.selectDayForSlotDisplay
                      params:
                        - name: slotDay
                          string: 'tomorrow'
            - click:
                identifier: us.mappings.reserveSlot.timeSlot
            - if:
                identifier:
                  present:
                    - identifier: us.mappings.reserveSlot.continueButton
                then:
                  - click:
                      identifier: us.mappings.reserveSlot.continueButton

  - name: us.function.omniScheduler.acc.selectStoreTextField
    platform: ios
    flow:
      - if:
         identifier:
            present:
             - identifier: us.mappings.home.zipcodeClearButton
         then:
          - click:
              identifier: us.mappings.home.zipcodeClearButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.selectStoreTextField
      - enterText:
          identifier: us.mappings.home.selectStoreTextField
          clearField: true
          string: ${zipcode}
          pressEnter: true
      - click:
           identifier: us.mappings.home.storeRadioButton
      - click: 
          identifier: us.mappings.gic.selectStore.save.button # us.mappings.home.selectStoreSaveButton
      - storeIn:
          key: errorHandle
          value: false

  - name: us.functions.omniScheduler.services.navigateToServices
    platform: android
    flow:
      - storeIn:
          key: executionStage
          value: Pre-transactions
      - sleep:
          duration: 5000
      - if:
          identifier:
            notPresent:
              - identifier: us.mappings.services.storeToolsName
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.services.storeToolsName
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - try:
          flow:
            - if:
                identifier:
                  notPresent:
                    - identifier: us.mappings.services.storeToolsName
                then:
                  - scroll:
                      direction: down
            - sleep:
                duration: 2000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.services.storeToolsName
            - click:
                identifier: us.mappings.services.storeToolsName
          catch:
            flow:
              - failTest:
                  message: FAILURE - ${env} - Store Tool Service - ${servicesName} is not displayed
      - sleep:
          duration: 5000
