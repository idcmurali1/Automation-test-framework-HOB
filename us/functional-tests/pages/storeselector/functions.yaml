functions:

  - name: us.functions.functional.storeSelector.selectStore
    flow:
      - click:
          wait: 3000
          identifier: us.mappings.functional.storeSelector.selectStore
      - log: Selected Store with index ${storeIndex}

  - name: us.functions.functional.storeSelector.changeToAnotherStore
    flow:
      - log: Selecting another store with address different from ${initialStoreAddress}
      - verifyIdentifier:
          present:
            - identifier: us.mappings.gic.selectStore.headerText

      # Store the first store address
      - getString:
          identifier: us.mappings.functional.storeSelector.selectStore.firstStoreAddress
          storeIn: firstStoreAddress
      - log: "First store address: ${firstStoreAddress}"

      - executeNode:
          file: us/functional-tests/helpers/compareStringsIgnoreCase.js
          args:
            - value: ${initialStoreAddress}
            - value: ${firstStoreAddress}
          getResponse:
            storeIn: storeAddressMatch
      - log: "First store match: ${storeAddressMatch}"

      # Check store match
      - if:
          condition: ${storeAddressMatch}
          then:
            - log: "Store is the same. Select another store."
            - executeFunction:
                name: us.functions.functional.storeSelector.selectStore
                params:
                  - name: storeIndex
                    string: 2
          else:
            - log: "Store is different. Select first store."
            - executeFunction:
                name: us.functions.functional.storeSelector.selectStore
                params:
                  - name: storeIndex
                    string: 1
      - sleep:
          duration: 3000

      - click:
          identifier: us.mappings.reserveSlot.selectStore.saveButton
      - log: "Another store selected"
