###################### IOS ##################

# iOS OnePay Debit card deep link
# walmart://wallet/signUpOnePay
# walmart://onedebitcard/landing?utm_content=test

functions:

  # Naviagte to wallet onepay
  - name: us.functions.dfs.navigateToWalletDeepLink
    platform: ios
    flow: 
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://wallet/signUpOnePay

  # Navigate to Deeplink onepay debit dfs view
  - name: us.functions.dfs.navigateToOneDebitView
    platform: ios
    flow:
     - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://onedebitcard/landing?utm_content=test  
     - log: "One DFS landing page launched"
     - sleep:
          duration: 5000  
     - scroll:
          direction: down
          untilIdentifier: us.mappings.dfs.footnote3Text
          position: center
     - scroll:
          direction: up
     - verifyIdentifier:
          present:
            - identifier: us.mappings.dfs.oneHeaderText
            - identifier: us.mappings.dfs.oneCardImage
            - identifier: us.mappings.dfs.benefitText 
            - identifier: us.mappings.dfs.benefit1Line1Text  
            - identifier: us.mappings.dfs.benefit1Line2Text
            - identifier: us.mappings.dfs.aboutOnepayText  
            - identifier: us.mappings.dfs.footnote1Text  
            - identifier: us.mappings.dfs.footnote2Text  
            - identifier: us.mappings.dfs.footnote3Text 
     - log: "verified identifier"
     - sleep:
          duration: 3000

  # Get started flow
  - name: us.functions.dfs.clickStarted
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.dfs.getStartedButton 
          then:              
              - click:
                  identifier: us.mappings.dfs.getStartedButton
              - sleep:
                 duration: 10000
              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.dfs.learnmore
                  then:
                    - click:
                        identifier: us.mappings.dfs.learnmore
                    - sleep:
                        duration: 5000
                    - if:
                        identifier:
                          present:
                            - identifier: Done
                        then:
                          - click:
                              identifier: Done
                          - sleep:
                              duration: 5000

  # action on enter manually clcik
  - name: us.functions.dfs.enterInfoManually
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.dfs.enterInfoButton 
          then:              
              - click:
                  identifier: us.mappings.dfs.enterInfoButton
              - sleep:
                 duration: 10000
              - if:
                  identifier:
                    present:
                      - identifier: us.mappings.dfs.learnmore
                  then:
                    - click:
                        identifier: us.mappings.dfs.learnmore
                    - sleep:
                        duration: 5000
                    - if:
                        identifier:
                          present:
                            - identifier: Done
                        then:
                          - click:
                              identifier: Done
                          - sleep:
                              duration: 5000

    # verify links   
  - name: us.functions.dfs.verifyLinksSigninUser
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.dfs.userTermsPrivacyText
            - identifier: us.mappings.dfs.disclaimerText 
      - log: "verified identifier"
      - sleep:
          duration: 3000


###################### ANDROID ##################

  - name: us.functions.dfs.navigateToWalletDeepLink
    platform: android
    flow:
     - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://wallet

  - name: us.functions.dfs.navigateToWalletOnePaySignup
    platform: android
    flow:
     - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://wallet/signUpOnePay

  - name: us.functions.dfs.navigateToOneDebitSignup
    platform: android
    flow:
     - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://onedebitcard/landing?utm_content=test