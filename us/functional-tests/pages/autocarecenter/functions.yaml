functions:
  - name: us.functions.services.acc.naviagteToServicesFromTabBar
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.global.navigation.goToServicesFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.services.storeToolsName
            - name: direction
              string: down
            - name: scrollPosition
              string: center         
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.storeToolsName
          then:
            - click:
                identifier: us.mappings.services.storeToolsName
            - sleep:
                duration: 3000
            - if: 
                identifier:
                  present:
                    - identifier: us.mappings.page.technicalError
                then:
                  - failTest:
                      message: ENV_FAILURE - ${env} - Service page - ${servicesName} did not load
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - Store Tool Service ${servicesName} is not available

  - name: us.function.services.acc.clickAddServices
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.services.autoCareCenter.accAddServices
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - click:
          identifier: us.mappings.services.autoCareCenter.accAddServices

  - name: us.function.services.acc.handleCameraPermission
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.scanner.verifyWouldYouLikeToAccessCameraMessage
              - identifier: us.mappings.scanner.WouldYouLikeToAccessCameraOkButton
          then:
            - click:
                identifier: us.mappings.scanner.WouldYouLikeToAccessCameraOkButton
                wait: 1000

  - name: us.function.services.acc.clickTrackYourService
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.services.acc.trackYourService
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - click:
          identifier: us.mappings.services.acc.trackYourService

  - name: us.function.services.acc.clickDetailsButton
    platform: android
    flow:
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.inHome.storeSelector.details
            - name: direction
              string: down
            - name: scrollPosition
              string: center
      - click:
          identifier: us.mappings.inHome.storeSelector.details

  - name: us.function.services.acc.clickSaveButton
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.inHome.bookSlot.clickSaveButton
      - click:
          identifier: us.mappings.inHome.bookSlot.clickSaveButton

  - name: us.function.services.acc.storeSelectorAccessPointsRecyclerView
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.autoCareCenter.storeSelectorAccessPointsRecyclerView
            - identifier: us.mappings.reserveSlot.selectStore.storeSelectorAccessPointsRecyclerView1
      - click:
          identifier: us.mappings.reserveSlot.selectStore.storeSelectorAccessPointsRecyclerView1

  - name: us.function.services.acc.selectStoreTextField
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.home.selectStoreTextField
      - enterText:
          identifier: us.mappings.home.selectStoreTextField
          clearField: true
          string: ${storeId}
          pressEnter: true

  - name: us.function.services.acc.findAnAutoCareCenter
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.autoCareCenter.findAnAutoCareCenter
      - click:
          identifier: us.mappings.services.autoCareCenter.findAnAutoCareCenter

  - name: us.function.services.acc.serviceRecyclerView
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.servicePopularServices.serviceRecyclerView
            - identifier: us.mappings.services.servicePopularServices.serviceRecyclerView.carouselItemTile1
      - click:
          identifier: us.mappings.services.servicePopularServices.serviceRecyclerView.carouselItemTile1

  - name: us.function.services.typeYourBarcode.clickSearch
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.autoCareCenter.accSearchBarcode
      - click:
          identifier: us.mappings.services.autoCareCenter.accSearchBarcode

  - name: us.function.services.acc.handleLocationPermission
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.checkin.locationAccessPopup
            - identifier: us.mappings.services.typeYourBarcode.continueButton

      - click:
          identifier: us.mappings.services.typeYourBarcode.continueButton

      - if:
          identifier:
            present:
              - identifier: ca.mappings.onboarding.shareLocation.allowPreciseLcoation
          then:
            - click:
                identifier: ca.mappings.onboarding.shareLocation.allowPreciseLcoation

      - if:
          identifier:
            present:
              - identifier: ca.mappings.global.onboarding.allowWhileUsingAppButton
          then:
            - click:
                identifier: ca.mappings.global.onboarding.allowWhileUsingAppButton

  - name: us.function.services.typeYourBarcode.enterBarcodeTextField
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.autoCareCenter.accTypeYourBarcode
      - click:
          identifier: us.mappings.services.autoCareCenter.accTypeYourBarcode

      - sleep:
          duration: 7000
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.typeYourBarcode.enterBarcodeTextField
      - enterText:
          identifier: us.mappings.services.typeYourBarcode.enterBarcodeTextField
          string: ${barcode}

  - name: us.functions.services.acc.changeStore
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.typeYourBarcode.changeStore
          then:
            - storeIn:
                key: storeChange
                value: true

  - name: us.functions.services.acc.clickChangeStore
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.typeYourBarcode.changeStore
          then:
            - click:
                identifier: us.mappings.services.typeYourBarcode.changeStore
  
  - name: us.functions.services.acc.gotoVirtualGarage
    platform: android
    flow:
      - sleep:
          duration: 3000
      - executeFunction:
          name: us.functions.services.handleJoinOnePopup
      - if:
          identifier:
            notPresent:
              - identifier: us.mapping.acc.android.virtualGarage
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mapping.acc.android.virtualGarage
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.android.virtualGarage
          then:
            - click:
                identifier: us.mapping.acc.android.virtualGarage
            - sleep:
                duration: 3000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - virtual garage is not present
  
  - name: us.functions.services.acc.virtualGarage.addVehicle
    platform: android
    flow:
      - sleep:
          duration : 2000
      - click:
          identifier: us.mappings.acc.android.virtualGarage.addVehicleButton     
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.fitment.addFitmentDetailsPageTitle
      - click:
          identifier:  us.mappings.search.fitment.selectYeardropdown
      - click:
          identifier:  us.mappings.search.fitment.year
      - click:
          identifier:  us.mappings.search.fitment.selectMakedropdown
          wait: 3000
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.search.fitment.make
            - name: direction
              string: down             
      - click:
          identifier:  us.mappings.search.fitment.make 
      - click:
          identifier:  us.mappings.search.fitment.selectModeldropdown
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.search.fitment.model
            - name: direction
              string: down    
      - click:
          identifier:  us.mappings.search.fitment.model
      - click:
          identifier:  us.mappings.search.fitment.selectSubmodeldropdown
      - click:
          identifier:  us.mappings.search.fitment.submodel
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.search.fitment.viewResultButton
            - name: direction
              string: down
      - sleep:
          duration: 5000 
      - click:
          identifier:  us.mappings.search.fitment.viewResultButton
      - sleep:
          duration: 5000 
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.acc.virtualgarage.successMessage
          then:
            - click:
                identifier: us.mappings.services.acc.virtualgarage.successMessageGotItButton
      - sleep:
         duration: 1000 

  - name: us.functions.services.acc.virtualGarageUpdateVehicle
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.acc.virtualgarage.carAdded
          then:
            - click:
                identifier: us.mappings.services.acc.virtualgarage.vehicleDetailsButton
            - click:
                identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.editVehicleInformation
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mappings.acc.android.virtualGarage.engineBaseDropdown
                  - name: direction
                    string: down   
            - click:
                identifier: us.mappings.acc.android.virtualGarage.engineBaseDropdown
            - sleep:
                duration: 1000 
            - click:
                identifier: us.mappings.acc.android.virtualGarage.engineBase
            - sleep:
                duration: 1000 
            - click:
                identifier:  us.mappings.search.fitment.viewResultButton
            - click:
                    identifier: us.mappings.backButton

  - name: us.functions.services.acc.virtualGarageViewAndRemoveVehicle
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.acc.virtualgarage.carAdded
          then:
            - log: "Vehicle is Present, removing the Car"
            - click:
                identifier: us.mappings.services.acc.virtualgarage.vehicleDetailsButton
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.titleName
                  - identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.editVehicleInformation
            - click:
                identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.editVehicleInformation
            - sleep:
                duration : 2000
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.removeVehicle
            - click:
                identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.removeVehicle
            - click:
                identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.removeVehicleButton
          else:
            - log: "No car is added, Adding car now"
      - click:
          identifier: us.mappings.backButton
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.acc.virtualgarage
            
  - name: us.functions.services.acc.navigateToAccHome
    platform: ios
    flow:
      - sleep:
          duration: 1000
      - executeFunction:
          name: us.functions.global.navigation.goToServicesFromTabBar
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mapping.acc.ios.service.name
            - name: direction
              string: down
            - name: scrollPosition
              string: center         
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.service.name
          then:
            - click:
                identifier: us.mapping.acc.ios.service.name
            - sleep:
                duration: 1000
            - if: 
                identifier:
                  present:
                    - identifier: us.mappings.page.technicalError
                then:
                  - failTest:
                      message: ENV_FAILURE - ${env} - Service page - ${servicesName} did not load
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - Auto Care Center ${servicesName} is not available

  - name: us.functions.services.acc.selectStore
    platform: ios
    flow:
      - sleep:
          duration: 1000
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.noStoreSelectedButton
          then:
            - click:
                identifier: us.mapping.acc.ios.noStoreSelectedButton
            - sleep:
                duration: 1500
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - no store selected button not available
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.zipCodeField
          then:
            - click:
               identifier: us.mapping.acc.ios.zipCodeField
            - if:
                identifier:
                 present:
                   - identifier: us.mapping.acc.ios.store.zipCodeField.clearButton
                then:
                 - click:
                    identifier: us.mapping.acc.ios.store.zipCodeField.clearButton
            - enterText:
                identifier: us.mapping.acc.ios.zipCodeField
                string: ${zip}
                pressEnter: true
            - sleep:
                duration: 1500
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - Auto Care Center ${zip} is not available
      - if:
          identifier:
            present:
              - identifier: us.mappings.home.storeRadioButton
          then:
            - click:
                identifier: us.mappings.home.storeRadioButton
            - sleep:
                duration: 1500
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - Auto Care Center radial is not available
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.saveStoreButton
          then:
            - click:
                identifier: us.mapping.acc.ios.saveStoreButton
            - sleep:
                duration: 1500
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - save store button is not available

  - name: us.functions.services.acc.selectStore
    platform: android
    flow:
      - sleep:
          duration: 1000
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.acc.noStoreSetFindAccBtn
          then:
            - click:
                identifier: us.mappings.services.acc.noStoreSetFindAccBtn
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - no store selected button not available
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.acc.EditText
          then:
            - enterText:
                identifier: us.mappings.services.acc.EditText
                string: ${zip}
                pressEnter: true
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - Auto Care Center ${zip} is not available
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.acc.storeName
          then:
            - click:
                identifier: us.mappings.services.acc.storeName
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - Auto Care Center radial is not available
      - if:
          identifier:
            present:
              - identifier: us.mappings.services.acc.storeSaveBtn
          then:
            - click:
                identifier: us.mappings.services.acc.storeSaveBtn
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - save store button is not available

  - name: us.functions.services.acc.checkSpecificVehicleWarranties
    platform: android
    flow: 
      - if:
          identifier:
            present:
              - identifier: ${warrantyVehicle}
          then:
            - log: "Vehicle is Present, check the warranties"
            - click:
                identifier: ${warrantyVehicle}
            - verifyIdentifier:
                present:
                  - identifier: ${warrantyVehicle}
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string:  us.mappings.services.acc.warrantyDetail
                  - name: direction
                    string: down  
            - click:
                identifier: us.mappings.services.acc.warrantyDetail
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.services.acc.warrantyDate
                  - identifier: us.mappings.services.acc.warrantyItemName
                  - identifier: us.mappings.services.acc.warrantyItemDescription
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string:  us.mappings.acc.android.virtualGarage.warrantyViewDetailButton
                  - name: direction
                    string: down 
            - click:
                identifier: us.mappings.acc.android.virtualGarage.warrantyViewDetailButton
            - verifyIdentifier:
                present:
                  - identifier: us.mappings.services.acc.warrantyItemProductName
                  - identifier: us.mappings.services.acc.warrantyWarrantyInformation
            - click:
                    identifier: us.mappings.backButton
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - vehicle is not present

  - name: us.functions.services.acc.gotoVirtualGarage
    platform: ios 
    flow:
      - sleep:
          duration: 1000
      - executeFunction:
          name: us.functions.services.handleJoinOnePopup
      - if:
          identifier:
            notPresent:
              - identifier: us.mapping.acc.ios.virtualGarage
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mapping.acc.ios.virtualGarage
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.virtualGarage
          then:
            - click:
                identifier: us.mapping.acc.ios.virtualGarage
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - virtual garage is not present

  - name: us.functions.services.acc.selectVehicleWithServiceReminder
    platform: ios 
    flow:
      - sleep:
          duration: 1000
      - if:
          identifier:
            notPresent:
              - identifier: us.mapping.acc.ios.virtualGarage
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mapping.acc.ios.servicereminder.vehicle
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.servicereminder.vehicle
          then:
            - click:
                identifier: us.mapping.acc.ios.servicereminder.vehicle
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: Not able to find a vehicle with service reminder

  - name: us.functions.services.acc.virtualGarage.addVehicle
    platform: ios
    flow:
      - sleep:
          duration : 500
      - click:
          identifier: us.mappings.acc.ios.virtualGarage.addVehicleButton     
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.fitment.addFitmentDetailsPageTitle
      - click:
          identifier:  us.mappings.search.fitment.selectYeardropdown
      - sleep:  
          duration: 500
      - enterText:
          identifier: us.mappings.search.fitment.pickerWheel 
          string: ${year}  
      - click:
          identifier: done  
      - click:
          identifier:  us.mappings.search.fitment.selectMakedropdown
          wait: 500
      - enterText:
          identifier: us.mappings.search.fitment.pickerWheel 
          string: ${make}
      - click:
          identifier: done 
      - click:
          identifier:  us.mappings.search.fitment.selectModeldropdown
          wait: 500
      - enterText:
          identifier: us.mappings.search.fitment.pickerWheel 
          string: ${model} 
      - click:
          identifier: done 
      - click:
          identifier:  us.mappings.search.fitment.selectSubmodeldropdown
          wait: 500
      - enterText:
          identifier: us.mappings.search.fitment.pickerWheel 
          string: ${submodel} 
      - click:
          identifier: done
      - click:
          identifier: us.mappings.acc.ios.virtualGarage.engineBaseDropdown
      - enterText:
          identifier: us.mappings.search.fitment.pickerWheel 
          string: ${engineBase} 
      - click:
          identifier: done
      - executeFunction:
          name: unified.us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.search.fitment.viewResultButton
            - name: direction
              string: down
      - click:
          identifier:  us.mappings.search.fitment.viewResultButton           
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.acc.virtualgarage.successMessage
      - sleep:
         duration: 1000 

  - name: us.functions.services.acc.virtualGarage.readVehicle
    platform: ios
    flow: 
      - verifyIdentifier:
          present:
            - identifier: us.mapping.acc.ios.virtualGarage
            - identifier: us.mapping.acc.ios.virtualGarage.vehicleRow
      - log: "Vehicle added successfully"

  - name: us.functions.services.acc.virtualGarage.updateVehicle
    platform: ios
    flow: 
      - click:
          identifier: us.mapping.acc.ios.virtualGarage.vehicleRow
          wait: 500
      - click:
          identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.editVehicleInformation
          wait: 500
      - executeFunction:
          name: us.functions.utils.scrollIfNotVisible
          params:
            - name: identifier
              string: us.mappings.acc.ios.virtualGarage.engineBaseDropdown
            - name: direction
              string: down   
      - click:
          identifier: us.mappings.acc.ios.virtualGarage.engineBaseDropdown
      - enterText:
          identifier: us.mappings.search.fitment.pickerWheel 
          string: ${engineBase}
      - click:
          identifier: done
      - sleep:
          duration: 1000 
      - click:
          identifier:  us.mapping.acc.ios.saveVehicleButton
      - log: "Vehicle updated"


  - name: us.functions.services.acc.virtualGarage.deleteVehicle
    platform: ios 
    flow: 
      - click:
          identifier: us.mappings.services.acc.virtualgarage.vehicleDetails.editVehicleInformation
      - click:
          identifier: us.mapping.acc.ios.removeVehicleLink
      - sleep:
          duration: 1000 
      - click:
          identifier: us.mapping.acc.ios.removeVehicleButton
      - verifyIdentifier:
          present:
            - identifier: us.mapping.acc.ios.virtualGarage

  - name: us.functions.services.acc.goBack
    platform: ios 
    flow:
      - click:
          identifier: us.mappings.backButton
      - sleep:
          duration: 1500

  - name: us.functions.services.acc.addOns.verifyBanner
    platform: ios
    flow: 
      - scroll:
          direction: down
          untilIdentifier: us.mapping.acc.ios.addOns.banner
          position: center
          timeout: 30000
          wait: 1000
      - verifyIdentifier:
          present:
            - identifier: us.mapping.acc.ios.addOns.banner
      - log: AddOns Banner is Present 

  - name: us.functions.services.acc.trackService
    platform: ios 
    flow:
      - sleep:
          duration: 1000
      - if:
          identifier:
            notPresent:
              - identifier: us.mapping.acc.ios.trackService
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mapping.acc.ios.trackService
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.trackService
          then:
            - click:
                identifier: us.mapping.acc.ios.trackService
            - sleep:
                duration: 3000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - track service is not present
      - click:
          identifier: us.mappings.scanner.typeYourBarcodeButton
      - enterText:
          identifier: us.mappings.scanner.typeYourBarcode.enterBarcodeTextField 
          string: ${serviceTag}
      - sleep:
          duration: 1000 
      - click:
          identifier:  us.mappings.scanner.typeYourBarcode.searchButton
      - sleep:
          duration: 1000 
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.addOns.header
          then:
            - click:
                identifier: us.mapping.acc.ios.addOns.close
            - sleep:
                duration: 3000
      - verifyIdentifier:
          present:
            - identifier: us.mapping.acc.ios.serviceTracker
            - identifier: us.mapping.acc.ios.serviceTracker.checkedIn
      - log: "Service tracked"


  - name: us.functions.services.acc.customerLinking
    platform: android
    flow:
      - executeFunction:
          name: us.function.services.acc.clickTrackYourService
      - executeFunction:
          name: us.functions.scanner.allowWouldYouLikeToAccessYourCameraOption
      - executeFunction:
          name: us.functions.scanner.allowLocation
      - executeFunction:
          name: us.functions.scanner.verifyAndEnterBarcodetext
      - sleep:
         duration: 1000 
      - executeFunction:
          name: us.functions.services.acc.handleAddosAutoPop
      - verifyIdentifier:
          present:
            - identifier: us.mappings.services.acc.customerLinkingConfirmYourInfo
            - identifier: us.mappings.services.acc.customerLinkingCustomerName
            - identifier: us.mappings.services.acc.customerLinkingCustomerPhoneNumber
            - identifier: us.mappings.services.acc.customerLinkingVehicle
      - click:
          identifier: us.mappings.services.acc.customerLinkingNotMyAccountBtn
      - sleep:
         duration: 1000 
      - executeFunction:
          name: us.functions.services.acc.handleAddosAutoPop
      - executeFunction:
          name: us.functions.scanner.allowLocation
      - click:
          identifier: us.mappings.backButton
      - sleep:
         duration: 1000 
      - executeFunction:
          name: us.function.services.acc.clickTrackYourService
      - executeFunction:
          name: us.functions.scanner.verifyAndEnterBarcodetext
      - sleep:
         duration: 1000 
      - click:
          identifier: us.mappings.services.acc.customerLinkingYesThisIsMyAccount
      - sleep:
         duration: 500
      

        
  - name: us.functions.services.acc.handleAddosAutoPop
    platform: android
    flow:
      - sleep:
          duration: 1000
      - if:
          identifier:
            timeout: 40000
            present:
              - identifier: us.mappings.services.acc.getMoreDoneForYourCar
          then:
            - click:
                identifier: us.mappings.services.closeButton
            - sleep:
                duration: 1000

  - name: us.functions.services.acc.addOns.addServices
    platform: ios
    flow: 
      - scroll:
          direction: down
          untilIdentifier: us.mapping.acc.ios.addOns.banner
          position: center
          timeout: 30000
      - verifyIdentifier:
          present:
            - identifier: us.mapping.acc.ios.addOns.banner
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.addOns.addServicesButton
          then:
            - click:
                identifier: us.mapping.acc.ios.addOns.addServicesButton
            - sleep:
                duration: 1000
      - log: AddOns Servics List Displayed

  - name: us.functions.services.acc.addOns.selectService
    platform: ios
    flow: 
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.addOns.engineAirFilter
          then:
            - click:
                identifier: us.mapping.acc.ios.addOns.engineAirFilter
      - executeFunction:
          name: us.functions.services.acc.addOns.addToYourExisitingService     
      - log: AddOns Servics Added

  - name: us.functions.services.acc.addOns.addToYourExisitingService
    platform: ios
    flow: 
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.addOns.addToYourExisitingService
          then:
            - click:
                identifier: us.mapping.acc.ios.addOns.addToYourExisitingService
      - log: Navigate to AddOns Confirmation Page

  - name: us.functions.services.acc.addOns.backToServiceTracker
    platform: ios
    flow: 
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.addOns.backToServiceTracker.button
          then:
            - click:
                identifier: us.mapping.acc.ios.addOns.backToServiceTracker.button
      - log: Back to Service Tracker

  - name: us.functions.services.acc.selectVehicleWithServiceHistory
    platform: ios 
    flow:
      - sleep:
          duration: 1000
      - if:
          identifier:
            notPresent:
              - identifier: us.mapping.acc.ios.virtualGarage
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mapping.acc.ios.serviceHistory.vehicle
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.serviceHistory.vehicle
          then:
            - click:
                identifier: us.mapping.acc.ios.serviceHistory.vehicle
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: Not able to find a vehicle with service History

  - name: us.functions.services.acc.gotoServiceHistory
    platform: ios 
    flow:
      - sleep:
          duration: 3000
      - if:
          identifier:
            notPresent:
              - identifier: us.mapping.acc.ios.viewAllServiceHistoryButton
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mapping.acc.ios.viewAllServiceHistoryButton
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.viewAllServiceHistoryButton
          then:
            - click:
                identifier: us.mapping.acc.ios.viewAllServiceHistoryButton
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - service history is not present

  - name: us.functions.services.acc.gotoServiceInvoice
    platform: ios 
    flow:
      - sleep:
          duration: 3000
      - if:
          identifier:
            notPresent:
              - identifier: us.mapping.acc.ios.viewServiceInvoice
          then:
            - executeFunction:
                name: us.functions.utils.scrollIfNotVisible
                params:
                  - name: identifier
                    string: us.mapping.acc.ios.viewServiceInvoice
                  - name: direction
                    string: down
                  - name: scrollPosition
                    string: center
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.viewServiceInvoice
          then:
            - click:
                identifier: us.mapping.acc.ios.viewServiceInvoice
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - service invoice is not present

  - name: us.function.services.acc.performServiceInvoiceRetry
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.serviceInvoiceErrorRetryButton
          then:
          - click:
              identifier: us.mapping.acc.ios.serviceInvoiceErrorRetryButton
          - sleep:
              duration: 3000
          else:
             - failTest:
                message: ENV_FAILURE - ${env} - Retry button not present on Service invoice error screen.

  - name: us.functions.services.acc.verifyServiceInvoice
    platform: ios 
    flow:
      - sleep:
          duration: 1000

      # Check for error screen
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.serviceInvoiceErrorTitle
          then:
            - log: Service invoice error observed.
            - loop:
                begin: 1
                end: 4
                storeIndex: i
                flow:
                - log: Retrying attmept:$i
                - executeFunction:
                    name: us.function.services.acc.performServiceInvoiceRetry
            - if:
                identifier:
                  present:
                    - identifier: us.mapping.acc.ios.serviceInvoice
                then:
                  - break: false
            - if:
                identifier:
                  present:
                    - identifier: us.mapping.acc.ios.serviceInvoice
                then:
                  - log: Service invoice observed
                  - break: true
          else:
            - log: No service invoice error observed

      # Check for service invoice  
      - if:
          identifier:
            present:
              - identifier: us.mapping.acc.ios.serviceInvoice
          then:
            - log: Service invoice observed
            - sleep:
                duration: 1000
          else:
            - failTest:
                message: ENV_FAILURE - ${env} - service invoice is not present

