general:
  platform: android
  tags: C300354, mp-functional-android
  inherit:
    filesRunAll:
      - us-errors-helpers.yaml
  testCaseId: C300354

scenarios:
  - name: Before
    before: true
    endTestOnFailure: true
    flow:
      #Get Environment Values
      - executeFunction:
          name: us.function.utils.getEnvironmentValue

      # Set Platfrom Values
      - executeFunction:
          name: functions.utils.setPlatformInfo

      - log: ${env}    
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


  - name: Main 
    flow:
      # Open app and go to home page
      - executeFunction:
          name: us.functions.global.onboarding.navigateOnboardingToHome

      # Open item
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://ip/5026165975

      - sleep:
          duration: 6000

      # Check Buy Box Multiple Offers
      - log: 'Checking Buy Box Multiple Offers'
      - executeFunction:
          name: us.functions.item.details.verifyBuyBoxMultipleOffers

      # # Click on restored offer
      - executeFunction:
          name: us.functions.item.details.verifyMoreConditionBanner

      - sleep:
          duration: 3000

      # Comapre Restored offer 's price with Product's Price
      - executeFunction:
          name: us.functions.item.details.verifyProductAndRestoredfferPrice

      # Verify product title has "Restored" in it
      - executeFunction:
          name: us.functions.item.details.verifyProductTitleContainRestored

      # Verify  add to cart success 
      - executeFunction:
          name: us.mappings.item.details.addToCart

      - log: "Test completed successfully"