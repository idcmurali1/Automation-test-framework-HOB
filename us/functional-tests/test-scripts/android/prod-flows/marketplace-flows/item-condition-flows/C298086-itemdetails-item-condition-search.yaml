general:
  platform: android
  tags: C298086, mp-functional-android
  inherit:
    filesRunAll:
      - us-errors-helpers.yaml
  testCaseId: C298086

scenarios:
  - name: Before
    before: true
    endTestOnFailure: true
    flow:
      #Get Environment Values
      - executeFunction:
          name: us.function.utils.getEnvironmentValue

      # Set Platfrom Values
      - executeFunction:
          name: functions.utils.setPlatformInfo

      - log: ${env}    
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


  - name: Main 
    flow:
      # Open app and go to home page
      - executeFunction:
          name: us.functions.global.onboarding.navigateOnboardingToHome

      # Search for item
      - executeFunction:
          name: unified.us.functions.search.searchItem
          params:
            - name: searchTerm
              string: "5026397617" #Teflon item 5025980542, 5026397617

      # Check "Restored" show up in the item tile in search result
      - verifyIdentifier:
          present:
            - identifier: us.mappings.item.details.buyBoxMultipleOffers.restoredOffer

      - log: "'Restored' badge is displayed in the item tile"

      # Click first item
      - executeFunction:
          name: unified.us.functions.search.clickOnFirstItem

      # Check Buy Box Multiple Offers
      - log: 'Checking Buy Box Multiple Offers'
      - executeFunction:
          name: us.functions.item.details.verifyBuyBoxMultipleOffers
      
      # Check More Condition Banner
      - log: 'Checking More Condition Banner'
      - executeFunction:
          name: us.functions.item.details.verifyMoreConditionBanner

      - log: "Test completed successfully"