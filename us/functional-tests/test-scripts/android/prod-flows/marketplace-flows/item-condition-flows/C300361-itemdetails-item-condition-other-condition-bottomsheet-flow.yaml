general:
  platform: android
  tags: C300361, mp-functional-android
  inherit:
    filesRunAll:
      - us-errors-helpers.yaml
  testCaseId: C300361

scenarios:
  - name: Before
    before: true
    endTestOnFailure: true
    flow:
      #Get Environment Values
      - executeFunction:
          name: us.function.utils.getEnvironmentValue

      # Set Platfrom Values
      - executeFunction:
          name: functions.utils.setPlatformInfo

      - log: ${env}    
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


  - name: Main 
    flow:
      # Open app and go to home page
      - executeFunction:
          name: us.functions.global.onboarding.navigateOnboardingToHome

      # Open item
      - executeFunction:
          name: us.functions.global.navigation.goToDeepLink
          params:
            - name: deepLinkUrl
              string: walmart://ip/5025976615?conditionGroupCode=2

      - sleep:
          duration: 6000
      
      # Get the entire title from product's Title
      - getString:
          identifier: us.mappings.item.details.productTitleContainRestored
          attribute: text
          storeIn: productTitle

      - log: "Product's title: ${productTitle}"

      # Check Buy Box Multiple Offers
      - log: 'Checking Buy Box Multiple Offers'
      - executeFunction:
          name: us.functions.item.details.verifyBuyBoxMultipleOffers

      # Click on restored offer
      - executeFunction:
          name: us.functions.item.details.verifyMoreConditionBanner

      - sleep:
          duration: 3000

      # Click on more condition banner
      - click: 
          identifier: us.mappings.item.details.buyBoxMultipleOffers.moreCondtionsBanner

      - executeFunction:
          name: us.mappings.item.details.verifyOtherConditionBottomSheetShowsCorrectly
          params:
            - name: productTitle
              string: ${productTitle}

      - sleep:
          duration: 3000

      - log: "Test completed successfully"