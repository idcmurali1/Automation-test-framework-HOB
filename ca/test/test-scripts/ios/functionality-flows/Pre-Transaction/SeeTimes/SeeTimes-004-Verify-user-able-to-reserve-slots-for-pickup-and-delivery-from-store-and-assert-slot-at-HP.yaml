general:
  platform: ios
  tags: seeTimes-004, ca-function-run
  inherit:
    filesRunAll:
      - ca-errors-helpers.yaml

scenarios:
  - name: Before
    before: false
    endTestOnFailure: false
    flow:
      - log: Execute before steps

# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * #
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * #
  - name: Verify user able to reserve slots for pickup and delivery from store and assert the booked slot at home page.
    flow:
      - log:
          message: Verify user able to reserve slots for pickup and delivery from store and assert the booked slot at home page.
          color: GREEN_BOLD         

      - executeFunction:
          name: ca.test.functions.global.onboarding.navigateiosOnboardingToHome

      # Navigate to sign in page
      - executeFunction:
          name: ca.test.functions.home.navigateHomeToSignInIos     
      
      # Sign In to the account
      - executeFunction:
          name: ca.test.functions.global.authentication.signInAccountIos
          params:
            - name: email
              string: ca.test.data.seeTimes006.emailIdIos
            - name: password
              string: ca.test.data.seeTimes006.passwordIos

      - executeFunction:
          name: ca.test.functions.home.verifyUserNameInTopleft    

      - executeFunction:
          name: ca.test.functions.global.authentication.storeSelect
          params:
            - name: Zip_Code
              string: ca.test.data.orleansZipCode
            - name: storeName
              string: ca.test.data.orleansStoreName  

      - log:
          message: Naviagting to see times
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.seeTimes  

      - log:
          message: Navigating to pickup from store.
          color: GREEN_BOLD

      - log:
          message: Selecting standard pickup slot and booking the selected slot.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.seeTimesPickupSlot     

      - log:
          message: Validating slot in HP.
          color: GREEN_BOLD 

      - executeFunction:
          name: ca.test.functions.cart.seeTimesPickupSlotValidation
          params:
            - name: address
              string: ca.test.data.seeTimes.orleansAddress  

      - log:
          message: Clicking on change slot button.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.changeBookedSlotButton

      - log:
          message: Navigating to delivery from store page.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.reserveTime.deliverFromStore
    
      - log:
          message: Checking if the address for delivery from store is changed.
          color: GREEN_BOLD

      - executeFunction:
                name: ca.test.functions.home.seeTimesdeliverySlotAddress 
                params:
                  - name: addressHomeDelivery
                    string: ca.test.data.home.seeTimes004.addressHomeDelivery               
      - log:
          message: Selecting standard slot.
          color: GREEN_BOLD       

      - executeFunction:
          name: ca.test.functions.cart.deliverySlotIos
      - log:
          message: User is able to reserve slots for delivery
          color: GREEN_BOLD                  

      - executeFunction:
                name: ca.test.functions.home.seeTimesdeliverySlotValidation  
                params:
                  - name: addressHomeDelivery
                    string: ca.test.data.home.addressHomeDelivery_1    

      - storeIn:
          key: testStatus
          value: passed
  
  - name: After
    after: true
    flow:
      - log:
          message: seeTimes-004-ios
          color: GREEN_BOLD
      - executeFunction:
          name: ca.test.functions.utils.afterSteps
                      



