general:
  platform: ios
  tags: srp-003, ca-function-run
  inherit:
    filesRunAll:
      - ca-errors-helpers.yaml

scenarios:
  - name: Before
    before: true
    endTestOnFailure: false
    flow:
      - log: Execute before steps     
              
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
  - name: Search for a multi variant sku and validate if colors or options are displayed in SRP and For the above scenario, click on choose options which should open list of variants and add items to cart and verify sizes shown in cart
    flow:
      - log:
          message: Search for a multi variant sku and validate if colors or options are displayed in SRP and For the above scenario, click on choose options which should open list of variants and add items to cart and verify sizes shown in cart
          color: CYAN_BOLD_BRIGHT 

    # Navigate onboarding to home
      - executeFunction:
          name: ca.test.functions.global.onboarding.navigateiosOnboardingToHome
     
    # SignIn
      - executeFunction:
          name: ca.test.functions.home.navigateHomeToSignInIos
    
    # log in
      - executeFunction:
          name: ca.test.functions.global.authentication.signInAccountIos
          params:
            - name: email
              string: ca.test.data.srp003_fn.emailios
            - name: password
              string: ca.test.data.srp003_fn.passwordios
      - executeFunction:
          name: ca.test.functions.home.verifyUserNameInTopleft
      
      - executeFunction:
          name: ca.test.functions.global.authentication.storeSelect
          params:
            - name: Zip_Code
              string: ca.test.data.onboarding.zipcode
            - name: storeName
              string: ca.test.data.orleansStoreName
      
      # Remove items from cart
      - executeFunction:
          name: ca.test.functions.cart.verifyItemInCart          
              
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 
          message: Search for a multi variant sku and validate if colors or options are displayed in SRP
          color: GREEN_BOLD
  
      - executeFunction:
          name: ca.test.functions.productSearch.searchAProductIos
          params:
            - name: product
              string: ca.test.data.func005Product5

      - log: 
          message: Validating MultiVariant Product  
          color: GREEN_BOLD        

      - executeFunction:
          name: ca.test.functions.productSearch.validatingMultiVariantProduct  

      - log: 
          message: For the above scenario, click on choose options which should open list of variants and add items to cart and verify sizes shown in cart.
          color: GREEN_BOLD        
         
      - executeFunction:
          name: ca.test.functions.productSearch.navigateToOptions
          params:
            - name: productName
              string: ca.test.data.func005Product6

      - log: 
          message: Extracting Color and Size of multivariant product
          color: GREEN_BOLD     
                 
# Temporary Commented function
      # - executeFunction:
      #     name: ca.test.functions.pdp.extractingColorAndSize
         
      # Add to cart
      - executeFunction:
          name: ca.test.functions.PDPpage.addToCart

      # close
      - executeFunction:
          name: ca.test.functions.PDPpage.closePDPpage

      - log: 
          message: Add items to cart
          color: GREEN_BOLD      
      
      # navigate to cart
      - executeFunction:
          name: ca.test.functions.global.navigation.goToCartIos

      - log: 
          message: verify sizes shown in cart.
          color: GREEN_BOLD      

      # verify size in cart
      - executeFunction:
          name: ca.test.functions.cart.sizeMultiVariant
         
      - storeIn:
          key: testStatus
          value: passed
  
  #After Scenarios
  - name: After
    after: true
    flow:
      - log:
          message: srp-003-ios
          color: GREEN_BOLD
      - executeFunction:
          name: ca.test.functions.utils.afterSteps  