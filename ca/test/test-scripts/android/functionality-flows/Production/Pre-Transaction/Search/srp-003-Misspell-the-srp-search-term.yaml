general:
  platform: android
  tags: srp-003, E2E-Android-English
  testCaseId: srp-003
  inherit:
    filesRunAll:
      - ca-errors-helpers.yaml

scenarios:
  - name: Before
    before: false
    endTestOnFailure: true
    flow:
      - executeFunction:
          name: ca.test.functions.onboardingToHomePage.usingPostalCode
          params:
            - name: PostalCode
              string: ca.test.data.onboarding.zipcode

# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  
  - name: Main
    flow:
      - log:
          message: Verify user gets correct search result and correct spelling in SRP even if search term is misspelled.
          color: GREEN_BOLD

      - log: 
          message: Selecting store at HomePage.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.GICPhase2.selectStore
          params:
            - name: Zip_Code
              string: ca.test.data.onboarding.zipcode
            - name: storeName
              string: ca.test.data.onboarding.storeNameOrleans

      - log: 
          message: Searching for a GM product with incorrect name.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.productSearch.searchAProduct
          params:
            - name: product
              string: ca.test.data.wrongProductName

      - log: 
          message: Asserting srp is showing correct product suggestion.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.function.productSearch.validatingSearchResultForMisspelledSearch
          params:
            - name: productName
              string: ca.test.data.correctProductName

      - log: 
          message: Searching for a category(fruits) with incorrect name.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.productSearch.searchAProduct
          params:
            - name: product
              string: ca.test.data.wrongProductCategory
      
      - log: 
          message: Asserting srp is showing correct product category name.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.function.productSearch.validatingSearchResultForMisspelledSearch
          params:
            - name: productName
              string: ca.test.data.correctProductCategory

      - log: 
          message: Searching a random word.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.productSearch.searchAProduct
          params:
            - name: product
              string: ca.test.data.randomProductName

      - log: 
          message: Asserting srp is showing "Do you mean" text instead of product suggestion.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.function.productSearch.validatingSearchResultForMisspelledSearch
          params:
            - name: productName
              string: ca.test.data.randomProductName

  #After Scenarios
  - name: After
    after: true
    flow:   
      - log:
          message: srp-003
          color: GREEN_BOLD
      - executeFunction:
          name: ca.test.functions.utils.afterSteps 