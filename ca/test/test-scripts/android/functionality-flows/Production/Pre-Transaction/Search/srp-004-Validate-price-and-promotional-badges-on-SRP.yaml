general:
  platform: android
  tags: srp-004, ca-function-run
  testCaseId: srp-004
  inherit:
    filesRunAll:
      - ca-errors-helpers.yaml

scenarios:
  - name: Before
    before: true
    endTestOnFailure: false
    flow:
      - executeFunction:
          name: ca.test.functions.onboardingToHomePage.usingPostalCode
          params:
            - name: PostalCode
              string: ca.test.data.orleansZipCode

      - executeFunction:
          name: ca.test.functions.home.signIn

      - executeFunction:
          name: ca.test.functions.loginPage.userLogin
          params:
            - name: email
              string: ca.test.data.srp004.email
            - name: password
              string: ca.test.data.srp004.password

      - executeFunction:
          name: ca.test.functions.home.selectStore
          params:
            - name: Zip_Code
              string: ca.test.data.orleansZipCode
            - name: storeName
              string: ca.test.data.orleansStoreName

      # Clear cart
      - executeFunction:
          name: ca.test.functions.productSearch.checkItemsInCartAndRemovingThem

  - name: Search badges product and Validate Price Badges on SRP
    flow:
      - try:
          flow:
            - executeFunction:
                name: ca.test.functions.productSearch.searchAProduct
                params:
                  - name: product
                    string: ca.test.data.clearanceItem

            - executeFunction:
                name: ca.test.functions.productSearch.validatingPriceBadges
          catch:
            flow:
              - failTest: true

  - name: Search for Promotional items and Validate Promotional badges on SRP
    flow:
      - try:
          flow:
            - executeFunction:
                name: ca.test.functions.productSearch.searchAProduct
                params:
                  - name: product
                    string: ca.test.data.multiSaveItem

            - executeFunction:
                name: ca.test.functions.productSearch.validatingPromotionalBadge
          catch:
            flow:
              - failTest: true

  - name: Search an item which qualifies for item level Price promotion and make sure that badges areÂ displayed correctly(AR,MD etc)
    flow:
      - try:
          flow:
            - executeFunction:
                name: ca.test.functions.productSearch.searchAProduct
                params:
                  - name: product
                    string: ca.test.data.rollBackItem 

            - executeFunction:
                name: ca.test.functions.productSearch.validatingPromotionalBadgeAR$MD
          catch:
            flow:
              - failTest: true

   #After Scenarios
  - name: After
    after: true
    flow:
      - executeFunction:
          name: ca.test.functions.utils.afterSteps 