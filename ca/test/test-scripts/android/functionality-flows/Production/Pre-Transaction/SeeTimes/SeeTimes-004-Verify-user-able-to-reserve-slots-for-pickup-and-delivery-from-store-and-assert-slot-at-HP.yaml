general:
  platform: android
  tags: ca-function-run, seeTimes-004, HP
  testCaseId: seeTimes-004
  inherit:
    filesRunAll:
      - ca-errors-helpers.yaml

scenarios:
  - name: Before
    before: false
    endTestOnFailure: false
    flow:
      - log: Execute before scenarios

# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

  - name: Verify user able to reserve slots for pickup and delivery from store and assert the booked slot at home page.
    flow:
      - log:
          message: Verify user able to reserve slots for pickup and delivery from store and assert the booked slot at home page.
          color: GREEN_BOLD

      - log:
          message: Onboarding to app using zip code
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.onboardingToHomePage.usingPostalCode
          params:
            - name: PostalCode
              string: ca.test.data.orleansZipCode

      - log:
          message: Navigating to sign in page from home page.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.signIn

      - log:
          message: Entering user credentials.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.loginPage.userLogin
          params:
            - name: email
              string: ca.test.android.data.home004.email
            - name: password
              string: ca.test.data.functional.password

      - log:
          message: Selecting store at Home page.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.selectStore
          params:
            - name: Zip_Code
              string: ca.test.data.orleansZipCode
            - name: storeName
              string: ca.test.data.orleansStoreName
      
      - log:
          message: Naviagting to see times
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.seeTimes

      - log:
          message: Navigating to pickup from store.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.reserveTime.pickUpFromStore

      - log:
          message: Asserting store at see times pickup..
          color: GREEN_BOLD

      # Selecting store
      - executeFunction:
          name: ca.test.function.cart.storeAssertionForPickup
          params:
            - name: storeDisplayName
              string: ca.test.data.function002.reservePage.storeAddress
            - name: storeZipCode
              string: ca.test.data.orleansZipCode
            - name: storeName
              string: ca.test.data.orleansStoreName

      - log:
          message: Selecting standard pickup slot.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.bookASlot.reserveTimePage.reserveStandardSlot

      - log:
          message: Booking the selected slot.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.bookASlot.reserveTimePage.bookASlotButton

      - log:
          message: Validating slot in HP.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.validatingSlotSelection
          params:
            - name: addressFirstLine
              string: ca.test.data.seeTimes.orleansAddress

      - log:
          message: Clicking on change slot button.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.changeBookedSlotButton

      - log:
          message: Navigating to delivery from store page.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.reserveTime.deliverFromStore

      - log:
          message: Checking if the address for delivery from store is changed.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.cart.deliveryAddressAssertion
          params:
            - name: deliveryAddress
              string: ca.test.android.data.deliveryAddress.Ottawa

      - log:
          message: Selecting standard pickup slot.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.bookASlot.reserveTimePage.reserveStandardSlot

      - log:
          message: Clicking on book slot button.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.bookASlot.reserveTimePage.bookASlotButton

      - log:
          message: Validating slot and address at HP.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.validatingSlotSelection
          params:
            - name: addressFirstLine
              string: ca.test.data.home.addressHomeDelivery

      - executeFunction:
          name: ca.test.functions.home.selectStore
          params:
            - name: Zip_Code
              string: ca.test.android.data.heartlandStoreZipCode
            - name: storeName
              string: ca.test.android.data.heartlandStoreName

  #After Scenarios
  - name: After
    after: true
    flow:
      - executeFunction:
          name: ca.test.functions.utils.afterSteps