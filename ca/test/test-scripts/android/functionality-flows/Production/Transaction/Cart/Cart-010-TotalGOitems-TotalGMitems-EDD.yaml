#------------------------------------------------------------------------------
##Cart page shows total of grocery items in the grocery group and total Items of GM by EDD.
#------------------------------------------------------------------------------
general:
  platform: Android
  tags: cart-010, ca-function-run
  testCaseId: cart-010
  inherit:
    filesRunAll:
      - ca-errors-helpers.yaml

scenarios:
  - name: Before
    before: true
    endTestOnFailure: true
    flow:
      - log: Execute before steps

      # * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * #
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
  # * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * #
  - name: Validating the price summary of the cart for GM.
    flow:
      - log:
          message: Validating the price summary of the cart for GM.
          color: GREEN_BOLD

      - log:
          message: Onboarding to app using postal code.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.onboardingToHomePage.usingPostalCode
          params:
            - name: PostalCode
              string: ca.test.data.cart010.onboarding.zipCodeT6N0A9

      - log:
          message: Navigating to Sign In to account from home page.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.signIn

      - log:
          message: Putting user credentials.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.loginPage.userLogin
          params:
            - name: email
              string: ca.test.data.cart010.emailID
            - name: password
              string: ca.test.data.functional.password

      - log:
          message: Selecting store at home page.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.home.selectStore
          params:
            - name: Zip_Code
              string: ca.test.data.onboarding.zipcodeL5V6N2
            - name: storeName
              string: ca.test.search.storeNameL5V6N2

      # # * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_TRANSACTION'
          # # * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

      - log:
          message: Navigating to cart.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.global.navigation.goToCart

      - log:
          message: Validating Total GO Items.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.cart.totalItemsValidation

      - log:
          message: Validated the total of grocery items
          color: YELLOW

      - log:
          message: Validating Total GM Items.
          color: GREEN_BOLD

      - executeFunction:
          name: ca.test.functions.cart.totalGMItemsValidation

      - log:
          message: Validated the total of GM items
          color: YELLOW

      - log:
          message: Validating GM EDD
          color: GREEN_BOLD_BRIGHT

      - executeFunction:
          name: ca.test.functions.cart.eddValidationGM

      - log:
          message: Validated GM EDD
          color: YELLOW

      - log:
          message: Cart page shows total of grocery items in the grocery group and total Items of GM by EDD!
          color: GREEN_BOLD_BRIGHT

      - storeIn:
          key: testStatus
          value: passed


  #After Scenarios
  - name: After
    after: true
    flow:
      - executeFunction:
          name: ca.test.functions.utils.afterSteps  