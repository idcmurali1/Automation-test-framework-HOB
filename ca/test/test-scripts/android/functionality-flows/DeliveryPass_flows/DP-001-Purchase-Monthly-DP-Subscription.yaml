general:
  platform: android
  tags: dp-001-android,dp-sanity
  inherit:
    filesRunAll:
      - ca-errors-helpers.yaml
scenarios:
  - name: Before
    before: false
    endTestOnFailure: false
    flow: 
      - log: Execute before scenarios
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      - log: 'R2_SUBFLOW_PRE_TRANSACTION'
# * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      
  - name: Main
    flow:
      - getTimestamp:
          asDate: false
          storeIn: timestamp

      - executeFunction:
          name: ca.test.functions.astro.createAccount
          params:
            - name: payLoad
              string: ca.test.android.data.dp001.createUserRequestBody

      - executeFunction:
          name: ca.test.functions.global.onboarding.navigateOnboardingToHome.paramZip
          params:
            - name: ZIP_CODE
              string: ca.test.android.data.deliveryPass.zipCode  

      - executeFunction:
          name: ca.functions.home.navigateHomeToAccount 

      - executeFunction:
          name: ca.test.functions.global.authentication.signInAccount
          params:
            - name: email
              string: ca.android.test.data.dp001.email
            - name: password
              string: ca.test.android.data.deliveryPass.password

      - log: '==================  Purchase Monthly Deliver Pass Subscription =================='   

      - executeFunction:
          name: ca.test.functions.accountPage.navigateToDeliveryPass

      - executeFunction:
         name: ca.test.functions.accountPage.clickOnWalmartDeliveryPass

      - executeFunction:
          name: ca.test.functions.accountPage.deliveryPass.verifyDeliveryPassLandingScreen

      - executeFunction:
          name: ca.test.functions.accountPage.deliveryPass.selectAddress  

      - executeFunction:
         name: ca.test.functions.accountPage..deliveryPass.chooseAddress.continue

      - executeFunction:
          name: ca.test.functions.accountPage.deliveryPass.choosePlan.addNewCard    

      - executeFunction:
          name: ca.test.functions.accountPage.deliveryPass.choosePlan.monthly    

      - executeFunction:
          name: ca.test.functions.accountPage.deliveryPass.choosePlan.selectCard
 
      - executeFunction:
          name: ca.test.functions.accountPage.deliveryPass.choosePlan.startDeliveryPassSubscription

      - executeFunction:    
          name: ca.test.functions.accountPage.deliveryPass.hangTight.validateHangTightScreen 

      - executeFunction:   
          name: ca.test.functions.accountPage.deliveryPass.hangTight.startShopping    
                                                        
      - log: Tests Completed successfully
  
  - name: After
    after: true
    flow:
      - executeFunction:
          name: ca.test.functions.utils.afterSteps 
          