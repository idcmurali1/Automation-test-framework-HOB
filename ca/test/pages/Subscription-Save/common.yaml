functions:

#--------------------------------------------------------------------------------------------------------------------          
  
  # Description: Validate Save and subscribe pop is present     
  # No Params

  - name: ca.test.functions.subscribe$SavePopup.isSubscribe$SavePageDisplayed
    flow:        
      - storeIn:
          key: isReturnedDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.subscribe$SavePopup.setUpSubscriptionHeader
              - identifier:  ca.test.mappings.subscribe$SavePopup.frequencyContainer
          then:
            - storeIn:
                key: isReturnedDisplayed
                value: true
            - log:
                message: "End functions: subscribe$SavePopup.isSubscribe$SavePageDisplayed (Displayed)"
                color: BLUE 
          else:
            - log:
                message: "End functions: subscribe$SavePopup.isSubscribe$SavePageDisplayed (Not displayed)"
                color: BLUE      

#--------------------------------------------------------------------------------------------------------------------          
  
  # Description: Tapping on the required Delivery Frequency     
  # Param ${delivery_frequency} [Mandatory]  Delivery Frequency value to be clicked
  - name: ca.test.functions.subscribe$SavePopup.selectDeliveryFrequency
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.subscribe$SavePopup.deliveryFrequency
          then:
            - executeFunction:
                name: ca.test.functions.utils.scrollToView
                params:
                  - name: scrollContainer
                    string: ca.test.mappings.subscribe$SavePopup.frequencyListContainer
                  - name: untilIdentifier
                    string: ca.test.mappings.subscribe$SavePopup.deliveryFrequency
                  - name: searchDirection
                    string: right
      - click:
         identifier: ca.test.mappings.subscribe$SavePopup.deliveryFrequency
      - log: 
          message: "End functions: subscribe$SavePopup.selectDeliveryFrequency"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------          
  
  # Description: Tapping on save button to set the Delivery Frequency  
  # Params  No params  
  - name: ca.test.functions.subscribe$SavePopup.tapConfirmButton
    flow:
      - click:
          identifier: ca.test.mappings.subscribe$SavePopup.confirmButton
      - sleep: 
          duration: 2000
      - verifyIdentifier:
          notPresent:
            - identifier: ca.test.mappings.subscribe$SavePopup.setUpSubscriptionHeader
      - log: 
          message: "End functions: subscribe$SavePopup.tapConfirmButton"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------          

  # Description: Validating Default frequency  
  # Params  No params  
  # Locators are not present to validate default selection in iOS CAPURCHASE-1418
  - name: ca.test.functions.subscribe$SavePopup.validateDefaultFrequency
    flow:
    # - verifyIdentifier:
    #       present  :
    #         - identifier: ca.test.mappings.subscribe$SavePopup.defaultFrequency
      - log: 
          message: "End functions: subscribe$SavePopup.validateDefaultFrequency"   
          color: BLUE     

#----------------------------------------------------------------------------------------------------------------------

  # Description: This function is used to Validate setup subscription popup displayed
  # No Param
  # @Author: pratik.shete [vn55ofc]
  # @Last Update: 

  - name: ca.test.functions.isSetUpSubscriptionPopupDisplayed
    platform: android
    flow:
      - storeIn:
          key: isReturnedDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.productPage.setupSubscriptionPopup.setupSubscriptionTitle
          then:
            - storeIn:
                key: isReturnedDisplayed
                value: true
            - log: 
                message: "End Functions: isSetUpSubscriptionPopupDisplayed (Displayed)"
                color: BLUE
          else:
            - failTest:
                message: "End Functions: isSetUpSubscriptionPopupDisplayed (Not Displayed)"

#----------------------------------------------------------------------------------------------------------------------
  # Description: This function is used to click on delivery Frequency
  # No Param
  # @Author: pratik.shete [vn55ofc]
  # @Last Update: 

  - name: ca.test.functions.setupSubscriptionPopup.tapDeliveryFrequency
    platform: android
    flow:
      - click:
          identifier: ca.test.mappings.productPage.setupSubscriptionPopup.deliveryFrequencyText
      - log:
          message: "End Functions: productPage.setupSubscriptionPopup.tapOnDeliveryFrequency"
          color: BLUE

#------------------------------------------------------------------------------------------------------------------
  # Description: This function is used to click on Add Subscription to cart button
  # No Param
  # @Author: pratik.shete [vn55ofc]
  # @Last Update: 

  - name: ca.test.functions.setupSubscriptionPopup.tapAddSubscriptionToCartBtn
    flow:
      - click:
          identifier: ca.test.mappings.productPage.setUpSubscriptionPopUp.AddSubscriptionToCartButton
      - sleep:
          duration: 5000
      - log:
          message: "End Functions: setupSubscriptionPopup.tapAddSubscriptionToCartBtn"
          color: BLUE

#------------------------------------------------------------------------------------------------------------------
