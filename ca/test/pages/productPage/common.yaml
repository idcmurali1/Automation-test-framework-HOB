functions:

#--------------------------------------------------------------------------------------------------------------------
  
  # Description: Validating pdp screen is displayed
  # Params       No params
  # @Author: pratik.shete [vn55ofc]
  # @Last Update: 

  - name: ca.test.functions.productPage.isProductPageDisplayed
    flow:
      - storeIn:
          key: isReturnedDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.productPage.productTitle
          then:
            - storeIn:
                key: isReturnedDisplayed
                value: true
            - log:
                message: "End Function: productPage.isProductPageDisplayed (Displayed)"
                color: BLUE
          else:
            - failTest:
                message: "End Function: productPage.isProductPageDisplayed (Not Displayed)"

#--------------------------------------------------------------------------------------------------------------------                 

  # Description: Tapping the Save To Subscription Option                 
  # Params       No params
  # 
  - name: ca.test.functions.productPage.purchaseOptions.tapSubscribeAndSave
    flow:
      - click:
          identifier: ca.test.mappings.productPage.purchaseOptions.subscribeToSaveRadioBtn
      - log:
          message: "End Function: productPage.purchaseOptions.tapSubscribeAndSave"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------          

  # Description: Validating whether Add To Cart Button changed to Set Up Subscription       
  # No Param

  - name: ca.test.functions.productPage.validateAddToCartChangeToSubscriptionBtn
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.productPage.addToCartButton
          then:
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.productPage.setUpSubscriptionButton
            - log:
                message: "End Function: productPage.validateAddToCartChangeToSubscriptionBtn"
          else:
            - failTest:
                message: "End Function: productPage.validateAddToCartChangeToSubscriptionBtn"

#--------------------------------------------------------------------------------------------------------------------          

  # Description: Tapping Set Up Subscription button   
  # No Param

  - name: ca.test.functions.productPage.tapCloseBtn
    flow:
      - click:
          identifier: ca.test.mappings.productPage.tapCloseBtn  
      - log: 
          message: "End Function: productPage.closePDPpage"
          color: BLUE

#--------------------------------------------------------------------------------------------------------------------          

  # Description: Tap on add to cart button
  # No Param

  - name: ca.test.functions.productPage.productAddToCart
    flow:
      - click:
          identifier: ca.test.mappings.productPage.addToCartButton
      - log:
          message: "End function: productPage.productAddToCart"
          color: BLUE

  # -------------------------------------------------------------------------------------------------------------------

  # Description: This function asserts that the product has been added to cart
  # No Param
  
  - name: ca.test.functions.productPage.assertAddedToCart
    flow:
      - storeIn:
          key: isProductAdded
          value: false
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.productPage.addToCartButton
          then:
            - storeIn:
                key: isProductAdded
                value: true
          else:
            - log:
                message: "End function: productPage.assertAddedToCart"
                color: BLUE 

  # -------------------------------------------------------------------------------------------------------------------              
  
  # Description: This function asserts that the product has not been added to cart
  # No Param

  - name: ca.test.functions.productPage.assertNotAddedToCart
    flow: 
      - log:
          message: "Verifying that the product has not been added to cart..."
          color: CYAN
      - storeIn:
          key: isProductAdded
          value: false
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.productPage.addToCartButton
          then:
            - storeIn:
                key: isProductAdded
                value: true
            - log:
                message: "The product has not been added to cart."
                color: CYAN
      - log:
          message: "End function: productPage.assertNotAddedToCart"
          color: BLUE 

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function click on plus button on add to cart
  # No Param 

  - name: ca.test.functions.productPage.addToCart.tapQuantityIncrement
    flow: 
      - click:
          identifier: ca.test.mappings.utils.addToCart.quantityIncrease
      - log: 
          message: "End function: productPage.addToCart.quantityIncrement"
          color: BLUE 

  #--------------------------------------------------------------------------------------------------------------------

  # Description: Tapping Set Up Subscription button   
  # Params  No params  

  - name: ca.test.functions.productPage.tapSetUpSubscription
    flow:
      - click:
          identifier: ca.test.mappings.productPage.setUpSubscriptionButton
      - sleep:
          duration: 1000
      - log: 
          message: "End Function: productPage.tapSetUpSubscription"
          color: BLUE

#------------------------------------------------------------------------------------------------------------------