functions:
  #--------------------------------------------------------------------------------------------------------------------

  # Validating Global Intent collapsed view
  - name: ca.test.functions.globalIntent.validateCollapsedGlobalIntent
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.collapsedIcon
            - identifier: ca.test.mappings.globalIntent.collapsedContent
            - identifier: ca.test.mappings.globalIntent.collapsedLocation
            - identifier: ca.test.mappings.globalIntent.collapsedChevron
      - log:
          message: "End functions: globalIntent.collapsedHeaderValidation"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Clicking global intent expand button
  - name: ca.test.functions.globalIntent.expandGlobalIntent
    platform: android
    flow:
      - if: 
          identifier:
            notPresent:
              - identifier: ca.test.mappings.globalIntent.expandedChervon
          then:
            - click:
                identifier: ca.test.mappings.globalIntent.collapsedChevron
          else:
            - log:
                message: "Global Intent is in expanded form"
                color: GREEN_BOLD
      - log:
          message: "End functions: globalIntent.expandGlobalIntent"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # Clicking global intent collapse button
  - name: ca.test.functions.globalIntent.collapseGlobalIntent
    platform: android
    flow:
      - sleep:
          duration: 2000
      - if: 
          identifier:
            present:
              - identifier: ca.test.mappings.globalIntent.expandedChervon
          then:
            - click:
                identifier: ca.test.mappings.globalIntent.collapsedChevron
          else:
            - log:
                message: "Global Intent is in collapsed form"
                color: GREEN_BOLD
      - log:
          message: "End functions: globalIntent.collapseGlobalIntent"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This taps on the store selection button 
  # Params: No params
  - name: ca.test.functions.globalIntent.tapStoreSelectionChevron
    platform: android
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.pickupStoreChevron
      - verifyIdentifier:
          timeout: 15000
          present:
            - identifier: ca.test.mappings.storeSelection.title

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This functions validate pickup intent page, store name and address
  # params ${storeName}    [Mandatory]  Store name for assertion
  #        ${storeAddress} [Mandatory]  Store address for assertion
  - name: ca.test.functions.globalIntent.valdiatePickupIntentHotCard
    platform: android
    flow:
      - executeNode:
          file: ca/test/helpers/TextUpperCase.js
          args:
            - value: ${storeName}
            - value: 'toUpperCase'
          getResponse:
            storeIn: storeNameUpperCase
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.intentIcon
            - identifier: ca.test.mappings.globalIntent.pickupStoreChevron
          text:
            - identifier: ca.test.mappings.globalIntent.intentHotTitle
              equals: ${storeNameUpperCase}
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
              equals: ca.data.mappings.globalIntent.speedFilterHeader
      - if:
          condition: ${assertStoreAddress}
          then:
            - verifyIdentifier:
                text:
                  - identifier: ca.test.mappings.globalIntent.intentHotSubtitle
                    equals: ${storeAddress}
      - executeFunction:
          name: ca.test.functions.globalIntent.validateSpeedFilter
      - log:
          message: "End functions: globalIntent.valdiatePickupIntentHotCard"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This functions validate delivery intent for guest users
  # Params  ${defaultAddress} [Mandatory] Used for default address assertion
  - name: ca.test.functions.globalIntent.guestUser.validateDeliveryHotCard
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.intentIcon
            - identifier: ca.test.mappings.globalIntent.intentHotTitle
            - identifier: ca.test.mappings.globalIntent.intentHotSubtitle
            - identifier: ca.test.mappings.globalIntent.addAddressButton
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
          text:
            - identifier: ca.test.mappings.globalIntent.intentHotTitle
              equals: ca.data.mappings.globalIntent.intentHotTitle
            - identifier: ca.test.mappings.globalIntent.intentHotSubtitle
              equals: ${defaultAddress}
            - identifier: ca.test.mappings.globalIntent.addAddressButton
              equals: ca.data.mappings.globalIntent.addAddressButton
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
              equals: ca.data.mappings.deliveryGlobalIntent.speedFilterHeader
      - executeFunction:
          name: ca.test.functions.globalIntent.validateSpeedFilter
      - log: 
          message: "End functions: globalIntent.guestUser.validateDeliveryHotCard"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This functions validate global intent onboarding screen
  # Params: No params
  - name: ca.test.functions.globalIntent.validateOnboardingScreen
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.globalIntent.onboardingScrollViewTitle
              equals: ca.data.mappings.globalIntent.onboardingScrollViewTitle
            - identifier: ca.test.mappings.globalIntent.onboardingScrollViewSubTitle
              equals: ca.data.mappings.globalIntent.onboardingScrollViewSubTitle
      - log:
          message: "End functions: globalIntent.validateOnboardingScreen"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This functions validate global intent onboarding screen
  - name: ca.test.functions.globalIntent.validateOnboardingScreen
    platform: android
    flow:
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.globalIntent.onboardingScrollViewTitle
              equals: ca.data.mappings.globalIntent.onboardingScrollViewTitle
            - identifier: ca.test.mappings.globalIntent.onboardingScrollViewSubTitle
              equals: ca.data.mappings.globalIntent.onboardingScrollViewSubTitle
      - log:
          message: "End functions: globalIntent.validateOnboardingScreen"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This functions validate delivery intent for guest users
  # Params  ${defaultAddress} [Mandatory] Used for default address assertion
  - name: ca.test.functions.globalIntent.registeredUser.validateDeliveryHotCard
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.intentIcon
            - identifier: ca.test.mappings.globalIntent.intentHotTitle
            - identifier: ca.test.mappings.globalIntent.intentHotSubtitle
            - identifier: ca.test.mappings.globalIntent.addAddressButton
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
          text:
            - identifier: ca.test.mappings.globalIntent.intentHotTitle
              equals: ca.data.mappings.globalIntent.intentHotTitle
            - identifier: ca.test.mappings.globalIntent.intentHotSubtitle
              equals: ${defaultAddress}
            - identifier: ca.test.mappings.globalIntent.addAddressButton
              equals: ca.data.mappings.globalIntent.addAddressButton
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
              equals: ca.data.mappings.deliveryGlobalIntent.speedFilterHeader
      - executeFunction:
          name: ca.test.functions.globalIntent.validateSpeedFilter
      - log: 
          message: "End functions: globalIntent.registeredUser.validateDeliveryHotCard"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the store name is already displayed.
  # No Param  
  - name: ca.test.functions.globalIntent.isRequiredStoreDisplayed
    platform: android
    flow:
      - executeNode:
          file: ca/test/helpers/TextFormatting.js
          args:
            - value: ${storeName}
            - value: 'toUpperCase'
          getResponse:
            storeIn: storeNameUpperCase
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            text:
              - identifier: ca.test.mappings.globalIntent.intentHotTitle
                equals: ${storeNameUpperCase}
          then: 
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: globalIntent.isRequiredStoreDisplayed"
                color: BLUE
          else: 
          - log:
              message: "End function: globalIntent.isDisplayed (Not displayed)"
              color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the address name is already displayed in GIC.
  # params  ${userAddress}  [Mandatory]  User address first line.
  - name: ca.test.functions.globalIntent.isRequiredAddressDisplayed
    platform: android
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            text:
              - identifier: ca.test.mappings.globalIntent.delivery.addressLine
                contains: ${userAddress}
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: globalIntent.isRequiredAddressDisplayed"
                color: BLUE
          else: 
            - log:
                message: "End function: globalIntent.isRequiredAddressDisplayed (Not displayed)"
                color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
