functions:

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check for global intent showing in UI else relaunch the app to refresh CCM
  # No Param
  - name: ca.test.functions.globalIntent.isGlobalIntentHeaderDisplayed
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.globalIntent.collapsedIcon
              - identifier: ca.test.mappings.globalIntent.collapsedContent
              - identifier: ca.test.mappings.globalIntent.collapsedLocation
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: globalIntent.isDisplayed"
                color: BLUE
          else: 
            - log:
                message: "End function: globalIntent.isDisplayed (Not displayed)"
                color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Validate Global Intent in Global Intent Header
  # No Param
  - name: ca.test.functions.globalIntent.validateGlobalIntent
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.expandedViewWithIntent
            - identifier: ca.test.mappings.globalIntent.expandedView.pickupIntent
            - identifier: ca.test.mappings.globalIntent.expandedView.deliveryIntent
      - log:
          message: "End function: globalIntent.validateGlobalIntents"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function while tap on got it button in global intent onboarding screen
  # No Param
  - name: ca.test.functions.globalIntent.onboardingScreen.tapGotIt
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.onboardingScrollableView.gotButton
      - log:
          message: "End function: globalIntent.onboardingScreen.tapGotIt"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function taps gLobal intent header-pickup
  # NO Param
  - name: ca.test.functions.globalIntent.selectPickupIntent
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.expandedView.pickupIntent
      - log:
          message: "End function: globalIntent.selectPickupIntent"
          color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This functions validates speed filter in global intent
  # No Param
  - name: ca.test.functions.globalIntent.validateSpeedFilter
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.speedFilterAnytime
            - identifier: ca.test.mappings.globalIntent.speedFilterTomorrow
            - identifier: ca.test.mappings.globalIntent.speedFilterTwoDays
      - log:
          message: "End function: globalIntent.validateSpeedFilter"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function taps gLobal intent header-delivery
  # No Param
  - name: ca.test.functions.globalIntent.selectDeliveryIntent
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.expandedView.deliveryIntent
      - log:
          message: "End function: globalIntent.selectDeliveryIntent"
          color: BLUE
    
 #--------------------------------------------------------------------------------------------------------------------
  # Description: This function click on add address chevron button in global intent.
  # No Param
  - name: ca.test.functions.gobalIntent.deliveryIntent.guestUserAddAddress
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.addAddressButton
      - log:
          message: "End function: gobalIntent.deliveryIntent.guestUserAddAddress"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the store name is already displayed.
  # No Param  
  - name: ca.test.functions.globalIntent.storeSelection.isPageDisplay
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.globalIntent.storeSelector.title
              - identifier: ca.test.mappings.globalIntent.storeSelector.postalCodeTextField
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: globalIntent.storeSelection.isPageDisplay"
                color: BLUE
          else: 
            - log:
                message: "End function: globalIntent.storeSelection.isPageDisplay (Not displayed)"
                color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the store name is already displayed.
  # Params  ${postalCode}  [Mandatory] Postal code to search for stores
  - name: ca.test.functions.globalIntent.storeSelection.enterPostalCode
    flow:
      - enterText:
          identifier: ca.test.mappings.globalIntent.storeSelector.postalCodeTextField
          string: ${postalCode}
          clickFirst: true
          clearField: true
          pressEnter: true
      - log:
          message: "End function: globalIntent.storeSelection.enterPostalCode"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the store name is already displayed.
  # Params  ${storeName}  [Mandatory] Required store name to select
  - name: ca.test.functions.globalIntent.storeSelection.tapStoreRadioBtn
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ${storeName}
          then:
            - scroll:
                direction: down
                untilIdentifier: ${storeName}
                scrollLimit: 5
      - click:
          identifier: ${storeName}
      - log:
          message: "End function: globalIntent.storeSelection.tapStoreRadioBtn"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the store name is already displayed.
  # No params
  - name: ca.test.functions.globalIntent.storeSelection.tapSaveButton
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.storeSelector.tapSaveBtn
      - log:
          message: "End function: globalIntent.storeSelection.tapStoreRadioBtn"
          color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the address selection page is displayed
  # No params
  - name: ca.test.functions.globalIntent.isAddressSelectionPageDisplay
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.globalIntent.addressSelection.pageTitle
              - identifier: ca.test.mappings.globalIntent.addressSelection.addressPage
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: globalIntent.isAddressSelectionPageDisplay"
                color: BLUE
          else: 
            - log:
                message: "End function: globalIntent.isAddressSelectionPageDisplay (Not displayed)"
                color: BLUE

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the store name is already displayed.
  # params  ${userAddress}  [Mandatory]  User address first line.
  - name: ca.test.functions.globalIntent.addressSelection.tapAddressRadioBtn
    flow:
      - click:
          identifier: ${userAddress}
      - log:
          message: "End function: globalIntent.addressSelection.tapAddressRadioBtn"
          color: BLUE
  
   #--------------------------------------------------------------------------------------------------------------------

  # Description: This function click on save button in select address page.
  # No params
  - name: ca.test.functions.globalIntent.addressSelection.tapSaveButton
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.addressSelection.tapSaveBtn
      - log:
          message: "End function: globalIntent.addressSelection.tapSaveButton"
          color: BLUE

   #--------------------------------------------------------------------------------------------------------------------

  # Description: This function click on select address chevron in GIC header
  # No params
  - name: ca.test.functions.globalIntent.tapAddressSelectionChevron
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.delivery.tapAddressSelectionChevron
      - log:
          message: "End function: globalIntent.tapAddressSelectionChevron"
          color: BLUE

   #--------------------------------------------------------------------------------------------------------------------

   # Clicking global intent collapse button
  - name: ca.test.functions.globalIntent.collapseGlobalIntent
    flow:
      - sleep:
          duration: 2000
      - if: 
          identifier:
            notPresent:
              - identifier: ca.test.mappings.globalIntent.collapsedChevron 
          then:
            - click:
                identifier: ca.test.mappings.globalIntent.expandedChervon
          else:
            - log:
                message: "Global Intent is in collapsed form"
                color: GREEN_BOLD
      - log:
          message: "End functions: globalIntent.collapseGlobalIntent"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This taps on the store selection button 
  # Params: No params
  - name: ca.test.functions.globalIntent.tapStoreSelectionChevron
    flow:
      - click:
          identifier: ca.test.mappings.globalIntent.pickupStoreChevron
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: ca.test.mappings.storeSelection.title
      - log:
          message: "End functions: globalIntent.tapStoreSelectionChevron"
          color: BLUE
  
  #--------------------------------------------------------------------------------------------------------------------

  # Clicking global intent expand button
  - name: ca.test.functions.globalIntent.expandGlobalIntent
    flow:
      - if: 
          identifier:
            notPresent:
              - identifier: ca.test.mappings.globalIntent.expandedChervon
          then:
            - sleep:
                duration: 5000
            - click:
                identifier: ca.test.mappings.globalIntent.collapsedChevron
          else:
            - log:
                message: "Global Intent is in expanded form"
                color: GREEN_BOLD
      - log:
          message: "End functions: globalIntent.expandGlobalIntent"
          color: BLUE
  #--------------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------------
  # Description: This functions is Validating Global Intent collapsed view
  # Params: No Params 
  # @Author: akshelya.raghuvaran (vn548ph)
  # @LastUpdate:
  - name: ca.test.functions.globalIntent.validateCollapsedGlobalIntent
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.collapsedIcon
            - identifier: ca.test.mappings.globalIntent.collapsedContent
            - identifier: ca.test.mappings.globalIntent.collapsedLocation
            - identifier: ca.test.mappings.globalIntent.collapsedChevron
      - log:
          message: "End functions: globalIntent.collapsedHeaderValidation"
          color: BLUE
#--------------------------------------------------------------------------------------------------------------------