functions:
#--------------------------------------------------------------------------------------------------------------------
  # Description: This functions validate pickup intent page, store name and address
  # params ${storeName}    [Mandatory]  Store name for assertion
  #        ${storeAddress} [Mandatory]  Store address for assertion
  #        ${assertStoreAddress} [Optional] Store adddress for assertion
  # @Author: akshelya.raghuvaran (vn548ph)
  # @LastUpdate:
  - name: ca.test.functions.globalIntent.valdiatePickupIntentHotCard
    platform: ios
    flow:
      - executeNode:
          file: ca/test/helpers/TextUpperCase.js
          args:
            - value: ${storeName}
            - value: 'toUpperCase'
          getResponse:
            storeIn: storeNameUpperCase
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.intentIcon
            - identifier: ca.test.mappings.globalIntent.pickupStoreChevron
          label:
            - identifier: ca.test.mappings.globalIntent.intentHotTitle
              equals: ${storeNameUpperCase}
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
              equals: ca.data.mappings.globalIntent.speedFilterHeader
      - if:
          condition: ${assertStoreAddress}
          then:
            - verifyIdentifier:
                label:
                  - identifier: ca.test.mappings.globalIntent.intentHotSubtitle
                    equals: ${storeAddress}
      - executeFunction:
          name: ca.test.functions.globalIntent.validateSpeedFilter
      - log:
          message: "End functions: globalIntent.valdiatePickupIntentHotCard"
          color: BLUE
#--------------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------------
  # Description: This functions validate delivery intent for guest users
  # Params:  ${defaultAddress} [Mandatory] Used for default address assertion

  # Some part of the code is commented due to the CAPURCHASE-1413
  - name: ca.test.functions.globalIntent.guestUser.validateDeliveryHotCard
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.intentIcon
            # - identifier: ca.test.mappings.globalIntent.deliveryIntentHot.title
            # - identifier: ca.test.mappings.globalIntent.addAddressButton
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
          label:
            # - identifier: ca.test.mappings.globalIntent.intentHotTitle
            #   equals: ca.data.mappings.globalIntent.intentHotTitle
            # - identifier: ca.test.mappings.globalIntent.deliveryIntentHot.title
            #   equals: ${defaultAddress}
            # - identifier: ca.test.mappings.globalIntent.addAddressButton
            #   equals: ca.data.mappings.globalIntent.addAddressButton
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
              equals: ca.data.mappings.deliveryGlobalIntent.speedFilterHeader
      - executeFunction:
          name: ca.test.functions.globalIntent.validateSpeedFilter
      - log: 
          message: "End functions: globalIntent.guestUser.validateDeliveryHotCard"
          color: BLUE
#--------------------------------------------------------------------------------------------------------------------
  # Description: This functions validate global intent onboarding screen
  # Params: No Params
  # @Author: akshelya.raghuvaran (vn548ph)
  # @LastUpdate:
  - name: ca.test.functions.globalIntent.validateOnboardingScreen
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.globalIntent.onboardingImage
          then:
            - verifyIdentifier:
                timeout: 15000
                present:
                  - identifier: ca.test.mappings.globalIntent.onboardingImage
            - verifyIdentifier:
                label:
                  - identifier: ca.test.mappings.globalIntent.onboardingScrollViewTitle
                    equals: ca.data.mappings.globalIntent.onboardingScrollViewTitle
                  - identifier: ca.test.mappings.globalIntent.onboardingScrollViewSubTitle
                    equals: ca.data.mappings.globalIntent.onboardingScrollViewSubTitle
      - log:
          message: "End functions: globalIntent.validateOnboardingScreen"
          color: BLUE
#--------------------------------------------------------------------------------------------------------------------  
#--------------------------------------------------------------------------------------------------------------------
  # Description: This functions validate delivery intent for guest users
  # Params:  ${defaultAddress} [Mandatory] Used for default address assertion
  # @Author: akshelya.raghuvaran (vn548ph)
  # @LastUpdate:
  - name: ca.test.functions.globalIntent.registeredUser.validateDeliveryHotCard
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.globalIntent.intentIcon
            - identifier: ca.test.mappings.globalIntent.intentHotTitle
            - identifier: ca.test.mappings.globalIntent.intentHotSubtitle
            - identifier: ca.test.mappings.globalIntent.addAddressButton
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
          label:
            - identifier: ca.test.mappings.globalIntent.intentHotTitle
              equals: ca.data.mappings.globalIntent.intentHotTitle
            - identifier: ca.test.mappings.globalIntent.intentHotSubtitle
              equals: ${defaultAddress}
            - identifier: ca.test.mappings.globalIntent.addAddressButton
              equals: ca.data.mappings.globalIntent.addAddressButton
            - identifier: ca.test.mappings.globalIntent.speedFilterHeader
              equals: ca.data.mappings.deliveryGlobalIntent.speedFilterHeader
      - executeFunction:
          name: ca.test.functions.globalIntent.validateSpeedFilter
      - log: 
          message: "End functions: globalIntent.registeredUser.validateDeliveryHotCard"
          color: BLUE
 #--------------------------------------------------------------------------------------------------------------------
 #--------------------------------------------------------------------------------------------------------------------
  # Description: This function check if the store name is already displayed.
  # No Param  
  # @Author: akshelya.raghuvaran (vn548ph)
  # @LastUpdate:
  - name: ca.test.functions.globalIntent.isRequiredStoreDisplayed
    platform: ios
    flow:
      - executeNode:
          file: ca/test/helpers/TextFormatting.js
          args:
            - value: ${storeName}
            - value: 'toUpperCase'
          getResponse:
            storeIn: storeNameUpperCase
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            label:
              - identifier: ca.test.mappings.globalIntent.intentHotTitle
                contains: ${storeNameUpperCase}
          then: 
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: globalIntent.isRequiredStoreDisplayed"
                color: BLUE
          else: 
          - log:
              message: "End function: globalIntent.isDisplayed (Not displayed)"
              color: BLUE 

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function check if the address name is already displayed in GIC.
  # params  ${userAddress}  [Mandatory]  User address first line.
  - name: ca.test.functions.globalIntent.isRequiredAddressDisplayed
    platform: ios
    flow:
      - storeIn:
          key: returnedIsDisplayed
          value: false
      - if:
          identifier:
            label:
              - identifier: ca.test.mappings.globalIntent.delivery.addressLine
                contains: ${userAddress}
          then:
            - storeIn:
                key: returnedIsDisplayed
                value: true
            - log:
                message: "End function: globalIntent.isRequiredAddressDisplayed"
                color: BLUE
          else: 
            - log:
                message: "End function: globalIntent.isRequiredAddressDisplayed (Not displayed)"
                color: BLUE

  #--------------------------------------------------------------------------------------------------------------------
