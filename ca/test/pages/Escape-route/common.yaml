 functions:

 #--------------------------------------------------------------------------------------------------------------------

  # Description: This function closes add phone number pop up
  # No Param
  - name: ca.test.function.escape-route.closeAddPhoneNumberPopup
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.escape-route.addPhoneNumberTitle
          then:
            - click:
                identifier: ca.test.mappings.escape-route.addPhoneNumberDenyButton
      - log:
          message: "End function: escape-route.closeAddPhoneNumberPopup"
          color: BLUE              

  #--------------------------------------------------------------------------------------------------------------------

  # Description: This function closes icloud pop up for ios
  # No Param
  - name: ca.test.function.escape-route.icloudPopup
    flow:
      - sleep:
          duration: 5000  
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.global.authentication.icloudPopUp
          then:
            - click:
                identifier: ca.test.mappings.global.authentication.dontAllow 
      - sleep:
          duration: 5000        
      - log:
          message: "End function: escape-route.icloudPopup"
          color: BLUE              

  #--------------------------------------------------------------------------------------------------------------------

  # Description:  This method is used to check the address popup is displayed and save it.
  - name: ca.test.functions.escape-route.addressSelector.popUp
    flow:
      - executeFunction:
          name: ca.test.functions.addressSelectorPopup.isAddressPageDisplayed
      - if:
          condition: ${returnedIsDisplayed} == true
          then:
            - log:
                message: "Address popup is displayed"
                color: CYAN          
            - executeFunction:
                name: ca.test.functions.addressSelectorPopup.tapSaveButton
      - log:
           message: "End function: escape-route.addressSelector.popUp"
           color: BLUE
  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: Used to handle GC technical issue
  # No Param
  # @Author: pratik.shete[vn55ofc]
  # @LastUpdate:

  - name: ca.test.functions.escape-route.handleGiftCardTechnicalIssue
    flow:
      - click:
          identifier: ca.test.mappings.walletPage.closeButton
      - sleep:
          duration: 5000
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.checkOutPage.changePaymentButton
          then:
            - scroll:
                direction: down
                untilIdentifier: ca.test.mappings.checkOutPage.changePaymentButton
      - click:
          identifier: ca.test.mappings.checkOutPage.changePaymentButton
      - sleep:
          duration: 10000
      - log:
          message: "End Function: escape-route.handleGiftCardTechnicalIssue"
          color: BLUE
  #--------------------------------------------------------------------------------------------------------------------
  
  # Description: This function is used to Handle Unable To Load Wallet Popup
  # No Param
  # @Author: pratik.shete[vn55ofc]
  # @LastUpdate:

  - name: ca.test.functions.escape-route.handleUnableToLoadWalletPopup
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.escape-route.unableToLoadWalletText
          then:
            - click:
                identifier: ca.test.mappings.escape-route.acceptButton
            - sleep:
                duration: 5000
            - click:
                identifier: ca.test.mappings.escape-route.editPaymentBtn
            - sleep:
                duration: 5000
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.checkOut.editPayment.paypal.walletSuccessMessage
            - click:
                identifier: ca.test.mappings.global.closeIcon
          else:
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier:  ca.test.mappings.checkOut.editPayment.paypal.walletSuccessMessage
            - click:
                identifier: ca.test.mappings.global.closeIcon
  #--------------------------------------------------------------------------------------------------------------------

        
  
    
  
