functions:

# Description: This functions verify item badge if present in array of item and will add item  to cart
  # params: ${items}                    [Mandatory] >> Item Sku to enter
  #         ${promotionalBadge}         [Optional]  >> promotional badge name to enter
  #         ${quantity}                 [Optional]  >> Quantity of product to add to cart
  #         ${checkPromotionBadges}     [Optional]  >> Mark As True for Validating Promotional Badges
  #         ${checkNonPromotionBadges}  [Optional]  >> Mark As True for Validating Non Promotional Badges
  - name: ca.functions.searchPage.searchItemArray
    flow:
      - if:
          condition: ${quantity} == 'null'
          then:
            - storeIn:
                key: quantity
                value: "1"
      - loop:
          each: ${items}
          storeElement: item
          storeIndex: itemIndex
          flow:
            - executeFunction:
                name: ca.test.functions.searchPage.enterSearchText   #<--Params -${item}
            - executeFunction:
                name: ca.test.functions.searchPage.isAddToCartButtonPresent
            - if:
                condition: "!${isAddToCartButtonPresent}"
                then:
                  - log:
                      message: "Add to cart button not present...."
                      color: CYAN_BOLD
                else:
                  - if:
                      condition: ${checkPromotionBadges}
                      then:
                        - executeFunction:
                            name: ca.test.functions.searchPage.isPromotionalProduct
                            params:
                              - name: promotionalBadge
                                string: ${promotionalBadge}
                        - if:
                            condition: ${isPromotionalBadgeDisplayed} == true
                            then:
                              - executeFunction:
                                  name: ca.test.functions.searchPage.tapAddToCartButton
                              - break: true
                            else:
                              - log:
                                  message: "${promotionalBadge} Not Present!"
                  - if:
                      condition: ${checkNonPromotionBadges}
                      then:
                        - executeFunction:
                            name: ca.test.functions.searchPage.tapAddToCartButton
                        - break: true
      - executeFunction:
          name: ca.test.functions.search.getProductName
      - executeFunction:
          name: ca.test.functions.searchPage.getProductCost
          params:
            - name: quantity
              string: ${quantity}
      - log:
          message: "End functions: search.searchItemArray"
          color: GREEN_BOLD