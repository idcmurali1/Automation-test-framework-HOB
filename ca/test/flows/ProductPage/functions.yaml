functions:
  
#--------------------------------------------------------------------------------------------------------------------

  #  Description: Validating all the required functionalities of save and subscribe on PDP screen
  #  Param ${badges}                       [Madatory] This parameter will be used to validate the badge in product page.  
  #        ${productPriceWithSubscription} [Madatory] Product price with subscription
  #        ${actualProductPrice}           [Madatory] This parameter will be used to validate the actual price of product
  #        ${discountedPrice}              [Madatory] Percent of discount applied to a product after subscription
  #        ${productName}                  [Mandatory] This parameter is used to validate product name 
  
  - name: ca.test.functions.productPage.saveAndSubscribePdpValidations
    flow:
      - executeFunction:
          name: ca.test.functions.productPage.isProductPageDisplayed
          params:
            - name: productName
              string: ${productName}
      - if:
          condition: ${isReturnedDisplayed} == true
          then:
            - log:
                message: "Product Page is Displayed"
                color: CYAN
          else:
            - failTest:
                message: "Product Page is not displayed"
      - executeFunction:
          name: ca.test.functions.productPage.validateBadges
          params:
            - name: badges
              string: ${badges}
      - scroll:
          direction: down
          untilIdentifier: ca.test.mappings.productPage.containerTobeScrolled
          withinIdentifier: ca.test.mappings.productPage.locatorUntilToBeScrolled
      - executeFunction:
          name: ca.test.functions.productPage.purchaseOptions.validateOneTimePurchaseOption
          params:
            - name: actualProductPrice
              string: ${actualProductPrice}
      - executeFunction:
          name: ca.test.functions.productPage.purchaseOptions.validateSubscribeToSaveOption
          params:
            - name: strikeOutPrice
              string: ${actualProductPrice}
            - name: discountPercent
              string: ${discountPercent}
            - name: discountedPrice
              string: ${discountedPrice}
      - executeFunction:
         name: ca.test.functions.productPage.purchaseOptions.tapSubscribeAndSave
      - executeFunction:
          name: ca.test.functions.productPage.validateAddToCartChangeToSubscriptionBtn
      - executeFunction:
         name: ca.test.functions.productPage.tapSetUpSubscription
      - executeFunction:
          name: ca.test.functions.productPage.validateSubscribe$SavePopup
          params:
            - name: productName
              string: ${productName}

          