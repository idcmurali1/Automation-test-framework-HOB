functions:
  # Account page validation before login
  - name: ca.test.functions.accountPage.accountPageBeforeLogin
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.header
            - identifier: ca.test.mappings.account.signInButton
            - identifier: ca.test.mappings.account.signInHeader
            - identifier: ca.test.mappings.account.purchaseHistorytrackOrder
            - identifier: ca.test.mappings.account.privacyCenter
      - scroll:
          direction: down
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.contactUs
            - identifier: ca.test.mappings.account.termsOfUse
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.customerServices
          then:
            - log: Account page is not have customer service button under help sections
      - scroll:
          direction: up
          untilIdentifier: ca.test.mappings.accountPage.signInBtn

  # Account page validation after login
  - name: ca.test.functions.accountPage.accountPageAfterLogin
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.accountPurchaseHistory
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.accountManageLayout
          then:
            - scroll:
                direction: down
                untilIdentifier: ca.test.mappings.account.accountManageLayout
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.accountPurchaseHistory
            - identifier: ca.test.mappings.account.accountManageLayout
            - identifier: ca.test.mappings.account.accountWalletCard
      - scroll:
          direction: down
          untilIdentifier: ca.test.mappings.account.signOutButton
      - verifyIdentifier:
          present: 
            - identifier: ca.test.mappings.account.accountMyItems
            - identifier: ca.test.mappings.account.signOutButton
      - scroll:
          direction: down
          untilIdentifier: ca.test.mappings.account.termsOfUse
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.privacyCenter
            - identifier: ca.test.mappings.account.contactUs
            - identifier: ca.test.mappings.account.termsOfUse
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.customerServices
          then:
            - log: Account page is not have customer service button under help sections

  - name: ca.test.functions.accountPage.purchaseHistoryButton
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.accountPurchaseHistory
          then:
            - scroll:
                direction: up
                untilIdentifier: ca.test.mappings.account.accountPurchaseHistoryArrownButton
      - loop:
          begin: 1
          end: 10
          mode: increment
          flow:
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.account.accountPurchaseHistory
            - sleep:
                duration: 25000
            - click:
                identifier: ca.test.mappings.account.accountPurchaseHistoryArrownButton
            - sleep:
                duration: 15000
            - if:
                identifier:
                  notPresent:
                    - identifier: ca.test.mappings.purchaseHistory.orderStatusTracker
                then:
                  - goBack: true
                else: 
                  - break: true

  - name: ca.test.functions.accountPage.signOut
    platform: android
    flow:
      - if: 
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.signOutButton
          then:
            - scroll:
                untilIdentifier: ca.test.mappings.account.signOutButton
                direction: down
                position: center
      - click:
          identifier: ca.test.mappings.account.signOutButton
      - verifyIdentifier:
          timeout: 50000
          present:
            - identifier: ca.test.mappings.account.accountHeader

  - name: ca.test.functions.accountPage.navigateToShop
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.tabBar.shop
          then:
            - scroll:
                direction: up
                untilIdentifier: ca.test.mappings.tabBar.shop
                withinIdentifier: ca.test.mappings.account.privacyCarousel
      - click:
          identifier: ca.test.mappings.tabBar.shop

    
  - name: ca.test.functions.accountPage.signOut
    platform: ios
    flow:
      - if: 
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.signOutButton
          then:
            - scroll:
                untilIdentifier: ca.test.mappings.account.signOutButton
                direction: down
                position: center
      - click:
          identifier: ca.test.mappings.account.signOutButton
      - verifyIdentifier:
          timeout: 5000
          present:
            - identifier: ca.test.mappings.account.accountHeader
  
  # Account page validation after login
  - name: ca.test.functions.accountPage.accountPageAfterLogin
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.accountPurchaseHistory
            - identifier: ca.test.mappings.account.accountWalletCard
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.tabBar.rightsReserved
          then:
            - scroll:
                direction: down
                untilIdentifier: ca.test.mappings.tabBar.rightsReserved
                timeout: 30000
      - verifyIdentifier:
          present:
          - identifier: ca.test.mappings.account.accountManageLayout
          - identifier: ca.test.mappings.account.accountWalletCard
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.termsOfUse
          then:
            - scroll:
                direction: down
                untilIdentifier: ca.test.mappings.account.termsOfUse
                timeout: 30000
      - verifyIdentifier:
          present: 
            - identifier: ca.test.mappings.account.accountMyItems
            - identifier: ca.test.mappings.account.signOutButton
            - identifier: ca.test.mappings.account.privacyCenter
            - identifier: ca.test.mappings.account.contactUs
            - identifier: ca.test.mappings.account.termsOfUse  
  # - if:
      #     identifier:
      #       notPresent:
      #         - identifier: ca.test.mappings.account.customerServices
      #     then:
      #       - log: Account page is not have customer service button under help sections
      # Account page validation before login

  # Navigate Home To Account Page
  - name: ca.test.functions.home.navigateHomeToAccountPage
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.tabBar.account
      - click:
          identifier: ca.test.mappings.tabBar.account

  - name: ca.test.functions.accountPage.purchaseHistoryButtonIos
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.accountPurchaseHistory
          then:
            - scroll:
                direction: up
                untilIdentifier: ca.test.mappings.account.accountPurchaseHistory

                timeout: 10000

      - click:
          identifier: ca.test.mappings.account.accountPurchaseHistory          

      # - loop:
      #     begin: 1
      #     end: 4
      #     mode: increment
      #     flow:
      #       - verifyIdentifier:
      #           present:
      #             - identifier: ca.test.mappings.account.accountPurchaseHistory
      #       - click:
      #           identifier: ca.test.mappings.account.accountPurchaseHistory
      #       - sleep:
      #       - if:
      #           identifier:
      #             notPresent:
      #               - identifier: ca.test.mappings.purchaseHistory.title
      #           then:
      #             - goBack: true
      #           else:

      #             - break: true
                   
  - name: ca.test.functions.accountPage.accountPageBeforeLogin
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.header
            - identifier: ca.test.mappings.account.signInButton
            # - identifier: ca.test.mappings.account.signInHeader
            # - identifier: ca.test.mappings.account.purchaseHistorytrackOrder
            - identifier: ca.test.mappings.account.privacyCenter
            - identifier: ca.test.mappings.account.contactUs
            - identifier: ca.test.mappings.account.termsOfUse
      # - if:
      #     identifier:
      #       notPresent:
      #         - identifier: ca.test.mappings.account.customerServices
      #     then:
      #       - log: Account page is not have customer service button under help sections

  # Go to address page in account section
  - name: ca.test.functions.accountPage.goToAddresses
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.addressList
          then:
            - scroll:
                direction: down
                untilIdentifier: ca.test.mappings.account.addressList
                position: center
      - click:
          identifier: ca.test.mappings.account.addressList
      - sleep:
          duration: 8000
#      - verifyIdentifier:
#          notPresent:
#            - identifier: ca.test.mappings.account.addressList

  # Add an address button
  - name: ca.test.functions.accountPage.addNewAddressButton
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.addresses.title
            - identifier: ca.test.mappings.accountPage.addresses.addAddressLabel
            - identifier: ca.test.mappings.accountPage.addresses.addAddressButton
      - click:
          identifier: ca.test.mappings.accountPage.addresses.addAddressButton
      - verifyIdentifier:
          notPresent:
            - identifier: ca.test.mappings.accountPage.addresses.title
  
  - name: ca.test.functions.accountPage.addresses.addNewAddress
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.deliveryAddress.add.firstName
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.firstName
          string: ${fName}
          clearField: true
          clickFirst: true
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.LastName
      - enterText:
          identifier: ca.test.mappings.LastName
          string: ${lName}
          clearField: true
          clickFirst: true
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.addresses.addressFirstLine
      - click:
          identifier: ca.test.mappings.accountPage.addresses.addressFirstLine
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.global.onboarding.allowDeviceLocationAccess
          then:
            - click:
                identifier: ca.test.mappings.deliveryAddress.add.allowLocationPermission
      - sleep:
          duration: 2000
      - enterText:
          identifier: ca.test.mappings.accountPage.addresses.addressFirstLine
          string: ${streetAddress}
          clearField: true
          clickFirst: true
      - sleep:
          duration: 2000
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.selectRecommendation
          then:
            - click:
                identifier: ca.test.mappings.accountPage.selectRecommendation
      - sleep:
          duration: 5000
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.city
          string: ${city}
          clickFirst: true
      - goBack: true
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.province
          string: ${state}
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.zipcode
          string: ${zipcode}
      - goBack: true
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.mobilePhone
      - enterText:
          identifier: ca.test.mappings.accountPage.mobilePhone
          string: ${mobileNumber}
      - goBack: true
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.setDefaultAddressCheckBox
          then:
            - click:
                identifier: ca.test.mappings.accountPage.setDefaultAddressCheckBox
      - click:
          identifier: ca.test.mappings.deliveryAddress.add.saveButton
      - sleep:
          duration: 10000
      - verifyIdentifier:
          timeout: 10000
          notPresent:
            - identifier: ca.test.mappings.deliveryAddress.add.saveButton
      - sleep:
          duration: 5000
      - goBack: true
  
  # Select wallet from account page
  - name: ca.test.functions.accountPage.selectWallet
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.accontPage.walletTitle
          then:
            - scroll:
                direction: up
                untilIdentifier: ca.test.mappings.accontPage.walletTitle
                position: center
      - click:
          identifier: ca.test.mappings.accontPage.walletTitle
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.walletPageTitle
          notPresent:
            - identifier: ca.test.mappings.account.wallet.oneCardDesc

  # Select wallet from account page
  - name: ca.test.functions.accountPage.selectWallet
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.accontPage.walletTitle
          then:
            - scroll:
                direction: up
                untilIdentifier: ca.test.mappings.accontPage.walletTitle
                position: center
      - click:
          identifier: ca.test.mappings.accontPage.walletTitle

  # - name: ca.test.functions.accountPage.addNewCreditCard
  #   platform: android
  #   flow:
  #     - verifyIdentifier:
  #         timeout: 120000
  #         present:
  #           - identifier: ca.test.mappings.accountPage.walletPageTitle
  #           - identifier: ca.test.mappings.accountPage.cardContainer
  #           - identifier: ca.test.mappings.accountPage.addPaymentMethod
  #     - click:
  #         identifier: ca.test.mappings.accountPage.addPaymentMethod
  #     - verifyIdentifier:
  #         timeout: 10000
  #         present:
  #           - identifier: ca.test.mappings.addPaymentOptions.title
  #     - click:
  #         identifier: ca.test.mappings.accountPage.paymentMethodText

  - name: ca.test.functions.account.paymentMethod.addCardDetailsAndAddress
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.walletPageTitle
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.creditCardBox
          then: 
            - click:
                identifier: ca.test.mappings.accountPage.editButton
            - sleep:
                duration: 5000
            - click:
                identifier: ca.test.mappings.accountPage.creditCardDeleteButton
            - click:
                identifier: ca.test.mappings.accountPage.creditCardRemoveConformPopUp
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.addPaymentMethod
          then:
            - click:
                identifier: ca.test.mappings.accountPage.addPaymentMethod
      # - verifyIdentifier:
      #     present:
      #       - identifier: ca.test.mappings.addPaymentOptions.title
      - click:
          identifier: ca.test.mappings.accountPage.paymentMethodText
      - enterText:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.cardNumberField
          string: ${number}
          pressEnter: true
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.paymentMethod.addPayment.overlay.expiry
          then:
            - click:
                identifier: ca.test.mappings.paymentMethod.addPayment.overlay.expiry
      
            - enterText:
                identifier: ca.test.mappings.paymentMethod.addPayment.overlay.expiry
                string: ${expiration}
                clearField: true
                clickFirst: true
                pressEnter: true
      - click:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.securityCodeField
      - enterText:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.securityCodeField
          string: ${cvv}
          pressEnter: true
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.deliveryAddress.add.firstName
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.firstName
          string: ${fName}
          clearField: true
          clickFirst: true
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.LastName
      - enterText:
          identifier: ca.test.mappings.LastName
          string: ${lName}
          clearField: true
          clickFirst: true
      - goBack: true
      - enterText:
          identifier: ca.test.mappings.accountPage.mobilePhone
          string: ${mobileNumber}
          pressEnter: true
      - goBack: true
      - scroll:
           direction: down
      - enterText:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.streetAddressField
          string: ${streetAddress}
      - goBack: true
      - enterText:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.cityField
          string: ${city}
      - goBack: true
      - enterText:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.stateDropdown
          string: ${state}
      - goBack: true
      - enterText:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.zipCodeField
          string: ${zipcode}
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.paymentMethod.addPayment.overlay.saveButton
          then:
            - click:
                identifier: ca.test.mappings.paymentMethod.addPayment.overlay.saveButton
                wait: 3000
      - verifyIdentifier:
          timeout: 15000
          present:
            - identifier: ca.test.mappings.walletPage.cardAddSuccessfulMessage
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.walletPage.cardAddSuccessfulMessageValidation
              contains: ${cardLast4digits}
      - log:
          message: "--------------------Credit Card Added Successfully--------------------"
          color: GREEN_BOLD

  - name: ca.test.functions.accountPage.removeAddress
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.addAddress.addressLine
          then:
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.accountPage.addAddress.addressRemoveButton
            - click:
                identifier: ca.test.mappings.accountPage.addAddress.addressRemoveButton
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.accountPAge.addAddress.removeAddressPopUp
            - click:
                identifier: ca.test.mappings.accountPage.addAddress.removeAddressPopUp.removebutton
            - verifyIdentifier:
                timeout: 10000
                notPresent:
                  - identifier: ca.test.mappings.accountPage.addAddress.addressLine
          
  - name: ca.test.functions.cart.addresses.addNewAddress
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.deliveryAddress.add.firstName
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.firstName
          string: ${fName}
          clearField: true
          clickFirst: true
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.LastName
      - enterText:
          identifier: ca.test.mappings.LastName
          string: ${lName}
          clearField: true
          clickFirst: true
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.addresses.addressFirstLine
      - click:
          identifier: ca.test.mappings.accountPage.addresses.addressFirstLine
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.global.onboarding.allowDeviceLocationAccess
          then:
            - click:
                identifier: ca.test.mappings.deliveryAddress.add.allowLocationPermission
      - sleep:
          duration: 2000
      - enterText:
          identifier: ca.test.mappings.accountPage.addresses.addressFirstLine
          string: ${streetAddress}
          clearField: true
          clickFirst: true
      - sleep:
          duration: 2000
      - click:
          identifier: ca.test.mappings.accountPage.selectRecommendation
      - sleep:
          duration: 5000
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.city
          string: ${city}
          clickFirst: true
      - goBack: true
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.province
          string: ${state}
      - enterText:
          identifier: ca.test.mappings.deliveryAddress.add.zipcode
          string: ${zipcode}
      - goBack: true
      - sleep:
          duration: 5000
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.mobilePhone
      - enterText:
          identifier: ca.test.mappings.accountPage.mobilePhone
          string: ${mobileNumber}
      - goBack: true
      # - if:
      #     identifier:
      #       present:
      #         - identifier: ca.test.mappings.accountPage.setDefaultAddressCheckBox
      #     then:
      #       - click:
      #           identifier: ca.test.mappings.accountPage.setDefaultAddressCheckBox
      - sleep:
          duration: 3000
      - click:
          identifier: ca.test.mappings.deliveryAddress.add.saveButton
      - sleep:
          duration: 10000
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.global.infoMessage
          then: 
            - click:
                identifier: ca.test.mappings.deliveryAddress.add.saveButton
      - verifyIdentifier:
          timeout: 10000
          notPresent:
            - identifier: ca.test.mappings.deliveryAddress.add.saveButton
      - sleep:
          duration: 5000

  - name: ca.test.functions.accountPage.navigateToShop
    platform: ios
    flow:
      - if:
          identifier:
            timeout: 10000
            notPresent:
              - identifier: ca.test.mappings.tabBar.shop
          then:
            - scroll:
                direction: up
                untilIdentifier: ca.test.mappings.tabBar.shop
                timeout: 10000
      - click:
          identifier: ca.test.mappings.tabBar.shop 
                 
  # Go to address page in account section
  - name: ca.test.functions.accountPage.goToAddresses
    platform: ios
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.deliveryAddress.addAddress
            timeout: 10000
          then:
            - scroll:
                direction: down
                untilIdentifier: ca.test.mappings.account.deliveryAddress.addAddress
                position: center
                scrollLimit: 4
      - click:
          identifier: ca.test.mappings.account.deliveryAddress.addAddress
      - verifyIdentifier:
          notPresent:
            - identifier: ca.test.mappings.account.deliveryAddress.addAddress

  - name: ca.test.functions.accountPage.removeAddress
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.addAddress.addressLine
          then:
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.accountPage.addAddress.addressRemoveButton
            - click:
                identifier: ca.test.mappings.accountPage.addAddress.addressRemoveButton
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.accountPAge.addAddress.removeAddressPopUp
            - click:
                identifier: ca.test.mappings.accountPage.addAddress.removeAddressPopUp.removebutton
            - verifyIdentifier:
                timeout: 10000
                notPresent:
                  - identifier: ca.test.mappings.accountPage.addAddress.addressLine  
            - goBack: true
            - sleep:
                duration: 1000
            - click:
                identifier: ca.test.mappings.tabBar.shop
          else:
              - log:
                  message: No address to remove
                  color: YELLOW

  - name: ca.test.functions.account.paymentMethod.addCardDetailsAndAddress
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.walletPageTitle
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.creditCardBox
          then: 
            - click:
                identifier: ca.test.mappings.accountPage.editButton
            - click:
                identifier: ca.test.mappings.accountPage.creditCardDeleteButton
                wait: 5000
            - click:
                identifier: ca.test.mappings.accountPage.creditCardRemoveConformPopUp
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.addPaymentMethod
          then:
            - click:
                identifier: ca.test.mappings.accountPage.addPaymentMethod
      - click:
          identifier: ca.test.mappings.accountPage.paymentMethodText
      - enterText:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.cardNumberField
          string: ${number}
          pressEnter: true
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.paymentMethod.addPayment.overlay.expiry
          then:
            - click:
                identifier: ca.test.mappings.paymentMethod.addPayment.overlay.expiry
            - enterText:
                identifier: ca.test.mappings.paymentMethod.addPayment.overlay.expiryMonth
                string: ${expirationMonth}
            - enterText:
                identifier: ca.test.mappings.paymentMethod.addPayment.overlay.expiryDate
                string: ${expirationDate}
            - sleep: 
                duration: 3000   
            - click:
                identifier: ca.test.mapping.checkout.keyboard 
            - sleep: 
                duration: 5000  
      - click:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.securityCodeField
      - enterText:
          identifier: ca.test.mappings.paymentMethod.addPayment.overlay.securityCodeField
          string: ${cvv}
          pressEnter: true
      - executeFunction:
          name: ca.test.functions.utils.handlingKeyboard
      - sleep: 
          duration: 5000 
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.accountPage.mobilePhone
      - enterText:
          identifier: ca.test.mappings.accountPage.mobilePhone
          string: ${mobileNumber}
          pressEnter: true
      - if:
          identifier:
            present:
              - identifier: ca.test.mapping.checkout.keyboard  
          then:
            - click: 
                identifier: ca.test.mapping.checkout.keyboard
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.paymentMethod.addPayment.overlay.saveButton
          then:
            - click:
                identifier: ca.test.mappings.paymentMethod.addPayment.overlay.saveButton
                wait: 3000
      - verifyIdentifier:
          timeout: 15000
          present:
            - identifier: ca.test.mappings.walletPage.cardAddSuccessfulMessage
      - log:
          message: "--------------------Credit Card Added Successfully--------------------"
          color: GREEN_BOLD
      - goBack: true

  - name: ca.test.functions.accountPage.wallet.removeExistingCard
    platform: ios
    flow:
      - sleep:
          duration: 5000
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: ca.mappings.accounts.wallet.title
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.checkout.editPayment.creditCard.cardContainer
          then:
            - click:
                identifier: ca.test.mappings.accountPage.editButton
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.account.paymentethod.editPayment.editCardText
            - click:
                identifier: ca.test.mappings.account.wallet.editCardButton.deleteButton
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.account.wallet.editCardButton.delete.removeCardTitle
                  - identifier: ca.test.mappings.account.wallet.editCardButton.delete.removeCard.confirmationText
            - click:
                identifier: ca.test.mappings.account.wallet.editCardButton.delete.removeCard.primaryButton
            - sleep:
                duration: 5000
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.checkout.editPayment.addNewCard.successful

  - name: ca.test.functions.accountPage.addresses.deleteAddress
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.accountPage.addAddress.removeButton
          then:
            - click:
                identifier: ca.test.mappings.accountPage.addAddress.removeButton
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.accountPage.addAddress.removeButton.popUpTitle
            - click:
                identifier: ca.test.mappings.global.removeButton
            - verifyIdentifier:
                notPresent:
                  - identifier: ca.test.mappings.accountPage.addAddress.removeButton
      - goBack: true

  #Scroll to DeliveryPass          
  - name: ca.test.functions.accountPage.navigateToDeliveryPass
    platform: android
    flow:
      - sleep:
          duration: 4000
      - executeFunction:
          name: ca.test.functions.global.navigation.goToAccountFromTabBar  
      - scroll:
          direction: down
          untilIdentifier: ca.test.mappings.account.deliveryPass.signOutButton
      - executeFunction:
          name: ca.functions.accountPage.waitForWalmartDeliveryPassSectionToBeVisibile    
      - verifyIdentifier:
          present:
           - identifier: ca.test.mappings.account.deliveryPass.deliveryPassLink     

  #  Wait for Walmart Delivery Pass section to be visibile
  - name: ca.functions.accountPage.waitForWalmartDeliveryPassSectionToBeVisibile
    platform: android
    doWhile: true
    flow:
      - verifyIdentifier:
          notPresent:
            - identifier: ca.test.mappings.account.beforeLogin.deliveryPassLink
      - startActivity:
                packageName: ${APP_PACKAGE:ca.walmart.ecommerceapp.qa}
                activityName: com.walmart.glass.integration.splash.SplashActivity
      - sleep:
          duration: 8000 
      - click:
          identifier: ca.mappings.tabBar.account
          wait: 3000
      - scroll:
          direction: down
          untilIdentifier: ca.test.mappings.account.deliveryPass.signOutButton    

   #Click on Walmart Delivery Pass  button        
  - name: ca.test.functions.accountPage.clickOnWalmartDeliveryPass
    platform: android
    flow:
      - click:
          identifier: ca.test.mappings.account.deliveryPass.deliveryPassLink
      - sleep:
          duration: 2000    
      - log:
          message: "--------------------Clicked On Walmart Delivery Pass Link --------------------"
          color: GREEN_BOLD   

     #Verify Delvery Pass landing screen         
  - name: ca.test.functions.accountPage.deliveryPass.verifyDeliveryPassLandingScreen
    platform: android
    flow:
      - sleep:
          duration: 3000
      - verifyIdentifier:
          timeout: 3000
          notPresent:
            - identifier: ca.test.mappings.account.deliveryPass.deliveryPassLink    
      - click:
          identifier: ca.test.mappings.account.deliveryPass.purchase.subscribeToDeliveryPass
      - sleep:
          duration: 4000         

  #Select existing address if address already present add new address if addrss not present     
  - name: ca.test.functions.accountPage.deliveryPass.selectAddress
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.deliveryPass.purchase.addressRadioButton
          then:
            - log: "Address not added"
            - click:
                identifier: ca.test.mappings.account.deliveryPass.purchase.addAddress
                wait: 10000
            - executeFunction:
                name: ca.test.functions.deliveryAddress.addAddress
                params:
                - name: firstName
                  string: ca.test.android.data.deliveryPass.firstName
                - name: lastName
                  string: ca.test.android.data.deliveryPass.lastName
                - name: streetAddress
                  string: ca.test.android.data.deliveryPass.streetAddress  
                - name: city
                  string: ca.test.android.data.deliveryPass.city    
                - name: state
                  string: ca.test.android.data.deliveryPass.state    
                - name: zipcode
                  string: ca.test.android.data.deliveryPass.zipcode  
                - name: phoneNumber
                  string: ca.test.android.data.deliveryPass.phoneNumber
            - sleep:
               duration: 2000      
            - verifyIdentifier:
                present:
                 - identifier: ca.test.mappings.account.deliveryPass.purchase.addressRadioButton     
          else:   
            - log:
                message: "--------------------Address Already Added --------------------"
                color: GREEN_BOLD      

    #Click on Continue  button on DP purchase flow Choose address screen          
  - name: ca.test.functions.accountPage..deliveryPass.chooseAddress.continue
    platform: android
    flow:
      - sleep:
          duration: 1000  
      - click:
          identifier: ca.test.mappings.account.deliveryPass.purchase.chooseAddress.continueButton
          wait: 2000
      - log:
          message: "--------------------Address Selected Successful--------------------"
          color: GREEN_BOLD                                  

# Check if card not added add a new Card if already    
  - name: ca.test.functions.accountPage.deliveryPass.choosePlan.addNewCard
    platform: android
    flow:
      - sleep:
          duration: 3000 
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.cardExpiryText
          then:
          - log: "Card Not Added- Adding a new Card"
          - click:
              identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.addCard
              wait: 8000     
          - executeFunction:
              name: ca.test.functions.accountPage.deliveryPass.choosePlan.addCard
              params:
                - name: cardNumber
                  string: "ca.test.android.data.deliveryPass.cardNumber"
                - name: expirationDate
                  string: "ca.test.android.data.deliveryPass.expirationDate"
                - name: cvv
                  string: "ca.test.android.data.deliveryPass.cvv"  
                - name: phoneNumber
                  string: "ca.test.android.data.deliveryPass.phoneNumber"
          - sleep:
             duration: 2000        
          - verifyIdentifier:   
              present:
                - identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.cardExpiryText 
          - log:
                message: "--------------------Card added successfully --------------------"
                color: GREEN_BOLD           
          else:   
            - log:
                message: "--------------------Card Already Added --------------------"
                color: GREEN_BOLD  

 #Add New Card
  - name: ca.test.functions.accountPage.deliveryPass.choosePlan.addCard
    platform: android
    flow:
      - sleep:
          duration: 5000  
      - enterText:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.cardNumber
          string: ${cardNumber}
          clickFirst: true
          clearField: true  
      - enterText:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.expirationDate
          string: ${expirationDate}
          clickFirst: true
          clearField: true  
      - enterText:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.cvv
          string: ${cvv}
          clickFirst: true
          clearField: true  
      - enterText:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.phoneNumber
          string: ${phoneNumber}
          clickFirst: true
          clearField: true  
      - click:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.saveCard        
      - sleep:
          duration: 7000
      - log:
          message: "--------------------Card Added  Successful--------------------"
          color: GREEN_BOLD    
          
  #Select Card
  - name: ca.test.functions.accountPage.deliveryPass.choosePlan.selectCard
    platform: android
    flow:
      - sleep:
          duration: 3000  
      - click:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.selectCardRadioButton

   #Select Monthly Plan        
  - name: ca.test.functions.accountPage.deliveryPass.choosePlan.monthly
    platform: android
    flow:
      - sleep:
          duration: 3000  
      - click:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.monthlyPlan
      - log:
          message: "--------------------Monthly Plan Seelcted Successful--------------------"
          color: GREEN_BOLD   

  #Select Annual Plan       
  - name: ca.test.functions.accountPage.deliveryPass.choosePlan.annual
    platform: android
    flow:
      - sleep:
          duration: 3000  
      - click:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.annualPlan 
      - log:
          message: "--------------------Annual Plan Seelcted Successful--------------------"
          color: GREEN_BOLD  

   # Click on Start DeliveryPass Subscription button      
  - name: ca.test.functions.accountPage.deliveryPass.choosePlan.startDeliveryPassSubscription
    platform: android
    flow:
      - log:
          message: "--------------------Click on StartDeliveryPassSubscription Btn--------------------"
          color: GREEN_BOLD   
      - sleep:
          duration: 2000  
      - click:
          identifier: ca.test.mappings.account.deliveryPass.purchase.choosePlan.startDeliveryPassSubscriptionBtn
      - sleep:
          duration: 6000
      - log:
          message: "--------------------Clicked on StartDeliveryPassSubscriptionBtn--------------------"
          color: GREEN_BOLD    

    # Verify Hang Tight Screen           
  - name: ca.test.functions.accountPage.deliveryPass.hangTight.validateHangTightScreen
    platform: android
    flow:
      - verifyIdentifier:
          timeout: 5000
          present: 
            - identifier: ca.test.mappings.account.deliveryPass.purchase.hangTight.headingText
            - identifier: ca.test.mappings.account.deliveryPass.purchase.hangTight.startShoppingButton 
      - log:
          message: "--------------------Able to See Hand Tight Screen Successful--------------------"
          color: GREEN_BOLD    

   # Click on Start Shopping button
  - name: ca.test.functions.accountPage.deliveryPass.hangTight.startShopping
    platform: android
    flow:          
      - click:
          identifier: ca.test.mappings.account.deliveryPass.purchase.hangTight.startShoppingButton
      - sleep:
          duration: 3000
      - verifyIdentifier:
          timeout: 3000
          notPresent:
            - identifier: ca.test.mappings.account.deliveryPass.purchase.hangTight.startShoppingButton    
      - log:
          message: "--------------------Clicked on Start Shopping Button --------------------"
          color: GREEN_BOLD                                 

   # Verify Delivery Pass Membership Details
  - name: ca.functions.accountPage.deliveryPass.verifyMembershipDetails
    platform: android
    flow:
      - sleep:
          duration: 8000 
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.deliveryPassTitleText
              contains: ${deliveryPassTitleText}
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.totalSaving
              contains: ${totalSaving}
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.planName
              contains: ${planName}
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.renewsInDaysText
              contains: ${renewsInDaysText}        
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.nextPaymentDateText
              contains: ${nextPaymentDateText}   
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.nextPaymentDateText
              contains: ${planAmount}             
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.paymentMethodHeadingText
              contains: ${paymentMethodHeadingText}             
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.cardDetails
              contains: ${cardDetails}  
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.addressHeadingText
              contains: ${addressHeadingText}             
      - verifyIdentifier:
          text:
            - identifier: ca.test.mappings.account.deliveryPass.addressDetails
              contains: ${addressDetails}                      
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.deliveryPass.progressBar
            - identifier: ca.test.mappings.account.deliveryPass.cancelSubscriptionLink
            - identifier: ca.test.mappings.account.deliveryPass.paymentIcon
            - identifier: ca.test.mappings.account.deliveryPass.payment.editLink
            - identifier: ca.test.mappings.account.deliveryPass.address.editLink
            - identifier: ca.test.mappings.account.deliveryPass.address.faqLink
            - identifier: ca.test.mappings.account.deliveryPass.address.t&cLink
      - log:
          message: "-------------------- Membership details validated successfully --------------------"
          color: GREEN_BOLD