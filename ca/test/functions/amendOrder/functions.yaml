functions:
  - name: ca.test.functions.amendOrder.increaseQty
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.viewAllOrders
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.viewAllOrders  
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.amendOrder.editButton
      - click:
          identifier: ca.test.mappings.amendOrder.qtyincrease
      - click:
          identifier: ca.test.mappings.amendOrder.updateOrderButton
      - sleep:
          duration: 10000

  - name: ca.test.functions.amendOrder.decreaseQty
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.viewAllOrders
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.viewAllOrders  
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.amendOrder.editButton
      - click:
          identifier: ca.test.mappings.amendOrder.qtydecrease
      - click:
          identifier: ca.test.mappings.amendOrder.updateOrderButton
      - sleep:
          duration: 10000

  - name: ca.test.functions.amendOrder.removeItem
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.viewAllOrders
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.viewAllOrders  
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.amendOrder.editButton
      - click:
          identifier: ca.test.mappings.amendOrder.removeItemButton
      - click:
          identifier: ca.test.mappings.amendOrder.updateOrderButton
      - sleep:
          duration: 10000

  - name: ca.test.functions.amendOrder.removeItemfromMyAcc
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.editButton
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.editButton  
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.removeItemButton
      - click:
          identifier: ca.test.mappings.amendOrder.removeItemButton
      - click:
          identifier: ca.test.mappings.amendOrder.cancellationReason
      - click:
          identifier: ca.test.mappings.amendOrder.cancelOrderButton
      - sleep:
          duration: 10000
     
  - name: ca.test.functions.amendOrder.addItem
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.viewAllOrders
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.viewAllOrders  
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.amendOrder.addItemButton
      - sleep:
          duration: 10000

  - name: ca.test.functions.amendOrder.decreaseQtybelowthreshold
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.viewAllOrders
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.viewAllOrders  
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.viewDetails
      - click:
          identifier: ca.test.mappings.amendOrder.editButton
      - click:
          identifier: ca.test.mappings.amendOrder.qtydecrease
      - click:
          identifier: ca.test.mappings.amendOrder.qtydecrease
      - click:
          identifier: ca.test.mappings.amendOrder.qtydecrease
      - click:
          identifier: ca.test.mappings.amendOrder.updateOrderButton
      - sleep:
          duration: 10000

  - name: ca.test.functions.amendOrder.orderConfirmationScreenValidation
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.orderDetails.orderNumber
            - identifier: ca.test.mappings.orderDetails.timerIcon
            - identifier: ca.test.mappings.orderDetails.timerTickerText
            - identifier: ca.test.mappings.orderDetails.addItem
            - identifier: ca.test.mappings.orderDetails.timerAdditionalmsg
            - identifier: ca.test.mappings.orderDetails.orderType
            - identifier: ca.test.mappings.orderDetails.orderETATime
            - identifier: ca.test.mappings.orderDetails.orderInfo
            - identifier: ca.test.mappings.orderDetails.dotTracker
            - identifier: ca.test.mappings.orderDetails.storeAddress
            - identifier: ca.test.mappings.orderDetails.storeName
            - identifier: ca.test.mappings.orderDetails.itemCount
            - identifier: ca.test.mappings.orderDetails.editButton
            - identifier: ca.test.mappings.orderDetails.itemImage
            - identifier: ca.test.mappings.orderDetails.itemDescription
            - identifier: ca.test.mappings.orderDetails.itemPrice     
      - if:
          identifier:
            notPresent:
              - identifier: ca.walmart.ecommerceapp.qa:id/cancel_cta
          then:
            - scroll:
                direction: down
                untilIdentifier: ca.walmart.ecommerceapp.qa:id/cancel_cta
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.orderDetails.cancelItems
            - identifier: ca.test.mappings.orderDetails.paymentTypeImage
            - identifier: ca.test.mappings.orderDetails.paymentDescription
            - identifier: ca.test.mappings.orderDetails.paymentValue
            - identifier: ca.test.mappings.orderDetails.posSummary
            - identifier: ca.test.mappings.orderDetails.cancelOrderButton

############################################################################## IOS ##############################################################################
  
  - name: ca.test.functions.amendOrder.removeItemIos
    platform: ios
    flow: 
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.editButton
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.editButton
          else:
            - sleep:
                duration: 20000
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.amendOrder.editButton
            - click:
                identifier: ca.test.mappings.amendOrder.editButton
      - sleep:
          duration: 5000
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.removeItem 
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.removeItem 
          else:
            - sleep:
                duration: 10000
            - verifyIdentifier:
                present:
                  - identifier: ca.test.mappings.amendOrder.removeItem 
            - click:
                identifier: ca.test.mappings.amendOrder.removeItem 
      - sleep:
          duration: 5000
      - click:
          identifier: ca.test.mappings.amendOrder.saveButton 


  - name: ca.test.functions.amendOrder.validateSuccessMessage
    platform: ios
    flow: 
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.successMessage    
      - sleep:
          duration: 10000           

  - name: ca.test.functions.purchaseHistory.viewDetails.amendPageQtyDecreaseIos
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.editButton
      - click:
          identifier: ca.test.mappings.amendOrder.editButton
      - loop:
          begin: 0
          end: 4
          mode: increment
          flow:
            - getString:
                identifier: ca.test.mappings.purchaseHistory.viewDetails.amendPageProductLinePrice
                attribute: value
                extractNumbers: true
                storeIn: cost
            - log: ${cost}
            - if:
                condition: ${cost} < 3500
                then: 
                  - break: true
                else:
                  - click:
                      identifier: ca.test.mappings.amendOrder.decreseQtyButton  
      # - click:
      #     identifier: ca.test.mappings.amendOrder.saveButton
#=====================================================================================

  - name: ca.test.functions.amendOrder.addItem
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.addItemButton
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.addItemButton
      - sleep:
          duration: 10000

  - name: ca.test.functions.amendOrder.Amend
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.amendButton
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.amendButton
            - sleep:
                duration: 10000   
            - click:
                identifier: ca.test.mappings.cart.viewDetialslink

  - name: ca.test.functions.amendOrder.DuringAmmendment
    platform: ios
    flow:
      - sleep:
          duration: 10000   
      - click:
          identifier: ca.test.mappings.cart.viewDetialslink
          
   #to decrease quantity

  - name: ca.test.functions.amendOrder.decreaseQty
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.editButton
      - click:
          identifier: ca.test.mappings.amendOrder.editButton
      - sleep:
          duration: 10000
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.decreseQtyButton
      - click:
          identifier: ca.test.mappings.amendOrder.decreseQtyButton
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.saveButton
      - click:
          identifier:  ca.test.mappings.amendOrder.saveButton
      - sleep:
          duration: 10000
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.successMessage
      
#To Increase qty
  - name: ca.test.functions.amendOrder.increaseQty
    platform: ios
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.amendOrder.editButton
          then:
            - click:
                identifier: ca.test.mappings.amendOrder.editButton
      - sleep:
          duration: 10000
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.increaseQtyButton
      - click:
          identifier: ca.test.mappings.amendOrder.increaseQtyButton
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.saveButton
      - click:
          identifier:  ca.test.mappings.amendOrder.saveButton
      - sleep:
          duration: 10000
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.successMessage
  - name: ca.test.functions.amendOrder.decreaseQty_1
    platform: ios
    flow: 
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.EditButton
      - click:
          identifier: ca.test.mappings.amendOrder.EditButton
      - click:
          identifier: ca.test.mappings.amendOrder.decreseQtyButton
      - click:
          identifier: ca.test.mappings.amendOrder.saveButton      
      - sleep:
          duration: 10000 
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendOrder.successMessage

  - name: ca.test.functions.amendOrder.viewdetails
    platform: ios
    flow: 
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.amendorder.addnew.viewDetails
      - click:
          identifier: ca.test.mappings.amendorder.addnew.viewDetails
