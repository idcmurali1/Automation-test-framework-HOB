functions:

  # Account Sign in
  - name: ca.test.functions.global.authentication.signInAccount
    platform: android
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.account.signInButton
          then:
            - scroll:
               direction: up
               untilIdentifier: ca.test.mappings.account.signInButton
      - if:
          identifier:
            timeout: 15000
            present:
              - identifier: ca.test.mappings.account.signInButton
          then:
            - click:
                identifier: ca.test.mappings.account.signInButton
      - if:
          identifier:
            timeout: 10000
            present:
              - identifier: ca.test.mappings.global.backButton
          then:
            - click:
                identifier: ca.test.mappings.global.backButton
      # Validating login page
      - executeFunction:
          name: ca.test.functions.authentication.fromHomePageValidation
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.global.authentication.emailField
      - enterText:
          identifier: ca.test.mappings.global.authentication.emailField
          string: ${email}
      - enterText:
          identifier: ca.test.mappings.global.authentication.passwordField
          string: ${password}
      - goBack: true
      - click:
          identifier: ca.test.mappings.global.authentication.signInButton
      - executeFunction:
         name: ca.test.function.escape-route.closeAddPhoneNumberPopup    
      - verifyIdentifier:
          notPresent:
            - identifier: ca.test.mappings.global.authentication.signInButton
      - sleep:
          duration: 15000
      - log:
          message: "--------------------Sign In Successful--------------------"
          color: GREEN_BOLD              
      - executeFunction:
          name: ca.test.functions.utils.cartMergePop                         

 # Account Sign out
  - name: ca.test.functions.global.authentication.signOut
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.personalInfoGroup
      - scroll:
          direction: down
          untilIdentifier: ca.test.mappings.account.signOutButton    
      - click:
          identifier: ca.test.mappings.account.signOutButton

 # Account Sign out - ios
  - name: ca.test.functions.global.authentication.signOutIos
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.personalInfoGroup
      - scroll:
          direction: down
          untilIdentifier: ca.test.mappings.account.signOutButton    
      - click:
          identifier: ca.test.mappings.account.signOutButton     




  # SignOut Page Validation - ios

  - name: ca.test.functions.global.authentication.signOutValidationIos
    platform: ios
    flow:
      - log: "SignOut page validation Started"
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.signOut.header
            - identifier: ca.test.mappings.signOut.greetingLabel
            - identifier: ca.test.mappings.signOut.purchaseHistory
            - identifier: ca.test.mappings.signOut.wallet
            - identifier: ca.test.mappings.signOut.manageAccount
            - identifier: ca.test.mappings.signOut.personalInfo
            - identifier: ca.test.mappings.signOut.adrresses
            - identifier: ca.test.mappings.signOut.notification
            - identifier: ca.test.mappings.signOut.myItems
      - log: "SignOut page validation successful"                          
  
 #==================================================================================


  # Account Sign in
  - name: ca.functions.global.authentication.signInAccount
    platform: ios
    flow:
      - if:
          identifier:
            present:
             - identifier: ca.mappings.accounts.wallet.title
          then:
            - scroll:
                direction: down
            - click:
                identifier: ca.mappings.account.signOutButton
                wait: 2000
            - click:
                identifier: ca.mappings.account.signInButton
          else:      
            - verifyIdentifier:
                present:
                - identifier: ca.mappings.global.authentication.emailField
      - enterText:
          identifier: ca.mappings.global.authentication.emailField
          string: ${email}
      - if:
          identifier:
            present:
             - identifier: ca.mappings.global.authentication.signIn.continueButton
          then:
            - click:
                identifier: ca.mappings.global.authentication.signIn.continueButton
      - enterText:
          identifier: ca.mappings.global.authentication.passwordField
          string: ${password}
      - if:
          identifier:
            present:
             - identifier: ca.mappings.global.authentication.signIn.keyBoardReturnButton
          then:
            - click:
                identifier: ca.mappings.global.authentication.signIn.keyBoardReturnButton
      - click:
          identifier: ca.mappings.global.authentication.signInButton
      - verifyIdentifier:
          notPresent:
            - identifier: ca.mappings.global.authentication.passwordField
      - if:
          identifier:
            present:
             - identifier: ca.mappings.global.authentication.passwordKeyChainAlertDon'tAllowButton
          then:
            - click:
                identifier: ca.mappings.global.authentication.passwordKeyChainAlertDon'tAllowButton


  # Sign In Error Flow
  - name: ca.functions.global.authentication.signInErrorFlow
    platform: ios
    flow:
      - enterText:
          identifier: ca.mappings.global.authentication.emailAddressField
          string: ${email}
      - enterText:
          identifier: ca.mappings.global.authentication.passwordField
          string: ${password}
      - click:
          identifier: ca.mappings.global.authentication.signInButton
      - verifyPresent:
          identifier: ca.mappings.global.authentication.signInError

  # Create Account
  - name: ca.functions.global.authentication.createAccountFlow
    platform: ios
    flow:
      - click:
          identifier: ca.mappings.tabBar.account
      - sleep:
          duration: 2000
      - click:
          identifier: ca.mappings.account.signInButtonInAccPage
      - executeFunction:
          name: ca.functions.global.authentication.createAccountFromSignInScreen

  # Sign Out        
  - name: ca.functions.global.authentication.signOut
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.mappings.account.signOutButton
      - scroll:
          direction: down          
      - click:
          identifier: ca.mappings.account.signOutButton

  # create account      
  - name: ca.functions.global.authentication.createAccountFromSignInScreen
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.mappings.global.authentication.createAccountButtonSignInPage
      - click:
          identifier: ca.mappings.global.authentication.createAccountButtonSignInPage
      - verifyPresent:
          identifier: ca.mappings.account.createAccount.firstNameTextField
      - enterText:
          identifier: ca.mappings.account.createAccount.firstNameTextField
          string: ${FName}
          pressEnter: true
      - verifyPresent:
          identifier: ca.mappings.account.createAccount.lastNameTextField
      - enterText:
          identifier: ca.mappings.account.createAccount.lastNameTextField
          string: ${LName}
          pressEnter: true
      - sleep:
          duration: 2000
      - verifyPresent:
          identifier: ca.mappings.account.createAccount.emailTextField
      - enterText:
          identifier: ca.mappings.account.createAccount.emailTextField
          string: ${email}
          pressEnter: true
      - verifyPresent:
          identifier: ca.mappings.account.createAccount.passwordTextField
      - enterText:
          identifier: ca.mappings.account.createAccount.passwordTextField
          string: ${password}
          clearField: true
          clickFirst: true
      - click:
          identifier: ca.mappings.global.authentication.createAccountButton
      - verifyIdentifier:
          notPresent:
            - identifier: ca.mappings.global.authentication.createAccountButton
      - if:
          identifier:
            present:
             - identifier: ca.mappings.global.authentication.passwordKeyChainAlertDontAllowButton
          then:
            - click:
                identifier: ca.mappings.global.authentication.passwordKeyChainAlertDontAllowButton

  # Create Account error
  - name: ca.functions.global.authentication.createAccountError
    platform: ios
    flow:
      - click:
          identifier: ca.mappings.tabBar.account
      - click:
          identifier: ca.mappings.global.authentication.signInButton
      - scroll:
          direction: down
      - click:
          identifier: ca.mappings.global.authentication.createAccountButton
      - verifyPresent:
          identifier: ca.mappings.account.createAccount.firstNameTextField
      - enterText:
          identifier: ca.mappings.account.createAccount.firstNameTextField
          string: TestFirst
          pressEnter: true
    #   - goBack: true
      - enterText:
          identifier: ca.mappings.account.createAccount.lastNameTextField
          string: TestLast
          pressEnter: true
    #   - goBack: true
      - enterText:
          identifier: ca.mappings.account.createAccount.emailTextField
          string: ${email}
          pressEnter: true
    #   - goBack: true
      - enterText:
          identifier: ca.mappings.account.createAccount.passwordTextField
          string: ${password}
          pressEnter: true
    #   - goBack: true
      - click:
          identifier: ca.mappings.global.authentication.createAccountButton

 ############IOS#############        
   
 # Account Sign out - ios
  - name: ca.test.functions.global.authentication.signOutIos
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.personalInfoGroup
      - scroll:
          direction: down
          untilIdentifier: ca.test.mappings.account.signOutButton    
      - click:
          identifier: ca.test.mappings.account.signOutButton     



  # Sign in Page validation - ios
  - name: ca.test.functions.signIn.fromAccountPageValidationIos 
    platform: ios
    flow:
      - log: 
          message: "Sign In page validation Started"
          color: GREEN_BOLD
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.signIn.title
            - identifier: ca.mappings.account.createAccount.emailTextField
            - identifier: ca.mappings.account.createAccount.passwordTextField
            - identifier: ca.test.mappings.signIn.forgotPassword
            - identifier: ca.mappings.global.authentication.signIn
            - identifier: ca.test.mappings.signIn.createAnAccount
      - log: 
          message: "Sign In page validation successful"
          color: GREEN_BOLD

  # SignOut Page Validation - ios

  - name: ca.test.functions.global.authentication.signOutValidationIos
    platform: ios
    flow:
      - log: 
          message: "SignOut page validation Started"
          color: GREEN_BOLD
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.signOut.header
            - identifier: ca.test.mappings.signOut.greetingLabel
            - identifier: ca.test.mappings.signOut.purchaseHistory
            - identifier: ca.test.mappings.signOut.wallet
            - identifier: ca.test.mappings.signOut.manageAccount
            - identifier: ca.test.mappings.signOut.personalInfo
            - identifier: ca.test.mappings.signOut.adrresses
            - identifier: ca.test.mappings.signOut.notification
            - identifier: ca.test.mappings.signOut.myItems
      - log: 
          message: "SignOut page validation successful"                          
          color: GREEN_BOLD

  # Validating login page
  - name: ca.test.functions.authentication.fromHomePageValidation
    platform: android
    flow:
      - log: 
          message: "Sign In page validation Started."
          color: GREEN_BOLD
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.signIn.title
            - identifier: ca.mappings.account.createAccount.emailTextField
            - identifier: ca.test.mappings.loginPage.emailPage.continueBtn
      - log: 
          message: "Sign In page validation successful."
          color: GREEN_BOLD

  # Account Sign in-ios
  - name: ca.test.functions.global.authentication.signInAccountIos
    platform: ios
    flow:
      - try:
          flow:
            - executeFunction:
                name: ca.test.functions.loginPage.userLogin
          catch:
            flow:
              - verifyIdentifier:
                  present:
                    - identifier: ca.test.mappings.global.authentication.emailField
              - enterText:
                  identifier: ca.test.mappings.global.authentication.emailField
                  string: ${email}
              - verifyIdentifier:
                  present:
                    - identifier: ca.test.mappings.global.authentication.passwordField
                  timeout: 10000
              - enterText:
                  identifier: ca.test.mappings.global.authentication.passwordField
                  string: ${password}
              - sleep:
                  duration: 5000    
              - goBack: true
              - loop:
                  begin: 0
                  end: 3
                  mode: increment
                  flow:
                    - click:
                        identifier: ca.test.mappings.global.authentication.signIn
                    - sleep:
                        duration: 5000    
                    - if:
                        identifier: 
                          notPresent:
                            - identifier: ca.test.mappings.signIn.title    
                        then:
                          - break: true   
              - if:
                  identifier:
                    present:
                      - identifier: ca.test.mappings.global.authentication.icloudPopUp
                  then:   
                    - click: 
                        identifier: ca.test.mappings.global.authentication.dontAllow     
              - if:
                  identifier:
                    timeout: 15000                  
                    present:
                      - identifier: ca.test.mappings.global.authentication.cartmergePopUp
                  then:   
                    - click: 
                        identifier: ca.test.mappings.global.authentication.okButton
              - if:
                  identifier: 
                    present:
                      - identifier: ca.test.mappings.global.authentication.notNowButton 
                  then:
                    - click:
                        identifier: ca.test.mappings.global.authentication.notNowButton 
  
#--------------------------------------------------------------------------------------------------------------------

  
                   
                  
                      
      
