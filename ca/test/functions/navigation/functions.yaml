functions:

  #Navigate to Account Tab
  - name: ca.test.functions.global.navigation.goToAccountFromTabBar
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.tabBar.account
      - click:
          identifier: ca.test.mappings.tabBar.account
      - sleep:
          duration: 2000
  
  #Navigate to Address
  - name: ca.test.functions.global.navigation.goToAddressesGroupFromAccount
    platform: android
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.account.addressList
      - click:
          identifier: ca.test.mappings.account.addressList  

  #Navigate to cart
  - name: ca.test.functions.global.navigation.goToCart
    platform: android
    flow:
      - try:
          flow:
            - if:
                identifier:
                  present:
                    - identifier: ca.test.mappings.navBar.cartIcon
                then:
                  - click:
                      identifier: ca.test.mappings.navBar.cartIcon
            - sleep:
                duration: 15000
            - verifyIdentifier:
                timeout: 10000
                present:
                  - identifier: ca.test.mappings.cart.productRecyclerView      
            - log:
                message: "--------------------Cart Page Opened Successfully--------------------"
                color: GREEN_BOLD
          catch:
            flow:
              - failTest:
                  message: failed to validate the cart page

  #Navigate to Address from Homepage
  - name: ca.test.functions.global.navigation.goToAddressesGroupFromHomepage
    platform: android
    flow:
      - if:
          identifier:
            present:
              - identifier: ca.test.mappings.location.link
          then:
            - click:
                identifier: ca.test.mappings.location.link
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.location.link

  # Navigation to Shop tab
  - name: ca.test.functions.global.navigation.goToShopTab
    platform: android
    flow:
      - try:
          flow:
            - if:
                identifier:
                  notPresent:
                    - identifier: ca.test.mappings.tabBar.shop
                then:
                  - scroll:
                      direction: up
                      untilIdentifier: ca.test.mappings.tabBar.shop
            - click:
                identifier: ca.test.mappings.tabBar.shop
          catch:
            flow:
              - if:
                  identifier:
                    notPresent:
                      - identifier: ca.test.mappings.tabBar.shop
                  then:
                    - scroll:
                        direction: up
                        untilIdentifier: ca.test.mappings.tabBar.shop
              - click:
                  identifier: ca.test.mappings.tabBar.shop

  ####### iOS ######

   #Navigate to Account Tab -ios
  - name: ca.test.functions.global.navigation.goToAccountFromTabBarIos
    platform: ios
    flow:
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.tabBar.account
      - click:
          identifier: ca.test.mappings.tabBar.account        

  #Navigate to cart-ios
  - name: ca.test.functions.global.navigation.goToCartIos
    platform: ios
    flow:
      - click:
         identifier: ca.test.mappings.navBar.cartIcon        
      - verifyIdentifier:
          timeout: 6000
          present:
            - identifier: ca.test.mappings.cart.cartPage
      - sleep:
          duration : 10000 
  
    #Navigate back to cart-ios
  - name: ca.test.functions.global.navigation.goBackToCart
    platform: ios
    flow:
      - goBack: true
      - sleep:
          duration : 2000            
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.cart.leaveAnyWayPopupHeading
            - identifier: ca.test.mappings.cart.leaveAnyWayBtn
      - click:
          identifier: ca.test.mappings.cart.leaveAnyWayBtn
      - sleep:
          duration : 3000 
  #Navigate to cart-ios
  - name: ca.test.functions.global.navigation.goToCartHomeIos
    platform: ios
    flow:
      - click:
         identifier: ca.test.mappings.homePage.cartNotEmpty
      - sleep:
          duration : 3000            
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.cart.cartPage
      - sleep:
          duration : 10000 
          
  # Open deep link for ios
  - name: ca.test.functions.global.navigation.goToDeepLink
    platform: ios
    flow:
      - openLink: ${deepLinkUrl} 
      - if:
          identifier:
            present: 
              - identifier: ca.test.mappings.openWalmartCa
          then: 
            - click:    
                identifier: ca.test.mappings.openWalmartCa
            - sleep:
                duration : 10000   

  - name: ca.test.functions.global.navigation.goToDeepLink
    platform: android
    flow:
      - openLink: ${deepLinkUrl}
  

  #Navigate to cart-ios
  - name: ca.test.functions.global.navigation.amendorder.goToCartIos
    platform: ios
    flow:
      - click:
         identifier: ca.test.mappings.amendorder.cartIcon
      - sleep:
          duration : 3000            
      - verifyIdentifier:
          present:
            - identifier: ca.test.mappings.cart.cartPage
      - sleep:
          duration : 10000 

  - name: ca.test.functions.srpPage.navigateToMyItems
    flow:
      - if:
          identifier:
            notPresent:
              - identifier: ca.test.mappings.tabBar.MyItems
          then:
            - log:
                message: "--------------------My Items tab not visible scrolling up--------------------"
                color: GREEN_BOLD
            - scroll:
                direction: up
                untilIdentifier: ca.test.mappings.tabBar.MyItems
      - click:
          identifier: ca.test.mappings.tabBar.MyItems
      - verifyIdentifier:
          timeout: 10000
          present:
            - identifier: ca.test.mappings.myItems.reorderTab
            - identifier: ca.test.mappings.myItems.favouritesTab
      - log:
          message: "--------------------My Items Page Opened Sucessfully--------------------"
          color: GREEN_BOLD
      - if:
          condition: ${myItemsTab} == 'Reorder'
          then:
            - click:
                identifier: ca.test.mappings.myItems.reorderTab
            - verifyIdentifier:
                selected:
                  - identifier: ca.test.mappings.myItems.reorderTab
                    value: true
            - log:
                message: "--------------------Reorder page is opened--------------------"
      - if:
          condition: ${myItemsTab} == 'Favorites' || ${myItemsTab} == 'Favoris'
          then:
            - click:
                identifier: ca.test.mappings.myItems.favouritesTab
            - verifyIdentifier:
                enabled:
                  - identifier: ca.test.mappings.myItems.favouritesTab
                    value: true
            - log:
                message: "--------------------Favourites page is opened--------------------"
                color: GREEN_BOLD        

  # Navigation to Shop tab
  - name: ca.test.functions.global.navigation.goToShopTab
    platform: ios
    flow:
      - try:
          flow:
            - if:
                identifier:
                  notPresent:
                    - identifier: ca.test.mappings.tabBar.shop
                then:
                  - scroll:
                      direction: up
                      untilIdentifier: ca.test.mappings.tabBar.shop
            - click:
                identifier: ca.test.mappings.tabBar.shop
          catch:
            flow:
              - if:
                  identifier:
                    notPresent:
                      - identifier: ca.test.mappings.tabBar.shop
                  then:
                    - scroll:
                        direction: up
                        untilIdentifier: ca.test.mappings.tabBar.shop
              - click:
                  identifier: ca.test.mappings.tabBar.shop

                