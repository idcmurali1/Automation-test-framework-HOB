2023-02-03 12:26:17.264 [DEBUG] [thread-id 1] - Executing R2 3.30.0: '/Users/m0k0a2f/glass-automation/./us/test/test-scripts/ios/golden-flows/PetRx-flows/Petrx-Post/iOSPetrxpost-multi-fulfillment-fc+sc-delivery+3p-wfs.yaml' on device: 'iPhone 13'
2023-02-03 12:28:03.993 [DEBUG] [thread-id 1] - Executing scenario: 'Before'
2023-02-03 12:28:03.999 [DEBUG] [thread-id 1] - Execute before steps
2023-02-03 12:28:04.001 [DEBUG] [thread-id 1] - R2_SUBFLOW_PRE_TRANSACTION
2023-02-03 12:28:04.005 [DEBUG] [thread-id 1] - Executing function: 'us.functions.utils.astro.createOrder'
2023-02-03 12:28:04.006 [DEBUG] [thread-id 1] - Create order
2023-02-03 12:28:04.008 [DEBUG] [thread-id 1] - loop: from 0 to 5
2023-02-03 12:28:04.133 [DEBUG] [thread-id 1] - Store in: store the value 'null' in the variable 'errorCode'
2023-02-03 12:28:04.282 [DEBUG] [thread-id 1] - Store in: store the value 'null' in the variable 'orderCreationStatus'
2023-02-03 12:28:04.432 [DEBUG] [thread-id 1] - Call API: 'http://astro.walmart.com/api/v2/teflon/order'
2023-02-03 12:28:18.415 [DEBUG] [thread-id 1] - Response code is: '200'. Response body is: '{"astroStatus":"SUCCESS","astroDescription":"FC_DELIVERY ORDER CREATED","astroDetails":{"orderSummary":{"customerId":"70c68aba-a7ca-49ca-9daf-3eec75e8f609","cartId":"89d02c0b-4b21-4b23-9f66-b08d8f207869","orderInfo":{"orderId":"100000099073974","status":"SEND_TO_OMS","orderVersion":0,"amendReservationCount":0,"amendPaymentCount":0,"mobileNumber":"5103295632"},"buyerInfo":{"customerAccountId":"70c68aba-a7ca-49ca-9daf-3eec75e8f609","email":"walp@gmail.com"}},"orderDetails":{"dbSessionTokenMap":{"CXO_PC_ST":"7d39d36f-92c9-4500-80df-5f38c33e415e|{\"mtoken\":\"0:10#126414399#2=133978817#5=141679909\",\"itoken\":{\"orderId\":\"0:12#23882134#2=25170816#5=26904096\"}}"},"contractType":"PET_RX","id":"7d39d36f-92c9-4500-80df-5f38c33e415e","checkoutFlowType":"Regular","cartId":"89d02c0b-4b21-4b23-9f66-b08d8f207869","items":[{"id":"729b5fc7-1004-4732-b590-6f33a7c87496","offerId":"1D049DFAFE73453197B8D1F5879CEF1A","productId":"1UUDW1J46ULV","productName":"FLUOXETINE","productType":"Prescription Medicines","usItemId":982872089,"seller":{"name":"Walmart.com","type":"INTERNAL","id":"455A2F43226F41319399794332C71B7F"},"thumbnailUrl":"https://i5-qa.walmartimages.com/asr/3a190a53-c5d7-4e0c-9382-09e79ad8edac.b499fe9d0ca6890fec79be06b373fc61.jpeg","variants":[{"name":"Product Net Content Parent","value":"1 Each","rank":0}],"productClassType":"VARIANT","quantity":4,"unitPrice":1.25,"linePrice":5,"pricePerUnit":1.25,"pricePerUnitUoM":"EA","type":"REGULAR","unitOfMeasure":"EA","salesUnit":"Each","brand":"McKesson","charPrimaryCategoryPath":"Home Page/Pharmacy/Prescription Medication","primaryCategoryPath":"0:5431:7711239","isAlcohol":false,"isAgeRestricted":false,"isSubstitutionEligible":false,"isSubstitutionSelected":true,"isSnapEligible":false,"maxItemCountPerOrder":1000,"minItemCountPerOrder":1,"allowEditQuantity":false,"availableQuantity":718109,"weightIncrement":1,"fulfillmentDetails":{"fulfillmentId":"a0d63105-e12a-4de8-82b5-0c23927d5a5c","slaTier":"THREE_TO_FIVE_DAY","fulfillmentType":"DELIVERY","nodeType":"STORE","fulfillmentTypeClassification":["PHARMACY_PETS"],"fulfillmentMode":"UNSCHEDULED","accessMode":"NATIONAL_CARRIER"},"sourcingDetails":{"currentSelection":"SHIPPING","requestedSelection":"SHIPPING"},"isAssociateDiscountEligible":true,"promotions":[],"lineItemNumber":"1","isEventActive":false,"isPetRxItem":true,"petRxItemInfo":{"petId":"d3330bcf-dc6c-4118-ba39-2b6124283988","petName":"Gia","prescriberClinicId":"2392567-4046906","clinicName":"NOVOSAD,MEREDITH","prescriberName":"NOVOSAD, MEREDITH K DVM","isAnchorPetRxItem":true},"tierPrice":true,"customAttributes":[]}],"shipping":{"postalCode":"75006","addressLineOne":"1420 Northridge Dr","city":"Carrollton","state":"TX","countryCode":"USA","latitude":32.982686,"longitude":-96.902592,"isPoBox":false,"isApoFpo":false,"firstName":"S","lastName":"S","phone":"5103295632","preferenceId":"5b2eb9ce-b472-410e-ad6e-a10b49b36759","deliveryOption":"LEAVE_AT_DOOR","deliveryInstructionsDetails":[]},"buyer":{"customerAccountId":"70c68aba-a7ca-49ca-9daf-3eec75e8f609","firstName":"W","lastName":"A","email":"walp@gmail.com","emailType":"registered","phone":"5555555555","isGuest":false,"isAssociate":false,"hasAssociateDiscountInfo":false,"isAssociateDiscountApplied":false,"hasCapOneCard":false},"summary":{"subTotal":5,"taxTotal":0,"taxIsEstimate":false,"grandTotal":11.99,"quantityTotal":4,"shippingCosts":[],"fees":[{"type":"MIN_THRESHOLD_FEE","amount":6.99}],"weightHoldTotal":0,"authHoldTotal":12.99,"additionalAuthHoldTotal":[{"name":"PETRX","amount":{"currencyAmount":1,"currencyUnit":"USD"}}],"minimumThreshold":35,"promotions":[],"amountUnallocated":0,"isGrandTotalChanged":false,"discounts":[]},"allowedPaymentTypes":[{"type":"CREDITCARD"},{"type":"EBTCASH"},{"type":"GIFTCARD"},{"type":"PAYPAL"},{"type":"WMT_REWARDS"},{"type":"SOLUTRAN"},{"type":"DEBITCARD"},{"type":"WMTPC"}],"payments":[{"paymentId":"30365367-aa63-43f0-9aad-4e46f6c425e6","paymentType":"CREDITCARD","cardType":"MASTERCARD","amountPaid":12.99,"lastFour":"1765","expires":"202512","firstName":"W","lastName":"A","fullName":"W A","phone":"5555555555","email":"walp@gmail.com","billToAddressLineOne":"1420 Northridge Dr","billToCity":"Carrollton","billToState":"TX","billToPostalCode":"75006","preferenceId":"a5bef3ae-95ca-4db2-ad51-c14b0742a769","initiateCardinal":{},"paymentHandle":"60441142-99b7-48cc-a2e6-e1ee072f90fc","cvvRequired":false,"cardAccountLinked":false,"entityErrors":[]}],"order":{"orderId":"100000099073974","status":"SEND_TO_OMS","orderVersion":0,"amendReservationCount":0,"amendPaymentCount":0,"mobileNumber":"5103295632"},"fulfillmentGroups":[],"terms":{"alcoholAccepted":false,"bagFeeAccepted":false,"smsOptInAccepted":true},"entityErrors":[],"itemCount":4,"donationDetails":{"charityEIN":"131635294","charityName":"United Way","donation":{"currencyAmount":0.01,"currencyUnit":"USD"},"acceptDonation":false},"tenderPlanId":"287fa975-cdfc-403f-99d9-e7d444346829","allocationSummary":{"defaultAllocation":true,"eligibleForSmartAllocation":true,"allPayments":{"CREDITCARD":1},"selectablePayments":{"CREDITCARD":1},"expiredPayments":{}},"promotions":[],"fulfillmentPlans":[{"isDefault":true,"fulfillmentModules":[{"name":"UNSCHEDULED_DELIVERY","fulfillmentGroups":[{"sellerId":"455A2F43226F41319399794332C71B7F","fulfillmentOptions":[{"fulfillmentType":"DELIVERY","accessType":"DELIVERY_ADDRESS","accessMode":"NATIONAL_CARRIER","isSelected":true,"isUnscheduled":true,"dateStartRange":1675814340000,"dateEndRange":1675814340000,"itemGroups":[{"itemIds":["729b5fc7-1004-4732-b590-6f33a7c87496"],"dateTime":1675814340000,"accessMode":"NATIONAL_CARRIER","itemDetails":[]}],"strategy":"SLA_TIER_BASED_PROMISE"}],"fulfillmentSellerType":"WALMART"}],"checkoutableErrors":[]}]}],"accessPoints":[],"reservations":[],"pickupStore":{"city":"San Jose","stateOrProvinceCode":"CA","countryCode":"USA","postalCode":"95122","storeId":"32144","services":[]},"deliveryStore":{"city":"San Jose","stateOrProvinceCode":"CA","countryCode":"USA","postalCode":"95122","storeId":"32144","services":[]},"allowSubstitutionForOrder":true,"accountPetAndVetStatus":"multiplePetsAndVets","customAttributes":{"OMS_KAFKA_CLUSTER_NAME":"us-southnew"},"isOrderEligibleToEditQty":true},"astro_logs":[{"CART":{"success":"CART SUCCESS"}},{"CHECKOUT":{"success":"CHECKOUT SUCCESS"}}]}}'
2023-02-03 12:28:18.628 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: true
2023-02-03 12:28:18.739 [DEBUG] [thread-id 1] - Order successfully created.
2023-02-03 12:28:18.935 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: true
2023-02-03 12:28:19.091 [DEBUG] [thread-id 1] - 100000099073974
2023-02-03 12:28:19.098 [DEBUG] [thread-id 1] - Execute Node: 'us/test/helpers/orderValidation.js'
2023-02-03 12:28:19.393 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: true
2023-02-03 12:28:19.513 [DEBUG] [thread-id 1] - Created order validated for fulfillment type correctness
2023-02-03 12:28:19.527 [DEBUG] [thread-id 1] - sleep:  100000 milliseconds
2023-02-03 12:29:59.546 [DEBUG] [thread-id 1] - Executing function: 'us.functions.utils.astro.amendPetrxOrder'
2023-02-03 12:29:59.551 [DEBUG] [thread-id 1] - Amend Petrx Order and update qty
2023-02-03 12:29:59.557 [DEBUG] [thread-id 1] - Call API: 'http://astro.walmart.com/api/v3/teflon/order/100000099073974'
2023-02-03 12:30:15.715 [DEBUG] [thread-id 1] - Response code is: '200'. Response body is: '{"orderNo":"100000099073974","status":"SUCCESS","description":"Request submitted successfully for Order 100000099073974, please visit http://astroui.dev.walmart.com/gTeflon/nextGen for updates","note":"Nexgen move currently only supports for STORE_SCHEDULED_DELIVERY,STORE_SCHEDULED_PICKUP,STORE_UNSCHEDULED_PICKUP,FC_DELIVERY,FC_S2S,MP_WFS_DELIVERY,MP_DELIVERY,MP_PICKUP,FC_DELIVERY_WPP,FC_DELIVERY_NS,DIGITAL_DELIVERY,MP_DAAS_DELIVERY,FC_DELIVERY_SFS fulfilmentTypes"}'
2023-02-03 12:30:15.953 [DEBUG] [thread-id 1] - Using us-errors-helpers.yaml
2023-02-03 12:30:16.120 [DEBUG] [thread-id 1] - Start Main
2023-02-03 12:30:16.124 [DEBUG] [thread-id 1] - Executing function: 'us.functions.global.onboarding.navigateOnboardingToHome'
2023-02-03 12:30:16.127 [DEBUG] [thread-id 1] - Executing function: 'us.function.utils.getEnvironmentValue'
2023-02-03 12:30:16.129 [DEBUG] [thread-id 1] - Store in: store the value 'teflon' in the variable 'env'
2023-02-03 12:30:16.566 [DEBUG] [thread-id 1] - Verify identifier: {//XCUIElementTypeStaticText[@name="WelcomeViewController.titleLabel"] | //XCUIElementTypeStaticText[@name="SignUpNudgeWelcomeViewController.titleLabel"]=[true]}
2023-02-03 12:30:26.592 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: false
2023-02-03 12:30:26.891 [DEBUG] [thread-id 1] - Click element: '//XCUIElementTypeStaticText[@name="Continue"] | //XCUIElementTypeStaticText[@name="Next"] | //XCUIElementTypeStaticText[@name="Continue as guest"]'
2023-02-03 12:30:27.945 [DEBUG] [thread-id 1] - Verify identifier: {NotificationPermissionViewController.titleLabel=[true]}
2023-02-03 12:30:28.180 [DEBUG] [thread-id 1] - Click element: '//XCUIElementTypeStaticText[@name="Not now"] | //XCUIElementTypeButton[@name="cta.cancel.notifications"]'
2023-02-03 12:30:28.581 [DEBUG] [thread-id 1] - Verify identifier: {Share your location=[true]}
2023-02-03 12:30:28.643 [DEBUG] [thread-id 1] - Click element: 'Enter zip code'
2023-02-03 12:30:38.973 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: false
2023-02-03 12:30:39.116 [DEBUG] [thread-id 1] - Observed personalizedScreen
2023-02-03 12:31:29.984 [DEBUG] [thread-id 1] - Executing function: 'us.functions.utils.tryAgainWhenThereIsError'
2023-02-03 12:31:30.008 [DEBUG] [thread-id 1] - loop: from 0 to 2
2023-02-03 12:31:30.144 [DEBUG] [thread-id 1] - 0
2023-02-03 12:31:40.390 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: false
2023-02-03 12:31:40.562 [DEBUG] [thread-id 1] - Executing function: 'us.functions.onboarding.handleTechnicalErrorPage'
2023-02-03 12:31:40.563 [DEBUG] [thread-id 1] - sleep:  5000 milliseconds
2023-02-03 12:31:45.603 [DEBUG] [thread-id 1] - loop: from 0 to 4
2023-02-03 12:31:45.801 [DEBUG] [thread-id 1] - 0
2023-02-03 12:31:56.020 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: false
2023-02-03 12:31:56.142 [DEBUG] [thread-id 1] - No Technical Error Page observed
2023-02-03 12:31:56.316 [DEBUG] [thread-id 1] - Executing function: 'us.functions.gic.collapseIfExpanded'
2023-02-03 12:32:06.527 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: false
2023-02-03 12:32:06.663 [DEBUG] [thread-id 1] - gic is collapsed
2023-02-03 12:32:06.705 [DEBUG] [thread-id 1] - Executing function: 'us.functions.home.navigateHomeToSignIn'
2023-02-03 12:32:28.078 [DEBUG] [thread-id 1] - Main failed: Cannot click 'Account'
2023-02-03 12:32:28.278 [DEBUG] [thread-id 1] - Executing scenario: 'After'
2023-02-03 12:32:28.289 [DEBUG] [thread-id 1] - Executing function: 'us.functions.utils.afterSteps'
2023-02-03 12:32:28.297 [WARN] [thread-id 1] - variable testStatus was used, but r2 could not find a value for this variable. returning default of null
2023-02-03 12:32:28.303 [DEBUG] [thread-id 1] - conditionally execute a flow. condition: false
2023-02-03 12:32:28.418 [DEBUG] [thread-id 1] - Test failed
2023-02-03 12:32:28.536 [DEBUG] [thread-id 1] - Executing function: 'us.functions.utils.closeErrorAlertIfExists'
2023-02-03 12:32:47.310 [DEBUG] [thread-id 1] - Created report: /Users/m0k0a2f/glass-automation/report/index.html
